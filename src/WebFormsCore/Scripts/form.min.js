(function(){var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),l=11;function u(e,t){var n=t.attributes,r,i,a,o,s;if(!(t.nodeType===l||e.nodeType===l)){for(var c=n.length-1;c>=0;c--)r=n[c],i=r.name,a=r.namespaceURI,o=r.value,a?(i=r.localName||i,s=e.getAttributeNS(a,i),s!==o&&(r.prefix===`xmlns`&&(i=r.name),e.setAttributeNS(a,i,o))):(s=e.getAttribute(i),s!==o&&e.setAttribute(i,o));for(var u=e.attributes,d=u.length-1;d>=0;d--)r=u[d],i=r.name,a=r.namespaceURI,a?(i=r.localName||i,t.hasAttributeNS(a,i)||e.removeAttributeNS(a,i)):t.hasAttribute(i)||e.removeAttribute(i)}}var d,f=`http://www.w3.org/1999/xhtml`,p=typeof document>`u`?void 0:document,ee=!!p&&`content`in p.createElement(`template`),te=!!p&&p.createRange&&`createContextualFragment`in p.createRange();function m(e){var t=p.createElement(`template`);return t.innerHTML=e,t.content.childNodes[0]}function h(e){return d||(d=p.createRange(),d.selectNode(p.body)),d.createContextualFragment(e).childNodes[0]}function g(e){var t=p.createElement(`body`);return t.innerHTML=e,t.childNodes[0]}function _(e){return e=e.trim(),ee?m(e):te?h(e):g(e)}function v(e,t){var n=e.nodeName,r=t.nodeName,i,a;return n===r?!0:(i=n.charCodeAt(0),a=r.charCodeAt(0),i<=90&&a>=97?n===r.toUpperCase():a<=90&&i>=97?r===n.toUpperCase():!1)}function y(e,t){return!t||t===f?p.createElement(e):p.createElementNS(t,e)}function b(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}function x(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,``):e.removeAttribute(n))}var S={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();r===`OPTGROUP`&&(n=n.parentNode,r=n&&n.nodeName.toUpperCase()),r===`SELECT`&&!n.hasAttribute(`multiple`)&&(e.hasAttribute(`selected`)&&!t.selected&&(e.setAttribute(`selected`,`selected`),e.removeAttribute(`selected`)),n.selectedIndex=-1)}x(e,t,`selected`)},INPUT:function(e,t){x(e,t,`checked`),x(e,t,`disabled`),e.value!==t.value&&(e.value=t.value),t.hasAttribute(`value`)||e.removeAttribute(`value`)},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var i=r.nodeValue;if(i==n||!n&&i==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute(`multiple`)){for(var n=-1,r=0,i=e.firstChild,a,o;i;)if(o=i.nodeName&&i.nodeName.toUpperCase(),o===`OPTGROUP`)a=i,i=a.firstChild;else{if(o===`OPTION`){if(i.hasAttribute(`selected`)){n=r;break}r++}i=i.nextSibling,!i&&a&&(i=a.nextSibling,a=null)}e.selectedIndex=n}}},C=1,w=11,T=3,ne=8;function E(){}function re(e){if(e)return e.getAttribute&&e.getAttribute(`id`)||e.id}function ie(e){return function(t,n,r){if(r||={},typeof n==`string`)if(t.nodeName===`#document`||t.nodeName===`HTML`||t.nodeName===`BODY`){var i=n;n=p.createElement(`html`),n.innerHTML=i}else n=_(n);else n.nodeType===w&&(n=n.firstElementChild);var a=r.getNodeKey||re,o=r.onBeforeNodeAdded||E,s=r.onNodeAdded||E,c=r.onBeforeElUpdated||E,l=r.onElUpdated||E,u=r.onBeforeNodeDiscarded||E,d=r.onNodeDiscarded||E,f=r.onBeforeElChildrenUpdated||E,ee=r.skipFromChildren||E,te=r.addChild||function(e,t){return e.appendChild(t)},m=r.childrenOnly===!0,h=Object.create(null),g=[];function x(e){g.push(e)}function ie(e,t){if(e.nodeType===C)for(var n=e.firstChild;n;){var r=void 0;t&&(r=a(n))?x(r):(d(n),n.firstChild&&ie(n,t)),n=n.nextSibling}}function D(e,t,n){u(e)!==!1&&(t&&t.removeChild(e),d(e),ie(e,n))}function ae(e){if(e.nodeType===C||e.nodeType===w)for(var t=e.firstChild;t;){var n=a(t);n&&(h[n]=t),ae(t),t=t.nextSibling}}ae(t);function O(e){s(e);for(var t=e.firstChild;t;){var n=t.nextSibling,r=a(t);if(r){var i=h[r];i&&v(t,i)?(t.parentNode.replaceChild(i,t),k(i,t)):O(t)}else O(t);t=n}}function oe(e,t,n){for(;t;){var r=t.nextSibling;(n=a(t))?x(n):D(t,e,!0),t=r}}function k(t,n,r){var i=a(n);i&&delete h[i],!(!r&&(c(t,n)===!1||(e(t,n),l(t),f(t,n)===!1)))&&(t.nodeName===`TEXTAREA`?S.TEXTAREA(t,n):se(t,n))}function se(e,t){var n=ee(e),r=t.firstChild,i=e.firstChild,s,c,l,u,d;outer:for(;r;){for(u=r.nextSibling,s=a(r);!n&&i;){if(l=i.nextSibling,r.isSameNode&&r.isSameNode(i)){r=u,i=l;continue outer}c=a(i);var f=i.nodeType,m=void 0;if(f===r.nodeType&&(f===C?(s?s!==c&&((d=h[s])?l===d?m=!1:(e.insertBefore(d,i),c?x(c):D(i,e,!0),i=d):m=!1):c&&(m=!1),m=m!==!1&&v(i,r),m&&k(i,r)):(f===T||f==ne)&&(m=!0,i.nodeValue!==r.nodeValue&&(i.nodeValue=r.nodeValue))),m){r=u,i=l;continue outer}c?x(c):D(i,e,!0),i=l}if(s&&(d=h[s])&&v(d,r))n||te(e,d),k(d,r);else{var g=o(r);g!==!1&&(g&&(r=g),r.actualize&&(r=r.actualize(e.ownerDocument||p)),te(e,r),O(r))}r=u,i=l}oe(e,i,c);var _=S[e.nodeName];_&&_(e,t)}var A=t,j=A.nodeType,M=n.nodeType;if(!m){if(j===C)M===C?v(t,n)||(d(t),A=b(t,y(n.nodeName,n.namespaceURI))):A=n;else if(j===T||j===ne){if(M===j)return A.nodeValue!==n.nodeValue&&(A.nodeValue=n.nodeValue),A;A=n}}if(A===n)d(t);else{if(n.isSameNode&&n.isSameNode(A))return;if(k(A,n,m),g)for(var N=0,P=g.length;N<P;N++){var F=h[g[N]];F&&D(F,F.parentNode,!1)}}return!m&&A!==t&&t.parentNode&&(A.actualize&&(A=A.actualize(t.ownerDocument||p)),t.parentNode.replaceChild(A,t)),A}}var D=c(o(((e,t)=>{
/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */
(function(n,r){typeof e==`object`&&t!==void 0?t.exports=r():typeof define==`function`&&define.amd?define(r):(n=typeof globalThis<`u`?globalThis:n||self,n.DOMPurify=r())})(e,(function(){"use strict";let{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object,{freeze:a,seal:o,create:s}=Object,{apply:c,construct:l}=typeof Reflect<`u`&&Reflect;a||=function(e){return e},o||=function(e){return e},c||=function(e,t,n){return e.apply(t,n)},l||=function(e,t){return new e(...t)};let u=b(Array.prototype.forEach),d=b(Array.prototype.pop),f=b(Array.prototype.push),p=b(String.prototype.toLowerCase),ee=b(String.prototype.toString),te=b(String.prototype.match),m=b(String.prototype.replace),h=b(String.prototype.indexOf),g=b(String.prototype.trim),_=b(Object.prototype.hasOwnProperty),v=b(RegExp.prototype.test),y=x(TypeError);function b(e){return function(t){var n=[...arguments].slice(1);return c(e,t,n)}}function x(e){return function(){return l(e,[...arguments])}}function S(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p;t&&t(e,null);let a=r.length;for(;a--;){let t=r[a];if(typeof t==`string`){let e=i(t);e!==t&&(n(r)||(r[a]=e),t=e)}e[t]=!0}return e}function C(e){for(let t=0;t<e.length;t++)_(e,t)||(e[t]=null);return e}function w(t){let n=s(null);for(let[r,i]of e(t))_(t,r)&&(Array.isArray(i)?n[r]=C(i):i&&typeof i==`object`&&i.constructor===Object?n[r]=w(i):n[r]=i);return n}function T(e,t){for(;e!==null;){let n=i(e,t);if(n){if(n.get)return b(n.get);if(typeof n.value==`function`)return b(n.value)}e=r(e)}function n(){return null}return n}let ne=a(`a.abbr.acronym.address.area.article.aside.audio.b.bdi.bdo.big.blink.blockquote.body.br.button.canvas.caption.center.cite.code.col.colgroup.content.data.datalist.dd.decorator.del.details.dfn.dialog.dir.div.dl.dt.element.em.fieldset.figcaption.figure.font.footer.form.h1.h2.h3.h4.h5.h6.head.header.hgroup.hr.html.i.img.input.ins.kbd.label.legend.li.main.map.mark.marquee.menu.menuitem.meter.nav.nobr.ol.optgroup.option.output.p.picture.pre.progress.q.rp.rt.ruby.s.samp.section.select.shadow.small.source.spacer.span.strike.strong.style.sub.summary.sup.table.tbody.td.template.textarea.tfoot.th.thead.time.tr.track.tt.u.ul.var.video.wbr`.split(`.`)),E=a(`svg.a.altglyph.altglyphdef.altglyphitem.animatecolor.animatemotion.animatetransform.circle.clippath.defs.desc.ellipse.filter.font.g.glyph.glyphref.hkern.image.line.lineargradient.marker.mask.metadata.mpath.path.pattern.polygon.polyline.radialgradient.rect.stop.style.switch.symbol.text.textpath.title.tref.tspan.view.vkern`.split(`.`)),re=a([`feBlend`,`feColorMatrix`,`feComponentTransfer`,`feComposite`,`feConvolveMatrix`,`feDiffuseLighting`,`feDisplacementMap`,`feDistantLight`,`feDropShadow`,`feFlood`,`feFuncA`,`feFuncB`,`feFuncG`,`feFuncR`,`feGaussianBlur`,`feImage`,`feMerge`,`feMergeNode`,`feMorphology`,`feOffset`,`fePointLight`,`feSpecularLighting`,`feSpotLight`,`feTile`,`feTurbulence`]),ie=a([`animate`,`color-profile`,`cursor`,`discard`,`font-face`,`font-face-format`,`font-face-name`,`font-face-src`,`font-face-uri`,`foreignobject`,`hatch`,`hatchpath`,`mesh`,`meshgradient`,`meshpatch`,`meshrow`,`missing-glyph`,`script`,`set`,`solidcolor`,`unknown`,`use`]),D=a(`math.menclose.merror.mfenced.mfrac.mglyph.mi.mlabeledtr.mmultiscripts.mn.mo.mover.mpadded.mphantom.mroot.mrow.ms.mspace.msqrt.mstyle.msub.msup.msubsup.mtable.mtd.mtext.mtr.munder.munderover.mprescripts`.split(`.`)),ae=a([`maction`,`maligngroup`,`malignmark`,`mlongdiv`,`mscarries`,`mscarry`,`msgroup`,`mstack`,`msline`,`msrow`,`semantics`,`annotation`,`annotation-xml`,`mprescripts`,`none`]),O=a([`#text`]),oe=a(`accept.action.align.alt.autocapitalize.autocomplete.autopictureinpicture.autoplay.background.bgcolor.border.capture.cellpadding.cellspacing.checked.cite.class.clear.color.cols.colspan.controls.controlslist.coords.crossorigin.datetime.decoding.default.dir.disabled.disablepictureinpicture.disableremoteplayback.download.draggable.enctype.enterkeyhint.face.for.headers.height.hidden.high.href.hreflang.id.inputmode.integrity.ismap.kind.label.lang.list.loading.loop.low.max.maxlength.media.method.min.minlength.multiple.muted.name.nonce.noshade.novalidate.nowrap.open.optimum.pattern.placeholder.playsinline.popover.popovertarget.popovertargetaction.poster.preload.pubdate.radiogroup.readonly.rel.required.rev.reversed.role.rows.rowspan.spellcheck.scope.selected.shape.size.sizes.span.srclang.start.src.srcset.step.style.summary.tabindex.title.translate.type.usemap.valign.value.width.wrap.xmlns.slot`.split(`.`)),k=a(`accent-height.accumulate.additive.alignment-baseline.ascent.attributename.attributetype.azimuth.basefrequency.baseline-shift.begin.bias.by.class.clip.clippathunits.clip-path.clip-rule.color.color-interpolation.color-interpolation-filters.color-profile.color-rendering.cx.cy.d.dx.dy.diffuseconstant.direction.display.divisor.dur.edgemode.elevation.end.fill.fill-opacity.fill-rule.filter.filterunits.flood-color.flood-opacity.font-family.font-size.font-size-adjust.font-stretch.font-style.font-variant.font-weight.fx.fy.g1.g2.glyph-name.glyphref.gradientunits.gradienttransform.height.href.id.image-rendering.in.in2.k.k1.k2.k3.k4.kerning.keypoints.keysplines.keytimes.lang.lengthadjust.letter-spacing.kernelmatrix.kernelunitlength.lighting-color.local.marker-end.marker-mid.marker-start.markerheight.markerunits.markerwidth.maskcontentunits.maskunits.max.mask.media.method.mode.min.name.numoctaves.offset.operator.opacity.order.orient.orientation.origin.overflow.paint-order.path.pathlength.patterncontentunits.patterntransform.patternunits.points.preservealpha.preserveaspectratio.primitiveunits.r.rx.ry.radius.refx.refy.repeatcount.repeatdur.restart.result.rotate.scale.seed.shape-rendering.specularconstant.specularexponent.spreadmethod.startoffset.stddeviation.stitchtiles.stop-color.stop-opacity.stroke-dasharray.stroke-dashoffset.stroke-linecap.stroke-linejoin.stroke-miterlimit.stroke-opacity.stroke.stroke-width.style.surfacescale.systemlanguage.tabindex.targetx.targety.transform.transform-origin.text-anchor.text-decoration.text-rendering.textlength.type.u1.u2.unicode.values.viewbox.visibility.version.vert-adv-y.vert-origin-x.vert-origin-y.width.word-spacing.wrap.writing-mode.xchannelselector.ychannelselector.x.x1.x2.xmlns.y.y1.y2.z.zoomandpan`.split(`.`)),se=a(`accent.accentunder.align.bevelled.close.columnsalign.columnlines.columnspan.denomalign.depth.dir.display.displaystyle.encoding.fence.frame.height.href.id.largeop.length.linethickness.lspace.lquote.mathbackground.mathcolor.mathsize.mathvariant.maxsize.minsize.movablelimits.notation.numalign.open.rowalign.rowlines.rowspacing.rowspan.rspace.rquote.scriptlevel.scriptminsize.scriptsizemultiplier.selection.separator.separators.stretchy.subscriptshift.supscriptshift.symmetric.voffset.width.xmlns`.split(`.`)),A=a([`xlink:href`,`xml:id`,`xlink:title`,`xml:space`,`xmlns:xlink`]),j=o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),M=o(/<%[\w\W]*|[\w\W]*%>/gm),N=o(/\${[\w\W]*}/gm),P=o(/^data-[\-\w.\u00B7-\uFFFF]/),F=o(/^aria-[\-\w]+$/),ce=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),le=o(/^(?:\w+script|data):/i),ue=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),I=o(/^html$/i),de=o(/^[a-z][.\w]*(-[.\w]+)+$/i);var L=Object.freeze({__proto__:null,MUSTACHE_EXPR:j,ERB_EXPR:M,TMPLIT_EXPR:N,DATA_ATTR:P,ARIA_ATTR:F,IS_ALLOWED_URI:ce,IS_SCRIPT_OR_DATA:le,ATTR_WHITESPACE:ue,DOCTYPE_NAME:I,CUSTOM_ELEMENT:de});let R={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},fe=function(){return typeof window>`u`?null:window},pe=function(e,t){if(typeof e!=`object`||typeof e.createPolicy!=`function`)return null;let n=null,r=`data-tt-policy-suffix`;t&&t.hasAttribute(r)&&(n=t.getAttribute(r));let i=`dompurify`+(n?`#`+n:``);try{return e.createPolicy(i,{createHTML(e){return e},createScriptURL(e){return e}})}catch{return console.warn(`TrustedTypes policy `+i+` could not be created.`),null}};function me(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fe(),n=e=>me(e);if(n.version=`3.1.6`,n.removed=[],!t||!t.document||t.document.nodeType!==R.document)return n.isSupported=!1,n;let{document:r}=t,i=r,o=i.currentScript,{DocumentFragment:c,HTMLTemplateElement:l,Node:b,Element:x,NodeFilter:C,NamedNodeMap:j=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:M,DOMParser:N,trustedTypes:P}=t,F=x.prototype,le=T(F,`cloneNode`),ue=T(F,`remove`),de=T(F,`nextSibling`),he=T(F,`childNodes`),ge=T(F,`parentNode`);if(typeof l==`function`){let e=r.createElement(`template`);e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let z,B=``,{implementation:_e,createNodeIterator:ve,createDocumentFragment:ye,getElementsByTagName:be}=r,{importNode:xe}=i,V={};n.isSupported=typeof e==`function`&&typeof ge==`function`&&_e&&_e.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:Se,ERB_EXPR:Ce,TMPLIT_EXPR:H,DATA_ATTR:we,ARIA_ATTR:Te,IS_SCRIPT_OR_DATA:U,ATTR_WHITESPACE:Ee,CUSTOM_ELEMENT:De}=L,{IS_ALLOWED_URI:Oe}=L,W=null,ke=S({},[...ne,...E,...re,...D,...O]),G=null,Ae=S({},[...oe,...k,...se,...A]),K=Object.seal(s(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),je=null,Me=null,Ne=!0,Pe=!0,Fe=!1,Ie=!0,q=!1,Le=!0,J=!1,Re=!1,ze=!1,Y=!1,Be=!1,Ve=!1,He=!0,Ue=!1,We=!0,Ge=!1,Ke={},qe=null,Je=S({},[`annotation-xml`,`audio`,`colgroup`,`desc`,`foreignobject`,`head`,`iframe`,`math`,`mi`,`mn`,`mo`,`ms`,`mtext`,`noembed`,`noframes`,`noscript`,`plaintext`,`script`,`style`,`svg`,`template`,`thead`,`title`,`video`,`xmp`]),Ye=null,Xe=S({},[`audio`,`video`,`img`,`source`,`image`,`track`]),Ze=null,Qe=S({},[`alt`,`class`,`for`,`id`,`label`,`name`,`pattern`,`placeholder`,`role`,`summary`,`title`,`value`,`style`,`xmlns`]),$e=`http://www.w3.org/1998/Math/MathML`,et=`http://www.w3.org/2000/svg`,X=`http://www.w3.org/1999/xhtml`,tt=X,nt=!1,rt=null,it=S({},[$e,et,X],ee),at=null,ot=[`application/xhtml+xml`,`text/html`],Z=null,st=null,ct=r.createElement(`form`),lt=function(e){return e instanceof RegExp||e instanceof Function},ut=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(st&&st===e)){if((!e||typeof e!=`object`)&&(e={}),e=w(e),at=ot.indexOf(e.PARSER_MEDIA_TYPE)===-1?`text/html`:e.PARSER_MEDIA_TYPE,Z=at===`application/xhtml+xml`?ee:p,W=_(e,`ALLOWED_TAGS`)?S({},e.ALLOWED_TAGS,Z):ke,G=_(e,`ALLOWED_ATTR`)?S({},e.ALLOWED_ATTR,Z):Ae,rt=_(e,`ALLOWED_NAMESPACES`)?S({},e.ALLOWED_NAMESPACES,ee):it,Ze=_(e,`ADD_URI_SAFE_ATTR`)?S(w(Qe),e.ADD_URI_SAFE_ATTR,Z):Qe,Ye=_(e,`ADD_DATA_URI_TAGS`)?S(w(Xe),e.ADD_DATA_URI_TAGS,Z):Xe,qe=_(e,`FORBID_CONTENTS`)?S({},e.FORBID_CONTENTS,Z):Je,je=_(e,`FORBID_TAGS`)?S({},e.FORBID_TAGS,Z):{},Me=_(e,`FORBID_ATTR`)?S({},e.FORBID_ATTR,Z):{},Ke=_(e,`USE_PROFILES`)?e.USE_PROFILES:!1,Ne=e.ALLOW_ARIA_ATTR!==!1,Pe=e.ALLOW_DATA_ATTR!==!1,Fe=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ie=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,q=e.SAFE_FOR_TEMPLATES||!1,Le=e.SAFE_FOR_XML!==!1,J=e.WHOLE_DOCUMENT||!1,Y=e.RETURN_DOM||!1,Be=e.RETURN_DOM_FRAGMENT||!1,Ve=e.RETURN_TRUSTED_TYPE||!1,ze=e.FORCE_BODY||!1,He=e.SANITIZE_DOM!==!1,Ue=e.SANITIZE_NAMED_PROPS||!1,We=e.KEEP_CONTENT!==!1,Ge=e.IN_PLACE||!1,Oe=e.ALLOWED_URI_REGEXP||ce,tt=e.NAMESPACE||X,K=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&lt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&lt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements==`boolean`&&(K.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),q&&(Pe=!1),Be&&(Y=!0),Ke&&(W=S({},O),G=[],Ke.html===!0&&(S(W,ne),S(G,oe)),Ke.svg===!0&&(S(W,E),S(G,k),S(G,A)),Ke.svgFilters===!0&&(S(W,re),S(G,k),S(G,A)),Ke.mathMl===!0&&(S(W,D),S(G,se),S(G,A))),e.ADD_TAGS&&(W===ke&&(W=w(W)),S(W,e.ADD_TAGS,Z)),e.ADD_ATTR&&(G===Ae&&(G=w(G)),S(G,e.ADD_ATTR,Z)),e.ADD_URI_SAFE_ATTR&&S(Ze,e.ADD_URI_SAFE_ATTR,Z),e.FORBID_CONTENTS&&(qe===Je&&(qe=w(qe)),S(qe,e.FORBID_CONTENTS,Z)),We&&(W[`#text`]=!0),J&&S(W,[`html`,`head`,`body`]),W.table&&(S(W,[`tbody`]),delete je.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!=`function`)throw y(`TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.`);if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!=`function`)throw y(`TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.`);z=e.TRUSTED_TYPES_POLICY,B=z.createHTML(``)}else z===void 0&&(z=pe(P,o)),z!==null&&typeof B==`string`&&(B=z.createHTML(``));a&&a(e),st=e}},dt=S({},[`mi`,`mo`,`mn`,`ms`,`mtext`]),ft=S({},[`foreignobject`,`annotation-xml`]),pt=S({},[`title`,`style`,`font`,`a`,`script`]),mt=S({},[...E,...re,...ie]),ht=S({},[...D,...ae]),gt=function(e){let t=ge(e);(!t||!t.tagName)&&(t={namespaceURI:tt,tagName:`template`});let n=p(e.tagName),r=p(t.tagName);return rt[e.namespaceURI]?e.namespaceURI===et?t.namespaceURI===X?n===`svg`:t.namespaceURI===$e?n===`svg`&&(r===`annotation-xml`||dt[r]):!!mt[n]:e.namespaceURI===$e?t.namespaceURI===X?n===`math`:t.namespaceURI===et?n===`math`&&ft[r]:!!ht[n]:e.namespaceURI===X?t.namespaceURI===et&&!ft[r]||t.namespaceURI===$e&&!dt[r]?!1:!ht[n]&&(pt[n]||!mt[n]):!!(at===`application/xhtml+xml`&&rt[e.namespaceURI]):!1},Q=function(e){f(n.removed,{element:e});try{ge(e).removeChild(e)}catch{ue(e)}},_t=function(e,t){try{f(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch{f(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),e===`is`&&!G[e])if(Y||Be)try{Q(t)}catch{}else try{t.setAttribute(e,``)}catch{}},vt=function(e){let t=null,n=null;if(ze)e=`<remove></remove>`+e;else{let t=te(e,/^[\r\n\t ]+/);n=t&&t[0]}at===`application/xhtml+xml`&&tt===X&&(e=`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>`+e+`</body></html>`);let i=z?z.createHTML(e):e;if(tt===X)try{t=new N().parseFromString(i,at)}catch{}if(!t||!t.documentElement){t=_e.createDocument(tt,`template`,null);try{t.documentElement.innerHTML=nt?B:i}catch{}}let a=t.body||t.documentElement;return e&&n&&a.insertBefore(r.createTextNode(n),a.childNodes[0]||null),tt===X?be.call(t,J?`html`:`body`)[0]:J?t.documentElement:a},yt=function(e){return ve.call(e.ownerDocument||e,e,C.SHOW_ELEMENT|C.SHOW_COMMENT|C.SHOW_TEXT|C.SHOW_PROCESSING_INSTRUCTION|C.SHOW_CDATA_SECTION,null)},bt=function(e){return e instanceof M&&(typeof e.nodeName!=`string`||typeof e.textContent!=`string`||typeof e.removeChild!=`function`||!(e.attributes instanceof j)||typeof e.removeAttribute!=`function`||typeof e.setAttribute!=`function`||typeof e.namespaceURI!=`string`||typeof e.insertBefore!=`function`||typeof e.hasChildNodes!=`function`)},xt=function(e){return typeof b==`function`&&e instanceof b},$=function(e,t,r){V[e]&&u(V[e],e=>{e.call(n,t,r,st)})},St=function(e){let t=null;if($(`beforeSanitizeElements`,e,null),bt(e))return Q(e),!0;let r=Z(e.nodeName);if($(`uponSanitizeElement`,e,{tagName:r,allowedTags:W}),e.hasChildNodes()&&!xt(e.firstElementChild)&&v(/<[/\w]/g,e.innerHTML)&&v(/<[/\w]/g,e.textContent)||e.nodeType===R.progressingInstruction||Le&&e.nodeType===R.comment&&v(/<[/\w]/g,e.data))return Q(e),!0;if(!W[r]||je[r]){if(!je[r]&&wt(r)&&(K.tagNameCheck instanceof RegExp&&v(K.tagNameCheck,r)||K.tagNameCheck instanceof Function&&K.tagNameCheck(r)))return!1;if(We&&!qe[r]){let t=ge(e)||e.parentNode,n=he(e)||e.childNodes;if(n&&t){let r=n.length;for(let i=r-1;i>=0;--i){let r=le(n[i],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,de(e))}}}return Q(e),!0}return e instanceof x&&!gt(e)||(r===`noscript`||r===`noembed`||r===`noframes`)&&v(/<\/no(script|embed|frames)/i,e.innerHTML)?(Q(e),!0):(q&&e.nodeType===R.text&&(t=e.textContent,u([Se,Ce,H],e=>{t=m(t,e,` `)}),e.textContent!==t&&(f(n.removed,{element:e.cloneNode()}),e.textContent=t)),$(`afterSanitizeElements`,e,null),!1)},Ct=function(e,t,n){if(He&&(t===`id`||t===`name`)&&(n in r||n in ct))return!1;if(!(Pe&&!Me[t]&&v(we,t))&&!(Ne&&v(Te,t))){if(!G[t]||Me[t]){if(!(wt(e)&&(K.tagNameCheck instanceof RegExp&&v(K.tagNameCheck,e)||K.tagNameCheck instanceof Function&&K.tagNameCheck(e))&&(K.attributeNameCheck instanceof RegExp&&v(K.attributeNameCheck,t)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck(t))||t===`is`&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&v(K.tagNameCheck,n)||K.tagNameCheck instanceof Function&&K.tagNameCheck(n))))return!1}else if(!Ze[t]&&!v(Oe,m(n,Ee,``))&&!((t===`src`||t===`xlink:href`||t===`href`)&&e!==`script`&&h(n,`data:`)===0&&Ye[e])&&!(Fe&&!v(U,m(n,Ee,``)))&&n)return!1}return!0},wt=function(e){return e!==`annotation-xml`&&te(e,De)},Tt=function(e){$(`beforeSanitizeAttributes`,e,null);let{attributes:t}=e;if(!t)return;let r={attrName:``,attrValue:``,keepAttr:!0,allowedAttributes:G},i=t.length;for(;i--;){let{name:a,namespaceURI:o,value:s}=t[i],c=Z(a),l=a===`value`?s:g(s);if(r.attrName=c,r.attrValue=l,r.keepAttr=!0,r.forceKeepAttr=void 0,$(`uponSanitizeAttribute`,e,r),l=r.attrValue,Le&&v(/((--!?|])>)|<\/(style|title)/i,l)){_t(a,e);continue}if(r.forceKeepAttr||(_t(a,e),!r.keepAttr))continue;if(!Ie&&v(/\/>/i,l)){_t(a,e);continue}q&&u([Se,Ce,H],e=>{l=m(l,e,` `)});let f=Z(e.nodeName);if(Ct(f,c,l)){if(Ue&&(c===`id`||c===`name`)&&(_t(a,e),l=`user-content-`+l),z&&typeof P==`object`&&typeof P.getAttributeType==`function`&&!o)switch(P.getAttributeType(f,c)){case`TrustedHTML`:l=z.createHTML(l);break;case`TrustedScriptURL`:l=z.createScriptURL(l);break}try{o?e.setAttributeNS(o,a,l):e.setAttribute(a,l),bt(e)?Q(e):d(n.removed)}catch{}}}$(`afterSanitizeAttributes`,e,null)},Et=function e(t){let n=null,r=yt(t);for($(`beforeSanitizeShadowDOM`,t,null);n=r.nextNode();)$(`uponSanitizeShadowNode`,n,null),!St(n)&&(n.content instanceof c&&e(n.content),Tt(n));$(`afterSanitizeShadowDOM`,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=null,a=null,o=null,s=null;if(nt=!e,nt&&(e=`<!-->`),typeof e!=`string`&&!xt(e))if(typeof e.toString==`function`){if(e=e.toString(),typeof e!=`string`)throw y(`dirty is not a string, aborting`)}else throw y(`toString is not a function`);if(!n.isSupported)return e;if(Re||ut(t),n.removed=[],typeof e==`string`&&(Ge=!1),Ge){if(e.nodeName){let t=Z(e.nodeName);if(!W[t]||je[t])throw y(`root node is forbidden and cannot be sanitized in-place`)}}else if(e instanceof b)r=vt(`<!---->`),a=r.ownerDocument.importNode(e,!0),a.nodeType===R.element&&a.nodeName===`BODY`||a.nodeName===`HTML`?r=a:r.appendChild(a);else{if(!Y&&!q&&!J&&e.indexOf(`<`)===-1)return z&&Ve?z.createHTML(e):e;if(r=vt(e),!r)return Y?null:Ve?B:``}r&&ze&&Q(r.firstChild);let l=yt(Ge?e:r);for(;o=l.nextNode();)St(o)||(o.content instanceof c&&Et(o.content),Tt(o));if(Ge)return e;if(Y){if(Be)for(s=ye.call(r.ownerDocument);r.firstChild;)s.appendChild(r.firstChild);else s=r;return(G.shadowroot||G.shadowrootmode)&&(s=xe.call(i,s,!0)),s}let d=J?r.outerHTML:r.innerHTML;return J&&W[`!doctype`]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&v(I,r.ownerDocument.doctype.name)&&(d=`<!DOCTYPE `+r.ownerDocument.doctype.name+`>
`+d),q&&u([Se,Ce,H],e=>{d=m(d,e,` `)}),z&&Ve?z.createHTML(d):d},n.setConfig=function(){ut(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),Re=!0},n.clearConfig=function(){st=null,Re=!1},n.isValidAttribute=function(e,t,n){return st||ut({}),Ct(Z(e),Z(t),n)},n.addHook=function(e,t){typeof t==`function`&&(V[e]=V[e]||[],f(V[e],t))},n.removeHook=function(e){if(V[e])return d(V[e])},n.removeHooks=function(e){V[e]&&(V[e]=[])},n.removeAllHooks=function(){V={}},n}return me()}))}))(),1);let ae=Error(`request for lock canceled`);var O=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},oe=class{constructor(e,t=ae){this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}acquire(e=1){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);return new Promise((t,n)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:t,reject:n}),this._dispatch()})}runExclusive(e,t=1){return O(this,void 0,void 0,function*(){let[n,r]=yield this.acquire(t);try{return yield e(n)}finally{r()}})}waitForUnlock(e=1){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);return new Promise(t=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(t),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(e=1){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach(e=>e.forEach(e=>e.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){for(let e=this._value;e>0;e--){let t=this._weightedQueues[e-1]?.shift();if(!t)continue;let n=this._value,r=e;this._value-=e,e=this._value+1,t.resolve([n,this._newReleaser(r)])}this._drainUnlockWaiters()}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)this._weightedWaiters[e-1]&&(this._weightedWaiters[e-1].forEach(e=>e()),this._weightedWaiters[e-1]=[])}},k=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},se=class{constructor(e){this._semaphore=new oe(1,e)}acquire(){return k(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};let A={},j={},M=(e,t)=>{let n=[];return t.updateScripts&&n.push(`script`),t.updateStyles&&n.push(`style`),D.default.sanitize(e,{RETURN_TRUSTED_TYPE:!0,WHOLE_DOCUMENT:!0,ADD_TAGS:n})},N=ie((e,t)=>{e.dispatchEvent(new CustomEvent(`wfc:beforeUpdateAttributes`,{cancelable:!0,bubbles:!0,detail:{node:e,source:t}}))&&(u(e,t),e.dispatchEvent(new CustomEvent(`wfc:updateAttributes`,{bubbles:!0,detail:{node:e,source:t}})))}),P=new se,F=new WeakMap;function ce(e){let t=F.get(e);return t||(t=new se,F.set(e,t)),t}function le(e){return e?.getAttribute(`data-wfc-form`)===`self`}function ue(e){let t=[],n=e.parentElement?.closest(`[data-wfc-form="self"]`);for(;n;)t.unshift(n),n=n.parentElement?.closest(`[data-wfc-form="self"]`);return t}let I=0;var de=class{constructor(e,t){this.element=e,this.formData=t}querySelector(e){if(this.element){let t=this.element.querySelector(e);if(t)return t}return document.body.closest(`:not([data-wfc-form]) `+e)}querySelectorAll(e){let t=document.body.querySelectorAll(`:not([data-wfc-form]) `+e);return this.element?[...this.element.querySelectorAll(e),...t]:Array.from(t)}addInputs(e){let t=this.querySelectorAll(e);for(let e=0;e<t.length;e++){let n=t[e];fe(n,this.formData)}}};async function L(e,t,n,r){if(t||=e.getAttribute(`data-wfc-postback`)??``,!((r?.validate??!0)&&!await U.validate(e))){e.dispatchEvent(new CustomEvent(`wfc:postbackTriggered`));try{let r=B(e);if(r)await R(r,t,n);else{let r=ge(e);r?await be(e,r,t,n):await be(e,z(e),t,n)}}finally{e.dispatchEvent(new CustomEvent(`wfc:afterPostbackTriggered`))}}}function R(e,t,n){let r=e.webSocket;if(!r)throw Error(`No WebSocket connection`);let i={t,a:n};return r.send(JSON.stringify(i)),Promise.resolve()}function fe(e,t){e.type===`checkbox`||e.type===`radio`?e.checked&&t.append(e.name,e.value):t.append(e.name,e.value)}function pe(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,``):e.removeAttribute(n))}function me(e){let t=document.body.querySelectorAll(`input[type="file"]`);for(let e=0;e<t.length;e++)if(t[e].files.length>0)return!0;return!1}function he(e){return e.closest(`[data-wfc-form]`)}function ge(e){return e.closest(`[data-wfc-form="self"]`)}function z(e){let t=e.closest(`[data-wfc-form]`);if(!t)return null;for(;t&&t.tagName!==`FORM`;){let e=t.parentElement?.closest(`[data-wfc-form]`);if(!e)break;t=e}return t}function B(e){return e.closest(`[data-wfc-stream]`)}function _e(e,t,n,r,i=!1){let a=[];for(let e of t.querySelectorAll(`input, select, textarea`))e.closest(`[data-wfc-ignore]`)||a.push(e);document.dispatchEvent(new CustomEvent(`wfc:addInputs`,{detail:{elements:a}}));for(let o=0;o<a.length;o++){let s=a[o];if(!(s.hasAttribute(`data-wfc-ignore`)||s.type===`button`||s.type===`submit`||s.type===`reset`)&&!s.closest(`[data-wfc-ignore]`)&&!(!n&&he(s))){if(i){let e=s.closest(`[data-wfc-form="self"]`);if(e&&e!==t)continue}B(s)||!r&&s.type===`file`||fe(s,e)}}}function ve(e,t,n,r=!0){let i,a=le(e);return e?e.tagName===`FORM`&&r&&!a?i=new FormData(e):(i=new FormData,_e(i,e,!0,r,a)):i=new FormData,_e(i,document.body,!1,r,!1),t&&i.append(`wfcTarget`,t),n&&i.append(`wfcArgument`,n),i}function ye(e){return{updateScripts:e[0]===`1`,updateStyles:e[1]===`1`}}async function be(e,t,n,r){let i=e.closest(`[data-wfc-base]`),a;a=i||document.body;let o=le(t),s=i?.getAttribute(`data-wfc-base`)??location.toString(),c=ve(t,n,r),l=new de(t,c);o&&c.append(`wfcScoped`,`true`),I++;let u=[];if(o&&t){let e=ue(t);for(let t of e)u.push(await ce(t).acquire());u.push(await ce(t).acquire())}else u.push(await P.acquire());let d=[];try{if(!a.dispatchEvent(new CustomEvent(`wfc:beforeSubmit`,{bubbles:!0,cancelable:!0,detail:{target:a,container:l,eventTarget:n,element:e,addRequestInterceptor(e){d.push(e)}}})))return;let r={method:`POST`,redirect:`error`,credentials:`include`,headers:{"X-IsPostback":`true`}};r.body=me(document.body)?c:new URLSearchParams(c);for(let e of d){let t=e(r);t instanceof Promise&&await t}let o;try{o=await fetch(s,r)}catch(e){throw a.dispatchEvent(new CustomEvent(`wfc:submitError`,{bubbles:!0,detail:{form:t,eventTarget:n,response:void 0,error:e}})),e}if(!o.ok)throw a.dispatchEvent(new CustomEvent(`wfc:submitError`,{bubbles:!0,detail:{form:t,eventTarget:n,response:o,error:void 0}})),Error(o.statusText);let u=o.headers.get(`x-redirect-to`);if(u){window.location.assign(u);return}let f=o.headers.get(`content-disposition`);if(o.status!==204)if(o.ok&&f&&f.indexOf(`attachment`)!==-1)xe(e,o,f);else{let e=await o.text(),n=o.headers.has(`x-wfc-options`)?ye(o.headers.get(`x-wfc-options`)):{updateScripts:!1,updateStyles:!1},r=V(n,t),a=new DOMParser().parseFromString(M(e,n),`text/html`);t&&t.getAttribute(`data-wfc-form`)===`self`?N(t,a.querySelector(`[data-wfc-form]`),r):i?N(i,a.querySelector(`[data-wfc-base]`),r):(N(document.head,a.querySelector(`head`),r),N(document.body,a.querySelector(`body`),r))}}finally{I--;for(let e=u.length-1;e>=0;e--)u[e]();a.dispatchEvent(new CustomEvent(`wfc:afterSubmit`,{bubbles:!0,detail:{target:a,container:l,form:t,eventTarget:n}}));let e=new Set;e.add(``);for(let t of document.querySelectorAll(`[data-wfc-validate]`)){let n=t.getAttribute(`data-wfc-validate`)??``;n&&e.add(n)}for(let t of e)await U.validate(t,!0)}}async function xe(e,t,n){document.dispatchEvent(new CustomEvent(`wfc:beforeFileDownload`,{detail:{element:e,response:t}}));try{let r=t.headers.get(`content-encoding`),i=t.headers.get(r?`x-file-size`:`content-length`);if(i){let n=parseInt(i,10),r=0,a=t.body.getReader(),o=function(n,r){let i=Math.round(n/r*100);document.dispatchEvent(new CustomEvent(`wfc:progressFileDownload`,{detail:{element:e,response:t,loaded:n,total:r,percent:i}}))};t=new Response(new ReadableStream({start(e){t();function t(){a.read().then(({done:i,value:a})=>{if(i){n===0&&o(r,n),e.close();return}r+=a.byteLength,o(r,n),e.enqueue(a),t()}).catch(t=>{console.error(t),e.error(t)})}}}))}let a=n.match(/filename=(?:"([^"]+)"|([^;]+))/),o=await t.blob(),s=URL.createObjectURL(o),c=document.createElement(`a`);c.href=s,c.style.display=`none`,a?c.download=a[1]??a[2]:c.download=`download`,document.body.appendChild(c),c.click(),setTimeout(()=>{document.body.removeChild(c),URL.revokeObjectURL(s)},0)}finally{document.dispatchEvent(new CustomEvent(`wfc:afterFileDownload`,{detail:{element:e,response:t}}))}}function V(e,t){return{getNodeKey(e){if(e)return e.nodeName===`SCRIPT`&&(e.src||e.innerHTML)?e.src||e.innerHTML:e.nodeName===`TEMPLATE`&&e.innerHTML||e.nodeName===`STYLE`&&e.innerHTML?e.innerHTML:e.nodeName===`LINK`&&e.href?e.href:e.getAttribute&&e.getAttribute(`id`)||e.id},onBeforeNodeAdded:function(e){return e.nodeName===`TEMPLATE`&&e.hasAttribute(`data-wfc-callbacks`)?(Ce(e),!1):e},onNodeAdded(e){if(document.dispatchEvent(new CustomEvent(`wfc:addNode`,{detail:{node:e,form:t}})),e.nodeType===Node.ELEMENT_NODE&&document.dispatchEvent(new CustomEvent(`wfc:addElement`,{detail:{element:e,form:t}})),e.nodeName===`SCRIPT`){let t=document.createElement(`script`);for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n];t.setAttribute(r.name,r.value)}t.innerHTML=e.innerHTML,e.replaceWith(t)}},onBeforeElUpdated:function(e,n){if(!e.dispatchEvent(new CustomEvent(`wfc:beforeUpdateNode`,{cancelable:!0,bubbles:!0,detail:{node:e,source:n,form:t}}))||e.nodeType===Node.ELEMENT_NODE&&!e.dispatchEvent(new CustomEvent(`wfc:beforeUpdateElement`,{cancelable:!0,bubbles:!0,detail:{element:e,source:n,form:t}}))||e.hasAttribute(`data-wfc-ignore`)||n.hasAttribute(`data-wfc-ignore`))return!1;if(e.tagName===`INPUT`&&e.type!==`hidden`){let t=n.hasAttribute(`value`);return!t&&e.hasAttribute(`value`)&&n.setAttribute(`value`,e.getAttribute(`value`)??``),u(e,n),t&&e.value!==n.value&&(e.value=n.value),pe(e,n,`checked`),pe(e,n,`disabled`),!1}if(e.tagName===`TEXTAREA`)return u(e,n),e.value!==n.value&&(e.value=n.value),pe(e,n,`disabled`),!1;if(e.nodeName===`SCRIPT`&&n.nodeName===`SCRIPT`){if(e.src===n.src&&e.innerHTML===n.innerHTML)return!1;let t=document.createElement(`script`);for(let e=0;e<n.attributes.length;e++){let r=n.attributes[e];t.setAttribute(r.name,r.value)}return t.innerHTML=n.innerHTML,e.replaceWith(t),!1}},onElUpdated(e){e.nodeType===Node.ELEMENT_NODE&&e.dispatchEvent(new CustomEvent(`wfc:updateElement`,{bubbles:!0,detail:{element:e,form:t}}))},onBeforeNodeDiscarded(n){if(n.tagName===`SCRIPT`&&!e.updateScripts||n.tagName===`STYLE`&&!e.updateStyles||n.tagName===`LINK`&&n.hasAttribute(`rel`)&&n.getAttribute(`rel`)===`stylesheet`&&!e.updateStyles||n instanceof Element&&n.hasAttribute(`data-wfc-form`)||n.tagName===`DIV`&&n.hasAttribute(`data-wfc-owner`)&&(n.getAttribute(`data-wfc-owner`)??``)!==(t?.id??``)||!n.dispatchEvent(new CustomEvent(`wfc:discardNode`,{bubbles:!0,cancelable:!0,detail:{node:n,form:t}}))||n.nodeType===Node.ELEMENT_NODE&&!n.dispatchEvent(new CustomEvent(`wfc:discardElement`,{bubbles:!0,cancelable:!0,detail:{element:n,form:t}})))return!1}}}let Se=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=async function(){this.hasAttribute(`data-wfc-form`)?await be(this,this):Se.call(this)};async function Ce(e){let t=JSON.parse(e.innerHTML);if(!(!t||!Array.isArray(t)))for(let e of t){let{k:t,a:n}=e;if(t in A){let e=A[t];if(typeof e==`function`)try{e(n)}catch(e){console.error(`Error executing callback ${t}`,e)}else console.warn(`Callback ${t} is not a function`,e)}else if(t in j){let r=j[t];r.length<100?r.push(n):console.warn(`Too many pending callbacks for ${t}, discarding callback`,e)}else j[t]=[n]}}document.addEventListener(`DOMContentLoaded`,async function(){let e=await P.acquire();try{let e=document.querySelectorAll(`template[data-wfc-callbacks]`);for(let t of e)Ce(t),t.remove()}finally{e()}}),document.addEventListener(`submit`,async function(e){e.target instanceof Element&&e.target.hasAttribute(`data-wfc-form`)&&(e.preventDefault(),await be(e.target,e.target))}),document.addEventListener(`click`,async function(e){if(!(e.target instanceof Element))return;let t=e.target?.closest(`[data-wfc-postback]`);t&&(e.preventDefault(),t.getAttribute(`data-wfc-disabled`)!==`true`&&await L(e.target))}),document.addEventListener(`keypress`,async function(e){if(e.key!==`Enter`&&e.keyCode!==13&&e.which!==13||!(e.target instanceof Element)||e.target.tagName!==`INPUT`)return;let t=e.target.getAttribute(`type`);if(t===`button`||t===`submit`||t===`reset`)return;let n=e.target.getAttribute(`name`);e.preventDefault(),await L(e.target,n,`ENTER`)});let H={};document.addEventListener(`input`,function(e){if(!(e.target instanceof Element)||e.target.tagName!==`INPUT`||!e.target.hasAttribute(`data-wfc-autopostback`))return;let t=e.target.getAttribute(`type`);t===`button`||t===`submit`||t===`reset`||we(e.target)});function we(e,t=1e3,n=`CHANGE`,r){let i=B(e)??he(e),a=e.getAttribute(`name`),o=(i?.id??``)+a+n;H[o]&&(I--,clearTimeout(H[o])),I++,H[o]=setTimeout(async()=>{I--,delete H[o],await L(e,a,n,r)},t)}function Te(e,t,n){return L(e,e.getAttribute(`name`),t,n)}document.addEventListener(`change`,async function(e){e.target instanceof Element&&e.target.hasAttribute(`data-wfc-autopostback`)&&we(e.target,10)});let U={_callbacks:A,_pendingCallbacks:j,hiddenClass:``,postBackChange:we,postBack:Te,get hasPendingPostbacks(){return I>0},init:function(e){e()},show:function(e){U.hiddenClass?e.classList.remove(U.hiddenClass):e.style.display=``},hide:function(e){U.hiddenClass?e.classList.add(U.hiddenClass):e.style.display=`none`},toggle:function(e,t){t?U.show(e):U.hide(e)},validate:async function(e=``,t=!1){if(typeof e==`object`&&e instanceof Element){if(!e.hasAttribute(`data-wfc-validate`))return!0;e=e.getAttribute(`data-wfc-validate`)??``}let n=[],r=new Map,i={addValidator(e,t){t?(r.has(t)||r.set(t,[]),r.get(t).push(e)):n.push(e)}};for(let t of document.querySelectorAll(`[data-wfc-validate]`))(t.getAttribute(`data-wfc-validate`)??``)===e&&t.dispatchEvent(new CustomEvent(`wfc:validate`,{bubbles:!0,detail:i}));let a=!0;for(let e of n)try{await e(t)||(a=!1)}catch(e){console.error(`Validation error:`,e),a=!1}for(let[e,n]of r.entries()){let r=!0;for(let e of n)try{await e(t)||(r=!1)}catch(e){console.error(`Validation error:`,e),r=!1}r||(a=!1),e.dispatchEvent(new CustomEvent(`wfc:elementValidated`,{bubbles:!0,detail:{isValid:r,element:e}}))}return document.dispatchEvent(new CustomEvent(`wfc:validated`,{bubbles:!0,detail:{isValid:a}})),a},bind:async function(e,t){let n=(t.init??function(){}).bind(t),r=(t.update??function(){}).bind(t),i=(t.afterUpdate??function(){}).bind(t),a=t.submit?.bind(t),o=t.destroy?.bind(t);for(let t of document.querySelectorAll(e))await n(t),r(t,t),i(t);document.addEventListener(`wfc:addElement`,async function(t){let{element:a}=t.detail;a.matches(e)&&(await n(a),r(a,a),i(a))}),document.addEventListener(`wfc:beforeUpdateElement`,function(t){let{element:n,source:i}=t.detail;n.matches(e)&&r(n,i)&&t.preventDefault()}),i&&document.addEventListener(`wfc:updateElement`,function(t){let{element:n}=t.detail;n.matches(e)&&i(n)}),a&&document.addEventListener(`wfc:beforeSubmit`,function(t){let{container:n}=t.detail;for(let t of n.querySelectorAll(e))a(t,n.formData)}),o&&document.addEventListener(`wfc:discardElement`,function(t){let{element:n}=t.detail;n.matches(e)&&o(n)})},registerCallback:async function(e,t){if(A[e]=t,!(e in j))return;let n=j[e];delete j[e];for(let r of n)try{t(r)}catch(t){console.error(`Error executing callback ${e}`,t)}},bindValidator:function(e,t){U.bind(e,{init:function(e){e._isValid=!0,`init`in t&&t.init(e)},afterUpdate:function(e){let n=e.getAttribute(`data-wfc-validated`);n?e._isValid=n===`true`:U.toggle(e,!e._isValid);let r=e.getAttribute(`data-wfc-validator`);if(!r){console.warn(`No data-wfc-validator attribute found`,e);return}let i=document.getElementById(r);if(e._elementToValidate!==i){if(this.destroy(e),e._elementToValidate=i,!i){console.warn(`Element with id ${r} not found`);return}e._callback=async function(n){n.detail.addValidator(async function(n){if(n)return e._isValid;let r=e.hasAttribute(`data-wfc-disabled`)||(t.validate?await t.validate(i,e):this._isValid);return e._isValid=r,U.toggle(e,!r),r},i)},i.addEventListener(`wfc:validate`,e._callback)}},destroy:function(e){e._callback&&e._elementToValidate&&(e._elementToValidate.removeEventListener(`wfc:validate`,e._callback),e._callback=void 0,e._elementToValidate=void 0)}})},getStringValue:async e=>`getStringValue`in e?(await Promise.resolve(e.getStringValue()))?.toString()??``:`value`in e?e.value?.toString()??``:`textContent`in e?e.textContent??``:``,isEmpty:async(e,t=``)=>{if(`isEmpty`in e){let n=e.isEmpty;if(typeof n==`function`){let r=await Promise.resolve(n(t));if(typeof r==`boolean`)return r;console.warn(`isEmpty did not return a boolean`,e)}else if(typeof n==`boolean`)return n;else console.warn(`isEmpty is not a function`,e)}return t===await U.getStringValue(e)}};if(U.bind(`[data-wfc-stream]`,{init:function(e){let t=e.id,n=e.closest(`[data-wfc-base]`),r=n?new URL(n.getAttribute(`data-wfc-base`)):location,i=r.search;i?i+=`&`:i=`?`,i+=`__panel=`+t;let a=new WebSocket((r.protocol===`https:`?`wss://`:`ws://`)+r.host+r.pathname+i);e.webSocket=a,e.isUpdating=!1,a.addEventListener(`message`,function(n){let r=new DOMParser,i=n.data.indexOf(`|`),a=ye(n.data.substring(0,i)),o=n.data.substring(i+1),s=r.parseFromString(M(`<!DOCTYPE html><html><body>${o}</body></html>`,a),`text/html`);e.isUpdating=!0,N(e,s.getElementById(t),V(a)),e.isUpdating=!1}),a.addEventListener(`open`,function(){let t=ve(e);a.send(new URLSearchParams(t).toString())})},update:function(e,t){if(!e.isUpdating)return!0},destroy:function(e){let t=e.webSocket;t&&t.close()}}),U.bind(`[data-wfc-lazy]`,{init:async function(e){let t=e.getAttribute(`data-wfc-lazy`);t&&setTimeout(async()=>{await L(e,t,`LAZY_LOAD`,{validate:!1})},0)},update:function(e,t){let n=e.getAttribute(`data-wfc-lazy`),r=t.getAttribute(`data-wfc-lazy`);if(n===``&&r)return!0}}),`wfc`in window){let e=window.wfc;if(`hiddenClass`in e&&(U.hiddenClass=e.hiddenClass),window.wfc=U,`_`in e)for(let t of e._){let[e,n,r]=t;e===0?U.bind(n,r):e===1?U.bindValidator(n,r):e===2?U.init(r):e===3?U.registerCallback(n,r):console.warn(`Unknown bind type`,e)}}U.bindValidator(`[data-wfc-requiredvalidator]`,{validate:async function(e,t){return!await U.isEmpty(e,t.getAttribute(`data-wfc-requiredvalidator`))}}),U.bindValidator(`[data-wfc-customvalidator]`,{validate:function(){return!0}}),window.wfc=U})();