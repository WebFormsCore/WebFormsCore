(function(){var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),l=o(((e,t)=>{(function(){"use strict";var e=function(e){if(e===null)return`null`;if(e===void 0)return`undefined`;var t=typeof e;return t===`object`&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name===`Array`)?`array`:t===`object`&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name===`String`)?`string`:t},n=function(e){return[`undefined`,`boolean`,`number`,`string`,`function`,`xml`,`null`].indexOf(e)!==-1},r=function(e,t){return Array.prototype.slice.call(e).sort(t)},i=function(e,t){return a(function(n,r){return e.eq(t(n),t(r))})},a=function(e){return{eq:e}},o=a(function(e,t){return e===t}),s=function(e){return a(function(t,n){if(t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e.eq(t[i],n[i]))return!1;return!0})},c=function(e,t){return i(s(e),function(e){return r(e,t)})},l=function(e){return a(function(t,n){var r=Object.keys(t),i=Object.keys(n);if(!c(o).eq(r,i))return!1;for(var a=r.length,s=0;s<a;s++){var l=r[s];if(!e.eq(t[l],n[l]))return!1}return!0})},u=a(function(t,r){if(t===r)return!0;var i=e(t);return i===e(r)?n(i)?t===r:i===`array`?s(u).eq(t,r):i===`object`?l(u).eq(t,r):!1:!1});let d=Object.getPrototypeOf,f=(e,t,n)=>n(e,t.prototype)?!0:e.constructor?.name===t.name,p=e=>{let t=typeof e;return e===null?`null`:t===`object`&&Array.isArray(e)?`array`:t===`object`&&f(e,String,(e,t)=>t.isPrototypeOf(e))?`string`:t},m=e=>t=>p(t)===e,h=e=>t=>typeof t===e,g=e=>t=>e===t,_=(e,t)=>y(e)&&f(e,t,(e,t)=>d(e)===t),v=m(`string`),y=m(`object`),b=e=>_(e,Object),x=m(`array`),ee=g(null),S=h(`boolean`),C=g(void 0),te=e=>e==null,w=e=>!te(e),T=h(`function`),E=h(`number`),ne=(e,t)=>{if(x(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},D=()=>{},re=(e,t)=>(...n)=>e(t.apply(null,n)),O=(e,t)=>n=>e(t(n)),k=e=>()=>e,ie=e=>e,ae=(e,t)=>e===t;function A(e,...t){return(...n)=>{let r=t.concat(n);return e.apply(null,r)}}let j=e=>t=>!e(t),oe=e=>()=>{throw Error(e)},se=e=>e(),ce=e=>{e()},M=k(!1),N=k(!0);class P{constructor(e,t){this.tag=e,this.value=t}static some(e){return new P(!0,e)}static none(){return P.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?P.some(e(this.value)):P.none()}bind(e){return this.tag?e(this.value):P.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:P.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(e??`Called getOrDie on None`)}static from(e){return w(e)?P.some(e):P.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:`none()`}}P.singletonNone=new P(!1);let le=Array.prototype.slice,ue=Array.prototype.indexOf,de=Array.prototype.push,fe=(e,t)=>ue.call(e,t),pe=(e,t)=>{let n=fe(e,t);return n===-1?P.none():P.some(n)},me=(e,t)=>fe(e,t)>-1,he=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];if(t(r,n))return!0}return!1},ge=(e,t)=>{let n=e.length,r=Array(n);for(let i=0;i<n;i++){let n=e[i];r[i]=t(n,i)}return r},F=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];t(r,n)}},_e=(e,t)=>{for(let n=e.length-1;n>=0;n--){let r=e[n];t(r,n)}},ve=(e,t)=>{let n=[],r=[];for(let i=0,a=e.length;i<a;i++){let a=e[i];(t(a,i)?n:r).push(a)}return{pass:n,fail:r}},I=(e,t)=>{let n=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];t(i,r)&&n.push(i)}return n},ye=(e,t,n)=>(_e(e,(e,r)=>{n=t(n,e,r)}),n),be=(e,t,n)=>(F(e,(e,r)=>{n=t(n,e,r)}),n),xe=(e,t,n)=>{for(let r=0,i=e.length;r<i;r++){let i=e[r];if(t(i,r))return P.some(i);if(n(i,r))break}return P.none()},Se=(e,t)=>xe(e,t,M),Ce=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];if(t(r,n))return P.some(n)}return P.none()},we=e=>{let t=[];for(let n=0,r=e.length;n<r;++n){if(!x(e[n]))throw Error(`Arr.flatten item `+n+` was not an array, input: `+e);de.apply(t,e[n])}return t},Te=(e,t)=>we(ge(e,t)),Ee=(e,t)=>{for(let n=0,r=e.length;n<r;++n){let r=e[n];if(t(r,n)!==!0)return!1}return!0},De=e=>{let t=le.call(e,0);return t.reverse(),t},Oe=(e,t)=>I(e,e=>!me(t,e)),ke=(e,t)=>{let n={};for(let r=0,i=e.length;r<i;r++){let i=e[r];n[String(i)]=t(i,r)}return n},Ae=(e,t)=>{let n=le.call(e,0);return n.sort(t),n},je=(e,t)=>t>=0&&t<e.length?P.some(e[t]):P.none(),Me=e=>je(e,0),Ne=e=>je(e,e.length-1),Pe=T(Array.from)?Array.from:e=>le.call(e),Fe=(e,t)=>{for(let n=0;n<e.length;n++){let r=t(e[n],n);if(r.isSome())return r}return P.none()},Ie=(e,t)=>{let n=[],r=T(t)?e=>he(n,n=>t(n,e)):e=>me(n,e);for(let t=0,i=e.length;t<i;t++){let i=e[t];r(i)||n.push(i)}return n},Le=Object.keys,Re=Object.hasOwnProperty,ze=(e,t)=>{let n=Le(e);for(let r=0,i=n.length;r<i;r++){let i=n[r],a=e[i];t(a,i)}},L=(e,t)=>Be(e,(e,n)=>({k:n,v:t(e,n)})),Be=(e,t)=>{let n={};return ze(e,(e,r)=>{let i=t(e,r);n[i.k]=i.v}),n},Ve=e=>(t,n)=>{e[n]=t},He=(e,t,n,r)=>{ze(e,(e,i)=>{(t(e,i)?n:r)(e,i)})},Ue=(e,t)=>{let n={},r={};return He(e,t,Ve(n),Ve(r)),{t:n,f:r}},We=(e,t)=>{let n={};return He(e,t,Ve(n),D),n},Ge=(e,t)=>{let n=[];return ze(e,(e,r)=>{n.push(t(e,r))}),n},Ke=e=>Ge(e,ie),qe=(e,t)=>Je(e,t)?P.from(e[t]):P.none(),Je=(e,t)=>Re.call(e,t),Ye=(e,t)=>Je(e,t)&&e[t]!==void 0&&e[t]!==null,Xe=(e,t,n=u)=>l(n).eq(e,t),Ze=e=>{let t={};return F(e,e=>{t[e]={}}),Le(t)},Qe=e=>e.length!==void 0,$e=Array.isArray,et=e=>{if($e(e))return e;{let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n];return t}},tt=(e,t,n)=>{if(!e)return!1;if(n||=e,Qe(e)){for(let r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)===!1)return!1}else for(let r in e)if(Je(e,r)&&t.call(n,e[r],r,e)===!1)return!1;return!0},nt=(e,t)=>{let n=[];return tt(e,(r,i)=>{n.push(t(r,i,e))}),n},rt=(e,t)=>{let n=[];return tt(e,(r,i)=>{(!t||t(r,i,e))&&n.push(r)}),n},it=(e,t)=>{if(e){for(let n=0,r=e.length;n<r;n++)if(e[n]===t)return n}return-1},at=(e,t,n,r)=>{let i=C(n)?e[0]:n;for(let n=0;n<e.length;n++)i=t.call(r,i,e[n],n);return i},ot=(e,t,n)=>{for(let r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1},st=e=>e[e.length-1],R=e=>{let t=!1,n;return(...r)=>(t||(t=!0,n=e.apply(null,r)),n)},ct=(e,t,n,r)=>{let i=e.isiOS()&&/ipad/i.test(n)===!0,a=e.isiOS()&&!i,o=e.isiOS()||e.isAndroid(),s=o||r(`(pointer:coarse)`),c=i||!a&&o&&r(`(min-device-width:768px)`),l=a||o&&!c,u=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,d=!l&&!c&&!u;return{isiPad:k(i),isiPhone:k(a),isTablet:k(c),isPhone:k(l),isTouch:k(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:k(u),isDesktop:k(d)}},lt=(e,t)=>{for(let n=0;n<e.length;n++){let r=e[n];if(r.test(t))return r}},ut=(e,t)=>{let n=lt(e,t);if(!n)return{major:0,minor:0};let r=e=>Number(t.replace(n,`$`+e));return ft(r(1),r(2))},z=(e,t)=>{let n=String(t).toLowerCase();return e.length===0?dt():ut(e,n)},dt=()=>ft(0,0),ft=(e,t)=>({major:e,minor:t}),pt={nu:ft,detect:z,unknown:dt},mt=(e,t)=>Fe(t.brands,t=>{let n=t.brand.toLowerCase();return Se(e,e=>n===e.brand?.toLowerCase()).map(e=>({current:e.name,version:pt.nu(parseInt(t.version,10),0)}))}),ht=(e,t)=>{let n=String(t).toLowerCase();return Se(e,e=>e.search(n))},gt=(e,t)=>ht(e,t).map(e=>{let n=pt.detect(e.versionRegexes,t);return{current:e.name,version:n}}),_t=(e,t)=>ht(e,t).map(e=>{let n=pt.detect(e.versionRegexes,t);return{current:e.name,version:n}}),vt=(e,t)=>e.substring(t),yt=(e,t,n)=>t===``||e.length>=t.length&&e.substr(n,n+t.length)===t,bt=(e,t)=>St(e,t)?vt(e,t.length):e,xt=(e,t,n=0,r)=>{let i=e.indexOf(t,n);return i===-1?!1:C(r)?!0:i+t.length<=r},St=(e,t)=>yt(e,t,0),Ct=(e,t)=>yt(e,t,e.length-t.length),wt=e=>t=>t.replace(e,``),Tt=wt(/^\s+|\s+$/g),Et=wt(/^\s+/g),Dt=wt(/\s+$/g),Ot=e=>e.length>0,kt=e=>!Ot(e),At=(e,t)=>t<=0?``:Array(t+1).join(e),jt=(e,t=10)=>{let n=parseInt(e,t);return isNaN(n)?P.none():P.some(n)},Mt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Nt=e=>t=>xt(t,e),Pt=[{name:`Edge`,versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>xt(e,`edge/`)&&xt(e,`chrome`)&&xt(e,`safari`)&&xt(e,`applewebkit`)},{name:`Chromium`,brand:`Chromium`,versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Mt],search:e=>xt(e,`chrome`)&&!xt(e,`chromeframe`)},{name:`IE`,versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>xt(e,`msie`)||xt(e,`trident`)},{name:`Opera`,versionRegexes:[Mt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Nt(`opera`)},{name:`Firefox`,versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Nt(`firefox`)},{name:`Safari`,versionRegexes:[Mt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(xt(e,`safari`)||xt(e,`mobile/`))&&xt(e,`applewebkit`)}],Ft=[{name:`Windows`,search:Nt(`win`),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:`iOS`,search:e=>xt(e,`iphone`)||xt(e,`ipad`),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:`Android`,search:Nt(`android`),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:`macOS`,search:Nt(`mac os x`),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:`Linux`,search:Nt(`linux`),versionRegexes:[]},{name:`Solaris`,search:Nt(`sunos`),versionRegexes:[]},{name:`FreeBSD`,search:Nt(`freebsd`),versionRegexes:[]},{name:`ChromeOS`,search:Nt(`cros`),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],It={browsers:k(Pt),oses:k(Ft)},Lt=`Edge`,Rt=`Chromium`,zt=`Opera`,Bt=`Firefox`,Vt=`Safari`,Ht=()=>Ut({current:void 0,version:pt.unknown()}),Ut=e=>{let t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isEdge:r(Lt),isChromium:r(Rt),isIE:r(`IE`),isOpera:r(zt),isFirefox:r(Bt),isSafari:r(Vt)}},Wt={unknown:Ht,nu:Ut,edge:k(Lt),chromium:k(Rt),ie:k(`IE`),opera:k(zt),firefox:k(Bt),safari:k(Vt)},Gt=`Windows`,Kt=`Android`,qt=`Linux`,Jt=`macOS`,Yt=`Solaris`,Xt=`FreeBSD`,Zt=`ChromeOS`,Qt=()=>$t({current:void 0,version:pt.unknown()}),$t=e=>{let t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isWindows:r(Gt),isiOS:r(`iOS`),isAndroid:r(Kt),isMacOS:r(Jt),isLinux:r(qt),isSolaris:r(Yt),isFreeBSD:r(Xt),isChromeOS:r(Zt)}},en={unknown:Qt,nu:$t,windows:k(Gt),ios:k(`iOS`),android:k(Kt),linux:k(qt),macos:k(Jt),solaris:k(Yt),freebsd:k(Xt),chromeos:k(Zt)},tn={detect:(e,t,n)=>{let r=It.browsers(),i=It.oses(),a=t.bind(e=>mt(r,e)).orThunk(()=>gt(r,e)).fold(Wt.unknown,Wt.nu),o=_t(i,e).fold(en.unknown,en.nu);return{browser:a,os:o,deviceType:ct(o,a,e,n)}}},nn=e=>window.matchMedia(e).matches,rn=R(()=>tn.detect(navigator.userAgent,P.from(navigator.userAgentData),nn)),an=()=>rn(),on=navigator.userAgent,sn=an(),cn=sn.browser,ln=sn.os,un=sn.deviceType,dn=on.indexOf(`Windows Phone`)!==-1,fn={transparentSrc:`data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7`,documentMode:cn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!cn.isIE(),windowsPhone:dn,browser:{current:cn.current,version:cn.version,isChromium:cn.isChromium,isEdge:cn.isEdge,isFirefox:cn.isFirefox,isIE:cn.isIE,isOpera:cn.isOpera,isSafari:cn.isSafari},os:{current:ln.current,version:ln.version,isAndroid:ln.isAndroid,isChromeOS:ln.isChromeOS,isFreeBSD:ln.isFreeBSD,isiOS:ln.isiOS,isLinux:ln.isLinux,isMacOS:ln.isMacOS,isSolaris:ln.isSolaris,isWindows:ln.isWindows},deviceType:{isDesktop:un.isDesktop,isiPad:un.isiPad,isiPhone:un.isiPhone,isPhone:un.isPhone,isTablet:un.isTablet,isTouch:un.isTouch,isWebView:un.isWebView}},pn=/^\s*|\s*$/g,mn=e=>te(e)?``:(``+e).replace(pn,``),hn=(e,t)=>t?t===`array`&&$e(e)?!0:typeof e===t:e!==void 0,gn=(e,t,n={})=>{let r=v(e)?e.split(t||`,`):e||[],i=r.length;for(;i--;)n[r[i]]={};return n},_n=Je,vn=(e,...t)=>{for(let n=0;n<t.length;n++){let r=t[n];for(let t in r)if(Je(r,t)){let n=r[t];n!==void 0&&(e[t]=n)}}return e},yn=function(e,t,n,r){r||=this,e&&(n&&(e=e[n]),tt(e,(e,i)=>t.call(r,e,i,n)===!1?!1:(yn(e,t,n,r),!0)))},B={trim:mn,isArray:$e,is:hn,toArray:et,makeMap:gn,each:tt,map:nt,grep:rt,inArray:it,hasOwn:_n,extend:vn,walk:yn,resolve:(e,t=window)=>{let n=e.split(`.`);for(let e=0,r=n.length;e<r&&(t=t[n[e]],t);e++);return t},explode:(e,t)=>x(e)?e:e===``?[]:nt(e.split(t||`,`),mn),_addCacheSuffix:e=>{let t=fn.cacheSuffix;return t&&(e+=(e.indexOf(`?`)===-1?`?`:`&`)+t),e}},bn=(e,t,n=ae)=>e.exists(e=>n(e,t)),xn=(e,t,n=ae)=>Cn(e,t,n).getOr(e.isNone()&&t.isNone()),Sn=e=>{let t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},Cn=(e,t,n)=>e.isSome()&&t.isSome()?P.some(n(e.getOrDie(),t.getOrDie())):P.none(),wn=(e,t,n,r)=>e.isSome()&&t.isSome()&&n.isSome()?P.some(r(e.getOrDie(),t.getOrDie(),n.getOrDie())):P.none(),Tn=(e,t)=>e?P.some(t):P.none(),En=typeof window<`u`?window:Function(`return this;`)(),Dn=(e,t)=>{let n=t??En;for(let t=0;t<e.length&&n!=null;++t)n=n[e[t]];return n},On=(e,t)=>Dn(e.split(`.`),t),kn=(e,t)=>On(e,t),An=(e,t)=>{let n=kn(e,t);if(n==null)throw Error(e+` not available on this browser`);return n},jn=Object.getPrototypeOf,Mn=e=>An(`HTMLElement`,e),Nn=e=>{let t=On(`ownerDocument.defaultView`,e);return y(e)&&(Mn(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(jn(e).constructor.name))},Pn=e=>e.dom.nodeName.toLowerCase(),Fn=e=>e.dom.nodeType,In=e=>t=>Fn(t)===e,Ln=e=>Fn(e)===8||Pn(e)===`#comment`,Rn=e=>zn(e)&&Nn(e.dom),zn=In(1),Bn=In(3),Vn=In(9),Hn=In(11),Un=e=>t=>zn(t)&&Pn(t)===e,Wn=(e,t,n)=>{if(v(n)||S(n)||E(n))e.setAttribute(t,n+``);else throw console.error(`Invalid call to Attribute.set. Key `,t,`:: Value `,n,`:: Element `,e),Error(`Attribute value was not simple`)},Gn=(e,t,n)=>{Wn(e.dom,t,n)},Kn=(e,t)=>{let n=e.dom;ze(t,(e,t)=>{Wn(n,t,e)})},qn=(e,t)=>{let n=e.dom.getAttribute(t);return n===null?void 0:n},Jn=(e,t)=>P.from(qn(e,t)),Yn=(e,t)=>{let n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},Xn=(e,t)=>{e.dom.removeAttribute(t)},Zn=e=>{let t=e.dom.attributes;return t==null||t.length===0},Qn=e=>be(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),$n=(e,t)=>{let n=qn(e,t);return n===void 0||n===``?[]:n.split(` `)},er=(e,t,n)=>(Gn(e,t,$n(e,t).concat([n]).join(` `)),!0),tr=(e,t,n)=>{let r=I($n(e,t),e=>e!==n);return r.length>0?Gn(e,t,r.join(` `)):Xn(e,t),!1},nr=e=>e.dom.classList!==void 0,rr=e=>$n(e,`class`),ir=(e,t)=>er(e,`class`,t),ar=(e,t)=>tr(e,`class`,t),or=(e,t)=>me(rr(e),t)?ar(e,t):ir(e,t),sr=(e,t)=>{nr(e)?e.dom.classList.add(t):ir(e,t)},cr=e=>{(nr(e)?e.dom.classList:rr(e)).length===0&&Xn(e,`class`)},lr=(e,t)=>{nr(e)?e.dom.classList.remove(t):ar(e,t),cr(e)},ur=(e,t)=>{let n=nr(e)?e.dom.classList.toggle(t):or(e,t);return cr(e),n},dr=(e,t)=>nr(e)&&e.dom.classList.contains(t),fr=(e,t)=>{let n=(t||document).createElement(`div`);if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){let t=`HTML does not have a single root node`;throw console.error(t,e),Error(t)}return hr(n.childNodes[0])},pr=(e,t)=>hr((t||document).createElement(e)),mr=(e,t)=>hr((t||document).createTextNode(e)),hr=e=>{if(e==null)throw Error(`Node cannot be null or undefined`);return{dom:e}},V={fromHtml:fr,fromTag:pr,fromText:mr,fromDom:hr,fromPoint:(e,t,n)=>P.from(e.dom.elementFromPoint(t,n)).map(hr)},gr=(e,t)=>{let n=[],r=e=>(n.push(e),t(e)),i=t(e);do i=i.bind(r);while(i.isSome());return n},_r=(e,t)=>{let n=e.dom;if(n.nodeType!==1)return!1;{let e=n;if(e.matches!==void 0)return e.matches(t);if(e.msMatchesSelector!==void 0)return e.msMatchesSelector(t);if(e.webkitMatchesSelector!==void 0)return e.webkitMatchesSelector(t);if(e.mozMatchesSelector!==void 0)return e.mozMatchesSelector(t);throw Error(`Browser lacks native selectors`)}},vr=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,yr=(e,t)=>{let n=t===void 0?document:t.dom;return vr(n)?[]:ge(n.querySelectorAll(e),V.fromDom)},br=(e,t)=>{let n=t===void 0?document:t.dom;return vr(n)?P.none():P.from(n.querySelector(e)).map(V.fromDom)},xr=(e,t)=>e.dom===t.dom,Sr=(e,t)=>{let n=e.dom,r=t.dom;return n===r?!1:n.contains(r)},Cr=e=>V.fromDom(e.dom.ownerDocument),wr=e=>Vn(e)?e:Cr(e),Tr=e=>V.fromDom(wr(e).dom.documentElement),Er=e=>V.fromDom(wr(e).dom.defaultView),Dr=e=>P.from(e.dom.parentNode).map(V.fromDom),Or=e=>P.from(e.dom.parentElement).map(V.fromDom),kr=(e,t)=>{let n=T(t)?t:M,r=e.dom,i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){let e=r.parentNode,t=V.fromDom(e);if(i.push(t),n(t)===!0)break;r=e}return i},Ar=e=>Dr(e).map(Fr).map(t=>I(t,t=>!xr(e,t))).getOr([]),jr=e=>P.from(e.dom.previousSibling).map(V.fromDom),Mr=e=>P.from(e.dom.nextSibling).map(V.fromDom),Nr=e=>De(gr(e,jr)),Pr=e=>gr(e,Mr),Fr=e=>ge(e.dom.childNodes,V.fromDom),Ir=(e,t)=>{let n=e.dom.childNodes;return P.from(n[t]).map(V.fromDom)},Lr=e=>Ir(e,0),Rr=e=>Ir(e,e.dom.childNodes.length-1),zr=e=>e.dom.childNodes.length,Br=e=>e.dom.hasChildNodes(),Vr=e=>{let t=e.dom.head;if(t==null)throw Error(`Head is not available yet`);return V.fromDom(t)},Hr=e=>Hn(e)&&w(e.dom.host),Ur=T(Element.prototype.attachShadow)&&T(Node.prototype.getRootNode),Wr=k(Ur),Gr=Ur?e=>V.fromDom(e.dom.getRootNode()):wr,Kr=e=>Hr(e)?e:Vr(wr(e)),qr=e=>Hr(e)?e:V.fromDom(wr(e).dom.body),Jr=e=>{let t=Gr(e);return Hr(t)?P.some(t):P.none()},Yr=e=>V.fromDom(e.dom.host),Xr=e=>{if(Wr()&&w(e.target)){let t=V.fromDom(e.target);if(zn(t)&&Zr(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return Me(t)}}return P.from(e.target)},Zr=e=>w(e.dom.shadowRoot),Qr=e=>{let t=Bn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;let n=t.ownerDocument;return Jr(V.fromDom(t)).fold(()=>n.body.contains(t),O(Qr,Yr))};var $r=(e,t,n,r,i)=>e(n,r)?P.some(n):T(i)&&i(n)?P.none():t(n,r,i);let ei=(e,t,n)=>{let r=e.dom,i=T(n)?n:M;for(;r.parentNode;){r=r.parentNode;let e=V.fromDom(r);if(t(e))return P.some(e);if(i(e))break}return P.none()},ti=(e,t,n)=>$r((e,t)=>t(e),ei,e,t,n),ni=(e,t)=>{let n=e.dom;return n.parentNode?ri(V.fromDom(n.parentNode),n=>!xr(e,n)&&t(n)):P.none()},ri=(e,t)=>Se(e.dom.childNodes,e=>t(V.fromDom(e))).map(V.fromDom),ii=(e,t)=>{let n=e=>{for(let r=0;r<e.childNodes.length;r++){let i=V.fromDom(e.childNodes[r]);if(t(i))return P.some(i);let a=n(e.childNodes[r]);if(a.isSome())return a}return P.none()};return n(e.dom)},ai=(e,t,n)=>ei(e,e=>_r(e,t),n),oi=(e,t)=>br(t,e),si=(e,t,n)=>$r((e,t)=>_r(e,t),ai,e,t,n),ci=e=>si(e,`[contenteditable]`),li=(e,t=!1)=>Qr(e)?e.dom.isContentEditable:ci(e).fold(k(t),e=>ui(e)===`true`),ui=e=>e.dom.contentEditable,di=e=>e.style!==void 0&&T(e.style.getPropertyValue),fi=(e,t,n)=>{if(!v(n))throw console.error(`Invalid call to CSS.set. Property `,t,`:: Value `,n,`:: Element `,e),Error(`CSS value must be a string: `+n);di(e)&&e.style.setProperty(t,n)},pi=(e,t)=>{di(e)&&e.style.removeProperty(t)},mi=(e,t,n)=>{let r=e.dom;fi(r,t,n)},hi=(e,t)=>{let n=e.dom;ze(t,(e,t)=>{fi(n,t,e)})},gi=(e,t)=>{let n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return r===``&&!Qr(e)?_i(n,t):r},_i=(e,t)=>di(e)?e.style.getPropertyValue(t):``,vi=(e,t)=>{let n=e.dom,r=_i(n,t);return P.from(r).filter(e=>e.length>0)},yi=e=>{let t={},n=e.dom;if(di(n))for(let e=0;e<n.style.length;e++){let r=n.style.item(e);t[r]=n.style[r]}return t},bi=(e,t)=>{let n=e.dom;pi(n,t),bn(Jn(e,`style`).map(Tt),``)&&Xn(e,`style`)},xi=e=>e.dom.offsetWidth,Si=(e,t)=>{Dr(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},Ci=(e,t)=>{Mr(e).fold(()=>{Dr(e).each(e=>{Ti(e,t)})},e=>{Si(e,t)})},wi=(e,t)=>{Lr(e).fold(()=>{Ti(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},Ti=(e,t)=>{e.dom.appendChild(t.dom)},Ei=(e,t)=>{Si(e,t),Ti(t,e)},Di=(e,t)=>{F(t,(n,r)=>{Ci(r===0?e:t[r-1],n)})},Oi=(e,t)=>{F(t,t=>{Ti(e,t)})},ki=e=>{e.dom.textContent=``,F(Fr(e),e=>{Ai(e)})},Ai=e=>{let t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},ji=e=>{let t=Fr(e);t.length>0&&Di(e,t),Ai(e)},Mi=(e,t)=>{let n=(t||document).createElement(`div`);return n.innerHTML=e,Fr(V.fromDom(n))},Ni=e=>ge(e,V.fromDom),Pi=e=>e.dom.innerHTML,Fi=(e,t)=>{let n=Cr(e).dom,r=V.fromDom(n.createDocumentFragment());Oi(r,Mi(t,n)),ki(e),Ti(e,r)},Ii=e=>{let t=V.fromTag(`div`);return Ti(t,V.fromDom(e.dom.cloneNode(!0))),Pi(t)},Li=(e,t,n,r,i,a,o)=>({target:e,x:t,y:n,stop:r,prevent:i,kill:a,raw:o}),Ri=e=>{let t=V.fromDom(Xr(e).getOr(e.target)),n=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=re(r,n);return Li(t,e.clientX,e.clientY,n,r,i,e)},zi=(e,t)=>n=>{e(n)&&t(Ri(n))},Bi=(e,t,n,r,i)=>{let a=zi(n,r);return e.dom.addEventListener(t,a,i),{unbind:A(Hi,e,t,a,i)}},Vi=(e,t,n,r)=>Bi(e,t,n,r,!1),Hi=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},Ui=(e,t)=>({left:e,top:t,translate:(n,r)=>Ui(e+n,t+r)}),Wi=Ui,Gi=e=>{let t=e.getBoundingClientRect();return Wi(t.left,t.top)},Ki=(e,t)=>e===void 0?t===void 0?0:t:e,qi=e=>{let t=e.dom.ownerDocument,n=t.body,r=t.defaultView,i=t.documentElement;if(n===e.dom)return Wi(n.offsetLeft,n.offsetTop);let a=Ki(r?.pageYOffset,i.scrollTop),o=Ki(r?.pageXOffset,i.scrollLeft),s=Ki(i.clientTop,n.clientTop),c=Ki(i.clientLeft,n.clientLeft);return Ji(e).translate(o-c,a-s)},Ji=e=>{let t=e.dom,n=t.ownerDocument.body;return n===t?Wi(n.offsetLeft,n.offsetTop):Qr(e)?Gi(t):Wi(0,0)},Yi=e=>{let t=e===void 0?document:e.dom;return Wi(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},Xi=(e,t,n)=>{let r=(n===void 0?document:n.dom).defaultView;r&&r.scrollTo(e,t)},Zi=(e,t)=>{an().browser.isSafari()&&T(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Qi=e=>{let t=e===void 0?window:e;return an().browser.isFirefox()?P.none():P.from(t.visualViewport)},$i=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),ea=e=>{let t=e===void 0?window:e,n=t.document,r=Yi(V.fromDom(n));return Qi(t).fold(()=>{let e=t.document.documentElement,n=e.clientWidth,i=e.clientHeight;return $i(r.left,r.top,n,i)},e=>$i(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height))},ta=(e,t)=>I(Fr(e),t),na=(e,t)=>{let n=[];return F(Fr(e),e=>{t(e)&&(n=n.concat([e])),n=n.concat(na(e,t))}),n},H=(e,t)=>yr(t,e),ra=(e,t,n)=>ai(e,t,n).isSome();class ia{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,`firstChild`,`nextSibling`,e),this.node}prev(e){return this.node=this.findSibling(this.node,`lastChild`,`previousSibling`,e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,t,n,r){if(e){if(!r&&e[t])return e[t];if(e!==this.rootNode){let t=e[n];if(t)return t;for(let r=e.parentNode;r&&r!==this.rootNode;r=r.parentNode)if(t=r[n],t)return t}}}findPreviousNode(e,t){if(e){let n=e.previousSibling;if(this.rootNode&&n===this.rootNode)return;if(n){if(!t){for(let e=n.lastChild;e;e=e.lastChild)if(!e.lastChild)return e}return n}let r=e.parentNode;if(r&&r!==this.rootNode)return r}}}let aa=e=>t=>!!t&&t.nodeType===e,oa=e=>!!e&&!Object.getPrototypeOf(e),U=aa(1),sa=e=>{let t=e.toLowerCase();return e=>w(e)&&e.nodeName.toLowerCase()===t},ca=e=>{let t=e.map(e=>e.toLowerCase());return e=>e&&e.nodeName?me(t,e.nodeName.toLowerCase()):!1},la=(e,t)=>{let n=t.toLowerCase().split(` `);return t=>{if(U(t)){let r=t.ownerDocument.defaultView;if(r)for(let i=0;i<n.length;i++){let a=r.getComputedStyle(t,null);if((a?a.getPropertyValue(e):null)===n[i])return!0}}return!1}},ua=e=>t=>U(t)&&t.hasAttribute(e),da=(e,t)=>n=>U(n)&&n.getAttribute(e)===t,fa=e=>U(e)&&e.hasAttribute(`data-mce-bogus`),pa=e=>U(e)&&e.getAttribute(`data-mce-bogus`)===`all`,ma=e=>U(e)&&e.tagName===`TABLE`,ha=e=>t=>!!(U(t)&&(t.contentEditable===e||t.getAttribute(`data-mce-contenteditable`)===e)),ga=ca([`textarea`,`input`]),W=aa(3),_a=aa(4),va=aa(7),ya=aa(8),ba=aa(9),xa=aa(11),Sa=sa(`br`),Ca=sa(`img`),wa=ha(`true`),Ta=ha(`false`),Ea=ca([`td`,`th`]),Da=ca([`td`,`th`,`caption`]),Oa=ca([`video`,`audio`,`object`,`embed`]),G=sa(`li`),ka=sa(`details`),Aa=sa(`summary`),ja=e=>e===`﻿`,Ma=e=>e.replace(/\uFEFF/g,``),Na=((e,t)=>{let n=n=>{if(!e(n))throw Error(`Can only get `+t+` value of a `+t+` node`);return r(n).getOr(``)},r=t=>e(t)?P.from(t.dom.nodeValue):P.none();return{get:n,getOption:r,set:(n,r)=>{if(!e(n))throw Error(`Can only set raw `+t+` value of a `+t+` node`);n.dom.nodeValue=r}}})(Bn,`text`),Pa=e=>Na.get(e),Fa=e=>Na.getOption(e),Ia=(e,t)=>Na.set(e,t),La=`article.aside.details.div.dt.figcaption.footer.form.fieldset.header.hgroup.html.main.nav.section.summary.body.p.dl.multicol.dd.figure.address.center.blockquote.h1.h2.h3.h4.h5.h6.listing.xmp.pre.plaintext.menu.dir.ul.ol.li.hr.table.tbody.thead.tfoot.th.tr.td.caption`.split(`.`),Ra=[`td`,`th`],za=[`thead`,`tbody`,`tfoot`],Ba=[`h1`,`h2`,`h3`,`h4`,`h5`,`h6`,`p`,`div`,`address`,`pre`,`form`,`blockquote`,`center`,`dir`,`fieldset`,`header`,`footer`,`article`,`section`,`hgroup`,`aside`,`nav`,`figure`],Va=[`h1`,`h2`,`h3`,`h4`,`h5`,`h6`],Ha=[`li`,`dd`,`dt`],Ua=[`ul`,`ol`,`dl`],Wa=[`pre`,`script`,`textarea`,`style`],Ga=[`pre`].concat(Va),Ka=e=>{let t;return n=>(t||=ke(e,N),Je(t,Pn(n)))},qa=Ka(La),K=e=>Pn(e)===`table`,Ja=e=>zn(e)&&!qa(e),Ya=e=>zn(e)&&Pn(e)===`br`,Xa=Ka(Ba),Za=Ka(Ua),Qa=Ka(Ha),$a=Ka(za),eo=Ka(Ra),to=Ka(Wa),no=Ka(Ga),ro=e=>no(e)||Ja(e),io=e=>{let t=[],n=e.dom;for(;n;)t.push(V.fromDom(n)),n=n.lastChild;return t},ao=e=>{let t=H(e,`br`),n=I(io(e).slice(-1),Ya);t.length===n.length&&F(n,Ai)},oo=()=>{let e=V.fromTag(`br`);return Gn(e,`data-mce-bogus`,`1`),e},so=e=>{ki(e),Ti(e,oo())},co=e=>{Rr(e).each(t=>{jr(t).each(n=>{qa(e)&&Ya(t)&&qa(n)&&Ai(t)})})},lo=ja,uo=Ma,fo=U,po=W,mo=e=>(po(e)&&(e=e.parentNode),fo(e)&&e.hasAttribute(`data-mce-caret`)),ho=e=>po(e)&&lo(e.data),go=e=>mo(e)||ho(e),_o=e=>e.firstChild!==e.lastChild||!Sa(e.firstChild),vo=(e,t)=>{let n=(e.ownerDocument??document).createTextNode(`﻿`),r=e.parentNode;if(t){let t=e.previousSibling;if(po(t)){if(go(t))return t;if(Co(t))return t.splitText(t.data.length-1)}r?.insertBefore(n,e)}else{let t=e.nextSibling;if(po(t)){if(go(t))return t;if(So(t))return t.splitText(1),t}e.nextSibling?r?.insertBefore(n,e.nextSibling):r?.appendChild(n)}return n},yo=e=>{let t=e.container();return W(t)?t.data.charAt(e.offset())===`﻿`||e.isAtStart()&&ho(t.previousSibling):!1},bo=e=>{let t=e.container();return W(t)?t.data.charAt(e.offset()-1)===`﻿`||e.isAtEnd()&&ho(t.nextSibling):!1},xo=(e,t,n)=>{let r=(t.ownerDocument??document).createElement(e);r.setAttribute(`data-mce-caret`,n?`before`:`after`),r.setAttribute(`data-mce-bogus`,`all`),r.appendChild(oo().dom);let i=t.parentNode;return n?i?.insertBefore(r,t):t.nextSibling?i?.insertBefore(r,t.nextSibling):i?.appendChild(r),r},So=e=>po(e)&&e.data[0]===`﻿`,Co=e=>po(e)&&e.data[e.data.length-1]===`﻿`,wo=e=>{var t;let n=e.getElementsByTagName(`br`),r=n[n.length-1];fa(r)&&((t=r.parentNode)==null||t.removeChild(r))},To=e=>e&&e.hasAttribute(`data-mce-caret`)?(wo(e),e.removeAttribute(`data-mce-caret`),e.removeAttribute(`data-mce-bogus`),e.removeAttribute(`style`),e.removeAttribute(`data-mce-style`),e.removeAttribute(`_moz_abspos`),e):null,Eo=e=>mo(e.startContainer),Do=wa,Oo=Ta,ko=Sa,Ao=W,jo=ca([`script`,`style`,`textarea`]),Mo=ca([`img`,`input`,`textarea`,`hr`,`iframe`,`video`,`audio`,`object`,`embed`]),No=ca([`table`]),Po=go,Fo=e=>Po(e)?!1:Ao(e)?!jo(e.parentNode):Mo(e)||ko(e)||No(e)||Lo(e),Io=e=>U(e)&&e.getAttribute(`unselectable`)===`true`,Lo=e=>!Io(e)&&Oo(e),Ro=(e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(Lo(n))return!1;if(Do(n))return!0}return!0},zo=e=>Lo(e)?!be(Pe(e.getElementsByTagName(`*`)),(e,t)=>e||Do(t),!1):!1,Bo=e=>Mo(e)||zo(e),Vo=(e,t)=>Fo(e)&&Ro(e,t),Ho=/^[ \t\r\n]*$/,Uo=e=>Ho.test(e),Wo=e=>{for(let t of e)if(!ja(t))return!1;return!0},Go=e=>` \f	\v`.indexOf(e)!==-1,Ko=e=>e===`
`||e===`\r`,qo=(e,t)=>t<e.length&&t>=0?Ko(e[t]):!1,Jo=(e,t=4,n=!0,r=!0)=>{let i=At(` `,t),a=e.replace(/\t/g,i);return be(a,(e,t)=>Go(t)||t===`\xA0`?e.pcIsSpace||e.str===``&&n||e.str.length===a.length-1&&r||qo(a,e.str.length+1)?{pcIsSpace:!1,str:e.str+`\xA0`}:{pcIsSpace:!0,str:e.str+` `}:{pcIsSpace:Ko(t),str:e.str+t},{pcIsSpace:!1,str:``}).str},Yo=(e,t)=>{let n=V.fromDom(t);return ra(V.fromDom(e),`pre,code`,A(xr,n))},Xo=(e,t)=>W(e)&&Uo(e.data)&&!Yo(e,t),Zo=e=>U(e)&&e.nodeName===`A`&&!e.hasAttribute(`href`)&&(e.hasAttribute(`name`)||e.hasAttribute(`id`)),Qo=(e,t)=>Fo(e)&&!Xo(e,t)||Zo(e)||$o(e),$o=ua(`data-mce-bookmark`),es=ua(`data-mce-bogus`),ts=da(`data-mce-bogus`,`all`),ns=(e,t)=>{let n=0;if(Qo(e,e))return!1;{let r=e.firstChild;if(!r)return!0;let i=new ia(r,e);do{if(t){if(ts(r)){r=i.next(!0);continue}if(es(r)){r=i.next();continue}}if(Sa(r)){n++,r=i.next();continue}if(Qo(r,e))return!1;r=i.next()}while(r);return n<=1}},rs=(e,t=!0)=>ns(e.dom,t),is=`data-mce-block`,as=e=>I(Le(e),e=>!/[A-Z]/.test(e)),os=e=>as(e).join(`,`),ss=(e,t)=>w(t.querySelector(e))?(t.setAttribute(is,`true`),t.getAttribute(`data-mce-selected`)===`inline-boundary`&&t.removeAttribute(`data-mce-selected`),!0):(t.removeAttribute(is),!1),cs=(e,t)=>{let n=os(e.getTransparentElements()),r=os(e.getBlockElements());return I(t.querySelectorAll(n),e=>ss(r,e))},ls=(e,t)=>{var n;let r=t?`lastChild`:`firstChild`;for(let t=e[r];t;t=t[r])if(rs(V.fromDom(t))){(n=t.parentNode)==null||n.removeChild(t);return}},us=(e,t)=>{let n=document.createRange(),r=e.parentNode;if(r){n.setStartBefore(e),n.setEndBefore(t);let i=n.extractContents();ls(i,!0),n.setStartAfter(t),n.setEndAfter(e);let a=n.extractContents();ls(a,!1),rs(V.fromDom(i))||r.insertBefore(i,e),rs(V.fromDom(t))||r.insertBefore(t,e),rs(V.fromDom(a))||r.insertBefore(a,e),r.removeChild(e)}},ds=(e,t,n)=>{let r=e.getBlockElements(),i=V.fromDom(t),a=e=>Pn(e)in r,o=e=>xr(e,i);F(Ni(n),t=>{ei(t,a,o).each(n=>{let r=ta(t,t=>a(t)&&!e.isValidChild(Pn(n),Pn(t)));if(r.length>0){let t=Or(n);F(r,e=>{ei(e,a,o).each(t=>{us(t.dom,e.dom)})}),t.each(t=>cs(e,t.dom))}})})},fs=(e,t,n)=>{F([...n,...ys(e,t)?[t]:[]],t=>F(H(V.fromDom(t),t.nodeName.toLowerCase()),t=>{bs(e,t.dom)&&ji(t)}))},ps=(e,t)=>{let n=cs(e,t);ds(e,t,n),fs(e,t,n)},ms=(e,t)=>{vs(e,t)&&ss(os(e.getBlockElements()),t)},hs=(e,t,n)=>{let r=kr(V.fromDom(n),e=>xr(e,V.fromDom(t)));je(r,r.length-2).filter(zn).fold(()=>ps(e,t),t=>ps(e,t.dom))},gs=e=>e.hasAttribute(is),_s=(e,t)=>Je(e.getTransparentElements(),t),vs=(e,t)=>U(t)&&_s(e,t.nodeName),ys=(e,t)=>vs(e,t)&&gs(t),bs=(e,t)=>vs(e,t)&&!gs(t),xs=(e,t)=>t.type===1&&_s(e,t.name)&&v(t.attr(is)),Ss=an().browser,Cs=e=>Se(e,zn),ws=e=>Ss.isFirefox()&&Pn(e)===`table`?Cs(Fr(e)).filter(e=>Pn(e)===`caption`).bind(e=>Cs(Pr(e)).map(t=>{let n=t.dom.offsetTop,r=e.dom.offsetTop,i=e.dom.offsetHeight;return n<=r?-i:0})).getOr(0):0,Ts=(e,t)=>e.children&&me(e.children,t),Es=(e,t,n)=>{let r=0,i=0,a=e.ownerDocument;if(n||=e,t){if(n===e&&t.getBoundingClientRect&&gi(V.fromDom(e),`position`)===`static`){let n=t.getBoundingClientRect();return r=n.left+(a.documentElement.scrollLeft||e.scrollLeft)-a.documentElement.clientLeft,i=n.top+(a.documentElement.scrollTop||e.scrollTop)-a.documentElement.clientTop,{x:r,y:i}}let o=t;for(;o&&o!==n&&o.nodeType&&!Ts(o,n);){let e=o;r+=e.offsetLeft||0,i+=e.offsetTop||0,o=e.offsetParent}for(o=t.parentNode;o&&o!==n&&o.nodeType&&!Ts(o,n);)r-=o.scrollLeft||0,i-=o.scrollTop||0,o=o.parentNode;i+=ws(V.fromDom(t))}return{x:r,y:i}},Ds=(e,t={})=>{let n=0,r={},i=V.fromDom(e),a=wr(i),o=e=>{t.referrerPolicy=e},s=e=>{t.contentCssCors=e},c=e=>{Ti(Kr(i),e)},l=e=>{oi(Kr(i),`#`+e).each(Ai)},u=e=>qe(r,e).getOrThunk(()=>({id:`mce-u`+ n++,passed:[],failed:[],count:0})),d=e=>new Promise((n,i)=>{let o,s=B._addCacheSuffix(e),l=u(s);r[s]=l,l.count++;let d=(e,t)=>{F(e,ce),l.status=t,l.passed=[],l.failed=[],o&&=(o.onload=null,o.onerror=null,null)},f=()=>d(l.passed,2),p=()=>d(l.failed,3);if(n&&l.passed.push(n),i&&l.failed.push(i),l.status===1)return;if(l.status===2){f();return}if(l.status===3){p();return}l.status=1;let m=V.fromTag(`link`,a.dom);Kn(m,{rel:`stylesheet`,type:`text/css`,id:l.id}),t.contentCssCors&&Gn(m,`crossOrigin`,`anonymous`),t.referrerPolicy&&Gn(m,`referrerpolicy`,t.referrerPolicy),o=m.dom,o.onload=f,o.onerror=p,c(m),Gn(m,`href`,s)}),f=e=>Promise.allSettled(ge(e,e=>d(e).then(k(e)))).then(e=>{let t=ve(e,e=>e.status===`fulfilled`);return t.fail.length>0?Promise.reject(ge(t.fail,e=>e.reason)):ge(t.pass,e=>e.value)}),p=e=>{let t=B._addCacheSuffix(e);qe(r,t).each(e=>{--e.count===0&&(delete r[t],l(e.id))})};return{load:d,loadAll:f,unload:p,unloadAll:e=>{F(e,e=>{p(e)})},_setReferrerPolicy:o,_setContentCssCors:s}},Os=(()=>{let e=new WeakMap;return{forElement:(t,n)=>{let r=Gr(t).dom;return P.from(e.get(r)).getOrThunk(()=>{let t=Ds(r,n);return e.set(r,t),t})}}})(),ks=e=>e.nodeName.toLowerCase()===`span`,As=(e,t)=>w(e)&&(Qo(e,t)||Ja(V.fromDom(e))),js=(e,t)=>{let n=new ia(e,t).prev(!1),r=new ia(e,t).next(!1),i=C(n)||As(n,t),a=C(r)||As(r,t);return i&&a},q=e=>ks(e)&&e.getAttribute(`data-mce-type`)===`bookmark`,Ms=(e,t)=>W(e)&&e.data.length>0&&js(e,t),Ns=e=>U(e)?e.childNodes.length>0:!1,Ps=e=>xa(e)||ba(e),Fs=(e,t,n)=>{var r;let i=n||t;if(U(t)&&q(t))return t;let a=t.childNodes;for(let t=a.length-1;t>=0;t--)Fs(e,a[t],i);if(U(t)){let e=t.childNodes;e.length===1&&q(e[0])&&((r=t.parentNode)==null||r.insertBefore(e[0],t))}return!Ps(t)&&!Qo(t,i)&&!Ns(t)&&!Ms(t,i)&&e.remove(t),t},Is=B.makeMap,Ls=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Rs=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zs=/[<>&\"\']/g,Bs=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Vs={128:`€`,130:`‚`,131:`ƒ`,132:`„`,133:`…`,134:`†`,135:`‡`,136:`ˆ`,137:`‰`,138:`Š`,139:`‹`,140:`Œ`,142:`Ž`,145:`‘`,146:`’`,147:`“`,148:`”`,149:`•`,150:`–`,151:`—`,152:`˜`,153:`™`,154:`š`,155:`›`,156:`œ`,158:`ž`,159:`Ÿ`},Hs={'"':`&quot;`,"'":`&#39;`,"<":`&lt;`,">":`&gt;`,"&":`&amp;`,"`":`&#96;`},Us={"&lt;":`<`,"&gt;":`>`,"&amp;":`&`,"&quot;":`"`,"&apos;":`'`},Ws=e=>{let t=V.fromTag(`div`).dom;return t.innerHTML=e,t.textContent||t.innerText||e},Gs=(e,t)=>{let n={};if(e){let r=e.split(`,`);t||=10;for(let e=0;e<r.length;e+=2){let i=String.fromCharCode(parseInt(r[e],t));if(!Hs[i]){let t=`&`+r[e+1]+`;`;n[i]=t,n[t]=i}}return n}else return},Ks=Gs(`50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro`,32),qs=(e,t)=>e.replace(t?Ls:Rs,e=>Hs[e]||e),Js=e=>(``+e).replace(zs,e=>Hs[e]||e),Ys=(e,t)=>e.replace(t?Ls:Rs,e=>e.length>1?`&#`+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+`;`:Hs[e]||`&#`+e.charCodeAt(0)+`;`),Xs=(e,t,n)=>{let r=n||Ks;return e.replace(t?Ls:Rs,e=>Hs[e]||r[e]||e)},Zs={encodeRaw:qs,encodeAllRaw:Js,encodeNumeric:Ys,encodeNamed:Xs,getEncodeFunc:(e,t)=>{let n=Gs(t)||Ks,r=(e,t)=>e.replace(t?Ls:Rs,e=>Hs[e]===void 0?n[e]===void 0?e.length>1?`&#`+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+`;`:`&#`+e.charCodeAt(0)+`;`:n[e]:Hs[e]),i=(e,t)=>Xs(e,t,n),a=Is(e.replace(/\+/g,`,`));return a.named&&a.numeric?r:a.named?t?i:Xs:a.numeric?Ys:qs},decode:e=>e.replace(Bs,(e,t)=>t?(t=t.charAt(0).toLowerCase()===`x`?parseInt(t.substr(1),16):parseInt(t,10),t>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(t&1023))):Vs[t]||String.fromCharCode(t)):Us[e]||Ks[e]||Ws(e))},Qs=(e,t)=>(e=B.trim(e),e?e.split(t||` `):[]),$s=e=>RegExp(`^`+e.replace(/([?+*])/g,`.$1`)+`$`),ec=e=>{let t=/^(~)?(.+)$/;return Te(Qs(e,`,`),e=>{let n=t.exec(e);if(n){let e=n[1]===`~`;return[{inline:e,cloneName:e?`span`:`div`,name:n[2]}]}else return[]})},tc=e=>{let t,n,r,i;return t=`id accesskey class dir lang style tabindex title role`,n=`address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul`,r=`a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment`,e!==`html4`&&(t+=` contenteditable contextmenu draggable dropzone hidden spellcheck translate`,n+=` article aside details dialog figure main header footer hgroup section nav a ins del canvas map`,r+=` audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen`),e!==`html5-strict`&&(t+=` xml:lang`,r=[r,`acronym applet basefont big font strike tt`].join(` `),n=[n,`center dir isindex noframes`].join(` `),i=[n,r].join(` `)),i||=[n,r].join(` `),{globalAttributes:t,blockContent:n,phrasingContent:r,flowContent:i}},nc=e=>{let{globalAttributes:t,phrasingContent:n,flowContent:r}=tc(e),i={},a=(e,n=``,r=``)=>{let a=Qs(r),o=Qs(e),s=o.length;for(;s--;){let e=Qs([t,n].join(` `));i[o[s]]={attributes:ke(e,k({})),attributesOrder:e,children:ke(a,k({}))}}},o=(e,t)=>{let n=Qs(e),r=Qs(t),a=n.length;for(;a--;){let e=i[n[a]];for(let t=0,n=r.length;t<n;t++)e.attributes[r[t]]={},e.attributesOrder.push(r[t])}};return e!==`html5-strict`&&(F(Qs(`acronym applet basefont big font strike tt`),e=>{a(e,``,n)}),F(Qs(`center dir isindex noframes`),e=>{a(e,``,r)})),a(`html`,`manifest`,`head body`),a(`head`,``,`base command link meta noscript script style title`),a(`title hr noscript br`),a(`base`,`href target`),a(`link`,`href rel media hreflang type sizes hreflang`),a(`meta`,`name http-equiv content charset`),a(`style`,`media type scoped`),a(`script`,`src async defer type charset`),a(`body`,`onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload`,r),a(`dd div`,``,r),a(`address dt caption`,``,e===`html4`?n:r),a(`h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn`,``,n),a(`blockquote`,`cite`,r),a(`ol`,`reversed start type`,`li`),a(`ul`,``,`li`),a(`li`,`value`,r),a(`dl`,``,`dt dd`),a(`a`,`href target rel media hreflang type`,e===`html4`?n:r),a(`q`,`cite`,n),a(`ins del`,`cite datetime`,r),a(`img`,`src sizes srcset alt usemap ismap width height`),a(`iframe`,`src name width height`,r),a(`embed`,`src type width height`),a(`object`,`data type typemustmatch name usemap form width height`,[r,`param`].join(` `)),a(`param`,`name value`),a(`map`,`name`,[r,`area`].join(` `)),a(`area`,`alt coords shape href target rel media hreflang type`),a(`table`,`border`,`caption colgroup thead tfoot tbody tr`+(e===`html4`?` col`:``)),a(`colgroup`,`span`,`col`),a(`col`,`span`),a(`tbody thead tfoot`,``,`tr`),a(`tr`,``,`td th`),a(`td`,`colspan rowspan headers`,r),a(`th`,`colspan rowspan headers scope abbr`,r),a(`form`,`accept-charset action autocomplete enctype method name novalidate target`,r),a(`fieldset`,`disabled form name`,[r,`legend`].join(` `)),a(`label`,`form for`,n),a(`input`,`accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width`),a(`button`,`disabled form formaction formenctype formmethod formnovalidate formtarget name type value`,e===`html4`?r:n),a(`select`,`disabled form multiple name required size`,`option optgroup`),a(`optgroup`,`disabled label`,`option`),a(`option`,`disabled label selected value`),a(`textarea`,`cols dirname disabled form maxlength name readonly required rows wrap`),a(`menu`,`type label`,[r,`li`].join(` `)),a(`noscript`,``,r),e!==`html4`&&(a(`wbr`),a(`ruby`,``,[n,`rt rp`].join(` `)),a(`figcaption`,``,r),a(`mark rt rp summary bdi`,``,n),a(`canvas`,`width height`,r),a(`video`,`src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered`,[r,`track source`].join(` `)),a(`audio`,`src crossorigin preload autoplay mediagroup loop muted controls buffered volume`,[r,`track source`].join(` `)),a(`picture`,``,`img source`),a(`source`,`src srcset type media sizes`),a(`track`,`kind src srclang label default`),a(`datalist`,``,[n,`option`].join(` `)),a(`article section nav aside main header footer`,``,r),a(`hgroup`,``,`h1 h2 h3 h4 h5 h6`),a(`figure`,``,[r,`figcaption`].join(` `)),a(`time`,`datetime`,n),a(`dialog`,`open`,r),a(`command`,`type label icon disabled checked radiogroup command`),a(`output`,`for form name`,n),a(`progress`,`value max`,n),a(`meter`,`value min max low high optimum`,n),a(`details`,`open`,[r,`summary`].join(` `)),a(`keygen`,`autofocus challenge disabled form keytype name`)),e!==`html5-strict`&&(o(`script`,`language xml:space`),o(`style`,`xml:space`),o(`object`,`declare classid code codebase codetype archive standby align border hspace vspace`),o(`embed`,`align name hspace vspace`),o(`param`,`valuetype type`),o(`a`,`charset name rev shape coords`),o(`br`,`clear`),o(`applet`,`codebase archive code object alt name width height align hspace vspace`),o(`img`,`name longdesc align border hspace vspace`),o(`iframe`,`longdesc frameborder marginwidth marginheight scrolling align`),o(`font basefont`,`size color face`),o(`input`,`usemap align`),o(`select`),o(`textarea`),o(`h1 h2 h3 h4 h5 h6 div p legend caption`,`align`),o(`ul`,`type compact`),o(`li`,`type`),o(`ol dl menu dir`,`compact`),o(`pre`,`width xml:space`),o(`hr`,`align noshade size width`),o(`isindex`,`prompt`),o(`table`,`summary width frame rules cellspacing cellpadding align bgcolor`),o(`col`,`width align char charoff valign`),o(`colgroup`,`width align char charoff valign`),o(`thead`,`align char charoff valign`),o(`tr`,`align char charoff valign bgcolor`),o(`th`,`axis align char charoff valign nowrap bgcolor width height`),o(`form`,`accept`),o(`td`,`abbr axis scope align char charoff valign nowrap bgcolor width height`),o(`tfoot`,`align char charoff valign`),o(`tbody`,`align char charoff valign`),o(`area`,`nohref`),o(`body`,`background bgcolor text link vlink alink`)),e!==`html4`&&(o(`input button select textarea`,`autofocus`),o(`input textarea`,`placeholder`),o(`a`,`download`),o(`link script img`,`crossorigin`),o(`img`,`loading`),o(`iframe`,`sandbox seamless allow allowfullscreen loading`)),e!==`html4`&&F([i.video,i.audio],e=>{delete e.children.audio,delete e.children.video}),F(Qs(`a form meter progress dfn`),e=>{i[e]&&delete i[e].children[e]}),delete i.caption.children.table,delete i.script,i},J=e=>e===`-`?`remove`:`add`,rc=e=>{let t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Te(Qs(e,`,`),e=>{let n=t.exec(e);if(n){let e=n[1];return[{operation:e?J(e):`replace`,name:n[2],validChildren:Qs(n[3],`|`)}]}else return[]})},ic=(e,t)=>{let n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:i,attributesOrder:a}=t;return F(Qs(e,`|`),e=>{let o=n.exec(e);if(o){let e={},n=o[1],s=o[2].replace(/[\\:]:/g,`:`),c=o[3],l=o[4];if(n===`!`&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(s),e.required=!0),n===`-`){delete i[s],a.splice(B.inArray(a,s),1);return}if(c&&(c===`=`?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:s,value:l}),e.defaultValue=l):c===`~`?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:s,value:l}),e.forcedValue=l):c===`<`&&(e.validValues=B.makeMap(l,`?`))),r.test(s)){let n=e;t.attributePatterns=t.attributePatterns||[],n.pattern=$s(s),t.attributePatterns.push(n)}else i[s]||a.push(s),i[s]=e}})},ac=(e,t)=>{ze(e.attributes,(e,n)=>{t.attributes[n]=e}),t.attributesOrder.push(...e.attributesOrder)},oc=(e,t)=>{let n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Te(Qs(t,`,`),t=>{let r=n.exec(t);if(r){let t=r[1],n=r[2],i=r[3],a=r[4],o=r[5],s={attributes:{},attributesOrder:[]};if(e.each(e=>ac(e,s)),t===`#`?s.paddEmpty=!0:t===`-`&&(s.removeEmpty=!0),a===`!`&&(s.removeEmptyAttrs=!0),o&&ic(o,s),i&&(s.outputName=n),n===`@`)if(e.isNone())e=P.some(s);else return[];return[i?{name:n,element:s,aliasName:i}:{name:n,element:s}]}else return[]})},sc={},cc=B.makeMap,lc=B.each,uc=B.extend,dc=B.explode,fc=(e,t={})=>uc(cc(e,` `,cc(e.toUpperCase(),` `)),t),pc=e=>fc(`td th li dt dd figcaption caption details summary`,e.getTextBlockElements()),mc=(e,t)=>{if(e){let n={};return v(e)&&(e={"*":e}),lc(e,(e,r)=>{n[r]=n[r.toUpperCase()]=t===`map`?cc(e,/[, ]/):dc(e,/[, ]/)}),n}else return},hc=(e={})=>{let t={},n={},r=[],i={},a={},o=(t,n,r)=>{let i=e[t];if(i)return cc(i,/[, ]/,cc(i.toUpperCase(),/[, ]/));{let e=sc[t];return e||(e=fc(n,r),sc[t]=e),e}},s=e.schema??`html5`,c=nc(s);e.verify_html===!1&&(e.valid_elements=`*[*]`);let l=mc(e.valid_styles),u=mc(e.invalid_styles,`map`),d=mc(e.valid_classes,`map`),f=o(`whitespace_elements`,`pre script noscript style textarea video audio iframe object code`),p=o(`self_closing_elements`,`colgroup dd dt li option p td tfoot th thead tr`),m=o(`void_elements`,`area base basefont br col frame hr img input isindex link meta param embed source wbr track`),h=o(`boolean_attributes`,`checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen`),g=`td th iframe video audio object script code`,_=o(`non_empty_elements`,g+` pre`,m),v=o(`move_caret_before_on_enter_elements`,g+` table`,m),y=o(`text_block_elements`,`h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure`),b=o(`block_elements`,`hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary`,y),x=o(`text_inline_elements`,`span strong b em i font s strike u var cite dfn code mark q sup sub samp`),ee=o(`transparent_elements`,`a ins del canvas map`);lc(`script noscript iframe noframes noembed title style textarea xmp plaintext`.split(` `),e=>{a[e]=RegExp(`</`+e+`[^>]*>`,`gi`)});let S=e=>{let n=P.from(t[`@`]),i=/[*?+]/;F(oc(n,e??``),({name:e,element:n,aliasName:a})=>{if(a&&(t[a]=n),i.test(e)){let t=n;t.pattern=$s(e),r.push(t)}else t[e]=n})},C=e=>{r=[],F(Le(t),e=>{delete t[e]}),S(e)},te=e=>{delete sc.text_block_elements,delete sc.block_elements,F(ec(e??``),({inline:e,name:r,cloneName:a})=>{if(n[r]=n[a],i[r]=a,_[r.toUpperCase()]={},_[r]={},e||(b[r.toUpperCase()]={},b[r]={}),!t[r]){let e=t[a];e=uc({},e),delete e.removeEmptyAttrs,delete e.removeEmpty,t[r]=e}ze(n,(e,t)=>{e[a]&&(n[t]=e=uc({},n[t]),e[r]=e[a])})})},w=e=>{F(rc(e??``),({operation:e,name:t,validChildren:r})=>{let i=e===`replace`?{"#comment":{}}:n[t];F(r,t=>{e===`remove`?delete i[t]:i[t]={}}),n[t]=i})},T=e=>{let n=t[e];if(n)return n;let i=r.length;for(;i--;){let t=r[i];if(t.pattern.test(e))return t}};e.valid_elements?(C(e.valid_elements),lc(c,(e,t)=>{n[t]=e.children})):(lc(c,(e,r)=>{t[r]={attributes:e.attributes,attributesOrder:e.attributesOrder},n[r]=e.children}),lc(Qs(`strong/b em/i`),e=>{let n=Qs(e,`/`);t[n[1]].outputName=n[0]}),lc(x,(n,r)=>{t[r]&&(e.padd_empty_block_inline_children&&(t[r].paddInEmptyBlock=!0),t[r].removeEmpty=!0)}),lc(Qs(`ol ul blockquote a table tbody`),e=>{t[e]&&(t[e].removeEmpty=!0)}),lc(Qs(`p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary`),e=>{t[e]&&(t[e].paddEmpty=!0)}),lc(Qs(`span`),e=>{t[e].removeEmptyAttrs=!0})),te(e.custom_elements),w(e.valid_children),S(e.extended_valid_elements),w(`+ol[ul|ol],+ul[ul|ol]`),lc({dd:`dl`,dt:`dl`,li:`ul ol`,td:`tr`,th:`tr`,tr:`tbody thead tfoot`,tbody:`table`,thead:`table`,tfoot:`table`,legend:`fieldset`,area:`map`,param:`video audio object`},(e,n)=>{t[n]&&(t[n].parentsRequired=Qs(e))}),e.invalid_elements&&lc(dc(e.invalid_elements),e=>{t[e]&&delete t[e]}),T(`span`)||S(`span[!data-mce-type|*]`);let E=k(l),ne=k(u),D=k(d),re=k(h),O=k(b),ie=k(y),ae=k(x);return{type:s,children:n,elements:t,getValidStyles:E,getValidClasses:D,getBlockElements:O,getInvalidStyles:ne,getVoidElements:k(Object.seal(m)),getTextBlockElements:ie,getTextInlineElements:ae,getBoolAttrs:re,getElementRule:T,getSelfClosingElements:k(p),getNonEmptyElements:k(_),getMoveCaretBeforeOnEnterElements:k(v),getWhitespaceElements:k(f),getTransparentElements:k(ee),getSpecialElements:k(Object.seal(a)),isValidChild:(e,t)=>{let r=n[e.toLowerCase()];return!!(r&&r[t.toLowerCase()])},isValid:(e,t)=>{let n=T(e);if(n)if(t){if(n.attributes[t])return!0;let e=n.attributePatterns;if(e){let n=e.length;for(;n--;)if(e[n].pattern.test(t))return!0}}else return!0;return!1},getCustomElements:k(i),addValidElements:S,setValidElements:C,addCustomElements:te,addValidChildren:w}},gc=(e={},t)=>{let n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,a={},o,s;t&&(o=t.getValidStyles(),s=t.getInvalidStyles());let c=`\\" \\' \\; \\: ; : ﻿`.split(` `);for(let e=0;e<c.length;e++)a[c[e]]=`﻿`+e,a[`﻿`+e]=c[e];let l={parse:t=>{let o={},s=!1,c=e.url_converter,u=e.url_converter_scope||l,d=(e,t,n)=>{let r=o[e+`-top`+t];if(!r)return;let i=o[e+`-right`+t];if(!i)return;let a=o[e+`-bottom`+t];if(!a)return;let s=o[e+`-left`+t];if(!s)return;let c=[r,i,a,s],l=c.length-1;for(;l--&&c[l]===c[l+1];);l>-1&&n||(o[e+t]=l===-1?c[0]:c.join(` `),delete o[e+`-top`+t],delete o[e+`-right`+t],delete o[e+`-bottom`+t],delete o[e+`-left`+t])},f=e=>{let t=o[e];if(!t)return;let n=t.indexOf(`,`)>-1?[t]:t.split(` `),r=n.length;for(;r--;)if(n[r]!==n[0])return!1;return o[e]=n[0],!0},p=(e,t,n,r)=>{f(t)&&f(n)&&f(r)&&(o[e]=o[t]+` `+o[n]+` `+o[r],delete o[t],delete o[n],delete o[r])},m=e=>(s=!0,a[e]),h=(e,t)=>(s&&(e=e.replace(/\uFEFF[0-9]/g,e=>a[e])),t||(e=e.replace(/\\([\'\";:])/g,`$1`)),e),g=e=>String.fromCharCode(parseInt(e.slice(1),16)),_=e=>e.replace(/\\[0-9a-f]+/gi,g),v=(t,n,r,i,a,o)=>{if(a||=o,a)return a=h(a),`'`+a.replace(/\'/g,`\\'`)+`'`;if(n=h(n||r||i||``),!e.allow_script_urls){let t=n.replace(/[\s\r\n]+/g,``);if(/(java|vb)script:/i.test(t)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(t))return``}return c&&(n=c.call(u,n,`style`)),`url('`+n.replace(/\'/g,`\\'`)+`')`};if(t){t=t.replace(/[\u0000-\u001F]/g,``),t=t.replace(/\\[\"\';:\uFEFF]/g,m).replace(/\"[^\"]+\"|\'[^\']+\'/g,e=>e.replace(/[;:]/g,m));let a;for(;a=r.exec(t);){r.lastIndex=a.index+a[0].length;let t=a[1].replace(i,``).toLowerCase(),c=a[2].replace(i,``);if(t&&c){if(t=_(t),c=_(c),t.indexOf(`﻿`)!==-1||t.indexOf(`"`)!==-1||!e.allow_script_urls&&(t===`behavior`||/expression\s*\(|\/\*|\*\//.test(c)))continue;t===`font-weight`&&c===`700`?c=`bold`:(t===`color`||t===`background-color`)&&(c=c.toLowerCase()),c=c.replace(n,v),o[t]=s?h(c,!0):c}}d(`border`,``,!0),d(`border`,`-width`),d(`border`,`-color`),d(`border`,`-style`),d(`padding`,``),d(`margin`,``),p(`border`,`border-width`,`border-style`,`border-color`),o.border===`medium none`&&delete o.border,o[`border-image`]===`none`&&delete o[`border-image`]}return o},serialize:(e,t)=>{let n=``,r=(t,r)=>{let i=r[t];if(i)for(let t=0,r=i.length;t<r;t++){let r=i[t],a=e[r];a&&(n+=(n.length>0?` `:``)+r+`: `+a+`;`)}},i=(e,t)=>{if(!s||!t)return!0;let n=s[`*`];return n&&n[e]?!1:(n=s[t],!(n&&n[e]))};return t&&o?(r(`*`,o),r(t,o)):ze(e,(e,r)=>{e&&i(r,t)&&(n+=(n.length>0?` `:``)+r+`: `+e+`;`)}),n}};return l},_c={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},vc=e=>e instanceof Event||T(e.initEvent),yc=e=>e.isDefaultPrevented===N||e.isDefaultPrevented===M,bc=e=>te(e.preventDefault)||vc(e),xc=(e,t)=>{let n=t??{};for(let t in e)Je(_c,t)||(n[t]=e[t]);return w(e.composedPath)&&(n.composedPath=()=>e.composedPath()),n},Sc=(e,t,n,r)=>{let i=xc(t,r);return i.type=e,te(i.target)&&(i.target=i.srcElement??n),bc(t)&&(i.preventDefault=()=>{i.defaultPrevented=!0,i.isDefaultPrevented=N,T(t.preventDefault)&&t.preventDefault()},i.stopPropagation=()=>{i.cancelBubble=!0,i.isPropagationStopped=N,T(t.stopPropagation)&&t.stopPropagation()},i.stopImmediatePropagation=()=>{i.isImmediatePropagationStopped=N,i.stopPropagation()},yc(i)||(i.isDefaultPrevented=i.defaultPrevented===!0?N:M,i.isPropagationStopped=i.cancelBubble===!0?N:M,i.isImmediatePropagationStopped=M)),i},Cc=/^(?:mouse|contextmenu)|click/,wc=(e,t,n,r)=>{e.addEventListener(t,n,r||!1)},Tc=(e,t,n,r)=>{e.removeEventListener(t,n,r||!1)},Ec=e=>w(e)&&Cc.test(e.type),Dc=(e,t)=>{let n=Sc(e.type,e,document,t);if(Ec(e)&&C(e.pageX)&&!C(e.clientX)){let t=n.target.ownerDocument||document,r=t.documentElement,i=t.body,a=n;a.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),a.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)}return n},Oc=(e,t,n)=>{let r=e.document,i={type:`ready`};if(n.domLoaded){t(i);return}let a=()=>r.readyState===`complete`||r.readyState===`interactive`&&r.body,o=()=>{Tc(e,`DOMContentLoaded`,o),Tc(e,`load`,o),n.domLoaded||(n.domLoaded=!0,t(i)),e=null};a()?o():wc(e,`DOMContentLoaded`,o),n.domLoaded||wc(e,`load`,o)};class kc{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=`mce-data-`+(+new Date).toString(32),this.hasFocusIn=`onfocusin`in document.documentElement,this.count=1}bind(e,t,n,r){let i=this,a,o=window,s=e=>{i.executeHandlers(Dc(e||o.event),c)};if(!e||W(e)||ya(e))return n;let c;e[i.expando]?c=e[i.expando]:(c=i.count++,e[i.expando]=c,i.events[c]={}),r||=e;let l=t.split(` `),u=l.length;for(;u--;){let t=l[u],d=s,f=!1,p=!1;if(t===`DOMContentLoaded`&&(t=`ready`),i.domLoaded&&t===`ready`&&e.readyState===`complete`){n.call(r,Dc({type:t}));continue}!i.hasFocusIn&&(t===`focusin`||t===`focusout`)&&(f=!0,p=t===`focusin`?`focus`:`blur`,d=e=>{let t=Dc(e||o.event);t.type=t.type===`focus`?`focusin`:`focusout`,i.executeHandlers(t,c)}),a=i.events[c][t],a?t===`ready`&&i.domLoaded?n(Dc({type:t})):a.push({func:n,scope:r}):(i.events[c][t]=a=[{func:n,scope:r}],a.fakeName=p,a.capture=f,a.nativeHandler=d,t===`ready`?Oc(e,d,i):wc(e,p||t,d,f))}return e=a=null,n}unbind(e,t,n){if(!e||W(e)||ya(e))return this;let r=e[this.expando];if(r){let i=this.events[r];if(t){let r=t.split(` `),a=r.length;for(;a--;){let t=r[a],o=i[t];if(o){if(n){let e=o.length;for(;e--;)if(o[e].func===n){let n=o.nativeHandler,r=o.fakeName,a=o.capture,s=o.slice(0,e).concat(o.slice(e+1));s.nativeHandler=n,s.fakeName=r,s.capture=a,i[t]=s}}(!n||o.length===0)&&(delete i[t],Tc(e,o.fakeName||t,o.nativeHandler,o.capture))}}}else ze(i,(t,n)=>{Tc(e,t.fakeName||n,t.nativeHandler,t.capture)}),i={};for(let e in i)if(Je(i,e))return this;delete this.events[r];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,t,n){return this.dispatch(e,t,n)}dispatch(e,t,n){if(!e||W(e)||ya(e))return this;let r=Dc({type:t,target:e},n);do{let t=e[this.expando];t&&this.executeHandlers(r,t),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||W(e)||ya(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);let t=e.getElementsByTagName(`*`),n=t.length;for(;n--;)e=t[n],e[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){let n=this.events[t],r=n&&n[e.type];if(r)for(let t=0,n=r.length;t<n;t++){let n=r[t];if(n&&n.func.call(n.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}kc.Event=new kc;let Ac=B.each,jc=B.grep,Mc=`data-mce-style`,Nc=B.makeMap(`fill-opacity font-weight line-height opacity orphans widows z-index zoom`,` `),Pc=(e,t,n)=>{te(n)||n===``?Xn(e,t):Gn(e,t,n)},Fc=e=>e.replace(/[A-Z]/g,e=>`-`+e.toLowerCase()),Ic=(e,t)=>{let n=0;if(e)for(let r=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){let e=i.nodeType;t&&W(i)&&(e===r||!i.data.length)||(n++,r=e)}return n},Lc=(e,t)=>{let n=qn(t,`style`);Pc(t,Mc,e.serialize(e.parse(n),Pn(t)))},Rc=(e,t)=>E(e)?Je(Nc,t)?e+``:e+`px`:e,zc=(e,t,n)=>{let r=Fc(t);te(n)||n===``?bi(e,r):mi(e,r,Rc(n,r))},Bc=(e,t,n)=>{let r=t.keep_values,i={set:(e,r,i)=>{let a=V.fromDom(e);T(t.url_converter)&&w(r)&&(r=t.url_converter.call(t.url_converter_scope||n(),String(r),i,e)),Pc(a,`data-mce-`+i,r),Pc(a,i,r)},get:(e,t)=>{let n=V.fromDom(e);return qn(n,`data-mce-`+t)||qn(n,t)}},a={style:{set:(t,n)=>{let i=V.fromDom(t);r&&Pc(i,Mc,n),Xn(i,`style`),v(n)&&hi(i,e.parse(n))},get:t=>{let n=V.fromDom(t),r=qn(n,Mc)||qn(n,`style`);return e.serialize(e.parse(r),Pn(n))}}};return r&&(a.href=a.src=i),a},Vc=(e,t={})=>{let n={},r=window,i={},a=0,o=Os.forElement(V.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),s=[],c=t.schema?t.schema:hc({}),l=gc({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),u=t.ownEvents?new kc:kc.Event,d=c.getBlockElements(),f=e=>v(e)?Je(d,e):U(e)&&(Je(d,e.nodeName)||ys(c,e)),p=t=>t&&e&&v(t)?e.getElementById(t):t,m=e=>{let t=p(e);return w(t)?V.fromDom(t):null},h=(e,t,n=``)=>{let r,i=m(e);if(w(i)&&zn(i)){let e=Xe[t];r=e&&e.get?e.get(i.dom,t):qn(i,t)}return w(r)?r:n},g=e=>{let t=p(e);return te(t)?[]:t.attributes},_=(e,n,r)=>{N(e,e=>{if(U(e)){let i=V.fromDom(e),a=r===``?null:r,o=qn(i,n),s=Xe[n];s&&s.set?s.set(i.dom,a,n):Pc(i,n,a),o!==a&&t.onSetAttrib&&t.onSetAttrib({attrElm:i.dom,attrName:n,attrValue:a})}})},y=(e,t)=>e.cloneNode(t),b=()=>t.root_element||e.body,ee=e=>{let t=ea(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},S=(t,n)=>Es(e.body,p(t),n),C=(e,n,r)=>{N(e,e=>{let i=V.fromDom(e);zc(i,n,r),t.update_styles&&Lc(l,i)})},E=(e,n)=>{N(e,e=>{let r=V.fromDom(e);ze(n,(e,t)=>{zc(r,t,e)}),t.update_styles&&Lc(l,r)})},ne=(e,t,n)=>{let r=p(e);if(!(te(r)||!U(r)))return n?gi(V.fromDom(r),Fc(t)):(t=t.replace(/-(\D)/g,(e,t)=>t.toUpperCase()),t===`float`&&(t=`cssFloat`),r.style?r.style[t]:void 0)},re=e=>{let t=p(e);if(!t)return{w:0,h:0};let n=ne(t,`width`),r=ne(t,`height`);return(!n||n.indexOf(`px`)===-1)&&(n=`0`),(!r||r.indexOf(`px`)===-1)&&(r=`0`),{w:parseInt(n,10)||t.offsetWidth||t.clientWidth,h:parseInt(r,10)||t.offsetHeight||t.clientHeight}},O=e=>{let t=p(e),n=S(t),r=re(t);return{x:n.x,y:n.y,w:r.w,h:r.h}},ie=(e,t)=>e?he(x(e)?e:[e],e=>_r(V.fromDom(e),t)):!1,ae=(e,t,n,r)=>{let i=[],a=p(e);r=r===void 0;let o=n||(b().nodeName===`BODY`?null:b().parentNode);if(v(t))if(t===`*`)t=U;else{let e=t;t=t=>ie(t,e)}for(;a&&!(a===o||te(a.nodeType)||ba(a)||xa(a));){if(!t||t(a))if(r)i.push(a);else return[a];a=a.parentNode}return r?i:null},A=(e,t,n)=>{let r=ae(e,t,n,!1);return r&&r.length>0?r[0]:null},j=(e,t,n)=>{let r=t;if(e){v(t)&&(r=e=>ie(e,t));for(let t=e[n];t;t=t[n])if(T(r)&&r(t))return t}return null},oe=(e,t)=>j(e,t,`nextSibling`),se=(e,t)=>j(e,t,`previousSibling`),ce=e=>T(e.querySelectorAll),M=(n,r)=>{let i=p(r)??t.root_element??e;return ce(i)?Pe(i.querySelectorAll(n)):[]},N=function(e,t,n){let r=n??this;if(x(e)){let n=[];return Ac(e,(e,i)=>{let a=p(e);a&&n.push(t.call(r,a,i))}),n}else{let n=p(e);return n?t.call(r,n):!1}},P=(e,t)=>{N(e,e=>{ze(t,(t,n)=>{_(e,n,t)})})},le=(e,t)=>{N(e,e=>{Fi(V.fromDom(e),t)})},ue=(t,n,r,i,a)=>N(t,t=>{let o=v(n)?e.createElement(n):n;return w(r)&&P(o,r),i&&(!v(i)&&i.nodeType?o.appendChild(i):v(i)&&le(o,i)),a?o:t.appendChild(o)}),de=(t,n,r)=>ue(e.createElement(t),t,n,r,!0),fe=Zs.decode,pe=Zs.encodeAllRaw,me=(e,t,n=``)=>{let r=`<`+e;for(let e in t)Ye(t,e)&&(r+=` `+e+`="`+pe(t[e])+`"`);return kt(n)&&Je(c.getVoidElements(),e)?r+` />`:r+`>`+n+`</`+e+`>`},ge=t=>{let n=e.createElement(`div`),r=e.createDocumentFragment();r.appendChild(n),t&&(n.innerHTML=t);let i;for(;i=n.firstChild;)r.appendChild(i);return r.removeChild(n),r},_e=(e,t)=>N(e,e=>{let n=V.fromDom(e);return t&&F(Fr(n),e=>{Bn(e)&&e.dom.length===0?Ai(e):Si(n,e)}),Ai(n),n.dom}),ve=e=>N(e,e=>{let t=e.attributes;for(let n=t.length-1;n>=0;n--)e.removeAttributeNode(t.item(n))}),I=e=>l.parse(e),ye=(e,t)=>l.serialize(e,t),be=t=>{if(qe!==Vc.DOM&&e===document){if(n[t])return;n[t]=!0}let r=e.getElementById(`mceDefaultStyles`);if(!r){r=e.createElement(`style`),r.id=`mceDefaultStyles`,r.type=`text/css`;let t=e.head;t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(e.createTextNode(t))},xe=e=>{e||=``,F(e.split(`,`),e=>{i[e]=!0,o.load(e).catch(D)})},Se=(e,t,n)=>{N(e,e=>{if(U(e)){let r=V.fromDom(e);F(t.split(` `),e=>{w(n)?(n?sr:lr)(r,e):ur(r,e)})}})},Ce=(e,t)=>{Se(e,t,!0)},we=(e,t)=>{Se(e,t,!1)},Te=(e,t)=>{let n=m(e),r=t.split(` `);return w(n)&&Ee(r,e=>dr(n,e))},De=e=>{N(e,e=>bi(V.fromDom(e),`display`))},Oe=e=>{N(e,e=>mi(V.fromDom(e),`display`,`none`))},ke=e=>{let t=m(e);return w(t)&&bn(vi(t,`display`),`none`)},Ae=e=>(e||`mce_`)+ a++,je=e=>{let t=m(e);return w(t)?U(t.dom)?t.dom.outerHTML:Ii(t):``},Me=(e,t)=>{N(e,e=>{U(e)&&(e.outerHTML=t)})},Ne=(e,t)=>{let n=p(t);return N(e,e=>{let t=n?.parentNode,r=n?.nextSibling;return t&&(r?t.insertBefore(e,r):t.appendChild(e)),e})},Fe=(e,t,n)=>N(t,r=>{var i;let a=x(t)?e.cloneNode(!0):e;return n&&Ac(jc(r.childNodes),e=>{a.appendChild(e)}),(i=r.parentNode)==null||i.replaceChild(a,r),r}),Ie=(e,t)=>{if(e.nodeName!==t.toUpperCase()){let n=de(t);return Ac(g(e),t=>{_(n,t.nodeName,h(e,t.nodeName))}),Fe(n,e,!0),n}else return e},Le=(e,t)=>{let n=e;for(;n;){let e=t;for(;e&&n!==e;)e=e.parentNode;if(n===e)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},Re=e=>{if(U(e)){let t=e.nodeName.toLowerCase()===`a`&&!h(e,`href`)&&h(e,`id`);if(h(e,`name`)||h(e,`data-mce-bookmark`)||t)return!0}return!1},L=(e,t,n)=>{let r=0;if(Re(e))return!1;let i=e.firstChild;if(i){let a=new ia(i,e),o=c?c.getWhitespaceElements():{},s=t||(c?c.getNonEmptyElements():null),l=i;do{if(U(l)){let e=l.getAttribute(`data-mce-bogus`);if(e){l=a.next(e===`all`);continue}let t=l.nodeName.toLowerCase();if(s&&s[t]){if(t===`br`){r++,l=a.next();continue}return!1}if(Re(l))return!1}if(ya(l)||W(l)&&!Uo(l.data)&&(!n?.includeZwsp||!Wo(l.data))||W(l)&&l.parentNode&&o[l.parentNode.nodeName]&&Uo(l.data))return!1;l=a.next()}while(l)}return r<=1},Be=()=>e.createRange(),Ve=(e,t,n)=>{let r=Be(),i,a;if(e&&t&&e.parentNode&&t.parentNode){let o=e.parentNode;return r.setStart(o,Ic(e)),r.setEnd(t.parentNode,Ic(t)),i=r.extractContents(),r=Be(),r.setStart(t.parentNode,Ic(t)+1),r.setEnd(o,Ic(e)+1),a=r.extractContents(),o.insertBefore(Fs(qe,i),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore(Fs(qe,a),e),_e(e),n||t}else return},He=(n,i,a,o)=>{if(x(n)){let e=n.length,t=[];for(;e--;)t[e]=He(n[e],i,a,o);return t}else return t.collect&&(n===e||n===r)&&s.push([n,i,a,o]),u.bind(n,i,a,o||qe)},Ue=(t,n,i)=>{if(x(t)){let e=t.length,r=[];for(;e--;)r[e]=Ue(t[e],n,i);return r}else{if(s.length>0&&(t===e||t===r)){let e=s.length;for(;e--;){let[r,a,o]=s[e];t===r&&(!n||n===a)&&(!i||i===o)&&u.unbind(r,a,o)}}return u.unbind(t,n,i)}},We=(e,t,n)=>u.dispatch(e,t,n),Ge=(e,t,n)=>u.dispatch(e,t,n),Ke=e=>{if(e&&U(e)){let t=e.getAttribute(`data-mce-contenteditable`);return t&&t!==`inherit`?t:e.contentEditable===`inherit`?null:e.contentEditable}else return null},qe={doc:e,settings:t,win:r,files:i,stdMode:!0,boxModel:!0,styleSheetLoader:o,boundEvents:s,styles:l,schema:c,events:u,isBlock:f,root:null,clone:y,getRoot:b,getViewPort:ee,getRect:O,getSize:re,getParent:A,getParents:ae,get:p,getNext:oe,getPrev:se,select:M,is:ie,add:ue,create:de,createHTML:me,createFragment:ge,remove:_e,setStyle:C,getStyle:ne,setStyles:E,removeAllAttribs:ve,setAttrib:_,setAttribs:P,getAttrib:h,getPos:S,parseStyle:I,serializeStyle:ye,addStyle:be,loadCSS:xe,addClass:Ce,removeClass:we,hasClass:Te,toggleClass:Se,show:De,hide:Oe,isHidden:ke,uniqueId:Ae,setHTML:le,getOuterHTML:je,setOuterHTML:Me,decode:fe,encode:pe,insertAfter:Ne,replace:Fe,rename:Ie,findCommonAncestor:Le,run:N,getAttribs:g,isEmpty:L,createRng:Be,nodeIndex:Ic,split:Ve,bind:He,unbind:Ue,fire:Ge,dispatch:We,getContentEditable:Ke,getContentEditableParent:e=>{let t=b(),n=null;for(let r=e;r&&r!==t&&(n=Ke(r),n===null);r=r.parentNode);return n},isEditable:e=>{if(w(e)){let t=U(e)?e:e.parentElement;return w(t)&&li(V.fromDom(t))}else return!1},destroy:()=>{if(s.length>0){let e=s.length;for(;e--;){let[t,n,r]=s[e];u.unbind(t,n,r)}}ze(i,(e,t)=>{o.unload(t),delete i[t]})},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>`startContainer: `+e.startContainer.nodeName+`, startOffset: `+e.startOffset+`, endContainer: `+e.endContainer.nodeName+`, endOffset: `+e.endOffset},Xe=Bc(l,t,k(qe));return qe};Vc.DOM=Vc(document),Vc.nodeIndex=Ic;let Hc=Vc.DOM;class Uc{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((t,n)=>{let r=Hc,i,a=()=>{r.remove(c),i&&(i.onerror=i.onload=i=null)},o=()=>{a(),t()},s=()=>{a(),n(`Failed to load script: `+e)},c=r.uniqueId();i=document.createElement(`script`),i.id=c,i.type=`text/javascript`,i.src=B._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(i,`referrerpolicy`,this.settings.referrerPolicy),i.onload=o,i.onerror=s,(document.getElementsByTagName(`head`)[0]||document.body).appendChild(i)})}isDone(e){return this.states[e]===2}markDone(e){this.states[e]=2}add(e){let t=this;return t.queue.push(e),t.states[e]===void 0&&(t.states[e]=0),new Promise((n,r)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:n,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){let e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){let t=this,n=(e,n)=>{qe(t.scriptLoadedCallbacks,n).each(t=>{F(t,t=>t[e](n))}),delete t.scriptLoadedCallbacks[n]},r=e=>{let t=I(e,e=>e.status===`rejected`);return t.length>0?Promise.reject(Te(t,({reason:e})=>x(e)?e:[e])):Promise.resolve()},i=e=>Promise.allSettled(ge(e,e=>t.states[e]===2?(n(`resolve`,e),Promise.resolve()):t.states[e]===3?(n(`reject`,e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then(()=>{t.states[e]=2,n(`resolve`,e);let a=t.queue;return a.length>0?(t.queue=[],i(a).then(r)):Promise.resolve()},()=>(t.states[e]=3,n(`reject`,e),Promise.reject(e)))))),a=e=>(t.loading=!0,i(e).then(e=>{t.loading=!1;let n=t.queueLoadedCallbacks.shift();return P.from(n).each(ce),r(e)})),o=Ze(e);return t.loading?new Promise((e,n)=>{t.queueLoadedCallbacks.push(()=>{a(o).then(e,n)})}):a(o)}}Uc.ScriptLoader=new Uc;let Wc=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Gc=(e,t)=>{let n=e.indexOf(t);return n!==-1&&e.indexOf(t,n+1)>n},Kc=e=>y(e)&&Je(e,`raw`),qc=e=>x(e)&&e.length>1,Jc={},Yc=Wc(`en`),Xc=()=>qe(Jc,Yc.get()),Zc={getData:()=>L(Jc,e=>({...e})),setCode:e=>{e&&Yc.set(e)},getCode:()=>Yc.get(),add:(e,t)=>{let n=Jc[e];n||(Jc[e]=n={});let r=ge(Le(t),e=>e.toLowerCase());ze(t,(e,i)=>{let a=i.toLowerCase();a!==i&&Gc(r,a)?(Je(t,a)||(n[a]=e),n[i]=e):n[a]=e})},translate:e=>{let t=Xc().getOr({}),n=e=>T(e)?Object.prototype.toString.call(e):r(e)?``:``+e,r=e=>e===``||e==null,i=e=>{let r=n(e);return Je(t,r)?n(t[r]):qe(t,r.toLowerCase()).map(n).getOr(r)},a=e=>e.replace(/{context:\w+}$/,``);if(r(e))return``;if(Kc(e))return n(e.raw);if(qc(e)){let t=e.slice(1);return a(i(e[0]).replace(/\{([0-9]+)\}/g,(e,r)=>Je(t,r)?n(t[r]):e))}return a(i(e))},isRtl:()=>Xc().bind(e=>qe(e,`_dir`)).exists(e=>e===`rtl`),hasCode:e=>Je(Jc,e)},Qc=()=>{let e=[],t={},n={},r=[],i=(e,t)=>{F(I(r,n=>n.name===e&&n.state===t),e=>e.resolve())},a=e=>Je(t,e),o=e=>Je(n,e),s=e=>{if(n[e])return n[e].instance},c=(e,n)=>{let r=Zc.getCode(),i=`,`+(n||``)+`,`;!r||n&&i.indexOf(`,`+r+`,`)===-1||Uc.ScriptLoader.add(t[e]+`/langs/`+r+`.js`)},l=(e,t)=>{Qc.languageLoad!==!1&&(a(e)?c(e,t):m(e,`loaded`).then(()=>c(e,t)))},u=(t,r)=>(e.push(r),n[t]={instance:r},i(t,`added`),r),d=e=>{delete t[e],delete n[e]},f=(e,t)=>v(t)?v(e)?{prefix:``,resource:t,suffix:``}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,p=(e,r)=>{if(t[e])return Promise.resolve();let a=v(r)?r:r.prefix+r.resource+r.suffix;a.indexOf(`/`)!==0&&a.indexOf(`://`)===-1&&(a=Qc.baseURL+`/`+a),t[e]=a.substring(0,a.lastIndexOf(`/`));let o=()=>(i(e,`loaded`),Promise.resolve());return n[e]?o():Uc.ScriptLoader.add(a).then(o)},m=(e,t=`added`)=>t===`added`&&o(e)||t===`loaded`&&a(e)?Promise.resolve():new Promise(n=>{r.push({name:e,state:t,resolve:n})});return{items:e,urls:t,lookup:n,get:s,requireLangPack:l,add:u,remove:d,createUrl:f,load:p,waitFor:m}};Qc.languageLoad=!0,Qc.baseURL=``,Qc.PluginManager=Qc(),Qc.ThemeManager=Qc(),Qc.ModelManager=Qc();let $c=e=>{let t=Wc(P.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(P.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(P.some(e))}}},el=e=>{let t=Wc(P.none()),n=()=>t.get().each(e=>clearInterval(e));return{clear:()=>{n(),t.set(P.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:r=>{n(),t.set(P.some(setInterval(r,e)))}}},tl=()=>{let e=$c(D),t=t=>e.get().each(t);return{...e,on:t}},nl=(e,t)=>{let n=null;return{cancel:()=>{ee(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{ee(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},rl=(e,t)=>{let n=null,r=()=>{ee(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...i)=>{r(),n=setTimeout(()=>{n=null,e.apply(null,i)},t)}}},il=k(`mce-annotation`),al=k(`data-mce-annotation`),ol=k(`data-mce-annotation-uid`),sl=k(`data-mce-annotation-active`),cl=k(`data-mce-annotation-classes`),ll=k(`data-mce-annotation-attrs`),ul=e=>t=>xr(t,e),dl=(e,t)=>{let n=e.selection.getRng(),r=V.fromDom(n.startContainer),i=V.fromDom(e.getBody()),a=t.fold(()=>`.`+il(),e=>`[${al()}="${e}"]`);return si(Ir(r,n.startOffset).getOr(r),a,ul(i)).bind(t=>Jn(t,`${ol()}`).bind(n=>Jn(t,`${al()}`).map(t=>({uid:n,name:t,elements:ml(e,n)}))))},fl=e=>zn(e)&&dr(e,il()),pl=(e,t)=>Yn(e,`data-mce-bogus`)||ra(e,`[data-mce-bogus="all"]`,ul(t)),ml=(e,t)=>{let n=V.fromDom(e.getBody());return I(H(n,`[${ol()}="${t}"]`),e=>!pl(e,n))},hl=(e,t)=>{let n=V.fromDom(e.getBody()),r=H(n,`[${al()}="${t}"]`),i={};return F(r,e=>{if(!pl(e,n)){let t=qn(e,ol());i[t]=qe(i,t).getOr([]).concat([e])}}),i},gl=(e,t)=>{let n=Wc({}),r=()=>({listeners:[],previous:tl()}),i=(e,t)=>{a(e,e=>(t(e),e))},a=(e,t)=>{let i=n.get();i[e]=t(qe(i,e).getOrThunk(r)),n.set(i)},o=(e,t,n)=>{i(e,r=>{F(r.listeners,r=>r(!0,e,{uid:t,nodes:ge(n,e=>e.dom)}))})},s=e=>{i(e,t=>{F(t.listeners,t=>t(!1,e))})},c=(t,n)=>{F(ml(e,t),e=>{n?Gn(e,sl(),`true`):Xn(e,sl())})},l=rl(()=>{F(Ae(t.getNames()),t=>{a(t,n=>{let r=n.previous.get();return dl(e,P.some(t)).fold(()=>{r.each(e=>{s(t),n.previous.clear(),c(e,!1)})},({uid:e,name:t,elements:i})=>{bn(r,e)||(r.each(e=>c(e,!1)),o(t,e,i),n.previous.set(e),c(e,!0))}),{previous:n.previous,listeners:n.listeners}})})},30);return e.on(`remove`,()=>{l.cancel()}),e.on(`NodeChange`,()=>{l.throttle()}),{addListener:(e,t)=>{a(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))}}},_l=(e,t)=>{let n=al(),r=e=>P.from(e.attr(n)).bind(t.lookup),i=e=>{e.attr(ol(),null),e.attr(al(),null),e.attr(sl(),null);let t=P.from(e.attr(ll())).map(e=>e.split(`,`)).getOr([]),n=P.from(e.attr(cl())).map(e=>e.split(`,`)).getOr([]);F(t,t=>e.attr(t,null));let r=Oe(e.attr(`class`)?.split(` `)??[],[il()].concat(n));e.attr(`class`,r.length>0?r.join(` `):null),e.attr(cl(),null),e.attr(ll(),null)};e.serializer.addTempAttr(sl()),e.serializer.addAttributeFilter(n,e=>{for(let t of e)r(t).each(e=>{e.persistent===!1&&(t.name===`span`?t.unwrap():i(t))})})},vl=()=>{let e={};return{register:(t,n)=>{e[t]={name:t,settings:n}},lookup:t=>qe(e,t).map(e=>e.settings),getNames:()=>Le(e)}},yl=0,bl=e=>{let t=new Date().getTime(),n=Math.floor(Math.random()*1e9);return yl++,e+`_`+n+yl+String(t)},xl=(e,t)=>{F(t,t=>{sr(e,t)})},Sl=(e,t)=>{F(t,t=>{lr(e,t)})},Cl=(e,t)=>V.fromDom(e.dom.cloneNode(t)),wl=e=>Cl(e,!1),Tl=e=>Cl(e,!0),El=(e,t)=>{let n=V.fromTag(t);return Kn(n,Qn(e)),n},Dl=(e,t)=>{let n=El(e,t);return Ci(e,n),Oi(n,Fr(e)),Ai(e),n},Ol=(e,t,n=M)=>{let r=new ia(e,t),i=e=>{let t;do t=r[e]();while(t&&!W(t)&&!n(t));return P.from(t).filter(W)};return{current:()=>P.from(r.current()).filter(W),next:()=>i(`next`),prev:()=>i(`prev`),prev2:()=>i(`prev2`)}},kl=(e,t)=>{let n=t||(t=>e.isBlock(t)||Sa(t)||Ta(t)),r=(e,t,n,i)=>{if(W(e)){let n=i(e,t,e.data);if(n!==-1)return P.some({container:e,offset:n})}return n().bind(e=>r(e.container,e.offset,n,i))};return{backwards:(t,i,a,o)=>{let s=Ol(t,o??e.getRoot(),n);return r(t,i,()=>s.prev().map(e=>({container:e,offset:e.length})),a).getOrNull()},forwards:(t,i,a,o)=>{let s=Ol(t,o??e.getRoot(),n);return r(t,i,()=>s.next().map(e=>({container:e,offset:0})),a).getOrNull()}}},Al=Math.round,jl=e=>e?{left:Al(e.left),top:Al(e.top),bottom:Al(e.bottom),right:Al(e.right),width:Al(e.width),height:Al(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Ml=(e,t)=>(e=jl(e),t||(e.left+=e.width),e.right=e.left,e.width=0,e),Nl=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,Pl=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Fl=(e,t)=>{let n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:Pl(t.top-e.bottom,e,t)},Il=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:Pl(t.bottom-e.top,e,t),Ll=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,Rl=e=>be(e,(e,t)=>e.fold(()=>P.some(t),e=>{let n=Math.min(t.left,e.left),r=Math.min(t.top,e.top),i=Math.max(t.right,e.right),a=Math.max(t.bottom,e.bottom);return P.some({top:r,right:i,bottom:a,left:n,width:i-n,height:a-r})}),P.none()),zl=(e,t,n)=>{let r=Math.max(Math.min(t,e.left+e.width),e.left),i=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(n-i)*(n-i))},Bl=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),Vl=(e,t,n)=>Math.min(Math.max(e,t),n),Hl=e=>{let t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ul=(e,t)=>{if(U(e)&&e.hasChildNodes()){let n=e.childNodes;return n[Vl(t,0,n.length-1)]}else return e},Wl=(e,t)=>{if(!(t<0&&U(e)&&e.hasChildNodes()))return Ul(e,t)},Gl=RegExp(`[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]`),Kl=e=>v(e)&&e.charCodeAt(0)>=768&&Gl.test(e),ql=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},Jl=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},Yl=U,Xl=Fo,Zl=la(`display`,`block table`),Ql=Jl(Yl,Xl,j(la(`float`,`left right`))),$l=j(la(`white-space`,`pre pre-line pre-wrap`)),eu=W,tu=Sa,nu=Vc.nodeIndex,ru=Wl,iu=e=>e?e.createRange():Vc.DOM.createRng(),au=e=>v(e)&&/[\r\n\t ]/.test(e),ou=e=>!!e.setStart&&!!e.setEnd,su=e=>{let t=e.startContainer,n=e.startOffset;if(au(e.toString())&&$l(t.parentNode)&&W(t)){let e=t.data;if(au(e[n-1])||au(e[n+1]))return!0}return!1},cu=e=>{let t=e.ownerDocument,n=iu(t),r=t.createTextNode(`\xA0`),i=e.parentNode;i.insertBefore(r,e),n.setStart(r,0),n.setEnd(r,1);let a=jl(n.getBoundingClientRect());return i.removeChild(r),a},lu=e=>{let t=e.startContainer,n=e.endContainer,r=e.startOffset,i=e.endOffset;if(t===n&&W(n)&&r===0&&i===1){let t=e.cloneRange();return t.setEndAfter(n),du(t)}else return null},uu=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,du=e=>{let t,n=e.getClientRects();return t=n.length>0?jl(n[0]):jl(e.getBoundingClientRect()),!ou(e)&&tu(e)&&uu(t)?cu(e):uu(t)&&ou(e)?lu(e)??t:t},fu=(e,t)=>{let n=Ml(e,t);return n.width=1,n.right=n.left+1,n},pu=e=>{let t=[],n=e=>{e.height!==0&&(t.length>0&&Nl(e,t[t.length-1])||t.push(e))},r=(e,t)=>{let r=iu(e.ownerDocument);if(t<e.data.length){if(Kl(e.data[t]))return;if(Kl(e.data[t-1])&&(r.setStart(e,t),r.setEnd(e,t+1),!su(r))){n(fu(du(r),!1));return}}t>0&&(r.setStart(e,t-1),r.setEnd(e,t),su(r)||n(fu(du(r),!1))),t<e.data.length&&(r.setStart(e,t),r.setEnd(e,t+1),su(r)||n(fu(du(r),!0)))},i=e.container(),a=e.offset();if(eu(i))return r(i,a),t;if(Yl(i))if(e.isAtEnd()){let e=ru(i,a);eu(e)&&r(e,e.data.length),Ql(e)&&!tu(e)&&n(fu(du(e),!1))}else{let o=ru(i,a);if(eu(o)&&r(o,0),Ql(o)&&e.isAtEnd())return n(fu(du(o),!1)),t;let s=ru(e.container(),e.offset()-1);Ql(s)&&!tu(s)&&(Zl(s)||Zl(o)||!Ql(o))&&n(fu(du(s),!1)),Ql(o)&&n(fu(du(o),!0))}return t},Y=(e,t,n)=>{let r=()=>(eu(e),t===0),i=()=>eu(e)?t>=e.data.length:t>=e.childNodes.length,a=()=>{let n=iu(e.ownerDocument);return n.setStart(e,t),n.setEnd(e,t),n},o=()=>(n||=pu(Y(e,t)),n);return{container:k(e),offset:k(t),toRange:a,getClientRects:o,isVisible:()=>o().length>0,isAtStart:r,isAtEnd:i,isEqual:n=>n&&e===n.container()&&t===n.offset(),getNode:n=>ru(e,n?t-1:t)}};Y.fromRangeStart=e=>Y(e.startContainer,e.startOffset),Y.fromRangeEnd=e=>Y(e.endContainer,e.endOffset),Y.after=e=>Y(e.parentNode,nu(e)+1),Y.before=e=>Y(e.parentNode,nu(e)),Y.isAbove=(e,t)=>Cn(Me(t.getClientRects()),Ne(e.getClientRects()),Fl).getOr(!1),Y.isBelow=(e,t)=>Cn(Ne(t.getClientRects()),Me(e.getClientRects()),Il).getOr(!1),Y.isAtStart=e=>e?e.isAtStart():!1,Y.isAtEnd=e=>e?e.isAtEnd():!1,Y.isTextPosition=e=>e?W(e.container()):!1,Y.isElementPosition=e=>!Y.isTextPosition(e);let mu=(e,t)=>{W(t)&&t.data.length===0&&e.remove(t)},hu=(e,t,n)=>{t.insertNode(n),mu(e,n.previousSibling),mu(e,n.nextSibling)},gu=(e,t,n)=>{let r=P.from(n.firstChild),i=P.from(n.lastChild);t.insertNode(n),r.each(t=>mu(e,t.previousSibling)),i.each(t=>mu(e,t.nextSibling))},_u=(e,t,n)=>{xa(n)?gu(e,t,n):hu(e,t,n)},vu=W,yu=fa,bu=Vc.nodeIndex,xu=e=>{let t=e.parentNode;return yu(t)?xu(t):t},Su=e=>e?at(e.childNodes,(e,t)=>(yu(t)&&t.nodeName!==`BR`?e=e.concat(Su(t)):e.push(t),e),[]):[],Cu=(e,t)=>{let n=e;for(;(n=n.previousSibling)&&vu(n);)t+=n.data.length;return t},wu=e=>t=>e===t,Tu=e=>{let t,n;t=Su(xu(e)),n=ot(t,wu(e),e),t=t.slice(0,n+1);let r=at(t,(e,n,r)=>(vu(n)&&vu(t[r-1])&&e++,e),0);return t=rt(t,ca([e.nodeName])),n=ot(t,wu(e),e),n-r},Eu=e=>(vu(e)?`text()`:e.nodeName.toLowerCase())+`[`+Tu(e)+`]`,Du=(e,t,n)=>{let r=[];for(let i=t.parentNode;i&&i!==e&&!(n&&n(i));i=i.parentNode)r.push(i);return r},Ou=(e,t)=>{let n=[],r=t.container(),i=t.offset(),a;if(vu(r))a=Cu(r,i);else{let e=r.childNodes;i>=e.length?(a=`after`,i=e.length-1):a=`before`,r=e[i]}n.push(Eu(r));let o=Du(e,r);return o=rt(o,j(fa)),n=n.concat(nt(o,e=>Eu(e))),n.reverse().join(`/`)+`,`+a},ku=(e,t,n)=>{let r=Su(e);return r=rt(r,(e,t)=>!vu(e)||!vu(r[t-1])),r=rt(r,ca([t])),r[n]},Au=(e,t)=>{let n=e,r=0;for(;vu(n);){let i=n.data.length;if(t>=r&&t<=r+i){e=n,t-=r;break}if(!vu(n.nextSibling)){e=n,t=i;break}r+=i,n=n.nextSibling}return vu(e)&&t>e.data.length&&(t=e.data.length),Y(e,t)},ju=(e,t)=>{if(!t)return null;let n=t.split(`,`),r=n[0].split(`/`),i=n.length>1?n[1]:`before`,a=at(r,(e,t)=>{let n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return n?(n[1]===`text()`&&(n[1]=`#text`),ku(e,n[1],parseInt(n[2],10))):null},e);if(!a)return null;if(!vu(a)&&a.parentNode){let e;return e=i===`after`?bu(a)+1:bu(a),Y(a.parentNode,e)}return Au(a,parseInt(i,10))},Mu=Ta,Nu=(e,t,n)=>{let r=e(t.data.slice(0,n)).length;for(let n=t.previousSibling;n&&W(n);n=n.previousSibling)r+=e(n.data).length;return r},Pu=(e,t,n,r,i)=>{let a=i?r.startContainer:r.endContainer,o=i?r.startOffset:r.endOffset,s=[],c=e.getRoot();if(W(a))s.push(n?Nu(t,a,o):o);else{let t=0,r=a.childNodes;o>=r.length&&r.length&&(t=1,o=Math.max(0,r.length-1)),s.push(e.nodeIndex(r[o],n)+t)}for(let t=a;t&&t!==c;t=t.parentNode)s.push(e.nodeIndex(t,n));return s},Fu=(e,t,n,r)=>{let i=t.dom,a=Pu(i,e,n,r,!0),o=t.isForward(),s=Eo(r)?{isFakeCaret:!0}:{};return t.isCollapsed()?{start:a,forward:o,...s}:{start:a,end:Pu(i,e,n,r,!1),forward:o,...s}},Iu=(e,t,n)=>{let r=0;return B.each(e.select(t),e=>{if(e.getAttribute(`data-mce-bogus`)!==`all`){if(e===n)return!1;r++}}),r},Lu=(e,t)=>{let n=t?e.startContainer:e.endContainer,r=t?e.startOffset:e.endOffset;if(U(n)&&n.nodeName===`TR`){let i=n.childNodes;n=i[Math.min(t?r:r-1,i.length-1)],n&&(r=t?0:n.childNodes.length,t?e.setStart(n,r):e.setEnd(n,r))}},Ru=e=>(Lu(e,!0),Lu(e,!1),e),zu=(e,t)=>{if(U(e)&&(e=Ul(e,t),Mu(e)))return e;if(go(e)){W(e)&&mo(e)&&(e=e.parentNode);let t=e.previousSibling;if(Mu(t)||(t=e.nextSibling,Mu(t)))return t}},Bu=e=>zu(e.startContainer,e.startOffset)||zu(e.endContainer,e.endOffset),Vu=(e,t,n)=>{let r=n.getNode(),i=n.getRng();if(r.nodeName===`IMG`||Mu(r)){let e=r.nodeName;return{name:e,index:Iu(n.dom,e,r)}}let a=Bu(i);if(a){let e=a.tagName;return{name:e,index:Iu(n.dom,e,a)}}return Fu(e,n,t,i)},Hu=e=>{let t=e.getRng();return{start:Ou(e.dom.getRoot(),Y.fromRangeStart(t)),end:Ou(e.dom.getRoot(),Y.fromRangeEnd(t)),forward:e.isForward()}},Uu=e=>({rng:e.getRng(),forward:e.isForward()}),Wu=(e,t,n)=>{let r={"data-mce-type":`bookmark`,id:t,style:`overflow:hidden;line-height:0px`};return n?e.create(`span`,r,`&#xFEFF;`):e.create(`span`,r)},Gu=(e,t)=>{let n=e.dom,r=e.getRng(),i=n.uniqueId(),a=e.isCollapsed(),o=e.getNode(),s=o.nodeName,c=e.isForward();if(s===`IMG`)return{name:s,index:Iu(n,s,o)};let l=Ru(r.cloneRange());a||(l.collapse(!1),_u(n,l,Wu(n,i+`_end`,t))),r=Ru(r),r.collapse(!0);let u=Wu(n,i+`_start`,t);return _u(n,r,u),e.moveToBookmark({id:i,keep:!0,forward:c}),{id:i,forward:c}},Ku=(e,t,n=!1)=>t===2?Vu(uo,n,e):t===3?Hu(e):t?Uu(e):Gu(e,!1),qu=A(Vu,ie,!0),Ju=e=>{let t=t=>t(e),n=k(e),r=()=>i,i={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:N,isError:M,map:t=>Xu.value(t(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:t=>{t(e)},toOptional:()=>P.some(e)};return i},Yu=e=>{let t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:M,isError:N,map:t,mapError:t=>Xu.error(t(e)),bind:t,exists:M,forall:N,getOr:ie,or:ie,getOrThunk:se,orThunk:se,getOrDie:oe(String(e)),each:D,toOptional:P.none};return n},Xu={value:Ju,error:Yu,fromOption:(e,t)=>e.fold(()=>Yu(t),Ju)},Zu={generate:e=>{if(!x(e))throw Error(`cases must be an array`);if(e.length===0)throw Error(`there must be at least one case`);let t=[],n={};return F(e,(r,i)=>{let a=Le(r);if(a.length!==1)throw Error(`one and only one name per case`);let o=a[0],s=r[o];if(n[o]!==void 0)throw Error(`duplicate key detected:`+o);if(o===`cata`)throw Error(`cannot have a case named cata (sorry)`);if(!x(s))throw Error(`case arguments must be an array`);t.push(o),n[o]=(...n)=>{let r=n.length;if(r!==s.length)throw Error(`Wrong number of arguments to case `+o+`. Expected `+s.length+` (`+s+`), got `+r);return{fold:(...t)=>{if(t.length!==e.length)throw Error(`Wrong number of arguments to fold. Expected `+e.length+`, got `+t.length);return t[i].apply(null,n)},match:e=>{let r=Le(e);if(t.length!==r.length)throw Error(`Wrong number of arguments to match. Expected: `+t.join(`,`)+`
Actual: `+r.join(`,`));if(!Ee(t,e=>me(r,e)))throw Error(`Not all branches were specified when using match. Specified: `+r.join(`, `)+`
Required: `+t.join(`, `));return e[o].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:o,params:n})}}}}),n}};Zu.generate([{bothErrors:[`error1`,`error2`]},{firstError:[`error1`,`value2`]},{secondError:[`value1`,`error2`]},{bothValues:[`value1`,`value2`]}]);let Qu=e=>{let t=[],n=[];return F(e,e=>{e.fold(e=>{t.push(e)},e=>{n.push(e)})}),{errors:t,values:n}},$u=e=>e.type===`inline-command`||e.type===`inline-format`,ed=e=>e.type===`block-command`||e.type===`block-format`,td=e=>{let t=t=>Xu.error({message:t,pattern:e}),n=(n,r,i)=>{if(e.format!==void 0){let i;if(x(e.format)){if(!Ee(e.format,v))return t(n+" pattern has non-string items in the `format` array");i=e.format}else if(v(e.format))i=[e.format];else return t(n+" pattern has non-string `format` parameter");return Xu.value(r(i))}else if(e.cmd!==void 0)return v(e.cmd)?Xu.value(i(e.cmd,e.value)):t(n+" pattern has non-string `cmd` parameter");else return t(n+" pattern is missing both `format` and `cmd` parameters")};if(!y(e))return t(`Raw pattern is not an object`);if(!v(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!v(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let r=e.start,i=e.end;return i.length===0&&(i=r,r=``),n(`Inline`,e=>({type:`inline-format`,start:r,end:i,format:e}),(e,t)=>({type:`inline-command`,start:r,end:i,cmd:e,value:t}))}else if(e.replacement!==void 0)return v(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):Xu.value({type:`inline-command`,start:``,end:e.start,cmd:`mceInsertContent`,value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter");else return e.start.length===0?t("Block pattern has empty `start` parameter"):n(`Block`,t=>({type:`block-format`,start:e.start,format:t[0]}),(t,n)=>({type:`block-command`,start:e.start,cmd:t,value:n}))},nd=e=>I(e,ed),rd=e=>I(e,$u),id=(e,t)=>({inlinePatterns:rd(e),blockPatterns:nd(e),dynamicPatternsLookup:t}),ad=e=>{let t=Qu(ge(e,td));return F(t.errors,e=>console.error(e.message,e.pattern)),t.values},od=e=>t=>ad(e(t)),sd=an().deviceType,cd=sd.isTouch(),ld=Vc.DOM,ud=e=>be(e.indexOf(`=`)>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(`,`),(e,t)=>{let n=t.split(`=`),r=n[0],i=n.length>1?n[1]:r;return e[Tt(r)]=Tt(i),e},{}),dd=e=>_(e,RegExp),X=e=>t=>t.options.get(e),fd=e=>v(e)||y(e),pd=(e,t=``)=>n=>{let r=v(n);return r?n.indexOf(`=`)===-1?{value:n,valid:r}:{value:qe(ud(n),e.id).getOr(t),valid:r}:{valid:!1,message:`Must be a string.`}},md=e=>{let t=e.options.register;t(`id`,{processor:`string`,default:e.id}),t(`selector`,{processor:`string`}),t(`target`,{processor:`object`}),t(`suffix`,{processor:`string`}),t(`cache_suffix`,{processor:`string`}),t(`base_url`,{processor:`string`}),t(`referrer_policy`,{processor:`string`,default:``}),t(`language_load`,{processor:`boolean`,default:!0}),t(`inline`,{processor:`boolean`,default:!1}),t(`iframe_attrs`,{processor:`object`,default:{}}),t(`doctype`,{processor:`string`,default:`<!DOCTYPE html>`}),t(`document_base_url`,{processor:`string`,default:e.documentBaseUrl}),t(`body_id`,{processor:pd(e,`tinymce`),default:`tinymce`}),t(`body_class`,{processor:pd(e),default:``}),t(`content_security_policy`,{processor:`string`,default:``}),t(`br_in_pre`,{processor:`boolean`,default:!0}),t(`forced_root_block`,{processor:e=>{let t=v(e)&&Ot(e);return t?{value:e,valid:t}:{valid:!1,message:`Must be a non-empty string.`}},default:`p`}),t(`forced_root_block_attrs`,{processor:`object`,default:{}}),t(`newline_behavior`,{processor:e=>{let t=me([`block`,`linebreak`,`invert`,`default`],e);return t?{value:e,valid:t}:{valid:!1,message:`Must be one of: block, linebreak, invert or default.`}},default:`default`}),t(`br_newline_selector`,{processor:`string`,default:`.mce-toc h2,figcaption,caption`}),t(`no_newline_selector`,{processor:`string`,default:``}),t(`keep_styles`,{processor:`boolean`,default:!0}),t(`end_container_on_empty_block`,{processor:e=>S(e)||v(e)?{valid:!0,value:e}:{valid:!1,message:`Must be boolean or a string`},default:`blockquote`}),t(`font_size_style_values`,{processor:`string`,default:`xx-small,x-small,small,medium,large,x-large,xx-large`}),t(`font_size_legacy_values`,{processor:`string`,default:`xx-small,small,medium,large,x-large,xx-large,300%`}),t(`font_size_classes`,{processor:`string`,default:``}),t(`automatic_uploads`,{processor:`boolean`,default:!0}),t(`images_reuse_filename`,{processor:`boolean`,default:!1}),t(`images_replace_blob_uris`,{processor:`boolean`,default:!0}),t(`icons`,{processor:`string`,default:``}),t(`icons_url`,{processor:`string`,default:``}),t(`images_upload_url`,{processor:`string`,default:``}),t(`images_upload_base_path`,{processor:`string`,default:``}),t(`images_upload_credentials`,{processor:`boolean`,default:!1}),t(`images_upload_handler`,{processor:`function`}),t(`language`,{processor:`string`,default:`en`}),t(`language_url`,{processor:`string`,default:``}),t(`entity_encoding`,{processor:`string`,default:`named`}),t(`indent`,{processor:`boolean`,default:!0}),t(`indent_before`,{processor:`string`,default:`p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist`}),t(`indent_after`,{processor:`string`,default:`p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist`}),t(`indent_use_margin`,{processor:`boolean`,default:!1}),t(`indentation`,{processor:`string`,default:`40px`}),t(`content_css`,{processor:e=>{let t=e===!1||v(e)||ne(e,v);return t?v(e)?{value:ge(e.split(`,`),Tt),valid:t}:x(e)?{value:e,valid:t}:e===!1?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:`Must be false, a string or an array of strings.`}},default:uf(e)?[]:[`default`]}),t(`content_style`,{processor:`string`}),t(`content_css_cors`,{processor:`boolean`,default:!1}),t(`font_css`,{processor:e=>{let t=v(e)||ne(e,v);return t?{value:x(e)?e:ge(e.split(`,`),Tt),valid:t}:{valid:!1,message:`Must be a string or an array of strings.`}},default:[]}),t(`inline_boundaries`,{processor:`boolean`,default:!0}),t(`inline_boundaries_selector`,{processor:`string`,default:`a[href],code,span.mce-annotation`}),t(`object_resizing`,{processor:e=>{let t=S(e)||v(e);return t?e===!1||sd.isiPhone()||sd.isiPad()?{value:``,valid:t}:{value:e===!0?`table,img,figure.image,div,video,iframe`:e,valid:t}:{valid:!1,message:`Must be boolean or a string`}},default:!cd}),t(`resize_img_proportional`,{processor:`boolean`,default:!0}),t(`event_root`,{processor:`object`}),t(`service_message`,{processor:`string`}),t(`theme`,{processor:e=>e===!1||v(e)||T(e),default:`silver`}),t(`theme_url`,{processor:`string`}),t(`formats`,{processor:`object`}),t(`format_empty_lines`,{processor:`boolean`,default:!1}),t(`format_noneditable_selector`,{processor:`string`,default:``}),t(`preview_styles`,{processor:e=>{let t=e===!1||v(e);return t?{value:e===!1?``:e,valid:t}:{valid:!1,message:`Must be false or a string`}},default:`font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow`}),t(`custom_ui_selector`,{processor:`string`,default:``}),t(`hidden_input`,{processor:`boolean`,default:!0}),t(`submit_patch`,{processor:`boolean`,default:!0}),t(`encoding`,{processor:`string`}),t(`add_form_submit_trigger`,{processor:`boolean`,default:!0}),t(`add_unload_trigger`,{processor:`boolean`,default:!0}),t(`custom_undo_redo_levels`,{processor:`number`,default:0}),t(`disable_nodechange`,{processor:`boolean`,default:!1}),t(`readonly`,{processor:`boolean`,default:!1}),t(`editable_root`,{processor:`boolean`,default:!0}),t(`plugins`,{processor:`string[]`,default:[]}),t(`external_plugins`,{processor:`object`}),t(`forced_plugins`,{processor:`string[]`}),t(`model`,{processor:`string`,default:e.hasPlugin(`rtc`)?`plugin`:`dom`}),t(`model_url`,{processor:`string`}),t(`block_unsupported_drop`,{processor:`boolean`,default:!0}),t(`visual`,{processor:`boolean`,default:!0}),t(`visual_table_class`,{processor:`string`,default:`mce-item-table`}),t(`visual_anchor_class`,{processor:`string`,default:`mce-item-anchor`}),t(`iframe_aria_text`,{processor:`string`,default:`Rich Text Area. Press ALT-0 for help.`}),t(`setup`,{processor:`function`}),t(`init_instance_callback`,{processor:`function`}),t(`url_converter`,{processor:`function`,default:e.convertURL}),t(`url_converter_scope`,{processor:`object`,default:e}),t(`urlconverter_callback`,{processor:`function`}),t(`allow_conditional_comments`,{processor:`boolean`,default:!1}),t(`allow_html_data_urls`,{processor:`boolean`,default:!1}),t(`allow_svg_data_urls`,{processor:`boolean`}),t(`allow_html_in_named_anchor`,{processor:`boolean`,default:!1}),t(`allow_script_urls`,{processor:`boolean`,default:!1}),t(`allow_unsafe_link_target`,{processor:`boolean`,default:!1}),t(`convert_fonts_to_spans`,{processor:`boolean`,default:!0,deprecated:!0}),t(`fix_list_elements`,{processor:`boolean`,default:!1}),t(`preserve_cdata`,{processor:`boolean`,default:!1}),t(`remove_trailing_brs`,{processor:`boolean`,default:!0}),t(`pad_empty_with_br`,{processor:`boolean`,default:!1}),t(`inline_styles`,{processor:`boolean`,default:!0,deprecated:!0}),t(`element_format`,{processor:`string`,default:`html`}),t(`entities`,{processor:`string`}),t(`schema`,{processor:`string`,default:`html5`}),t(`convert_urls`,{processor:`boolean`,default:!0}),t(`relative_urls`,{processor:`boolean`,default:!0}),t(`remove_script_host`,{processor:`boolean`,default:!0}),t(`custom_elements`,{processor:`string`}),t(`extended_valid_elements`,{processor:`string`}),t(`invalid_elements`,{processor:`string`}),t(`invalid_styles`,{processor:fd}),t(`valid_children`,{processor:`string`}),t(`valid_classes`,{processor:fd}),t(`valid_elements`,{processor:`string`}),t(`valid_styles`,{processor:fd}),t(`verify_html`,{processor:`boolean`,default:!0}),t(`auto_focus`,{processor:e=>v(e)||e===!0}),t(`browser_spellcheck`,{processor:`boolean`,default:!1}),t(`protect`,{processor:`array`}),t(`images_file_types`,{processor:`string`,default:`jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp`}),t(`deprecation_warnings`,{processor:`boolean`,default:!0}),t(`a11y_advanced_options`,{processor:`boolean`,default:!1}),t(`api_key`,{processor:`string`}),t(`paste_block_drop`,{processor:`boolean`,default:!1}),t(`paste_data_images`,{processor:`boolean`,default:!0}),t(`paste_preprocess`,{processor:`function`}),t(`paste_postprocess`,{processor:`function`}),t(`paste_webkit_styles`,{processor:`string`,default:`none`}),t(`paste_remove_styles_if_webkit`,{processor:`boolean`,default:!0}),t(`paste_merge_formats`,{processor:`boolean`,default:!0}),t(`smart_paste`,{processor:`boolean`,default:!0}),t(`paste_as_text`,{processor:`boolean`,default:!1}),t(`paste_tab_spaces`,{processor:`number`,default:4}),t(`text_patterns`,{processor:e=>ne(e,y)||e===!1?{value:ad(e===!1?[]:e),valid:!0}:{valid:!1,message:`Must be an array of objects or false.`},default:[{start:`*`,end:`*`,format:`italic`},{start:`**`,end:`**`,format:`bold`},{start:`#`,format:`h1`},{start:`##`,format:`h2`},{start:`###`,format:`h3`},{start:`####`,format:`h4`},{start:`#####`,format:`h5`},{start:`######`,format:`h6`},{start:`1. `,cmd:`InsertOrderedList`},{start:`* `,cmd:`InsertUnorderedList`},{start:`- `,cmd:`InsertUnorderedList`}]}),t(`text_patterns_lookup`,{processor:e=>T(e)?{value:od(e),valid:!0}:{valid:!1,message:`Must be a single function`},default:e=>[]}),t(`noneditable_class`,{processor:`string`,default:`mceNonEditable`}),t(`editable_class`,{processor:`string`,default:`mceEditable`}),t(`noneditable_regexp`,{processor:e=>ne(e,dd)?{value:e,valid:!0}:dd(e)?{value:[e],valid:!0}:{valid:!1,message:`Must be a RegExp or an array of RegExp.`},default:[]}),t(`table_tab_navigation`,{processor:`boolean`,default:!0}),t(`highlight_on_focus`,{processor:`boolean`,default:!1}),t(`xss_sanitization`,{processor:`boolean`,default:!0}),t(`details_initial_state`,{processor:e=>{let t=me([`inherited`,`collapsed`,`expanded`],e);return t?{value:e,valid:t}:{valid:!1,message:`Must be one of: inherited, collapsed, or expanded.`}},default:`inherited`}),t(`details_serialized_state`,{processor:e=>{let t=me([`inherited`,`collapsed`,`expanded`],e);return t?{value:e,valid:t}:{valid:!1,message:`Must be one of: inherited, collapsed, or expanded.`}},default:`inherited`}),t(`init_content_sync`,{processor:`boolean`,default:!1}),t(`newdocument_content`,{processor:`string`,default:``}),e.on(`ScriptsLoaded`,()=>{t(`directionality`,{processor:`string`,default:Zc.isRtl()?`rtl`:void 0}),t(`placeholder`,{processor:`string`,default:ld.getAttrib(e.getElement(),`placeholder`)})})},hd=X(`iframe_attrs`),gd=X(`doctype`),_d=X(`document_base_url`),vd=X(`body_id`),yd=X(`body_class`),bd=X(`content_security_policy`),xd=X(`br_in_pre`),Sd=X(`forced_root_block`),Z=X(`forced_root_block_attrs`),Cd=X(`newline_behavior`),wd=X(`br_newline_selector`),Td=X(`no_newline_selector`),Ed=X(`keep_styles`),Dd=X(`end_container_on_empty_block`),Od=X(`automatic_uploads`),kd=X(`images_reuse_filename`),Ad=X(`images_replace_blob_uris`),jd=X(`icons`),Md=X(`icons_url`),Nd=X(`images_upload_url`),Pd=X(`images_upload_base_path`),Fd=X(`images_upload_credentials`),Id=X(`images_upload_handler`),Ld=X(`content_css_cors`),Rd=X(`referrer_policy`),zd=X(`language`),Bd=X(`language_url`),Vd=X(`indent_use_margin`),Hd=X(`indentation`),Ud=X(`content_css`),Wd=X(`content_style`),Gd=X(`font_css`),Kd=X(`directionality`),qd=X(`inline_boundaries_selector`),Jd=X(`object_resizing`),Yd=X(`resize_img_proportional`),Xd=X(`placeholder`),Zd=X(`event_root`),Qd=X(`service_message`),$d=X(`theme`),ef=X(`theme_url`),tf=X(`model`),nf=X(`model_url`),rf=X(`inline_boundaries`),af=X(`formats`),of=X(`preview_styles`),sf=X(`format_empty_lines`),cf=X(`format_noneditable_selector`),lf=X(`custom_ui_selector`),uf=X(`inline`),df=X(`hidden_input`),ff=X(`submit_patch`),pf=X(`add_form_submit_trigger`),mf=X(`add_unload_trigger`),hf=X(`custom_undo_redo_levels`),gf=X(`disable_nodechange`),_f=X(`readonly`),vf=X(`editable_root`),yf=X(`content_css_cors`),bf=X(`plugins`),xf=X(`external_plugins`),Sf=X(`block_unsupported_drop`),Cf=X(`visual`),wf=X(`visual_table_class`),Tf=X(`visual_anchor_class`),Ef=X(`iframe_aria_text`),Df=X(`setup`),Of=X(`init_instance_callback`),kf=X(`urlconverter_callback`),Af=X(`auto_focus`),jf=X(`browser_spellcheck`),Mf=X(`protect`),Nf=X(`paste_block_drop`),Pf=X(`paste_data_images`),Ff=X(`paste_preprocess`),If=X(`paste_postprocess`),Lf=X(`newdocument_content`),Rf=X(`paste_webkit_styles`),zf=X(`paste_remove_styles_if_webkit`),Bf=X(`paste_merge_formats`),Vf=X(`smart_paste`),Hf=X(`paste_as_text`),Uf=X(`paste_tab_spaces`),Wf=X(`allow_html_data_urls`),Gf=X(`text_patterns`),Kf=X(`text_patterns_lookup`),qf=X(`noneditable_class`),Jf=X(`editable_class`),Yf=X(`noneditable_regexp`),Xf=X(`preserve_cdata`),Zf=X(`highlight_on_focus`),Qf=X(`xss_sanitization`),$f=X(`init_content_sync`),ep=e=>e.options.isSet(`text_patterns_lookup`),tp=e=>B.explode(e.options.get(`font_size_style_values`)),np=e=>B.explode(e.options.get(`font_size_classes`)),rp=e=>e.options.get(`encoding`)===`xml`,ip=e=>B.explode(e.options.get(`images_file_types`)),ap=X(`table_tab_navigation`),op=X(`details_initial_state`),sp=X(`details_serialized_state`),cp=U,lp=W,up=e=>{let t=e.parentNode;t&&t.removeChild(e)},dp=e=>{let t=uo(e);return{count:e.length-t.length,text:t}},fp=e=>{let t;for(;(t=e.data.lastIndexOf(`﻿`))!==-1;)e.deleteData(t,1)},pp=(e,t)=>(yp(e),t),mp=(e,t)=>{let n=dp(e.data.substr(0,t.offset())),r=dp(e.data.substr(t.offset()));return(n.text+r.text).length>0?(fp(e),Y(e,t.offset()-n.count)):t},hp=(e,t)=>{let n=t.container(),r=pe(Pe(n.childNodes),e).map(e=>e<t.offset()?Y(n,t.offset()-1):t).getOr(t);return yp(e),r},gp=(e,t)=>lp(e)&&t.container()===e?mp(e,t):pp(e,t),_p=(e,t)=>t.container()===e.parentNode?hp(e,t):pp(e,t),vp=(e,t)=>Y.isTextPosition(t)?gp(e,t):_p(e,t),yp=e=>{cp(e)&&go(e)&&(_o(e)?e.removeAttribute(`data-mce-caret`):up(e)),lp(e)&&(fp(e),e.data.length===0&&up(e))},bp=Ta,xp=Oa,Sp=Ea,Cp=(e,t,n)=>{let r=Ml(t.getBoundingClientRect(),n),i,a;if(e.tagName===`BODY`){let t=e.ownerDocument.documentElement;i=e.scrollLeft||t.scrollLeft,a=e.scrollTop||t.scrollTop}else{let t=e.getBoundingClientRect();i=e.scrollLeft-t.left,a=e.scrollTop-t.top}r.left+=i,r.right+=i,r.top+=a,r.bottom+=a,r.width=1;let o=t.offsetWidth-t.clientWidth;return o>0&&(n&&(o*=-1),r.left+=o,r.right+=o),r},wp=e=>{var t,n;let r=H(V.fromDom(e),`*[contentEditable=false],video,audio,embed,object`);for(let e=0;e<r.length;e++){let i=r[e].dom,a=i.previousSibling;if(Co(a)){let e=a.data;e.length===1?(t=a.parentNode)==null||t.removeChild(a):a.deleteData(e.length-1,1)}a=i.nextSibling,So(a)&&(a.data.length===1?(n=a.parentNode)==null||n.removeChild(a):a.deleteData(0,1))}},Tp=(e,t,n,r)=>{let i=tl(),a,o,s=Sd(e),c=e.dom,l=(e,r)=>{let a;if(u(),Sp(r))return null;if(n(r)){let n=xo(s,r,e),l=Cp(t,r,e);c.setStyle(n,`top`,l.top),o=n;let u=c.create(`div`,{class:`mce-visual-caret`,"data-mce-bogus":`all`});c.setStyles(u,{...l}),c.add(t,u),i.set({caret:u,element:r,before:e}),e&&c.addClass(u,`mce-visual-caret-before`),d(),a=r.ownerDocument.createRange(),a.setStart(n,0),a.setEnd(n,0)}else return o=vo(r,e),a=r.ownerDocument.createRange(),Dp(o.nextSibling)?(a.setStart(o,0),a.setEnd(o,0)):(a.setStart(o,1),a.setEnd(o,1)),a;return a},u=()=>{wp(t),o&&=(yp(o),null),i.on(e=>{c.remove(e.caret),i.clear()}),a&&=(clearInterval(a),void 0)},d=()=>{a=setInterval(()=>{i.on(e=>{r()?c.toggleClass(e.caret,`mce-visual-caret-hidden`):c.addClass(e.caret,`mce-visual-caret-hidden`)})},500)};return{show:l,hide:u,getCss:()=>`.mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}`,reposition:()=>{i.on(e=>{let n=Cp(t,e.element,e.before);c.setStyles(e.caret,{...n})})},destroy:()=>clearInterval(a)}},Ep=()=>fn.browser.isFirefox(),Dp=e=>bp(e)||xp(e),Op=e=>(Dp(e)||ma(e)&&Ep())&&Or(V.fromDom(e)).exists(li),kp=wa,Ap=Ta,jp=Oa,Mp=la(`display`,`block table table-cell table-caption list-item`),Np=go,Pp=mo,Fp=U,Ip=W,Lp=Fo,Rp=e=>e>0,zp=e=>e<0,Bp=(e,t)=>{let n;for(;n=e(t);)if(!Pp(n))return n;return null},Vp=(e,t,n,r,i)=>{let a=new ia(e,r),o=Ap(e)||Pp(e),s;if(zp(t)){if(o&&(s=Bp(a.prev.bind(a),!0),n(s)))return s;for(;s=Bp(a.prev.bind(a),i);)if(n(s))return s}if(Rp(t)){if(o&&(s=Bp(a.next.bind(a),!0),n(s)))return s;for(;s=Bp(a.next.bind(a),i);)if(n(s))return s}return null},Hp=(e,t)=>ei(V.fromDom(e),e=>kp(e.dom),e=>e.dom===t).map(e=>e.dom).getOr(t),Up=(e,t)=>{for(;e&&e!==t;){if(Mp(e))return e;e=e.parentNode}return null},Wp=(e,t,n)=>Up(e.container(),n)===Up(t.container(),n),Gp=(e,t)=>{if(!t)return P.none();let n=t.container(),r=t.offset();return Fp(n)?P.from(n.childNodes[r+e]):P.none()},Kp=(e,t)=>{let n=(t.ownerDocument??document).createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},qp=(e,t,n)=>Up(t,e)===Up(n,e),Jp=(e,t,n)=>{let r=e?`previousSibling`:`nextSibling`,i=n;for(;i&&i!==t;){let e=i[r];if(e&&Np(e)&&(e=e[r]),Ap(e)||jp(e)){if(qp(t,e,i))return e;break}if(Lp(e))break;i=i.parentNode}return null},Yp=A(Kp,!0),Xp=A(Kp,!1),Zp=(e,t,n)=>{let r,i=A(Jp,!0,t),a=A(Jp,!1,t),o=n.startContainer,s=n.startOffset;if(mo(o)){let e=Ip(o)?o.parentNode:o,t=e.getAttribute(`data-mce-caret`);if(t===`before`&&(r=e.nextSibling,Op(r)))return Yp(r);if(t===`after`&&(r=e.previousSibling,Op(r)))return Xp(r)}if(!n.collapsed)return n;if(W(o)){if(Np(o)){if(e===1){if(r=a(o),r)return Yp(r);if(r=i(o),r)return Xp(r)}if(e===-1){if(r=i(o),r)return Xp(r);if(r=a(o),r)return Yp(r)}return n}if(Co(o)&&s>=o.data.length-1)return e===1&&(r=a(o),r)?Yp(r):n;if(So(o)&&s<=1)return e===-1&&(r=i(o),r)?Xp(r):n;if(s===o.data.length)return r=a(o),r?Yp(r):n;if(s===0)return r=i(o),r?Xp(r):n}return n},Qp=(e,t)=>Gp(e?0:-1,t).filter(Ap),$p=(e,t,n)=>{let r=Zp(e,t,n);return e===-1?Y.fromRangeStart(r):Y.fromRangeEnd(r)},em=e=>P.from(e.getNode()).map(V.fromDom),tm=e=>P.from(e.getNode(!0)).map(V.fromDom),nm=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},rm=(e,t)=>{let n=Wp(e,t);return!n&&Sa(e.getNode())?!0:n};var im;(function(e){e[e.Backwards=-1]=`Backwards`,e[e.Forwards=1]=`Forwards`})(im||={});let am=Ta,om=W,sm=U,cm=Sa,lm=Fo,um=Bo,dm=Vo,fm=(e,t)=>{let n=[],r=e;for(;r&&r!==t;)n.push(r),r=r.parentNode;return n},pm=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,mm=(e,t)=>{if(Rp(e)){if(lm(t.previousSibling)&&!om(t.previousSibling))return Y.before(t);if(om(t))return Y(t,0)}if(zp(e)){if(lm(t.nextSibling)&&!om(t.nextSibling))return Y.after(t);if(om(t))return Y(t,t.data.length)}return zp(e)?cm(t)?Y.before(t):Y.after(t):Y.before(t)},hm=(e,t)=>{let n=t.nextSibling;return n&&lm(n)?om(n)?Y(n,0):Y.before(n):gm(im.Forwards,Y.after(t),e)},gm=(e,t,n)=>{let r,i,a,o;if(!sm(n)||!t)return null;if(t.isEqual(Y.after(n))&&n.lastChild){if(o=Y.after(n.lastChild),zp(e)&&lm(n.lastChild)&&sm(n.lastChild))return cm(n.lastChild)?Y.before(n.lastChild):o}else o=t;let s=o.container(),c=o.offset();if(om(s)){if(zp(e)&&c>0)return Y(s,--c);if(Rp(e)&&c<s.length)return Y(s,++c);r=s}else{if(zp(e)&&c>0&&(i=pm(s,c-1),lm(i)))return!um(i)&&(a=Vp(i,e,dm,i),a)?om(a)?Y(a,a.data.length):Y.after(a):om(i)?Y(i,i.data.length):Y.before(i);if(Rp(e)&&c<s.childNodes.length&&(i=pm(s,c),lm(i)))return cm(i)?hm(n,i):!um(i)&&(a=Vp(i,e,dm,i),a)?om(a)?Y(a,0):Y.before(a):om(i)?Y(i,0):Y.after(i);r=i||o.getNode()}if(r&&(Rp(e)&&o.isAtEnd()||zp(e)&&o.isAtStart())&&(r=Vp(r,e,N,n,!0),dm(r,n)))return mm(e,r);i=r&&Vp(r,e,dm,n);let l=st(I(fm(s,n),am));return l&&(!i||!l.contains(i))?(o=Rp(e)?Y.after(l):Y.before(l),o):i?mm(e,i):null},_m=e=>({next:t=>gm(im.Forwards,t,e),prev:t=>gm(im.Backwards,t,e)}),vm=(e,t,n)=>Tm(e,t,e?Y.before(n):Y.after(n)),ym=e=>Sa(e)?Y.before(e):Y.after(e),bm=e=>Y.isTextPosition(e)?e.offset()===0:Fo(e.getNode()),xm=e=>{if(Y.isTextPosition(e)){let t=e.container();return e.offset()===t.data.length}else return Fo(e.getNode(!0))},Sm=(e,t)=>!Y.isTextPosition(e)&&!Y.isTextPosition(t)&&e.getNode()===t.getNode(!0),Cm=e=>!Y.isTextPosition(e)&&Sa(e.getNode()),wm=(e,t,n)=>e?!Sm(t,n)&&!Cm(t)&&xm(t)&&bm(n):!Sm(n,t)&&bm(t)&&xm(n),Tm=(e,t,n)=>{let r=_m(t);return P.from(e?r.next(n):r.prev(n))},Em=(e,t,n)=>Tm(e,t,n).bind(r=>Wp(n,r,t)&&wm(e,n,r)?Tm(e,t,r):P.some(r)),Dm=(e,t,n,r)=>Em(e,t,n).bind(n=>r(n)?Dm(e,t,n,r):P.some(n)),Om=(e,t)=>{let n=e?t.firstChild:t.lastChild;return W(n)?P.some(Y(n,e?0:n.data.length)):n?Fo(n)?P.some(e?Y.before(n):ym(n)):vm(e,t,n):P.none()},km=A(Tm,!0),Am=A(Tm,!1),jm=A(Om,!0),Mm=A(Om,!1),Nm=`_mce_caret`,Pm=e=>U(e)&&e.id===Nm,Fm=(e,t)=>{let n=t;for(;n&&n!==e;){if(Pm(n))return n;n=n.parentNode}return null},Im=e=>v(e.start),Lm=e=>Je(e,`rng`),Rm=e=>Je(e,`id`),zm=e=>Je(e,`name`),Bm=e=>B.isArray(e.start),Vm=e=>!zm(e)&&S(e.forward)?e.forward:!0,Hm=(e,t)=>(U(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML=`<br data-mce-bogus="1" />`),t),Um=(e,t)=>Cn(P.from(ju(e.getRoot(),t.start)),P.from(ju(e.getRoot(),t.end)),(n,r)=>{let i=e.createRng();return i.setStart(n.container(),n.offset()),i.setEnd(r.container(),r.offset()),{range:i,forward:Vm(t)}}),Wm=(e,t)=>{let n=(e.ownerDocument??document).createTextNode(`﻿`);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},Gm=e=>!e.hasChildNodes(),Km=(e,t)=>Mm(e).fold(M,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)),qm=(e,t,n)=>Gm(t)&&Fm(e,t)?(Wm(t,n),!0):!1,Jm=(e,t,n,r)=>{let i=n[t?`start`:`end`],a=e.getRoot();if(i){let e=a,n=i[0];for(let t=i.length-1;e&&t>=1;t--){let n=e.childNodes;if(qm(a,e,r))return!0;if(i[t]>n.length-1)return qm(a,e,r)?!0:Km(e,r);e=n[i[t]]}W(e)&&(n=Math.min(i[0],e.data.length)),U(e)&&(n=Math.min(i[0],e.childNodes.length)),t?r.setStart(e,n):r.setEnd(e,n)}return!0},Ym=e=>W(e)&&e.data.length>0,Xm=(e,t,n)=>{let r=e.get(n.id+`_`+t),i=r?.parentNode,a=n.keep;if(r&&i){let o,s;if(t===`start`?a?r.hasChildNodes()?(o=r.firstChild,s=1):Ym(r.nextSibling)?(o=r.nextSibling,s=0):Ym(r.previousSibling)?(o=r.previousSibling,s=r.previousSibling.data.length):(o=i,s=e.nodeIndex(r)+1):(o=i,s=e.nodeIndex(r)):a?r.hasChildNodes()?(o=r.firstChild,s=1):Ym(r.previousSibling)?(o=r.previousSibling,s=r.previousSibling.data.length):(o=i,s=e.nodeIndex(r)):(o=i,s=e.nodeIndex(r)),!a){let i=r.previousSibling,a=r.nextSibling;B.each(B.grep(r.childNodes),e=>{W(e)&&(e.data=e.data.replace(/\uFEFF/g,``))});let c;for(;c=e.get(n.id+`_`+t);)e.remove(c,!0);if(W(a)&&W(i)&&!fn.browser.isOpera()){let t=i.data.length;i.appendData(a.data),e.remove(a),o=i,s=t}}return P.some(Y(o,s))}else return P.none()},Zm=(e,t)=>{let n=e.createRng();return Jm(e,!0,t,n)&&Jm(e,!1,t,n)?P.some({range:n,forward:Vm(t)}):P.none()},Qm=(e,t)=>{let n=Xm(e,`start`,t);return Cn(n,Xm(e,`end`,t).or(n),(n,r)=>{let i=e.createRng();return i.setStart(Hm(e,n.container()),n.offset()),i.setEnd(Hm(e,r.container()),r.offset()),{range:i,forward:Vm(t)}})},$m=(e,t)=>P.from(e.select(t.name)[t.index]).map(t=>{let n=e.createRng();return n.selectNode(t),{range:n,forward:!0}}),eh=(e,t)=>{let n=e.dom;if(t){if(Bm(t))return Zm(n,t);if(Im(t))return Um(n,t);if(Rm(t))return Qm(n,t);if(zm(t))return $m(n,t);if(Lm(t))return P.some({range:t.rng,forward:Vm(t)})}return P.none()},th=(e,t,n)=>Ku(e,t,n),nh=(e,t)=>{eh(e,t).each(({range:t,forward:n})=>{e.setRng(t,n)})},rh=e=>U(e)&&e.tagName===`SPAN`&&e.getAttribute(`data-mce-type`)===`bookmark`,ih=(e=>t=>e===t)(`\xA0`),ah=e=>e!==``&&` \f
\r	\v`.indexOf(e)!==-1,oh=e=>!ah(e)&&!ih(e)&&!ja(e),sh=e=>({value:ch(e)}),ch=e=>bt(e,`#`).toUpperCase(),lh=e=>{let t=e.toString(16);return(t.length===1?`0`+t:t).toUpperCase()},uh=e=>sh(lh(e.red)+lh(e.green)+lh(e.blue)),dh=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Q=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,fh=(e,t,n,r)=>({red:e,green:t,blue:n,alpha:r}),ph=(e,t,n,r)=>fh(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseFloat(r)),mh=e=>{if(e===`transparent`)return P.some(fh(0,0,0,0));let t=dh.exec(e);if(t!==null)return P.some(ph(t[1],t[2],t[3],`1`));let n=Q.exec(e);return n===null?P.none():P.some(ph(n[1],n[2],n[3],n[4]))},hh=e=>mh(e).map(uh).map(e=>`#`+e.value).getOr(e),gh=e=>{let t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},_h=e=>Te(e,e=>{let t=Hl(e);return t?[V.fromDom(t)]:[]}),vh=e=>gh(e).length>1,yh=e=>I(_h(e),eo),bh=e=>H(e,`td[data-mce-selected],th[data-mce-selected]`),xh=(e,t)=>{let n=bh(t);return n.length>0?n:yh(e)},Sh=e=>xh(gh(e.selection.getSel()),V.fromDom(e.getBody())),Ch=(e,t)=>ai(e,`table`,t),wh=e=>{let t=e.startContainer,n=e.startOffset;return W(t)?n===0?P.some(V.fromDom(t)):P.none():P.from(t.childNodes[n]).map(V.fromDom)},Th=e=>{let t=e.endContainer,n=e.endOffset;return W(t)?n===t.data.length?P.some(V.fromDom(t)):P.none():P.from(t.childNodes[n-1]).map(V.fromDom)},Eh=e=>Lr(e).fold(k([e]),t=>[e].concat(Eh(t))),Dh=e=>Rr(e).fold(k([e]),t=>Pn(t)===`br`?jr(t).map(t=>[e].concat(Dh(t))).getOr([]):[e].concat(Dh(t))),Oh=(e,t)=>Cn(wh(t),Th(t),(t,n)=>{let r=Se(Eh(e),A(xr,t)),i=Se(Dh(e),A(xr,n));return r.isSome()&&i.isSome()}).getOr(!1),kh=(e,t,n,r)=>{let i=n,a=new ia(n,i),o=We(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!me([`td`,`th`,`table`],t.toLowerCase())),s=n;do{if(W(s)&&B.trim(s.data).length!==0){r?t.setStart(s,0):t.setEnd(s,s.data.length);return}if(o[s.nodeName]){r?t.setStartBefore(s):s.nodeName===`BR`?t.setEndBefore(s):t.setEndAfter(s);return}}while(s=r?a.next():a.prev());i.nodeName===`BODY`&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},Ah=e=>{let t=e.selection.getSel();return w(t)&&t.rangeCount>0},jh=(e,t)=>{let n=Sh(e);n.length>0?F(n,n=>{let r=n.dom,i=e.dom.createRng();i.setStartBefore(r),i.setEndAfter(r),t(i,!0)}):t(e.selection.getRng(),!1)},Mh=(e,t,n)=>{let r=Gu(e,t);n(r),e.moveToBookmark(r)},Nh=e=>E(e?.nodeType),Ph=e=>U(e)&&!rh(e)&&!Pm(e)&&!fa(e),Fh=(e,t)=>{if(Ph(t)&&!/^(TD|TH)$/.test(t.nodeName)){let n=e.getAttrib(t,`data-mce-selected`),r=parseInt(n,10);return!isNaN(r)&&r>0}else return!1},Ih=e=>e.isContentEditable===!0,Lh=(e,t,n)=>{let{selection:r,dom:i}=e,a=r.getNode(),o=Ta(a);Mh(r,!0,()=>{t()}),o&&Ta(a)&&i.isChildOf(a,e.getBody())?e.selection.select(a):n(r.getStart())&&Rh(i,r)},Rh=(e,t)=>{let n=t.getRng(),{startContainer:r,startOffset:i}=n;if(!Fh(e,t.getNode())&&U(r)){let a=r.childNodes,o=e.getRoot(),s;if(i<a.length){let t=a[i];s=new ia(t,e.getParent(t,e.isBlock)??o)}else{let t=a[a.length-1];s=new ia(t,e.getParent(t,e.isBlock)??o),s.next(!0)}for(let r=s.current();r;r=s.next())if(e.getContentEditable(r)===`false`)return;else if(W(r)&&!Hh(r)){n.setStart(r,0),t.setRng(n);return}}},zh=(e,t,n)=>{if(e){let r=t?`nextSibling`:`previousSibling`;for(e=n?e:e[r];e;e=e[r])if(U(e)||!Hh(e))return e}},Bh=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||ys(e,t),Vh=(e,t,n)=>e.schema.isValidChild(t,n),Hh=(e,t=!1)=>w(e)&&W(e)?Uo(t?e.data.replace(/ /g,`\xA0`):e.data):!1,Uh=e=>w(e)&&W(e)&&e.length===0,Wh=(e,t)=>{let n=`[data-mce-cef-wrappable]`,r=cf(e),i=kt(r)?n:`${n},${r}`;return _r(V.fromDom(t),i)},Gh=(e,t)=>{let n=e.dom;return Ph(t)&&n.getContentEditable(t)===`false`&&Wh(e,t)&&n.select(`[contenteditable="true"]`,t).length===0},Kh=(e,t)=>T(e)?e(t):(w(t)&&(e=e.replace(/%(\w+)/g,(e,n)=>t[n]||e)),e),qh=(e,t)=>(e||=``,t||=``,e=``+(e.nodeName||e),t=``+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Jh=(e,t)=>{if(te(e))return null;{let n=String(e);return(t===`color`||t===`backgroundColor`)&&(n=hh(n)),t===`fontWeight`&&e===700&&(n=`bold`),t===`fontFamily`&&(n=n.replace(/[\'\"]/g,``).replace(/,\s+/g,`,`)),n}},Yh=(e,t,n)=>Jh(e.getStyle(t,n),n),Xh=(e,t)=>{let n;return e.getParent(t,t=>U(t)?(n=e.getStyle(t,`text-decoration`),!!n&&n!==`none`):!1),n},Zh=(e,t,n)=>e.getParents(t,n,e.getRoot()),Qh=(e,t,n)=>{let r=e.formatter.get(t);return w(r)&&he(r,n)},$h=(e,t)=>Qh(e,t,e=>{let t=e=>T(e)||e.length>1&&e.charAt(0)===`%`;return he([`styles`,`attributes`],n=>qe(e,n).exists(e=>he(x(e)?e:Ke(e),t)))}),eg=(e,t,n)=>{let r=[`inline`,`block`,`selector`,`attributes`,`styles`,`classes`],i=e=>We(e,(e,t)=>he(r,e=>e===t));return Qh(e,t,t=>{let r=i(t);return Qh(e,n,e=>Xe(r,i(e)))})},tg=e=>Ye(e,`block`),ng=e=>tg(e)&&e.wrapper===!0,rg=e=>tg(e)&&e.wrapper!==!0,ig=e=>Ye(e,`selector`),ag=e=>Ye(e,`inline`),og=e=>ig(e)&&ag(e)&&bn(qe(e,`mixed`),!0),sg=e=>ig(e)&&e.expand!==!1&&!ag(e),cg=rh,lg=Zh,ug=Hh,dg=Bh,fg=e=>Sa(e)&&e.getAttribute(`data-mce-bogus`)&&!e.nextSibling,pg=(e,t)=>{let n=t;for(;n;){if(U(n)&&e.getContentEditable(n))return e.getContentEditable(n)===`false`?n:t;n=n.parentNode}return t},mg=(e,t,n,r)=>{let i=t.data;if(e){for(let e=n;e>0;e--)if(r(i.charAt(e-1)))return e}else for(let e=n;e<i.length;e++)if(r(i.charAt(e)))return e;return-1},hg=(e,t,n)=>mg(e,t,n,e=>ih(e)||ah(e)),gg=(e,t,n)=>mg(e,t,n,oh),_g=(e,t,n,r,i,a)=>{let o,s=e.getParent(n,e.isBlock)||t,c=(t,n,r)=>{let a=kl(e),c=i?a.backwards:a.forwards;return P.from(c(t,n,(e,t)=>cg(e.parentNode)?-1:(o=e,r(i,e,t)),s))};return c(n,r,hg).bind(e=>a?c(e.container,e.offset+(i?-1:0),gg):P.some(e)).orThunk(()=>o?P.some({container:o,offset:i?0:o.length}):P.none())},vg=(e,t,n,r,i)=>{let a=r[i];W(r)&&kt(r.data)&&a&&(r=a);let o=lg(e,r);for(let r=0;r<o.length;r++)for(let i=0;i<t.length;i++){let a=t[i];if(!(w(a.collapsed)&&a.collapsed!==n.collapsed)&&ig(a)&&e.is(o[r],a.selector))return o[r]}return r},yg=(e,t,n,r)=>{let i=n,a=e.getRoot(),o=t[0];if(tg(o)&&(i=o.wrapper?null:e.getParent(n,o.block,a)),!i){let t=e.getParent(n,`LI,TD,TH`)??a;i=e.getParent(W(n)?n.parentNode:n,t=>t!==a&&dg(e.schema,t),t)}if(i&&tg(o)&&o.wrapper&&(i=lg(e,i,`ul,ol`).reverse()[0]||i),!i)for(i=n;i&&i[r]&&!e.isBlock(i[r])&&(i=i[r],!qh(i,`br`)););return i||n},bg=(e,t,n,r)=>{let i=n.parentNode;return w(n[r])?!1:i===t||te(i)||e.isBlock(i)?!0:bg(e,t,i,r)},xg=(e,t,n,r,i)=>{let a=n,o=i?`previousSibling`:`nextSibling`,s=e.getRoot();if(W(n)&&!ug(n)&&(i?r>0:r<n.data.length))return n;for(;a;){if(!t[0].block_expand&&e.isBlock(a))return a;for(let t=a[o];t;t=t[o]){let n=W(t)&&!bg(e,s,t,o);if(!cg(t)&&!fg(t)&&!ug(t,n))return a}if(a===s||a.parentNode===s){n=a;break}a=a.parentNode}return n},Sg=e=>cg(e.parentNode)||cg(e),Cg=(e,t,n,r=!1)=>{let{startContainer:i,startOffset:a,endContainer:o,endOffset:s}=t,c=n[0];return U(i)&&i.hasChildNodes()&&(i=Ul(i,a),W(i)&&(a=0)),U(o)&&o.hasChildNodes()&&(o=Ul(o,t.collapsed?s:s-1),W(o)&&(s=o.data.length)),i=pg(e,i),o=pg(e,o),Sg(i)&&(i=cg(i)?i:i.parentNode,i=t.collapsed?i.previousSibling||i:i.nextSibling||i,W(i)&&(a=t.collapsed?i.length:0)),Sg(o)&&(o=cg(o)?o:o.parentNode,o=t.collapsed?o.nextSibling||o:o.previousSibling||o,W(o)&&(s=t.collapsed?0:o.length)),t.collapsed&&(_g(e,e.getRoot(),i,a,!0,r).each(({container:e,offset:t})=>{i=e,a=t}),_g(e,e.getRoot(),o,s,!1,r).each(({container:e,offset:t})=>{o=e,s=t})),(ag(c)||c.block_expand)&&((!ag(c)||!W(i)||a===0)&&(i=xg(e,n,i,a,!0)),(!ag(c)||!W(o)||s===o.data.length)&&(o=xg(e,n,o,s,!1))),sg(c)&&(i=vg(e,n,t,i,`previousSibling`),o=vg(e,n,t,o,`nextSibling`)),(tg(c)||ig(c))&&(i=yg(e,n,i,`previousSibling`),o=yg(e,n,o,`nextSibling`),tg(c)&&(e.isBlock(i)||(i=xg(e,n,i,a,!0)),e.isBlock(o)||(o=xg(e,n,o,s,!1)))),U(i)&&i.parentNode&&(a=e.nodeIndex(i),i=i.parentNode),U(o)&&o.parentNode&&(s=e.nodeIndex(o)+1,o=o.parentNode),{startContainer:i,startOffset:a,endContainer:o,endOffset:s}},wg=(e,t,n)=>{let r=t.startOffset,i=Ul(t.startContainer,r),a=t.endOffset,o=Ul(t.endContainer,a-1),s=e=>{let t=e[0];W(t)&&t===i&&r>=t.data.length&&e.splice(0,1);let n=e[e.length-1];return a===0&&e.length>0&&n===o&&W(n)&&e.splice(e.length-1,1),e},c=(e,t,n)=>{let r=[];for(;e&&e!==n;e=e[t])r.push(e);return r},l=(t,n)=>e.getParent(t,e=>e.parentNode===n,n),u=(e,t,r)=>{let i=r?`nextSibling`:`previousSibling`;for(let a=e,o=a.parentNode;a&&a!==t;a=o){o=a.parentNode;let t=c(a===e?a:a[i],i);t.length&&(r||t.reverse(),n(s(t)))}};if(i===o)return n(s([i]));let d=e.findCommonAncestor(i,o)??e.getRoot();if(e.isChildOf(i,o))return u(i,d,!0);if(e.isChildOf(o,i))return u(o,d);let f=l(i,d)||i,p=l(o,d)||o;u(i,f,!0);let m=c(f===i?f:f.nextSibling,`nextSibling`,p===o?p.nextSibling:p);m.length&&n(s(m)),u(o,p)},Tg=[`pre[class*=language-][contenteditable="false"]`,`figure.image`,`div[data-ephox-embed-iri]`,`div.tiny-pageembed`,`div.mce-toc`,`div[data-mce-toc]`],Eg=e=>Bn(e)&&Pa(e)===`﻿`,Dg=(e,t,n,r)=>Dr(t).fold(()=>`skipping`,i=>r===`br`||Eg(t)?`valid`:fl(t)?`existing`:Pm(t.dom)?`caret`:he(Tg,e=>_r(t,e))?`valid-block`:!Vh(e,n,r)||!Vh(e,Pn(i),n)?`invalid-child`:`valid`),Og=(e,t)=>{let n=Cg(e.dom,t,[{inline:`span`}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},kg=(e,t,n,r,i,a)=>{let{uid:o=t,...s}=n;sr(e,il()),Gn(e,`${ol()}`,o),Gn(e,`${al()}`,r);let{attributes:c={},classes:l=[]}=i(o,s);if(Kn(e,c),xl(e,l),a){l.length>0&&Gn(e,`${cl()}`,l.join(`,`));let t=Le(c);t.length>0&&Gn(e,`${ll()}`,t.join(`,`))}},Ag=e=>{lr(e,il()),Xn(e,`${ol()}`),Xn(e,`${al()}`),Xn(e,`${sl()}`);let t=Jn(e,`${ll()}`).map(e=>e.split(`,`)).getOr([]),n=Jn(e,`${cl()}`).map(e=>e.split(`,`)).getOr([]);F(t,t=>Xn(e,t)),Sl(e,n),Xn(e,`${cl()}`),Xn(e,`${ll()}`)},jg=(e,t,n,r,i)=>{let a=V.fromTag(`span`,e);return kg(a,t,n,r,i,!1),a},Mg=(e,t,n,r,i,a)=>{let o=[],s=jg(e.getDoc(),n,a,r,i),c=tl(),l=()=>{c.clear()},u=()=>c.get().getOrThunk(()=>{let e=wl(s);return o.push(e),c.set(e),e}),d=e=>{F(e,f)},f=t=>{switch(Dg(e,t,`span`,Pn(t))){case`invalid-child`:l(),d(Fr(t)),l();break;case`valid-block`:l(),kg(t,n,a,r,i,!0);break;case`valid`:Ei(t,u());break}},p=e=>{d(ge(e,V.fromDom))};return wg(e.dom,t,e=>{l(),p(e)}),o},Ng=(e,t,n,r)=>{e.undoManager.transact(()=>{let i=e.selection,a=i.getRng(),o=Sh(e).length>0,s=bl(`mce-annotation`);if(a.collapsed&&!o&&Og(e,a),i.getRng().collapsed&&!o){let a=jg(e.getDoc(),s,r,t,n.decorate);Fi(a,`\xA0`),i.getRng().insertNode(a.dom),i.select(a.dom)}else Mh(i,!1,()=>{jh(e,i=>{Mg(e,i,s,t,n.decorate,r)})})})},Pg=e=>{let t=vl();_l(e,t);let n=gl(e,t),r=Un(`span`),i=e=>{F(e,e=>{r(e)?ji(e):Ag(e)})};return{register:(e,n)=>{t.register(e,n)},annotate:(n,r)=>{t.lookup(n).each(t=>{Ng(e,n,t,r)})},annotationChanged:(e,t)=>{n.addListener(e,t)},remove:t=>{dl(e,P.some(t)).each(({elements:t})=>{let n=e.selection.getBookmark();i(t),e.selection.moveToBookmark(n)})},removeAll:t=>{let n=e.selection.getBookmark();ze(hl(e,t),(e,t)=>{i(e)}),e.selection.moveToBookmark(n)},getAll:t=>L(hl(e,t),e=>ge(e,e=>e.dom))}},Fg=e=>({getBookmark:A(th,e),moveToBookmark:A(nh,e)});Fg.isBookmarkNode=rh;let Ig=(e,t,n)=>n.collapsed?!1:he(n.getClientRects(),n=>Ll(n,e,t)),Lg=(e,t)=>e.dispatch(`PreProcess`,t),Rg=(e,t)=>e.dispatch(`PostProcess`,t),zg=e=>{e.dispatch(`remove`)},Bg=e=>{e.dispatch(`detach`)},Vg=(e,t)=>{e.dispatch(`SwitchMode`,{mode:t})},Hg=(e,t,n,r,i)=>{e.dispatch(`ObjectResizeStart`,{target:t,width:n,height:r,origin:i})},Ug=(e,t,n,r,i)=>{e.dispatch(`ObjectResized`,{target:t,width:n,height:r,origin:i})},Wg=e=>{e.dispatch(`PreInit`)},Gg=e=>{e.dispatch(`PostRender`)},Kg=e=>{e.dispatch(`Init`)},qg=(e,t)=>{e.dispatch(`PlaceholderToggle`,{state:t})},Jg=(e,t,n)=>{e.dispatch(t,n)},Yg=(e,t,n,r)=>{e.dispatch(`FormatApply`,{format:t,node:n,vars:r})},Xg=(e,t,n,r)=>{e.dispatch(`FormatRemove`,{format:t,node:n,vars:r})},Zg=(e,t)=>e.dispatch(`BeforeSetContent`,t),Qg=(e,t)=>e.dispatch(`SetContent`,t),$g=(e,t)=>e.dispatch(`BeforeGetContent`,t),e_=(e,t)=>e.dispatch(`GetContent`,t),t_=(e,t)=>{e.dispatch(`AutocompleterStart`,t)},n_=(e,t)=>{e.dispatch(`AutocompleterUpdate`,t)},r_=e=>{e.dispatch(`AutocompleterEnd`)},i_=(e,t,n)=>e.dispatch(`PastePreProcess`,{content:t,internal:n}),a_=(e,t,n)=>e.dispatch(`PastePostProcess`,{node:t,internal:n}),o_=(e,t)=>e.dispatch(`PastePlainTextToggle`,{state:t}),s_=(e,t)=>e.dispatch(`EditableRootStateChange`,{state:t}),$={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||$.metaKeyPressed(e),metaKeyPressed:e=>fn.os.isMacOS()||fn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},c_=`data-mce-selected`,l_=Math.abs,u_=Math.round,d_={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},f_=e=>e.type===`longpress`||e.type.indexOf(`touch`)===0,p_=(e,t)=>{let n=t.dom,r=t.getDoc(),i=document,a=t.getBody(),o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x=e=>w(e)&&(Ca(e)||n.is(e,`figure.image`)),ee=e=>Oa(e)||n.hasClass(e,`mce-preview-object`),S=(e,t)=>{if(f_(e)){let n=e.touches[0];return x(e.target)&&!Ig(n.clientX,n.clientY,t)}else return x(e.target)&&!Ig(e.clientX,e.clientY,t)},C=e=>{let n=e.target;S(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(n)},te=e=>n.hasClass(e,`mce-preview-object`)&&w(e.firstElementChild)?[e,e.firstElementChild]:n.is(e,`figure.image`)?[e.querySelector(`img`)]:[e],T=e=>{let r=Jd(t);return!r||e.getAttribute(`data-mce-resize`)===`false`||e===t.getBody()?!1:n.hasClass(e,`mce-preview-object`)&&w(e.firstElementChild)?_r(V.fromDom(e.firstElementChild),r):_r(V.fromDom(e),r)},E=e=>ee(e)?n.create(`img`,{src:fn.transparentSrc}):e.cloneNode(!0),ne=(e,r,i)=>{w(i)&&F(te(e),e=>{e.style[r]||!t.schema.isValid(e.nodeName.toLowerCase(),r)?n.setStyle(e,r,i):n.setAttrib(e,r,``+i)})},D=(e,t,n)=>{ne(e,`width`,t),ne(e,`height`,n)},re=e=>{let r,i,u,S,C;r=e.screenX-d,i=e.screenY-f,_=r*l[2]+p,v=i*l[3]+m,_=_<5?5:_,v=v<5?5:v,u=(x(o)||ee(o))&&Yd(t)!==!1?!$.modifierPressed(e):$.modifierPressed(e),u&&(l_(r)>l_(i)?(v=u_(_*h),_=u_(v/h)):(_=u_(v/h),v=u_(_*h))),D(s,_,v),S=l.startPos.x+r,C=l.startPos.y+i,S=S>0?S:0,C=C>0?C:0,n.setStyles(c,{left:S,top:C,display:`block`}),c.innerHTML=_+` &times; `+v,l[2]<0&&s.clientWidth<=_&&n.setStyle(s,`left`,void 0+(p-_)),l[3]<0&&s.clientHeight<=v&&n.setStyle(s,`top`,void 0+(m-v)),r=a.scrollWidth-y,i=a.scrollHeight-b,r+i!==0&&n.setStyles(c,{left:S-r,top:C-i}),g||=(Hg(t,o,p,m,`corner-`+l.name),!0)},O=()=>{let e=g;g=!1,e&&(ne(o,`width`,_),ne(o,`height`,v)),n.unbind(r,`mousemove`,re),n.unbind(r,`mouseup`,O),i!==r&&(n.unbind(i,`mousemove`,re),n.unbind(i,`mouseup`,O)),n.remove(s),n.remove(c),n.remove(u),k(o),e&&(Ug(t,o,_,v,`corner-`+l.name),n.setAttrib(o,`style`,n.getAttrib(o,`style`))),t.nodeChanged()},k=e=>{oe();let g=n.getPos(e,a),x=g.x,ee=g.y,S=e.getBoundingClientRect(),C=S.width||S.right-S.left,w=S.height||S.bottom-S.top;o!==e&&(ae(),o=e,_=v=0);let ne=t.dispatch(`ObjectSelected`,{target:e});T(e)&&!ne.isDefaultPrevented()?ze(d_,(e,t)=>{let g=g=>{let _=te(o)[0];d=g.screenX,f=g.screenY,p=_.clientWidth,m=_.clientHeight,h=m/p,l=e,l.name=t,l.startPos={x:C*e[0]+x,y:w*e[1]+ee},y=a.scrollWidth,b=a.scrollHeight,u=n.add(a,`div`,{class:`mce-resize-backdrop`,"data-mce-bogus":`all`}),n.setStyles(u,{position:`fixed`,left:`0`,top:`0`,width:`100%`,height:`100%`}),s=E(o),n.addClass(s,`mce-clonedresizable`),n.setAttrib(s,`data-mce-bogus`,`all`),s.contentEditable=`false`,n.setStyles(s,{left:x,top:ee,margin:0}),D(s,C,w),s.removeAttribute(c_),a.appendChild(s),n.bind(r,`mousemove`,re),n.bind(r,`mouseup`,O),i!==r&&(n.bind(i,`mousemove`,re),n.bind(i,`mouseup`,O)),c=n.add(a,`div`,{class:`mce-resize-helper`,"data-mce-bogus":`all`},p+` &times; `+m)},_=n.get(`mceResizeHandle`+t);_&&n.remove(_),_=n.add(a,`div`,{id:`mceResizeHandle`+t,"data-mce-bogus":`all`,class:`mce-resizehandle`,unselectable:!0,style:`cursor:`+t+`-resize; margin:0; padding:0`}),n.bind(_,`mousedown`,e=>{e.stopImmediatePropagation(),e.preventDefault(),g(e)}),e.elm=_,n.setStyles(_,{left:C*e[0]+x-_.offsetWidth/2,top:w*e[1]+ee-_.offsetHeight/2})}):ae(!1)},ie=nl(k,0),ae=(e=!0)=>{ie.cancel(),oe(),o&&e&&o.removeAttribute(c_),ze(d_,(e,t)=>{let r=n.get(`mceResizeHandle`+t);r&&(n.unbind(r),n.remove(r))})},A=(e,t)=>n.isChildOf(e,t),j=r=>{if(g||t.removed||t.composing)return;let i=r.type===`mousedown`?r.target:e.getNode(),o=si(V.fromDom(i),`table,img,figure.image,hr,video,span.mce-preview-object,details`).map(e=>e.dom).filter(e=>n.isEditable(e.parentElement)).getOrUndefined(),s=w(o)?n.getAttrib(o,c_,`1`):`1`;if(F(n.select(`img[${c_}],hr[${c_}]`),e=>{e.removeAttribute(c_)}),w(o)&&A(o,a)&&t.hasFocus()&&(se(),A(e.getStart(!0),o)&&A(e.getEnd(!0),o))){n.setAttrib(o,c_,s),ie.throttle(o);return}ae()},oe=()=>{ze(d_,e=>{e.elm&&(n.unbind(e.elm),delete e.elm)})},se=()=>{try{t.getDoc().execCommand(`enableObjectResizing`,!1,`false`)}catch{}};return t.on(`init`,()=>{se(),t.on(`NodeChange ResizeEditor ResizeWindow ResizeContent drop`,j),t.on(`keyup compositionend`,e=>{o&&o.nodeName===`TABLE`&&j(e)}),t.on(`hide blur`,ae),t.on(`contextmenu longpress`,C,!0)}),t.on(`remove`,oe),{isResizable:T,showResizeRect:k,hideResizeRect:ae,updateResizeRect:j,destroy:()=>{ie.cancel(),o=s=u=null}}},m_=(e,t)=>{t.fold(t=>{e.setStartBefore(t.dom)},(t,n)=>{e.setStart(t.dom,n)},t=>{e.setStartAfter(t.dom)})},h_=(e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,n)=>{e.setEnd(t.dom,n)},t=>{e.setEndAfter(t.dom)})},g_=(e,t,n)=>{let r=e.document.createRange();return m_(r,t),h_(r,n),r},__=(e,t,n,r,i)=>{let a=e.document.createRange();return a.setStart(t.dom,n),a.setEnd(r.dom,i),a},v_=Zu.generate([{ltr:[`start`,`soffset`,`finish`,`foffset`]},{rtl:[`start`,`soffset`,`finish`,`foffset`]}]),y_=(e,t,n)=>t(V.fromDom(n.startContainer),n.startOffset,V.fromDom(n.endContainer),n.endOffset),b_=(e,t)=>t.match({domRange:e=>({ltr:k(e),rtl:P.none}),relative:(t,n)=>({ltr:R(()=>g_(e,t,n)),rtl:R(()=>P.some(g_(e,n,t)))}),exact:(t,n,r,i)=>({ltr:R(()=>__(e,t,n,r,i)),rtl:R(()=>P.some(__(e,r,i,t,n)))})}),x_=(e,t)=>{let n=t.ltr();return n.collapsed?t.rtl().filter(e=>e.collapsed===!1).map(e=>v_.rtl(V.fromDom(e.endContainer),e.endOffset,V.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>y_(e,v_.ltr,n)):y_(e,v_.ltr,n)},S_=(e,t)=>x_(e,b_(e,t));v_.ltr,v_.rtl;let C_={create:(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r})},w_=document.caretPositionFromPoint?(e,t,n)=>{var r;return P.from((r=e.dom).caretPositionFromPoint?.call(r,t,n)).bind(t=>{if(t.offsetNode===null)return P.none();let n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),P.some(n)})}:document.caretRangeFromPoint?(e,t,n)=>{var r;return P.from((r=e.dom).caretRangeFromPoint?.call(r,t,n))}:P.none,T_=(e,t,n)=>w_(V.fromDom(e.document),t,n).map(e=>C_.create(V.fromDom(e.startContainer),e.startOffset,V.fromDom(e.endContainer),e.endOffset)),E_=Zu.generate([{before:[`element`]},{on:[`element`,`offset`]},{after:[`element`]}]),D_={before:E_.before,on:E_.on,after:E_.after,cata:(e,t,n,r)=>e.fold(t,n,r),getStart:e=>e.fold(ie,ie,ie)},O_=Zu.generate([{domRange:[`rng`]},{relative:[`startSitu`,`finishSitu`]},{exact:[`start`,`soffset`,`finish`,`foffset`]}]),k_=e=>O_.exact(e.start,e.soffset,e.finish,e.foffset),A_=e=>e.match({domRange:e=>V.fromDom(e.startContainer),relative:(e,t)=>D_.getStart(e),exact:(e,t,n,r)=>e}),j_={domRange:O_.domRange,relative:O_.relative,exact:O_.exact,exactFromRange:k_,getWin:e=>Er(A_(e)),range:C_.create},M_=(e,t)=>{let n=Pn(e);return n===`input`?D_.after(e):me([`br`,`img`],n)?t===0?D_.before(e):D_.after(e):D_.on(e,t)},N_=(e,t)=>{let n=e.fold(D_.before,M_,D_.after),r=t.fold(D_.before,M_,D_.after);return j_.relative(n,r)},P_=(e,t,n,r)=>{let i=M_(e,t),a=M_(n,r);return j_.relative(i,a)},F_=e=>e.match({domRange:e=>{let t=V.fromDom(e.startContainer),n=V.fromDom(e.endContainer);return P_(t,e.startOffset,n,e.endOffset)},relative:N_,exact:P_}),I_=(e,t)=>{let n=(t||document).createDocumentFragment();return F(e,e=>{n.appendChild(e.dom)}),V.fromDom(n)},L_=e=>{let t=j_.getWin(e).dom,n=(e,n,r,i)=>__(t,e,n,r,i);return S_(t,F_(e)).match({ltr:n,rtl:n})},R_=(e,t,n)=>T_(e,t,n),z_=(e,t,n)=>R_(Er(V.fromDom(n)).dom,e,t).map(e=>{let t=n.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined(),B_=(e,t)=>w(e)&&w(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,V_=(e,t,n)=>{let r=e;for(;r&&r!==t;){if(n(r))return r;r=r.parentNode}return null},H_=(e,t,n)=>V_(e,t,n)!==null,U_=(e,t,n)=>H_(e,t,e=>e.nodeName===n),W_=(e,t)=>go(e)&&!H_(e,t,Pm),G_=(e,t,n)=>{let r=t.parentNode;if(r){let i=new ia(t,e.getParent(r,e.isBlock)||e.getRoot()),a;for(;a=i[n?`prev`:`next`]();)if(Sa(a))return!0}return!1},K_=(e,t)=>e.previousSibling?.nodeName===t,q_=(e,t)=>{let n=t;for(;n&&n!==e;){if(Ta(n))return!0;n=n.parentNode}return!1},J_=(e,t,n,r,i)=>{let a=e.getRoot(),o=e.schema.getNonEmptyElements(),s=i.parentNode,c,l;if(!s)return P.none();let u=e.getParent(s,e.isBlock)||a;if(r&&Sa(i)&&t&&e.isEmpty(u))return P.some(Y(s,e.nodeIndex(i)));let d=new ia(i,u);for(;l=d[r?`prev`:`next`]();){if(e.getContentEditableParent(l)===`false`||W_(l,a))return P.none();if(W(l)&&l.data.length>0)return U_(l,a,`A`)?P.none():P.some(Y(l,r?l.data.length:0));if(e.isBlock(l)||o[l.nodeName.toLowerCase()])return P.none();c=l}return ya(c)?P.none():n&&c?P.some(Y(c,0)):P.none()},Y_=(e,t,n,r)=>{let i=e.getRoot(),a,o=!1,s=n?r.startContainer:r.endContainer,c=n?r.startOffset:r.endOffset,l=U(s)&&c===s.childNodes.length,u=e.schema.getNonEmptyElements(),d=n;if(go(s))return P.none();if(U(s)&&c>s.childNodes.length-1&&(d=!1),ba(s)&&(s=i,c=0),s===i){if(d&&(a=s.childNodes[c>0?c-1:0],a&&(go(a)||u[a.nodeName]||ma(a))))return P.none();if(s.hasChildNodes()){if(c=Math.min(!d&&c>0?c-1:c,s.childNodes.length-1),s=s.childNodes[c],c=W(s)&&l?s.data.length:0,!t&&s===i.lastChild&&ma(s)||q_(i,s)||go(s))return P.none();if(s.hasChildNodes()&&!ma(s)){a=s;let t=new ia(s,i);do{if(Ta(a)||go(a)){o=!1;break}if(W(a)&&a.data.length>0){c=d?0:a.data.length,s=a,o=!0;break}if(u[a.nodeName.toLowerCase()]&&!Da(a)){c=e.nodeIndex(a),s=a.parentNode,d||c++,o=!0;break}}while(a=d?t.next():t.prev())}}}return t&&(W(s)&&c===0&&J_(e,l,t,!0,s).each(e=>{s=e.container(),c=e.offset(),o=!0}),U(s)&&(a=s.childNodes[c],a||=s.childNodes[c-1],a&&Sa(a)&&!K_(a,`A`)&&!G_(e,a,!1)&&!G_(e,a,!0)&&J_(e,l,t,!0,a).each(e=>{s=e.container(),c=e.offset(),o=!0}))),d&&!t&&W(s)&&c===s.data.length&&J_(e,l,t,!1,s).each(e=>{s=e.container(),c=e.offset(),o=!0}),o&&s?P.some(Y(s,c)):P.none()},X_=(e,t)=>{let n=t.collapsed,r=t.cloneRange(),i=Y.fromRangeStart(t);return Y_(e,n,!0,r).each(e=>{(!n||!Y.isAbove(i,e))&&r.setStart(e.container(),e.offset())}),n||Y_(e,n,!1,r).each(e=>{r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),B_(t,r)?P.none():P.some(r)},Z_=(e,t)=>e.splitText(t),Q_=e=>{let t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;if(t===r&&W(t)){if(n>0&&n<t.data.length)if(r=Z_(t,n),t=r.previousSibling,i>n){i-=n;let e=Z_(r,i).previousSibling;t=r=e,i=e.data.length,n=0}else i=0}else if(W(t)&&n>0&&n<t.data.length&&(t=Z_(t,n),n=0),W(r)&&i>0&&i<r.data.length){let e=Z_(r,i).previousSibling;r=e,i=e.data.length}return{startContainer:t,startOffset:n,endContainer:r,endOffset:i}},$_=e=>({walk:(t,n)=>wg(e,t,n),split:Q_,expand:(t,n={type:`word`})=>{if(n.type===`word`){let n=Cg(e,t,[{inline:`span`}]),r=e.createRng();return r.setStart(n.startContainer,n.startOffset),r.setEnd(n.endContainer,n.endOffset),r}return t},normalize:t=>X_(e,t).fold(M,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0))});$_.compareRanges=B_,$_.getCaretRangeFromPoint=z_,$_.getSelectedNode=Hl,$_.getNode=Ul;let ev=((e,t)=>{let n=(t,n)=>{if(!E(n)&&!n.match(/^[0-9]+$/))throw Error(e+`.set accepts only positive integer values. Value was `+n);let r=t.dom;di(r)&&(r.style[e]=n+`px`)},r=n=>{let r=t(n);if(r<=0||r===null){let t=gi(n,e);return parseFloat(t)||0}return r},i=r,a=(e,t)=>be(t,(t,n)=>{let r=gi(e,n),i=r===void 0?0:parseInt(r,10);return isNaN(i)?t:t+i},0);return{set:n,get:r,getOuter:i,aggregate:a,max:(e,t,n)=>{let r=a(e,n);return t>r?t-r:0}}})(`height`,e=>{let t=e.dom;return Qr(e)?t.getBoundingClientRect().height:t.offsetHeight}),tv=e=>ev.get(e),nv=()=>V.fromDom(document),rv=(e,t)=>e.view(t).fold(k([]),t=>{let n=rv(e,e.owner(t));return[t].concat(n)}),iv=(e,t)=>rv(t,t.owner(e));var av=Object.freeze({__proto__:null,view:e=>(e.dom===document?P.none():P.from(e.dom.defaultView?.frameElement)).map(V.fromDom),owner:e=>wr(e)});let ov=e=>{let t=Yi(nv()),n=iv(e,av),r=Ji(e),i=ye(n,(e,t)=>{let n=Ji(t);return{left:e.left+n.left,top:e.top+n.top}},{left:0,top:0});return Wi(i.left+r.left+t.left,i.top+r.top+t.top)},sv=e=>Pn(e)===`textarea`,cv=(e,t)=>e.dispatch(`ScrollIntoView`,t).isDefaultPrevented(),lv=(e,t)=>{e.dispatch(`AfterScrollIntoView`,t)},uv=(e,t)=>{let n=Fr(e);if(n.length===0||sv(e))return{element:e,offset:t};if(t<n.length&&!sv(n[t]))return{element:n[t],offset:0};{let r=n[n.length-1];return sv(r)?{element:e,offset:t}:Pn(r)===`img`?{element:r,offset:1}:Bn(r)?{element:r,offset:Pa(r).length}:{element:r,offset:Fr(r).length}}},dv=(e,t)=>{let n=qi(e),r=tv(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},fv=(e,t)=>{let n=uv(e,t),r=V.fromHtml(`<span data-mce-bogus="all" style="display: inline-block;">﻿</span>`);return Si(n.element,r),dv(r,()=>Ai(r))},pv=e=>dv(V.fromDom(e),D),mv=(e,t,n,r)=>{vv(e,(i,a)=>gv(e,t,n,r),n)},hv=(e,t,n,r,i)=>{let a={elm:r.element.dom,alignToTop:i};if(cv(e,a))return;let o=Yi(t).top;n(e,t,o,r,i),lv(e,a)},gv=(e,t,n,r)=>{let i=V.fromDom(e.getBody()),a=V.fromDom(e.getDoc());xi(i);let o=fv(V.fromDom(n.startContainer),n.startOffset);hv(e,a,t,o,r),o.cleanup()},_v=(e,t,n,r)=>{hv(e,V.fromDom(e.getDoc()),n,pv(t),r)},vv=(e,t,n)=>{let r=n.startContainer,i=n.startOffset,a=n.endContainer,o=n.endOffset;t(V.fromDom(r),V.fromDom(a));let s=e.dom.createRng();s.setStart(r,i),s.setEnd(a,o),e.selection.setRng(n)},yv=(e,t,n,r,i)=>{let a=t.pos;if(r)Xi(a.left,a.top,i);else{let r=a.top-n+t.height;Xi(-e.getBody().getBoundingClientRect().left,r,i)}},bv=(e,t,n,r,i,a)=>{let o=r+n,s=i.pos.top,c=i.bottom,l=c-s>=r;s<n?yv(e,i,r,a!==!1,t):s>o?yv(e,i,r,l?a!==!1:a===!0,t):c>o&&!l&&yv(e,i,r,a===!0,t)},xv=(e,t,n,r,i)=>{let a=Er(t).dom.innerHeight;bv(e,t,n,a,r,i)},Sv=(e,t,n,r,i)=>{let a=Er(t).dom.innerHeight;bv(e,t,n,a,r,i);let o=ov(r.element),s=ea(window);o.top<s.y?Zi(r.element,i!==!1):o.top>s.bottom&&Zi(r.element,i===!0)},Cv=(e,t,n)=>mv(e,xv,t,n),wv=(e,t,n)=>_v(e,t,xv,n),Tv=(e,t,n)=>mv(e,Sv,t,n),Ev=(e,t,n)=>_v(e,t,Sv,n),Dv=(e,t,n)=>{(e.inline?wv:Ev)(e,t,n)},Ov=(e,t,n)=>{(e.inline?Cv:Tv)(e,t,n)},kv=e=>e.dom.focus(),Av=e=>{let t=Gr(e).dom;return e.dom===t.activeElement},jv=(e=nv())=>P.from(e.dom.activeElement).map(V.fromDom),Mv=e=>jv(Gr(e)).filter(t=>e.dom.contains(t.dom)),Nv=(e,t)=>{let n=Bn(t)?Pa(t).length:Fr(t).length+1;return e>n?n:e<0?0:e},Pv=e=>j_.range(e.start,Nv(e.soffset,e.start),e.finish,Nv(e.foffset,e.finish)),Fv=(e,t)=>!oa(t.dom)&&(Sr(e,t)||xr(e,t)),Iv=e=>t=>Fv(e,t.start)&&Fv(e,t.finish),Lv=e=>e.inline||fn.browser.isFirefox(),Rv=e=>j_.range(V.fromDom(e.startContainer),e.startOffset,V.fromDom(e.endContainer),e.endOffset),zv=e=>{let t=e.getSelection();return(!t||t.rangeCount===0?P.none():P.from(t.getRangeAt(0))).map(Rv)},Bv=e=>zv(Er(e).dom).filter(Iv(e)),Vv=(e,t)=>P.from(t).filter(Iv(e)).map(Pv),Hv=e=>{let t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),P.some(t)}catch{return P.none()}},Uv=e=>{let t=Lv(e)?Bv(V.fromDom(e.getBody())):P.none();e.bookmark=t.isSome()?t:e.bookmark},Wv=e=>(e.bookmark?e.bookmark:P.none()).bind(t=>Vv(V.fromDom(e.getBody()),t)).bind(Hv),Gv=e=>{Wv(e).each(t=>e.selection.setRng(t))},Kv={isEditorUIElement:e=>{let t=e.className.toString();return t.indexOf(`tox-`)!==-1||t.indexOf(`mce-`)!==-1}},qv=(e,t)=>(E(t)||(t=0),setTimeout(e,t)),Jv=(e,t)=>(E(t)||(t=0),setInterval(e,t)),Yv={setEditorTimeout:(e,t,n)=>qv(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{let r=Jv(()=>{e.removed?clearInterval(r):t()},n);return r}},Xv=e=>e.type===`nodechange`&&e.selectionChange,Zv=(e,t)=>{let n=()=>{t.throttle()};Vc.DOM.bind(document,`mouseup`,n),e.on(`remove`,()=>{Vc.DOM.unbind(document,`mouseup`,n)})},Qv=(e,t)=>{e.on(`mouseup touchend`,e=>{t.throttle()})},$v=(e,t)=>{Qv(e,t),e.on(`keyup NodeChange AfterSetSelectionRange`,t=>{Xv(t)||Uv(e)})},ey=e=>{let t=nl(()=>{Uv(e)},0);e.on(`init`,()=>{e.inline&&Zv(e,t),$v(e,t)}),e.on(`remove`,()=>{t.cancel()})},ty,ny=Vc.DOM,ry=e=>U(e)&&Kv.isEditorUIElement(e),iy=e=>{let t=e.classList;return t===void 0?!1:t.contains(`tox-edit-area`)||t.contains(`tox-edit-area__iframe`)||t.contains(`mce-content-body`)},ay=(e,t)=>{let n=lf(e);return ny.getParent(t,t=>ry(t)||(n?e.dom.is(t,n):!1))!==null},oy=e=>{try{return jv(Gr(V.fromDom(e.getElement()))).fold(()=>document.body,e=>e.dom)}catch{return document.body}},sy=(e,t)=>{let n=t.editor;ey(n);let r=(e,t)=>{Zf(e)&&e.inline!==!0&&t(V.fromDom(e.getContainer()),`tox-edit-focus`)};n.on(`focusin`,()=>{let t=e.focusedEditor;iy(oy(n))&&r(n,sr),t!==n&&(t&&t.dispatch(`blur`,{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch(`focus`,{blurredEditor:t}),n.focus(!0))}),n.on(`focusout`,()=>{Yv.setEditorTimeout(n,()=>{let t=e.focusedEditor;(!iy(oy(n))||t!==n)&&r(n,lr),!ay(n,oy(n))&&t===n&&(n.dispatch(`blur`,{focusedEditor:null}),e.focusedEditor=null)})}),ty||(ty=t=>{let n=e.activeEditor;n&&Xr(t).each(t=>{let r=t;r.ownerDocument===document&&r!==document.body&&!ay(n,r)&&e.focusedEditor===n&&(n.dispatch(`blur`,{focusedEditor:null}),e.focusedEditor=null)})},ny.bind(document,`focusin`,ty))},cy=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&ty&&(ny.unbind(document,`focusin`,ty),ty=null)},ly=e=>{e.on(`AddEditor`,A(sy,e)),e.on(`RemoveEditor`,A(cy,e))},uy=(e,t)=>e.dom.getParent(t,t=>e.dom.getContentEditable(t)===`true`),dy=e=>e.collapsed?P.from(Ul(e.startContainer,e.startOffset)).map(V.fromDom):P.none(),fy=(e,t)=>dy(t).bind(t=>$a(t)?P.some(t):Sr(e,t)?P.none():P.some(e)),py=(e,t)=>{fy(V.fromDom(e.getBody()),t).bind(e=>jm(e.dom)).fold(()=>{e.selection.normalize()},t=>e.selection.setRng(t.toRange()))},my=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},hy=e=>Av(e)||Mv(e).isSome(),gy=e=>w(e.iframeElement)&&Av(V.fromDom(e.iframeElement)),_y=e=>{let t=e.getBody();return t&&hy(V.fromDom(t))},vy=e=>jv(Gr(V.fromDom(e.getElement()))).filter(t=>!iy(t.dom)&&ay(e,t.dom)).isSome(),yy=e=>e.inline?_y(e):gy(e),by=e=>yy(e)||vy(e),xy=e=>{let t=e.selection,n=e.getBody(),r=t.getRng();e.quirks.refreshContentEditable(),w(e.bookmark)&&!yy(e)&&Wv(e).each(t=>{e.selection.setRng(t),r=t});let i=uy(e,t.getNode());if(i&&e.dom.isChildOf(i,n)){my(i),py(e,r),Sy(e);return}e.inline||(fn.browser.isOpera()||my(n),e.getWin().focus()),(fn.browser.isFirefox()||e.inline)&&(my(n),py(e,r)),Sy(e)},Sy=e=>e.editorManager.setActive(e),Cy=(e,t)=>{e.removed||(t?Sy(e):xy(e))},wy=(e,t,n,r,i)=>{let a=n?t.startContainer:t.endContainer,o=n?t.startOffset:t.endOffset;return P.from(a).map(V.fromDom).map(e=>!r||!t.collapsed?Ir(e,i(e,o)).getOr(e):e).bind(e=>zn(e)?P.some(e):Dr(e).filter(zn)).map(e=>e.dom).getOr(e)},Ty=(e,t,n=!1)=>wy(e,t,!0,n,(e,t)=>Math.min(zr(e),t)),Ey=(e,t,n=!1)=>wy(e,t,!1,n,(e,t)=>t>0?t-1:t),Dy=(e,t)=>{let n=e;for(;e&&W(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},Oy=(e,t)=>{if(!t)return e;let n=t.startContainer,r=t.endContainer,i=t.startOffset,a=t.endOffset,o=t.commonAncestorContainer;t.collapsed||(n===r&&a-i<2&&n.hasChildNodes()&&(o=n.childNodes[i]),W(n)&&W(r)&&(n=n.length===i?Dy(n.nextSibling,!0):n.parentNode,r=a===0?Dy(r.previousSibling,!1):r.parentNode,n&&n===r&&(o=n)));let s=W(o)?o.parentNode:o;return U(s)?s:e},ky=(e,t,n,r)=>{let i=[],a=e.getRoot(),o=e.getParent(n||Ty(a,t,t.collapsed),e.isBlock),s=e.getParent(r||Ey(a,t,t.collapsed),e.isBlock);if(o&&o!==a&&i.push(o),o&&s&&o!==s){let t,n=new ia(o,a);for(;(t=n.next())&&t!==s;)e.isBlock(t)&&i.push(t)}return s&&o!==s&&s!==a&&i.push(s),i},Ay=(e,t,n)=>P.from(t).bind(t=>P.from(t.parentNode).map(r=>{let i=e.nodeIndex(t),a=e.createRng();return a.setStart(r,i),a.setEnd(r,i+1),n&&(kh(e,a,t,!0),kh(e,a,t,!1)),a})),jy=(e,t)=>ge(t,t=>{let n=e.dispatch(`GetSelectionRange`,{range:t});return n.range===t?t:n.range}),My=e=>Pn(e)===`img`?1:Fa(e).fold(()=>Fr(e).length,e=>e.length),Ny=e=>Fa(e).filter(e=>e.trim().length!==0||e.indexOf(`\xA0`)>-1).isSome(),Py=e=>Rn(e)&&qn(e,`contenteditable`)===`false`,Fy=[`img`,`br`],Iy=e=>Ny(e)||me(Fy,Pn(e))||Py(e),Ly=e=>ii(e,Iy),Ry=e=>zy(e,Iy),zy=(e,t)=>{let n=e=>{let r=Fr(e);for(let e=r.length-1;e>=0;e--){let i=r[e];if(t(i))return P.some(i);let a=n(i);if(a.isSome())return a}return P.none()};return n(e)},By=`[data-mce-autocompleter]`,Vy=(e,t)=>{if(Uy(V.fromDom(e.getBody())).isNone()){let n=V.fromHtml(`<span data-mce-autocompleter="1" data-mce-bogus="1"></span>`,e.getDoc());Ti(n,V.fromDom(t.extractContents())),t.insertNode(n.dom),Dr(n).each(e=>e.dom.normalize()),Ry(n).map(t=>{e.selection.setCursorLocation(t.dom,My(t))})}},Hy=e=>si(e,By),Uy=e=>oi(e,By),Wy=(e,t)=>Uy(t).each(t=>{let n=e.selection.getBookmark();ji(t),e.selection.moveToBookmark(n)}),Gy={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ky=(e,t,n)=>{let r=n?`lastChild`:`firstChild`,i=n?`prev`:`next`;if(e[r])return e[r];if(e!==t){let n=e[i];if(n)return n;for(let r=e.parent;r&&r!==t;r=r.parent)if(n=r[i],n)return n}},qy=e=>{let t=e.value??``;if(!Uo(t))return!1;let n=e.parent;return!(n&&(n.name!==`span`||n.attr(`style`))&&/^[ ]+$/.test(t))},Jy=e=>{let t=e.name===`a`&&!e.attr(`href`)&&e.attr(`id`);return e.attr(`name`)||e.attr(`id`)&&!e.firstChild||e.attr(`data-mce-bookmark`)||t};class Yy{static create(e,t){let n=new Yy(e,Gy[e]||1);return t&&ze(t,(e,t)=>{n.attr(t,e)}),n}constructor(e,t){this.name=e,this.type=t,t===1&&(this.attributes=[],this.attributes.map={})}replace(e){let t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t}attr(e,t){let n=this;if(!v(e))return w(e)&&ze(e,(e,t)=>{n.attr(t,e)}),n;let r=n.attributes;if(r){if(t!==void 0){if(t===null){if(e in r.map){delete r.map[e];let t=r.length;for(;t--;)if(r[t].name===e)return r.splice(t,1),n}return n}if(e in r.map){let n=r.length;for(;n--;)if(r[n].name===e){r[n].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}}clone(){let e=this,t=new Yy(e.name,e.type),n=e.attributes;if(n){let e=[];e.map={};for(let t=0,r=n.length;t<r;t++){let r=n[t];r.name!==`id`&&(e[e.length]={name:r.name,value:r.value},e.map[r.name]=r.value)}t.attributes=e}return t.value=e.value,t}wrap(e){let t=this;return t.parent&&(t.parent.insert(e,t),e.append(t)),t}unwrap(){let e=this;for(let t=e.firstChild;t;){let n=t.next;e.insert(t,e,!0),t=n}e.remove()}remove(){let e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r&&(r.next=n),t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n&&(n.prev=r),e.parent=e.next=e.prev=null),e}append(e){let t=this;e.parent&&e.remove();let n=t.lastChild;return n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,n){e.parent&&e.remove();let r=t.parent||this;return n?(t===r.firstChild?r.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=r,e}getAll(e){let t=this,n=[];for(let r=t.firstChild;r;r=Ky(r,t))r.name===e&&n.push(r);return n}children(){let e=this,t=[];for(let n=e.firstChild;n;n=n.next)t.push(n);return t}empty(){let e=this;if(e.firstChild){let t=[];for(let n=e.firstChild;n;n=Ky(n,e))t.push(n);let n=t.length;for(;n--;){let e=t[n];e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,t={},n){let r=this,i=r.firstChild;if(Jy(r))return!1;if(i)do{if(i.type===1){if(i.attr(`data-mce-bogus`))continue;if(e[i.name]||Jy(i))return!1}if(i.type===8||i.type===3&&!qy(i)||i.type===3&&i.parent&&t[i.parent.name]&&Uo(i.value??``)||n&&n(i))return!1}while(i=Ky(i,r));return!0}walk(e){return Ky(this,null,e)}}let Xy=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)),Zy=(e,t,n=0)=>{let r=e.toLowerCase();if(r.indexOf(`[if `,n)!==-1&&Xy(r,n)){let e=r.indexOf(`[endif]`,n);return r.indexOf(`>`,e)}else if(t){let e=r.indexOf(`>`,n);return e===-1?r.length:e}else{let t=/--!?>/g;t.lastIndex=n;let i=t.exec(e);return i?i.index+i[0].length:r.length}},Qy=(e,t,n)=>{let r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,i=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,a=e.getVoidElements(),o=1,s=n;for(;o!==0;)for(r.lastIndex=s;;){let e=r.exec(t);if(e===null)return s;if(e[1]===`!`){s=St(e[2],`--`)?Zy(t,!1,e.index+3):Zy(t,!0,e.index+1);break}else{i.lastIndex=r.lastIndex;let n=i.exec(t);if(ee(n)||n.index!==r.lastIndex)continue;e[1]===`/`?--o:Je(a,e[2])||(o+=1),s=r.lastIndex+n[0].length;break}}return s},$y=(e,t)=>{let n=new RegExp([`\\s?(`+e.join(`|`)+`)="[^"]+"`].join(`|`),`gi`);return t.replace(n,``)},eb=(e,t)=>{let n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema,i=$y(e.getTempAttrs(),t),a=r.getVoidElements(),o;for(;o=n.exec(i);){let e=n.lastIndex,t=o[0].length,s;s=a[o[1]]?e:Qy(r,i,e),i=i.substring(0,e-t)+i.substring(s),n.lastIndex=e-t}return uo(i)},tb=eb,nb=e=>{F(H(e,`[data-mce-bogus]`),e=>{qn(e,`data-mce-bogus`)===`all`?Ai(e):Ya(e)?(Si(e,V.fromText(`﻿`)),Ai(e)):ji(e)})},rb=e=>{F(H(e,`input`),e=>{Xn(e,`name`)})},ib=(e,t)=>{let n=Sd(e),r=RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\u00a0|<br \\/>|)<\\/${n}>[\r\n]*|<br \\/>[\r\n]*)$`);return t.replace(r,``)},ab=(e,t)=>{let n=e.getDoc(),r=Gr(V.fromDom(e.getBody())),i=V.fromTag(`div`,n);Gn(i,`data-mce-bogus`,`all`),hi(i,{position:`fixed`,left:`-9999999px`,top:`0`}),Fi(i,t.innerHTML),nb(i),rb(i),Ti(qr(r),i);let a=uo(i.dom.innerText);return Ai(i),a},ob=(e,t,n)=>{let r;return r=t.format===`raw`?B.trim(tb(e.serializer,n.innerHTML)):t.format===`text`?ab(e,n):t.format===`tree`?e.serializer.serialize(n,t):ib(e,e.serializer.serialize(n,t)),t.format!==`text`&&!to(V.fromDom(n))&&v(r)?B.trim(r):r},sb=(e,t)=>P.from(e.getBody()).fold(k(t.format===`tree`?new Yy(`body`,11):``),n=>ob(e,t,n)),cb=B.makeMap,lb=e=>{let t=[];e||={};let n=e.indent,r=cb(e.indent_before||``),i=cb(e.indent_after||``),a=Zs.getEncodeFunc(e.entity_encoding||`raw`,e.entities),o=e.element_format!==`xhtml`;return{start:(e,s,c)=>{if(n&&r[e]&&t.length>0){let e=t[t.length-1];e.length>0&&e!==`
`&&t.push(`
`)}if(t.push(`<`,e),s)for(let e=0,n=s.length;e<n;e++){let n=s[e];t.push(` `,n.name,`="`,a(n.value,!0),`"`)}if(!c||o?t[t.length]=`>`:t[t.length]=` />`,c&&n&&i[e]&&t.length>0){let e=t[t.length-1];e.length>0&&e!==`
`&&t.push(`
`)}},end:e=>{let r;t.push(`</`,e,`>`),n&&i[e]&&t.length>0&&(r=t[t.length-1],r.length>0&&r!==`
`&&t.push(`
`))},text:(e,n)=>{e.length>0&&(t[t.length]=n?e:a(e))},cdata:e=>{t.push(`<![CDATA[`,e,`]]>`)},comment:e=>{t.push(`<!--`,e,`-->`)},pi:(e,r)=>{r?t.push(`<?`,e,` `,a(r),`?>`):t.push(`<?`,e,`?>`),n&&t.push(`
`)},doctype:e=>{t.push(`<!DOCTYPE`,e,`>`,n?`
`:``)},reset:()=>{t.length=0},getContent:()=>t.join(``).replace(/\n$/,``)}},ub=(e={},t=hc())=>{let n=lb(e);return e.validate=`validate`in e?e.validate:!0,{serialize:r=>{let i=e.validate,a={3:e=>{n.text(e.value??``,e.raw)},8:e=>{n.comment(e.value??``)},7:e=>{n.pi(e.name,e.value)},10:e=>{n.doctype(e.value??``)},4:e=>{n.cdata(e.value??``)},11:e=>{let t=e;if(t=t.firstChild)do o(t);while(t=t.next)}};n.reset();let o=e=>{let r=a[e.type];if(r)r(e);else{let r=e.name,a=r in t.getVoidElements(),s=e.attributes;if(i&&s&&s.length>1){let n=[];n.map={};let r=t.getElementRule(e.name);if(r){for(let e=0,t=r.attributesOrder.length;e<t;e++){let t=r.attributesOrder[e];if(t in s.map){let e=s.map[t];n.map[t]=e,n.push({name:t,value:e})}}for(let e=0,t=s.length;e<t;e++){let t=s[e].name;if(!(t in n.map)){let e=s.map[t];n.map[t]=e,n.push({name:t,value:e})}}s=n}}if(n.start(r,s,a),!a){let t=e.firstChild;if(t){(r===`pre`||r===`textarea`)&&t.type===3&&t.value?.[0]===`
`&&n.text(`
`,!0);do o(t);while(t=t.next)}n.end(r)}}};return r.type===1&&!e.inner?o(r):r.type===3?a[3](r):a[11](r),n.getContent()}}},db=new Set;F(`margin.margin-left.margin-right.margin-top.margin-bottom.padding.padding-left.padding-right.padding-top.padding-bottom.border.border-width.border-style.border-color.background.background-attachment.background-clip.background-color.background-image.background-origin.background-position.background-repeat.background-size.float.position.left.right.top.bottom.z-index.display.transform.width.max-width.min-width.height.max-height.min-height.overflow.overflow-x.overflow-y.text-overflow.vertical-align.transition.transition-delay.transition-duration.transition-property.transition-timing-function`.split(`.`),e=>{db.add(e)});let fb=[`font`,`text-decoration`,`text-emphasis`],pb=(e,t)=>Le(e.parseStyle(e.getAttrib(t,`style`))),mb=e=>db.has(e),hb=(e,t)=>Ee(pb(e,t),e=>!mb(e)),gb=e=>I(e,e=>he(fb,t=>St(e,t))),_b=(e,t,n)=>{let r=pb(e,t),i=pb(e,n),a=r=>{let i=e.getStyle(t,r)??``,a=e.getStyle(n,r)??``;return Ot(i)&&Ot(a)&&i!==a};return he(r,e=>{let t=t=>he(t,t=>t===e);return!t(i)&&t(fb)?he(gb(i),a):a(e)})},vb=(e,t,n)=>P.from(n.container()).filter(W).exists(r=>{let i=e?0:-1;return t(r.data.charAt(n.offset()+i))}),yb=A(vb,!0,ah),bb=A(vb,!1,ah),xb=e=>{let t=e.container();return W(t)&&(t.data.length===0||lo(t.data)&&Fg.isBookmarkNode(t.parentNode))},Sb=(e,t)=>n=>Gp(e?0:-1,n).filter(t).isSome(),Cb=e=>Ca(e)&&gi(V.fromDom(e),`display`)===`block`,wb=e=>Ta(e)&&!pa(e),Tb=Sb(!0,Cb),Eb=Sb(!1,Cb),Db=Sb(!0,Oa),Ob=Sb(!1,Oa),kb=Sb(!0,ma),Ab=Sb(!1,ma),jb=Sb(!0,wb),Mb=Sb(!1,wb),Nb=e=>e.slice(0,-1),Pb=(e,t,n)=>Sr(t,e)?Nb(kr(e,e=>n(e)||xr(e,t))):[],Fb=(e,t)=>Pb(e,t,M),Ib=(e,t)=>[e].concat(Fb(e,t)),Lb=(e,t,n)=>Dm(e,t,n,xb),Rb=(e,t)=>Se(Ib(V.fromDom(t.container()),e),qa),zb=(e,t,n)=>Lb(e,t.dom,n).forall(e=>Rb(t,n).fold(()=>!Wp(e,n,t.dom),r=>!Wp(e,n,t.dom)&&Sr(r,V.fromDom(e.container())))),Bb=(e,t,n)=>Rb(t,n).fold(()=>Lb(e,t.dom,n).forall(e=>!Wp(e,n,t.dom)),t=>Lb(e,t.dom,n).isNone()),Vb=A(Bb,!1),Hb=A(Bb,!0),Ub=A(zb,!1),Wb=A(zb,!0),Gb=e=>em(e).exists(Ya),Kb=(e,t,n)=>Tm(e,Me(I(Ib(V.fromDom(n.container()),t),qa)).getOr(t).dom,n).filter(Gb),qb=(e,t)=>em(t).exists(Ya)||Kb(!0,e,t).isSome(),Jb=(e,t)=>tm(t).exists(Ya)||Kb(!1,e,t).isSome(),Yb=A(Kb,!1),Xb=A(Kb,!0),Zb=e=>Y.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Qb=(e,t)=>Me(I(Ib(V.fromDom(t.container()),e),qa)).getOr(e),$b=(e,t)=>Zb(t)?bb(t):bb(t)||Am(Qb(e,t).dom,t).exists(bb),ex=(e,t)=>Zb(t)?yb(t):yb(t)||km(Qb(e,t).dom,t).exists(yb),tx=e=>me([`pre`,`pre-wrap`],e),nx=e=>em(e).bind(e=>ti(e,zn)).exists(e=>tx(gi(e,`white-space`))),rx=(e,t)=>Am(e.dom,t).isNone(),ix=(e,t)=>km(e.dom,t).isNone(),ax=(e,t)=>rx(e,t)||ix(e,t)||Vb(e,t)||Hb(e,t)||Jb(e,t)||qb(e,t),ox=e=>w(e)&&Ta(e)&&Mp(e),sx=(e,t)=>n=>ox(new ia(n,e)[t]()),cx=(e,t)=>{let n=km(e.dom,t).getOr(t),r=sx(e.dom,`next`);return t.isAtEnd()&&(r(t.container())||r(n.container()))},lx=(e,t)=>{let n=Am(e.dom,t).getOr(t),r=sx(e.dom,`prev`);return t.isAtStart()&&(r(t.container())||r(n.container()))},ux=(e,t)=>nx(t)?!1:ax(e,t)||$b(e,t)||ex(e,t),dx=(e,t)=>nx(t)?!1:Vb(e,t)||Ub(e,t)||Jb(e,t)||$b(e,t)||lx(e,t),fx=e=>{let t=e.container(),n=e.offset();return W(t)&&n<t.data.length?Y(t,n+1):e},px=(e,t)=>nx(t)?!1:Hb(e,t)||Wb(e,t)||qb(e,t)||ex(e,t)||cx(e,t),mx=(e,t)=>dx(e,t)||px(e,fx(t)),hx=(e,t)=>ih(e.charAt(t)),gx=(e,t)=>ah(e.charAt(t)),_x=e=>{let t=e.container();return W(t)&&xt(t.data,`\xA0`)},vx=e=>{let t=e.split(``);return ge(t,(e,n)=>ih(e)&&n>0&&n<t.length-1&&oh(t[n-1])&&oh(t[n+1])?` `:e).join(``)},yx=(e,t,n)=>{let r=t.data,i=Y(t,0);return!n&&hx(r,0)&&!mx(e,i)?(t.data=` `+r.slice(1),!0):n&&gx(r,0)&&dx(e,i)?(t.data=`\xA0`+r.slice(1),!0):!1},bx=e=>{let t=e.data,n=vx(t);return n===t?!1:(e.data=n,!0)},xx=(e,t,n)=>{let r=t.data,i=Y(t,r.length-1);return!n&&hx(r,r.length-1)&&!mx(e,i)?(t.data=r.slice(0,-1)+` `,!0):n&&gx(r,r.length-1)&&px(e,i)?(t.data=r.slice(0,-1)+`\xA0`,!0):!1},Sx=(e,t)=>{let n=t.container();return W(n)?_x(t)?Tn(yx(e,n,!1)||bx(n)||xx(e,n,!1),t):mx(e,t)?Tn(yx(e,n,!0)||xx(e,n,!0),t):P.none():P.none()},Cx=e=>{let t=V.fromDom(e.getBody());e.selection.isCollapsed()&&Sx(t,Y.fromRangeStart(e.selection.getRng())).each(t=>{e.selection.setRng(t.toRange())})},wx=(e,t,n)=>{if(n===0)return;let r=V.fromDom(e),i=ei(r,qa).getOr(r),a=e.data.slice(t,t+n),o=t+n>=e.data.length&&px(i,Y(e,e.data.length)),s=t===0&&dx(i,Y(e,0));e.replaceData(t,n,Jo(a,4,s,o))},Tx=(e,t)=>{let n=e.data.slice(t);wx(e,t,n.length-Et(n).length)},Ex=(e,t)=>{let n=e.data.slice(0,t),r=n.length-Dt(n).length;wx(e,t-r,r)},Dx=(e,t,n,r=!0)=>{let i=Dt(e.data).length,a=r?e:t,o=r?t:e;return r?a.appendData(o.data):a.insertData(0,o.data),Ai(V.fromDom(o)),n&&Tx(a,i),a},Ox=(e,t)=>{let n=e.container(),r=e.offset();return!Y.isTextPosition(e)&&n===t.parentNode&&r>Y.before(t).offset()},kx=(e,t)=>Ox(t,e)?Y(t.container(),t.offset()-1):t,Ax=e=>W(e)?Y(e,0):Y.before(e),jx=e=>W(e)?Y(e,e.data.length):Y.after(e),Mx=e=>Fo(e.previousSibling)?P.some(jx(e.previousSibling)):e.previousSibling?Mm(e.previousSibling):P.none(),Nx=e=>Fo(e.nextSibling)?P.some(Ax(e.nextSibling)):e.nextSibling?jm(e.nextSibling):P.none(),Px=(e,t)=>P.from(t.previousSibling?t.previousSibling:t.parentNode).bind(t=>Am(e,Y.before(t))).orThunk(()=>km(e,Y.after(t))),Fx=(e,t)=>km(e,Y.after(t)).orThunk(()=>Am(e,Y.before(t))),Ix=(e,t)=>Mx(t).orThunk(()=>Nx(t)).orThunk(()=>Px(e,t)),Lx=(e,t)=>Nx(t).orThunk(()=>Mx(t)).orThunk(()=>Fx(e,t)),Rx=(e,t,n)=>e?Lx(t,n):Ix(t,n),zx=(e,t,n)=>Rx(e,t,n).map(A(kx,n)),Bx=(e,t,n)=>{n.fold(()=>{e.focus()},n=>{e.selection.setRng(n.toRange(),t)})},Vx=e=>t=>t.dom===e,Hx=(e,t)=>t&&Je(e.schema.getBlockElements(),Pn(t)),Ux=e=>{if(rs(e)){let t=V.fromHtml(`<br data-mce-bogus="1">`);return ki(e),Ti(e,t),P.some(Y.before(t.dom))}else return P.none()},Wx=(e,t,n)=>{let r=jr(e).filter(Bn),i=Mr(e).filter(Bn);return Ai(e),wn(r,i,t,(e,t,r)=>{let i=e.dom,a=t.dom,o=i.data.length;return Dx(i,a,n),r.container()===a?Y(i,o):r}).orThunk(()=>(n&&(r.each(e=>Ex(e.dom,e.dom.length)),i.each(e=>Tx(e.dom,0))),t))},Gx=(e,t)=>Je(e.schema.getTextInlineElements(),Pn(t)),Kx=(e,t,n,r=!0)=>{let i=zx(t,e.getBody(),n.dom),a=ei(n,A(Hx,e),Vx(e.getBody())),o=Wx(n,i,Gx(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(``),e.selection.setCursorLocation()):a.bind(Ux).fold(()=>{r&&Bx(e,t,o)},n=>{r&&Bx(e,t,P.some(n))})},qx=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Jx=e=>qx.test(e),Yx=(e,t)=>_r(V.fromDom(t),qd(e))&&!ys(e.schema,t)&&e.dom.isEditable(t),Xx=e=>Vc.DOM.getStyle(e,`direction`,!0)===`rtl`||Jx(e.textContent??``),Zx=(e,t,n)=>I(Vc.DOM.getParents(n.container(),`*`,t),e),Qx=(e,t,n)=>{let r=Zx(e,t,n);return P.from(r[r.length-1])},$x=(e,t,n)=>{let r=Up(t,e),i=Up(n,e);return w(r)&&r===i},eS=e=>yo(e)||bo(e),tS=(e,t)=>{let n=t.container(),r=t.offset();return e?ho(n)?W(n.nextSibling)?Y(n.nextSibling,0):Y.after(n):yo(t)?Y(n,r+1):t:ho(n)?W(n.previousSibling)?Y(n.previousSibling,n.previousSibling.data.length):Y.before(n):bo(t)?Y(n,r-1):t},nS=A(tS,!0),rS=A(tS,!1),iS=(e,t)=>{let n=e=>e.stopImmediatePropagation();e.on(`beforeinput input`,n,!0),e.getDoc().execCommand(t),e.off(`beforeinput input`,n)},aS=e=>{e.execCommand(`delete`)},oS=e=>iS(e,`Delete`),sS=e=>iS(e,`ForwardDelete`),cS=e=>t=>bn(Dr(t),e,xr),lS=e=>Xa(e)||Qa(e),uS=(e,t)=>Sr(e,t)?ti(t,lS,cS(e)):P.none(),dS=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent(``,{no_selection:!t})},fS=(e,t,n)=>Cn(jm(n),Mm(n),(r,i)=>{let a=tS(!0,r),o=tS(!1,i),s=tS(!1,t);return e?km(n,s).exists(e=>e.isEqual(o)&&t.isEqual(a)):Am(n,s).exists(e=>e.isEqual(a)&&t.isEqual(o))}).getOr(!0),pS=e=>(Ln(e)?jr(e):Rr(e)).bind(pS).orThunk(()=>P.some(e)),mS=(e,t,n,r=!0)=>{t.deleteContents();let i=pS(n).getOr(n),a=V.fromDom(e.dom.getParent(i.dom,e.dom.isBlock)??n.dom);a.dom===e.getBody()?dS(e,r):rs(a)&&(so(a),r&&e.selection.setCursorLocation(a.dom,0)),xr(n,a)||F((bn(Dr(a),n)?[]:Ar(a)).concat(Fr(n)),e=>{!xr(e,a)&&!Sr(e,a)&&rs(e)&&Ai(e)})},hS=e=>t=>xr(e,t),gS=e=>H(e,`td,th`),_S=(e,t)=>{let n=e=>Ch(V.fromDom(e),t),r=n(e.startContainer),i=n(e.endContainer),a=r.isSome(),o=i.isSome(),s=Cn(r,i,xr).getOr(!1);return{startTable:r,endTable:i,isStartInTable:a,isEndInTable:o,isSameTable:s,isMultiTable:!s&&a&&o}},vS=(e,t)=>({start:e,end:t}),yS=(e,t,n)=>({rng:e,table:t,cells:n}),bS=Zu.generate([{singleCellTable:[`rng`,`cell`]},{fullTable:[`table`]},{partialTable:[`cells`,`outsideDetails`]},{multiTable:[`startTableCells`,`endTableCells`,`betweenRng`]}]),xS=(e,t)=>si(V.fromDom(e),`td,th`,t),SS=e=>!xr(e.start,e.end),CS=(e,t)=>Ch(e.start,t).bind(n=>Ch(e.end,t).bind(e=>Tn(xr(n,e),n))),wS=(e,t)=>!SS(e)&&CS(e,t).exists(e=>{let t=e.dom.rows;return t.length===1&&t[0].cells.length===1}),TS=(e,t)=>Cn(xS(e.startContainer,t),xS(e.endContainer,t),vS),ES=e=>t=>Ch(t,e).bind(e=>Ne(gS(e)).map(e=>vS(t,e))),DS=e=>t=>Ch(t,e).bind(e=>Me(gS(e)).map(e=>vS(e,t))),OS=e=>t=>CS(t,e).map(e=>yS(t,e,gS(e))),kS=(e,t,n,r)=>{if(n.collapsed||!e.forall(SS))return P.none();if(t.isSameTable){let t=e.bind(OS(r));return P.some({start:t,end:t})}else{let e=xS(n.startContainer,r),t=xS(n.endContainer,r),i=e.bind(ES(r)).bind(OS(r)),a=t.bind(DS(r)).bind(OS(r));return P.some({start:i,end:a})}},AS=(e,t)=>Ce(e,e=>xr(e,t)),jS=e=>Cn(AS(e.cells,e.rng.start),AS(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),MS=(e,t,n)=>e.exists(e=>wS(e,n)&&Oh(e.start,t)),NS=(e,t)=>{let{startTable:n,endTable:r}=t,i=e.cloneRange();return n.each(e=>i.setStartAfter(e.dom)),r.each(e=>i.setEndBefore(e.dom)),i},PS=(e,t,n,r)=>kS(e,t,n,r).bind(({start:e,end:t})=>e.or(t)).bind(e=>{let{isSameTable:r}=t,i=jS(e).getOr([]);if(r&&e.cells.length===i.length)return P.some(bS.fullTable(e.table));if(i.length>0){if(r)return P.some(bS.partialTable(i,P.none()));{let e=NS(n,t);return P.some(bS.partialTable(i,P.some({...t,rng:e})))}}else return P.none()}),FS=(e,t,n,r)=>kS(e,t,n,r).bind(({start:e,end:r})=>{let i=e.bind(jS).getOr([]),a=r.bind(jS).getOr([]);if(i.length>0&&a.length>0){let e=NS(n,t);return P.some(bS.multiTable(i,a,e))}else return P.none()}),IS=(e,t)=>{let n=hS(e),r=TS(t,n),i=_S(t,n);return MS(r,t,n)?r.map(e=>bS.singleCellTable(t,e.start)):i.isMultiTable?FS(r,i,t,n):PS(r,i,t,n)},LS=e=>F(e,e=>{Xn(e,`contenteditable`),so(e)}),RS=(e,t)=>P.from(e.dom.getParent(t,e.dom.isBlock)).map(V.fromDom),zS=(e,t,n)=>{n.each(n=>{t?Ai(n):(so(n),e.selection.setCursorLocation(n.dom,0))})},BS=(e,t,n,r)=>{let i=n.cloneRange();r?(i.setStart(n.startContainer,n.startOffset),i.setEndAfter(t.dom.lastChild)):(i.setStartBefore(t.dom.firstChild),i.setEnd(n.endContainer,n.endOffset)),WS(e,i,t,!1).each(e=>e())},VS=e=>{let t=Sh(e),n=V.fromDom(e.selection.getNode());Ea(n.dom)&&rs(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&he(t,e=>xr(e,n))&&Gn(n,`data-mce-selected`,`1`)},HS=(e,t,n)=>P.some(()=>{let r=e.selection.getRng();LS(n.bind(({rng:n,isStartInTable:i})=>{let a=RS(e,i?n.endContainer:n.startContainer);n.deleteContents(),zS(e,i,a.filter(rs));let o=i?t[0]:t[t.length-1];return BS(e,o,r,i),rs(o)?P.none():P.some(i?t.slice(1):t.slice(0,-1))}).getOr(t)),VS(e)}),US=(e,t,n,r)=>P.some(()=>{let i=e.selection.getRng(),a=t[0],o=n[n.length-1];BS(e,a,i,!0),BS(e,o,i,!1);let s=rs(a)?t:t.slice(1),c=rs(o)?n:n.slice(0,-1);LS(s.concat(c)),r.deleteContents(),VS(e)}),WS=(e,t,n,r=!0)=>P.some(()=>{mS(e,t,n,r)}),GS=(e,t)=>P.some(()=>Kx(e,!1,t)),KS=(e,t,n)=>IS(t,n).bind(t=>t.fold(A(WS,e),A(GS,e),A(HS,e),A(US,e))),qS=(e,t)=>$S(e,t),JS=(e,t,n,r)=>ZS(t,r).fold(()=>KS(e,t,n),t=>qS(e,t)),YS=(e,t,n)=>{let r=V.fromDom(e.getBody()),i=e.selection.getRng();return n.length===0?JS(e,r,i,t):HS(e,n,P.none())},XS=(e,t)=>Se(Ib(t,e),eo),ZS=(e,t)=>Se(Ib(t,e),Un(`caption`)),QS=(e,t,n,r,i)=>Em(n,e.getBody(),i).bind(e=>XS(t,V.fromDom(e.getNode())).bind(e=>xr(e,r)?P.none():P.some(D))),$S=(e,t)=>P.some(()=>{so(t),e.selection.setCursorLocation(t.dom,0)}),eC=(e,t,n,r)=>jm(e.dom).bind(i=>Mm(e.dom).map(e=>t?n.isEqual(i)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(i))).getOr(!0),tC=(e,t)=>$S(e,t),nC=(e,t,n)=>ZS(e,V.fromDom(n.getNode())).fold(()=>P.some(D),e=>Tn(!xr(e,t),D)),rC=(e,t,n,r,i)=>Em(n,e.getBody(),i).fold(()=>P.some(D),a=>eC(r,n,i,a)?tC(e,r):nC(t,r,a)),iC=(e,t,n,r)=>{let i=Y.fromRangeStart(e.selection.getRng());return XS(n,r).bind(r=>rs(r)?$S(e,r):QS(e,n,t,r,i))},aC=(e,t,n,r)=>{let i=Y.fromRangeStart(e.selection.getRng());return rs(r)?$S(e,r):rC(e,n,t,r,i)},oC=(e,t)=>e?kb(t):Ab(t),sC=(e,t)=>{let n=Y.fromRangeStart(e.selection.getRng());return oC(t,n)||Tm(t,e.getBody(),n).exists(e=>oC(t,e))},cC=(e,t,n)=>{let r=V.fromDom(e.getBody());return ZS(r,n).fold(()=>iC(e,t,r,n).orThunk(()=>Tn(sC(e,t),D)),n=>aC(e,t,r,n))},lC=(e,t)=>{let n=V.fromDom(e.selection.getStart(!0)),r=Sh(e);return e.selection.isCollapsed()&&r.length===0?cC(e,t,n):YS(e,n,r)},uC=(e,t)=>{let n=t;for(;n&&n!==e;){if(wa(n)||Ta(n))return n;n=n.parentNode}return null},dC=[`data-ephox-`,`data-mce-`,`data-alloy-`,`data-snooker-`,`_`],fC=B.each,pC=e=>{let t=e.dom,n=new Set(e.serializer.getTempAttrs()),r=(e,n)=>{if(e.nodeName!==n.nodeName||e.nodeType!==n.nodeType)return!1;let r=e=>{let n={};return fC(t.getAttribs(e),r=>{let a=r.nodeName.toLowerCase();a!==`style`&&!i(a)&&(n[a]=t.getAttrib(e,a))}),n},a=(e,t)=>{for(let n in e)if(Je(e,n)){let r=t[n];if(C(r)||e[n]!==r)return!1;delete t[n]}for(let e in t)if(Je(t,e))return!1;return!0};return U(e)&&U(n)&&(!a(r(e),r(n))||!a(t.parseStyle(t.getAttrib(e,`style`)),t.parseStyle(t.getAttrib(n,`style`))))?!1:!rh(e)&&!rh(n)},i=e=>he(dC,t=>St(e,t))||n.has(e);return{compare:r,isAttributeInternal:i}},mC=(e,t)=>{let n=e;for(;n=n.walk();)t(n)},hC=(e,t,n,r)=>{let i=n.name;for(let t=0,a=e.length;t<a;t++){let a=e[t];if(a.name===i){let e=r.nodes[i];e?e.nodes.push(n):r.nodes[i]={filter:a,nodes:[n]}}}if(n.attributes)for(let e=0,i=t.length;e<i;e++){let i=t[e],a=i.name;if(a in n.attributes.map){let e=r.attributes[a];e?e.nodes.push(n):r.attributes[a]={filter:i,nodes:[n]}}}},gC=(e,t,n)=>{let r={nodes:{},attributes:{}};return n.firstChild&&mC(n,n=>{hC(e,t,n,r)}),r},_C=(e,t)=>{let n=(e,n)=>{ze(e,e=>{let r=Pe(e.nodes);F(e.filter.callbacks,i=>{for(let t=r.length-1;t>=0;t--){let i=r[t];(!(n?i.attr(e.filter.name)!==void 0:i.name===e.filter.name)||te(i.parent))&&r.splice(t,1)}r.length>0&&i(r,e.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},vC=(e,t,n,r={})=>{_C(gC(e,t,n),r)},yC=(e,t,n,r)=>{if((e.pad_empty_with_br||t.insert)&&n(r)){let e=new Yy(`br`,1);t.insert&&e.attr(`data-mce-bogus`,`1`),r.empty().append(e)}else r.empty().append(new Yy(`#text`,3)).value=`\xA0`},bC=e=>xC(e,`#text`)&&e?.firstChild?.value===`\xA0`,xC=(e,t)=>{let n=e?.firstChild;return w(n)&&n===e.lastChild&&n.name===t},SC=(e,t)=>e.getElementRule(t.name)?.paddEmpty===!0,CC=(e,t,n,r)=>r.isEmpty(t,n,t=>SC(e,t)),wC=(e,t)=>w(e)&&(t(e)||e.name===`br`),TC=e=>{let t;for(let n=e;n;n=n.parent){let e=n.attr(`contenteditable`);if(e===`false`)break;e===`true`&&(t=n)}return P.from(t)},EC=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{let r=e.children();for(let e of r)n&&!t.isValidChild(n.name,e.name)&&EC(e,t,n);e.unwrap()}},DC=(e,t,n,r=D)=>{let i=t.getTextBlockElements(),a=t.getNonEmptyElements(),o=t.getWhitespaceElements(),s=B.makeMap(`tr,td,th,tbody,thead,tfoot,table,summary`),c=new Set,l=e=>e!==n&&!s[e.name];for(let n=0;n<e.length;n++){let s=e[n],u,d,f;if(!s.parent||c.has(s))continue;if(i[s.name]&&s.parent.name===`li`){let e=s.next;for(;e&&i[e.name];)e.name=`li`,c.add(e),s.parent.insert(e,s.parent),e=e.next;s.unwrap();continue}let p=[s];for(u=s.parent;u&&!t.isValidChild(u.name,s.name)&&l(u);u=u.parent)p.push(u);if(u&&p.length>1)if(t.isValidChild(u.name,s.name)){p.reverse(),d=p[0].clone(),r(d);let e=d;for(let n=0;n<p.length-1;n++){t.isValidChild(e.name,p[n].name)&&n>0?(f=p[n].clone(),r(f),e.append(f)):f=e;for(let e=p[n].firstChild;e&&e!==p[n+1];){let t=e.next;f.append(e),e=t}e=f}CC(t,a,o,d)?u.insert(s,p[0],!0):(u.insert(d,p[0],!0),u.insert(s,d)),u=p[0],(CC(t,a,o,u)||xC(u,`br`))&&u.empty().remove()}else EC(s,t);else if(s.parent){if(s.name===`li`){let e=s.prev;if(e&&(e.name===`ul`||e.name===`ol`)){e.append(s);continue}if(e=s.next,e&&(e.name===`ul`||e.name===`ol`)&&e.firstChild){e.insert(s,e.firstChild,!0);continue}let t=new Yy(`ul`,1);r(t),s.wrap(t);continue}if(t.isValidChild(s.parent.name,`div`)&&t.isValidChild(`div`,s.name)){let e=new Yy(`div`,1);r(e),s.wrap(e)}else EC(s,t)}}},OC=(e,t)=>{let n=e;for(;n;){if(n.name===t)return!0;n=n.parent}return!1},kC=(e,t,n=t.parent)=>n&&e.children[t.name]&&!e.isValidChild(n.name,t.name)?!0:!!(n&&t.name===`a`&&OC(n,`a`)),AC=(e,t,n,r)=>{let i=document.createRange();return i.setStart(e,t),i.setEnd(n,r),i},jC=e=>{let t=Y.fromRangeStart(e),n=Y.fromRangeEnd(e),r=e.commonAncestorContainer;return Tm(!1,r,n).map(i=>!Wp(t,n,r)&&Wp(t,i,r)?AC(t.container(),t.offset(),i.container(),i.offset()):e).getOr(e)},MC=e=>e.collapsed?e:jC(e),NC=e=>w(e.firstChild)&&e.firstChild===e.lastChild,PC=e=>e.name===`br`||e.value===`\xA0`,FC=(e,t)=>e.getBlockElements()[t.name]&&NC(t)&&PC(t.firstChild),IC=(e,t)=>{let n=e.getNonEmptyElements();return w(t)&&(t.isEmpty(n)||FC(e,t))},LC=(e,t)=>{let n=t.firstChild,r=t.lastChild;return n&&n.name===`meta`&&(n=n.next),r&&r.attr(`id`)===`mce_marker`&&(r=r.prev),IC(e,r)&&(r=r?.prev),!n||n!==r?!1:n.name===`ul`||n.name===`ol`},RC=e=>{var t,n;let r=e.firstChild,i=e.lastChild;return r&&r.nodeName===`META`&&((t=r.parentNode)==null||t.removeChild(r)),i&&i.id===`mce_marker`&&((n=i.parentNode)==null||n.removeChild(i)),e},zC=(e,t,n)=>{let r=t.serialize(n);return RC(e.createFragment(r))},BC=e=>I(e?.childNodes??[],e=>e.nodeName===`LI`),VC=e=>e.data===`\xA0`||Sa(e),HC=e=>w(e?.firstChild)&&e.firstChild===e.lastChild&&VC(e.firstChild),UC=e=>!e.firstChild||HC(e),WC=e=>e.length>0&&UC(e[e.length-1])?e.slice(0,-1):e,GC=(e,t)=>{let n=e.getParent(t,e.isBlock);return n&&n.nodeName===`LI`?n:null},KC=(e,t)=>!!GC(e,t),qC=(e,t)=>{let n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]},JC=(e,t)=>{let n=Y.before(e),r=_m(t).next(n);return r?r.toRange():null},YC=(e,t)=>{let n=Y.after(e),r=_m(t).prev(n);return r?r.toRange():null},XC=(e,t,n,r)=>{let i=qC(e,r),a=e.parentNode;return a&&(a.insertBefore(i[0],e),B.each(t,t=>{a.insertBefore(t,e)}),a.insertBefore(i[1],e),a.removeChild(e)),YC(t[t.length-1],n)},ZC=(e,t,n)=>{let r=e.parentNode;return r&&B.each(t,t=>{r.insertBefore(t,e)}),JC(e,n)},QC=(e,t,n,r)=>(r.insertAfter(t.reverse(),e),YC(t[0],n)),$C=(e,t,n,r)=>{let i=zC(t,e,r),a=GC(t,n.startContainer),o=WC(BC(i.firstChild)),s=t.getRoot(),c=e=>{let r=Y.fromRangeStart(n),i=_m(t.getRoot()),o=(e===1?i.prev(r):i.next(r))?.getNode();return o?GC(t,o)!==a:!0};return a?c(1)?ZC(a,o,s):c(2)?QC(a,o,s,t):XC(a,o,s,n):null},ew=[`pre`],tw=(e,t,n,r)=>{let i=t.firstChild,a=t.lastChild,o=i===(a.attr(`data-mce-type`)===`bookmark`?a.prev:a),s=me(ew,i.name);if(o&&s){let t=i.attr(`contenteditable`)!==`false`,a=e.getParent(n,e.isBlock)?.nodeName.toLowerCase()===i.name,o=P.from(uC(r,n)).forall(wa);return t&&a&&o}else return!1},nw=Ea,rw=(e,t,n)=>w(n)?n===e.getParent(t.endContainer,nw)&&Oh(V.fromDom(n),t):!1,iw=(e,t,n)=>{var r;if(n.getAttribute(`data-mce-bogus`)===`all`)(r=n.parentNode)==null||r.insertBefore(e.dom.createFragment(t),n);else{let r=n.firstChild,i=n.lastChild;!r||r===i&&r.nodeName===`BR`?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},aw=(e,t)=>{P.from(e.getParent(t,`td,th`)).map(V.fromDom).each(co)},ow=(e,t)=>{let n=e.schema.getTextInlineElements(),r=e.dom;if(t){let t=e.getBody(),i=pC(e);B.each(r.select(`*[data-mce-fragment]`),e=>{if(w(n[e.nodeName.toLowerCase()])&&hb(r,e)){for(let n=e.parentElement;w(n)&&n!==t&&!_b(r,e,n);n=n.parentElement)if(i.compare(n,e)){r.remove(e,!0);break}}})}},sw=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr(`data-mce-fragment`,`1`)},cw=e=>{B.each(e.getElementsByTagName(`*`),e=>{e.removeAttribute(`data-mce-fragment`)})},lw=e=>!!e.getAttribute(`data-mce-fragment`),uw=(e,t)=>w(t)&&!e.schema.getVoidElements()[t.nodeName],dw=(e,t)=>{var n;let r,i=e.dom,a=e.selection;if(!t)return;a.scrollIntoView(t);let o=uC(e.getBody(),t);if(o&&i.getContentEditable(o)===`false`){i.remove(t),a.select(o);return}let s=i.createRng(),c=t.previousSibling;if(W(c)){s.setStart(c,c.nodeValue?.length??0);let e=t.nextSibling;W(e)&&(c.appendData(e.data),(n=e.parentNode)==null||n.removeChild(e))}else s.setStartBefore(t),s.setEndBefore(t);let l=t=>{let n=Y.fromRangeStart(t);return n=_m(e.getBody()).next(n),n?.toRange()},u=i.getParent(t,i.isBlock);if(i.remove(t),u&&i.isEmpty(u)){let e=nw(u);ki(V.fromDom(u)),s.setStart(u,0),s.setEnd(u,0),!e&&!lw(u)&&(r=l(s))?(s=r,i.remove(u)):i.add(u,i.create(`br`,e?{}:{"data-mce-bogus":`1`}))}a.setRng(s)},fw=e=>{let t=e.dom,n=MC(e.selection.getRng());e.selection.setRng(n);let r=t.getParent(n.startContainer,nw);rw(t,n,r)?WS(e,n,V.fromDom(r)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&W(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand(`Delete`,!1)},pw=e=>{for(let t=e;t;t=t.walk())if(t.attr(`id`)===`mce_marker`)return P.some(t);return P.none()},mw=(e,t,n)=>{var r;let i=e.selection,a=e.dom,o=e.parser,s=n.merge,c=ub({validate:!0},e.schema),l=`<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>`;t.indexOf(`{$caret}`)===-1&&(t+=`{$caret}`),t=t.replace(/\{\$caret\}/,l);let u=i.getRng(),d=u.startContainer,f=e.getBody();d===f&&i.isCollapsed()&&a.isBlock(f.firstChild)&&uw(e,f.firstChild)&&a.isEmpty(f.firstChild)&&(u=a.createRng(),u.setStart(f.firstChild,0),u.setEnd(f.firstChild,0),i.setRng(u)),i.isCollapsed()||fw(e);let p=i.getNode(),m={context:p.nodeName.toLowerCase(),data:n.data,insert:!0},h=o.parse(t,m);if(n.paste===!0&&LC(e.schema,h)&&KC(a,p))return u=$C(c,a,i.getRng(),h),u&&i.setRng(u),t;n.paste===!0&&tw(a,h,p,e.getBody())&&((r=h.firstChild)==null||r.unwrap()),sw(h);let g=h.lastChild;if(g&&g.attr(`id`)===`mce_marker`){let t=g;for(g=g.prev;g;g=g.walk(!0))if(g.type===3||!a.isBlock(g.name)){g.parent&&e.schema.isValidChild(g.parent.name,`span`)&&g.parent.insert(t,g,g.name===`br`);break}}if(e._selectionOverrides.showBlockCaretContainer(p),!m.invalid)t=c.serialize(h),iw(e,t,p);else{e.selection.setContent(l);let n=i.getNode(),r,s=e.getBody();for(ba(n)?n=r=s:r=n;r&&r!==s;)n=r,r=r.parentNode;t=n===s?s.innerHTML:a.getOuterHTML(n);let u=o.parse(t),d=pw(u),f=d.bind(TC).getOr(u);d.each(e=>e.replace(h));let p=h.children(),m=h.parent??u;h.unwrap(),DC(I(p,t=>kC(e.schema,t,m)),e.schema,f),vC(o.getNodeFilters(),o.getAttributeFilters(),u),t=c.serialize(u),n===s?a.setHTML(s,t):a.setOuterHTML(n,t)}return ow(e,s),dw(e,a.get(`mce_marker`)),cw(e.getBody()),aw(a,i.getStart()),hs(e.schema,e.getBody(),i.getStart()),t},hw=e=>e instanceof Yy,gw=e=>{yy(e)&&jm(e.getBody()).each(t=>{let n=t.getNode(),r=ma(n)?jm(n).getOr(t):t;e.selection.setRng(r.toRange())})},_w=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&gw(e)},vw=(e,t,n,r)=>{if(n.length===0||/^\s+$/.test(n)){let i=`<br data-mce-bogus="1">`;t.nodeName===`TABLE`?n=`<tr><td>`+i+`</td></tr>`:/^(UL|OL)$/.test(t.nodeName)&&(n=`<li>`+i+`</li>`);let a=Sd(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),a.toLowerCase())?(n=i,n=e.dom.createHTML(a,Z(e),n)):n||=i,_w(e,n,r.no_selection),{content:n,html:n}}else{r.format!==`raw`&&(n=ub({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));let i=to(V.fromDom(t))?n:B.trim(n);return _w(e,i,r.no_selection),{content:i,html:i}}},yw=(e,t,n,r)=>{vC(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);let i=ub({validate:!1},e.schema).serialize(n),a=to(V.fromDom(t))?i:B.trim(i);return _w(e,a,r.no_selection),{content:n,html:a}},bw=(e,t,n)=>P.from(e.getBody()).map(r=>hw(t)?yw(e,r,t,n):vw(e,r,t,n)).getOr({content:t,html:hw(n.content)?``:n.content}),xw=(e,t,n)=>ei(e,t,n).isSome(),Sw=(e,t)=>ni(e,t).isSome(),Cw=e=>T(e)?e:M,ww=(e,t,n)=>{let r=e.dom,i=Cw(n);for(;r.parentNode;){r=r.parentNode;let e=V.fromDom(r),n=t(e);if(n.isSome())return n;if(i(e))break}return P.none()},Tw=(e,t,n)=>{let r=t(e),i=Cw(n);return r.orThunk(()=>i(e)?P.none():ww(e,t,i))},Ew=qh,Dw=(e,t,n)=>{let r=e.formatter.get(n);if(r)for(let n=0;n<r.length;n++){let i=r[n];if(ig(i)&&i.inherit===!1&&e.dom.is(t,i.selector))return!0}return!1},Ow=(e,t,n,r,i)=>{let a=e.dom.getRoot();return t===a?!1:!!jw(e,e.dom.getParent(t,t=>Dw(e,t,n)?!0:t.parentNode===a||!!jw(e,t,n,r,!0)),n,r,i)},kw=(e,t,n)=>ag(n)&&Ew(t,n.inline)||tg(n)&&Ew(t,n.block)?!0:ig(n)?U(t)&&e.is(t,n.selector):!1,Aw=(e,t,n,r,i,a)=>{let o=n[r],s=r===`attributes`;if(T(n.onmatch))return n.onmatch(t,n,r);if(o){if(Qe(o)){for(let n=0;n<o.length;n++)if(s?e.getAttrib(t,o[n]):Yh(e,t,o[n]))return!0}else for(let r in o)if(Je(o,r)){let c=s?e.getAttrib(t,r):Yh(e,t,r),l=Kh(o[r],a),u=te(c)||kt(c);if(u&&te(l))continue;if(i&&u&&!n.exact||(!i||n.exact)&&!Ew(c,Jh(l,r)))return!1}}return!0},jw=(e,t,n,r,i)=>{let a=e.formatter.get(n),o=e.dom;if(a&&U(t))for(let n=0;n<a.length;n++){let s=a[n];if(kw(e.dom,t,s)&&Aw(o,t,s,`attributes`,i,r)&&Aw(o,t,s,`styles`,i,r)){let n=s.classes;if(n){for(let i=0;i<n.length;i++)if(!e.dom.hasClass(t,Kh(n[i],r)))return}return s}}},Mw=(e,t,n,r,i)=>{if(r)return Ow(e,r,t,n,i);if(r=e.selection.getNode(),Ow(e,r,t,n,i))return!0;let a=e.selection.getStart();return!!(a!==r&&Ow(e,a,t,n,i))},Nw=(e,t,n)=>{let r=[],i={},a=e.selection.getStart();return e.dom.getParent(a,a=>{for(let o=0;o<t.length;o++){let s=t[o];!i[s]&&jw(e,a,s,n)&&(i[s]=!0,r.push(s))}},e.dom.getRoot()),r},Pw=(e,t)=>{let n=t=>xr(t,V.fromDom(e.getBody())),r=(t,n)=>jw(e,t.dom,n)?P.some(n):P.none();return P.from(e.selection.getStart(!0)).bind(e=>Tw(V.fromDom(e),e=>Fe(t,t=>r(e,t)),n)).getOrNull()},Fw=(e,t)=>{let n=e.formatter.get(t),r=e.dom;if(n&&e.selection.isEditable()){let t=Zh(r,e.selection.getStart());for(let e=n.length-1;e>=0;e--){let i=n[e];if(!ig(i))return!0;for(let e=t.length-1;e>=0;e--)if(r.is(t[e],i.selector))return!0}}return!1},Iw=(e,t,n)=>be(n,(n,r)=>{let i=$h(e,r);return e.formatter.matchNode(t,r,{},i)?n.concat([r]):n},[]),Lw=(e,t)=>e.importNode(t,!0),Rw=e=>{let t=[],n=e;for(;n;){if(W(n)&&n.data!==`﻿`||n.childNodes.length>1)return[];U(n)&&t.push(n),n=n.firstChild}return t},zw=e=>Rw(e).length>0,Bw=e=>{if(e){let t=new ia(e,e);for(let e=t.current();e;e=t.next())if(W(e))return e}return null},Vw=e=>{let t=V.fromTag(`span`);return Kn(t,{id:Nm,"data-mce-bogus":`1`,"data-mce-type":`format-caret`}),e&&Ti(t,V.fromText(`﻿`)),t},Hw=e=>{let t=Bw(e);return t&&t.data.charAt(0)===`﻿`&&t.deleteData(0,1),t},Uw=(e,t,n=!0)=>{let r=e.dom,i=e.selection;if(zw(t))Kx(e,!1,V.fromDom(t),n);else{let e=i.getRng(),n=r.getParent(t,r.isBlock),a=e.startContainer,o=e.startOffset,s=e.endContainer,c=e.endOffset,l=Hw(t);r.remove(t,!0),a===l&&o>0&&e.setStart(l,o-1),s===l&&c>0&&e.setEnd(l,c-1),n&&r.isEmpty(n)&&so(V.fromDom(n)),i.setRng(e)}},Ww=(e,t,n=!0)=>{let r=e.dom,i=e.selection;if(t)Uw(e,t,n);else if(t=Fm(e.getBody(),i.getStart()),!t)for(;t=r.get(Nm);)Uw(e,t,n)},Gw=(e,t,n)=>{var r,i;let a=e.dom,o=a.getParent(n,A(Bh,e.schema));o&&a.isEmpty(o)?(r=n.parentNode)==null||r.replaceChild(t,n):(ao(V.fromDom(n)),a.isEmpty(n)?(i=n.parentNode)==null||i.replaceChild(t,n):a.insertAfter(t,n))},Kw=(e,t)=>(e.appendChild(t),t),qw=(e,t)=>{let n=ye(e,(e,t)=>Kw(e,t.cloneNode(!1)),t);return Kw(n,(n.ownerDocument??document).createTextNode(`﻿`))},Jw=(e,t,n,r,i,a)=>{let o=e.formatter,s=e.dom;if(I(Iw(e,n,I(Le(o.get()),e=>e!==r&&!xt(e,`removeformat`))),t=>!eg(e,t,r)).length>0){let e=n.cloneNode(!1);return s.add(t,e),o.remove(r,i,e,a),s.remove(e),P.some(e)}else return P.none()},Yw=(e,t,n)=>{let r,i=e.selection,a=e.formatter.get(t);if(!a)return;let o=i.getRng(),s=o.startOffset,c=o.startContainer.nodeValue;r=Fm(e.getBody(),i.getStart());let l=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(c&&s>0&&s<c.length&&l.test(c.charAt(s))&&l.test(c.charAt(s-1))){let r=i.getBookmark();o.collapse(!0);let s=Cg(e.dom,o,a);s=Q_(s),e.formatter.apply(t,n,s),i.moveToBookmark(r)}else{let a=r?Bw(r):null;!r||a?.data!==`﻿`?(r=Lw(e.getDoc(),Vw(!0).dom),a=r.firstChild,o.insertNode(r),s=1,e.formatter.apply(t,n,r)):e.formatter.apply(t,n,r),i.setCursorLocation(a,s)}},Xw=(e,t,n,r)=>{let i=e.dom,a=e.selection,o=!1,s=e.formatter.get(t);if(!s)return;let c=a.getRng(),l=c.startContainer,u=c.startOffset,d=l;W(l)&&(u!==l.data.length&&(o=!0),d=d.parentNode);let f=[],p;for(;d;){if(jw(e,d,t,n,r)){p=d;break}d.nextSibling&&(o=!0),f.push(d),d=d.parentNode}if(p)if(o){let o=a.getBookmark();c.collapse(!0);let l=Cg(i,c,s,!0);l=Q_(l),e.formatter.remove(t,n,l,r),a.moveToBookmark(o)}else{let o=Fm(e.getBody(),p),s=Vw(!1).dom;Gw(e,s,o??p);let c=Jw(e,s,p,t,n,r),l=qw(f.concat(c.toArray()),s);o&&Uw(e,o,!1),a.setCursorLocation(l,1),i.isEmpty(p)&&i.remove(p)}},Zw=(e,t,n)=>{let r=e.selection,i=e.getBody();Ww(e,null,n),(t===8||t===46)&&r.isCollapsed()&&r.getStart().innerHTML===`﻿`&&Ww(e,Fm(i,r.getStart())),(t===37||t===39)&&Ww(e,Fm(i,r.getStart()))},Qw=e=>W(e)&&Ct(e.data,`\xA0`),$w=e=>{e.on(`mouseup keydown`,t=>{Zw(e,t.keyCode,Qw(e.selection.getRng().endContainer))})},eT=e=>{let t=Vw(!1);return{caretContainer:t,caretPosition:Y(qw(e,t.dom),0)}},tT=(e,t)=>{let{caretContainer:n,caretPosition:r}=eT(t);return Si(V.fromDom(e),n),Ai(V.fromDom(e)),r},nT=(e,t)=>{let{caretContainer:n,caretPosition:r}=eT(t);return e.insertNode(n.dom),r},rT=(e,t)=>Je(e.schema.getTextInlineElements(),Pn(t))&&!Pm(t.dom)&&!fa(t.dom),iT=e=>Pm(e.dom)&&zw(e.dom),aT={},oT=ca([`pre`]),sT=(e,t)=>{aT[e]||(aT[e]=[]),aT[e].push(t)},cT=(e,t)=>{Je(aT,e)&&F(aT[e],e=>{e(t)})};sT(`pre`,e=>{let t=e.selection.getRng(),n=e=>t=>{let n=t.previousSibling;return oT(n)&&me(e,n)},r=(e,t)=>{let n=V.fromDom(t),r=wr(n).dom;Ai(n),Oi(V.fromDom(e),[V.fromTag(`br`,r),V.fromTag(`br`,r),...Fr(n)])};if(!t.collapsed){let t=e.selection.getSelectedBlocks();F(I(I(t,oT),n(t)),e=>{r(e.previousSibling,e)})}});let lT=[`fontWeight`,`fontStyle`,`color`,`fontSize`,`fontFamily`],uT=e=>y(e.styles)&&he(Le(e.styles),e=>me(lT,e)),dT=e=>Se(e,e=>ag(e)&&e.inline===`span`&&uT(e)),fT=(e,t)=>{let n=e.get(t);return x(n)?dT(n):P.none()},pT=(e,t)=>Am(t,Y.fromRangeStart(e)).isNone(),mT=(e,t)=>km(t,Y.fromRangeEnd(e)).exists(e=>!Sa(e.getNode())||km(t,e).isSome())===!1,hT=e=>t=>G(t)&&e.isEditable(t),gT=e=>{let t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(t.length===1)return pT(n,t[0])&&mT(n,t[0])?t:[];{let e=Me(t).filter(e=>pT(n,e)).toArray(),r=Ne(t).filter(e=>mT(n,e)).toArray(),i=t.slice(1,-1);return e.concat(i).concat(r)}},_T=e=>I(gT(e),hT(e.dom)),vT=e=>I(e.getSelectedBlocks(),hT(e.dom)),yT=B.each,bT=e=>U(e)&&!rh(e)&&!Pm(e)&&!fa(e),xT=(e,t)=>{for(let n=e;n;n=n[t]){if(W(n)&&Ot(n.data))return e;if(U(n)&&!rh(n))return n}return e},ST=(e,t,n)=>{let r=pC(e),i=U(t)&&Ih(t),a=U(n)&&Ih(n);if(i&&a){let i=xT(t,`previousSibling`),a=xT(n,`nextSibling`);if(r.compare(i,a)){for(let e=i.nextSibling;e&&e!==a;){let t=e;e=e.nextSibling,i.appendChild(t)}return e.dom.remove(a),B.each(B.grep(a.childNodes),e=>{i.appendChild(e)}),i}}return n},CT=(e,t,n,r)=>{if(r&&t.merge_siblings!==!1){let t=ST(e,zh(r),r)??r;ST(e,t,zh(t,!0))}},wT=(e,t,n)=>{if(t.clear_child_styles){let r=t.links?`*:not(a)`:`*`;yT(e.select(r,n),n=>{bT(n)&&Ih(n)&&yT(t.styles,(t,r)=>{e.setStyle(n,r,``)})})}},TT=(e,t,n)=>{yT(e.childNodes,e=>{bT(e)&&(t(e)&&n(e),e.hasChildNodes()&&TT(e,t,n))})},ET=(e,t)=>{t.nodeName===`SPAN`&&e.getAttribs(t).length===0&&e.remove(t,!0)},DT=(e,t)=>n=>!!(n&&Yh(e,n,t)),OT=(e,t,n)=>r=>{e.setStyle(r,t,n),r.getAttribute(`style`)===``&&r.removeAttribute(`style`),ET(e,r)},kT=Zu.generate([{keep:[]},{rename:[`name`]},{removed:[]}]),AT=/^(src|href|style)$/,jT=B.each,MT=qh,NT=e=>/^(TR|TH|TD)$/.test(e.nodeName),PT=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),FT=(e,t,n)=>{let r=t[n?`startContainer`:`endContainer`],i=t[n?`startOffset`:`endOffset`];if(U(r)){let e=r.childNodes.length-1;!n&&i&&i--,r=r.childNodes[i>e?e:i]}return W(r)&&n&&i>=r.data.length&&(r=new ia(r,e.getBody()).next()||r),W(r)&&!n&&i===0&&(r=new ia(r,e.getBody()).prev()||r),r},IT=(e,t)=>{let n=t?`firstChild`:`lastChild`,r=e[n];return NT(e)&&r?e.nodeName===`TR`&&r[n]||r:e},LT=(e,t,n,r)=>{var i;let a=e.create(n,r);return(i=t.parentNode)==null||i.insertBefore(a,t),a.appendChild(t),a},RT=(e,t,n,r,i)=>{let a=V.fromDom(t),o=V.fromDom(e.create(r,i));return Oi(o,n?Pr(a):Nr(a)),n?(Si(a,o),wi(o,a)):(Ci(a,o),Ti(o,a)),o.dom},zT=(e,t)=>t.links&&e.nodeName===`A`,BT=(e,t,n)=>{let r=t.parentNode,i,a=e.dom,o=Sd(e);tg(n)&&r===a.getRoot()&&(!n.list_block||!MT(t,n.list_block))&&F(Pe(t.childNodes),t=>{Vh(e,o,t.nodeName.toLowerCase())?i?i.appendChild(t):(i=LT(a,t,o),a.setAttribs(i,Z(e))):i=null}),!(og(n)&&!MT(n.inline,t))&&a.remove(t,!0)},VT=(e,t,n)=>E(e)?{name:t,value:null}:{name:e,value:Kh(t,n)},HT=(e,t)=>{e.getAttrib(t,`style`)===``&&(t.removeAttribute(`style`),t.removeAttribute(`data-mce-style`))},UT=(e,t,n,r,i)=>{let a=!1;jT(n.styles,(o,s)=>{let{name:c,value:l}=VT(s,o,r),u=Jh(l,c);(n.remove_similar||ee(l)||!U(i)||MT(Yh(e,i,c),u))&&e.setStyle(t,c,``),a=!0}),a&&HT(e,t)},WT=(e,t,n)=>{t===`removeformat`?F(vT(e.selection),t=>{F(lT,n=>e.dom.setStyle(t,n,``)),HT(e.dom,t)}):fT(e.formatter,t).each(t=>{F(vT(e.selection),r=>UT(e.dom,r,t,n,null))})},GT=(e,t,n,r,i)=>{let a=e.dom,o=pC(e),s=e.schema;if(ag(t)&&_s(s,t.inline)&&ys(s,r)&&r.parentElement===e.getBody())return BT(e,r,t),kT.removed();if(!t.ceFalseOverride&&r&&a.getContentEditableParent(r)===`false`||r&&!kw(a,r,t)&&!zT(r,t))return kT.keep();let c=r,l=t.preserve_attributes;if(ag(t)&&t.remove===`all`&&x(l)){let e=I(a.getAttribs(c),e=>me(l,e.name.toLowerCase()));if(a.removeAllAttribs(c),F(e,e=>a.setAttrib(c,e.name,e.value)),e.length>0)return kT.rename(`span`)}if(t.remove!==`all`){UT(a,c,t,n,i),jT(t.attributes,(e,r)=>{let{name:o,value:s}=VT(r,e,n);if(t.remove_similar||ee(s)||!U(i)||MT(a.getAttrib(i,o),s)){if(o===`class`){let e=a.getAttrib(c,o);if(e){let t=``;if(F(e.split(/\s+/),e=>{/mce\-\w+/.test(e)&&(t+=(t?` `:``)+e)}),t){a.setAttrib(c,o,t);return}}}if(AT.test(o)&&c.removeAttribute(`data-mce-`+o),o===`style`&&ca([`li`])(c)&&a.getStyle(c,`list-style-type`)===`none`){c.removeAttribute(o),a.setStyle(c,`list-style-type`,`none`);return}o===`class`&&c.removeAttribute(`className`),c.removeAttribute(o)}}),jT(t.classes,e=>{e=Kh(e,n),(!U(i)||a.hasClass(i,e))&&a.removeClass(c,e)});let e=a.getAttribs(c);for(let t=0;t<e.length;t++){let n=e[t].nodeName;if(!o.isAttributeInternal(n))return kT.keep()}}return t.remove===`none`?kT.keep():(BT(e,c,t),kT.removed())},KT=(e,t,n,r,i)=>{let a;return t.parentNode&&F(Zh(e.dom,t.parentNode).reverse(),t=>{if(!a&&U(t)&&t.id!==`_start`&&t.id!==`_end`){let o=jw(e,t,n,r,i);o&&o.split!==!1&&(a=t)}}),a},qT=(e,t,n,r)=>GT(e,t,n,r,r).fold(k(r),t=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,t)),k(null)),JT=(e,t,n,r,i,a,o,s)=>{var c;let l,u,d=e.dom;if(n){let f=n.parentNode;for(let n=r.parentNode;n&&n!==f;n=n.parentNode){let r=d.clone(n,!1);for(let n=0;n<t.length&&(r=qT(e,t[n],s,r),r!==null);n++);r&&(l&&r.appendChild(l),u||=r,l=r)}a&&(!o.mixed||!d.isBlock(n))&&(r=d.split(n,r)??r),l&&u&&((c=i.parentNode)==null||c.insertBefore(l,i),u.appendChild(i),ag(o)&&CT(e,o,s,l))}return r},YT=(e,t,n,r,i)=>{let a=e.formatter.get(t),o=a[0],s=e.dom,c=e.selection,l=r=>JT(e,a,KT(e,r,t,n,i),r,r,!0,o,n),u=e=>rh(e)&&U(e)&&(e.id===`_start`||e.id===`_end`),d=t=>he(a,r=>ZT(e,r,n,t,t)),f=t=>{let n=Pe(t.childNodes),r=d(t)||he(a,e=>kw(s,t,e)),i=t.parentNode;if(!r&&w(i)&&sg(o)&&d(i),o.deep&&n.length)for(let e=0;e<n.length;e++)f(n[e]);F([`underline`,`line-through`,`overline`],n=>{U(t)&&e.dom.getStyle(t,`text-decoration`)===n&&t.parentNode&&Xh(s,t.parentNode)===n&&ZT(e,{deep:!1,exact:!0,inline:`span`,styles:{textDecoration:n}},void 0,t)})},p=e=>{let t=s.get(e?`_start`:`_end`);if(t){let n=t[e?`firstChild`:`lastChild`];return u(n)&&(n=n[e?`firstChild`:`lastChild`]),W(n)&&n.data.length===0&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),s.remove(t,!0),n}else return null},m=t=>{let n,r,i=Cg(s,t,a,t.collapsed);if(o.split){if(i=Q_(i),n=FT(e,i,!0),r=FT(e,i),n!==r){if(n=IT(n,!0),r=IT(r,!1),PT(s,n,r)){l(RT(s,P.from(n.firstChild).getOr(n),!0,`span`,{id:`_start`,"data-mce-type":`bookmark`})),p(!0);return}if(PT(s,r,n)){l(RT(s,P.from(r.lastChild).getOr(r),!1,`span`,{id:`_end`,"data-mce-type":`bookmark`})),p(!1);return}n=LT(s,n,`span`,{id:`_start`,"data-mce-type":`bookmark`}),r=LT(s,r,`span`,{id:`_end`,"data-mce-type":`bookmark`});let e=s.createRng();e.setStartAfter(n),e.setEndBefore(r),wg(s,e,e=>{F(e,e=>{!rh(e)&&!rh(e.parentNode)&&l(e)})}),l(n),l(r),n=p(!0),r=p()}else n=r=l(n);i.startContainer=n.parentNode?n.parentNode:n,i.startOffset=s.nodeIndex(n),i.endContainer=r.parentNode?r.parentNode:r,i.endOffset=s.nodeIndex(r)+1}wg(s,i,e=>{F(e,f)})};if(r){if(Nh(r)){let e=s.createRng();e.setStartBefore(r),e.setEndAfter(r),m(e)}else m(r);Xg(e,t,r,n);return}!c.isCollapsed()||!ag(o)||Sh(e).length?(Lh(e,()=>jh(e,m),r=>ag(o)&&Mw(e,t,n,r)),e.nodeChanged()):Xw(e,t,n,i),WT(e,t,n),Xg(e,t,r,n)},XT=(e,t,n,r,i)=>{(r||e.selection.isEditable())&&YT(e,t,n,r,i)},ZT=(e,t,n,r,i)=>GT(e,t,n,r,i).fold(M,t=>(e.dom.rename(r,t),!0),N),QT=B.each,$T=(e,t,n,r)=>{let i=t=>{if(U(t)&&U(t.parentNode)&&Ih(t)){let n=Xh(e,t.parentNode);e.getStyle(t,`color`)&&n?e.setStyle(t,`text-decoration`,n):e.getStyle(t,`text-decoration`)===n&&e.setStyle(t,`text-decoration`,null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(B.walk(r,i,`childNodes`),i(r))},eE=(e,t,n,r)=>{if(t.styles&&t.styles.backgroundColor){let i=DT(e,`fontSize`);TT(r,e=>i(e)&&Ih(e),OT(e,`backgroundColor`,Kh(t.styles.backgroundColor,n)))}},tE=(e,t,n,r)=>{if(ag(t)&&(t.inline===`sub`||t.inline===`sup`)){let n=DT(e,`fontSize`);TT(r,e=>n(e)&&Ih(e),OT(e,`fontSize`,``));let i=I(e.select(t.inline===`sup`?`sub`:`sup`,r),Ih);e.remove(i,!0)}},nE=(e,t,n,r)=>{QT(t,t=>{ag(t)&&QT(e.dom.select(t.inline,r),r=>{bT(r)&&ZT(e,t,n,r,t.exact?r:null)}),wT(e.dom,t,r)})},rE=(e,t,n,r,i)=>{let a=i.parentNode;jw(e,a,n,r)&&ZT(e,t,r,i)||t.merge_with_parents&&a&&e.dom.getParent(a,a=>jw(e,a,n,r)?(ZT(e,t,r,i),!0):!1)},iE=B.each,aE=(e,t,n,r)=>{if(sf(e)&&ag(t)&&n.parentNode){let t=pc(e.schema),i=Sw(V.fromDom(n),e=>Pm(e.dom));return Ye(t,r)&&rs(V.fromDom(n.parentNode),!1)&&!i}else return!1},oE=(e,t,n,r)=>{if(iE(n.styles,(n,i)=>{e.setStyle(t,i,Kh(n,r))}),n.styles){let n=e.getAttrib(t,`style`);n&&e.setAttrib(t,`data-mce-style`,n)}},sE=(e,t,n,r)=>{let i=e.formatter.get(t),a=i[0],o=!r&&e.selection.isCollapsed(),s=e.dom,c=e.selection,l=(e,t=a)=>{T(t.onformat)&&t.onformat(e,t,n,r),oE(s,e,t,n),iE(t.attributes,(t,r)=>{s.setAttrib(e,r,Kh(t,n))}),iE(t.classes,t=>{let r=Kh(t,n);s.hasClass(e,r)||s.addClass(e,r)})},u=(e,t)=>{let n=!1;return iE(e,e=>ig(e)?s.getContentEditable(t)===`false`&&!e.ceFalseOverride||w(e.collapsed)&&e.collapsed!==o?!0:s.is(t,e.selector)&&!Pm(t)?(l(t,e),n=!0,!1):!0:!1),n},d=e=>{if(v(e)){let t=s.create(e);return l(t),t}else return null},f=(r,o,s)=>{let c=[],f=!0,p=a.inline||a.block,m=d(p),h=r=>ng(a)&&jw(e,r,t,n),g=(t,n,r)=>{let i=rg(a)&&Bh(e.schema,t)&&Vh(e,n,p);return r&&i},_=(t,n,i,o)=>{let c=Vh(e,p,t.nodeName.toLowerCase())&&Vh(e,n,p),l=!s&&W(t)&&lo(t.data),u=Pm(t),d=!ag(a)||!r.isBlock(t);return(i||o)&&c&&!l&&!u&&d};wg(r,o,t=>{let n,o=t=>{let s=!1,d=f,v=!1,y=t.parentNode,b=y.nodeName.toLowerCase(),x=r.getContentEditable(t);w(x)&&(d=f,f=x===`true`,s=!0,v=Gh(e,t));let ee=f&&!s;if(Sa(t)&&!aE(e,a,t,b)){n=null,tg(a)&&r.remove(t);return}if(h(t)){n=null;return}if(g(t,b,ee)){let e=r.rename(t,p);l(e),c.push(e),n=null;return}if(ig(a)){let e=u(i,t);if(!e&&w(y)&&sg(a)&&(e=u(i,y)),!ag(a)||e){n=null;return}}w(m)&&_(t,b,ee,v)?(n||(n=r.clone(m,!1),y.insertBefore(n,t),c.push(n)),v&&s&&(f=d),n.appendChild(t)):(n=null,F(Pe(t.childNodes),o),s&&(f=d),n=null)};F(t,o)}),a.links===!0&&F(c,e=>{let t=e=>{e.nodeName===`A`&&l(e,a),F(Pe(e.childNodes),t)};t(e)}),F(c,o=>{let s=e=>{let t=0;return F(e.childNodes,e=>{!Uh(e)&&!rh(e)&&t++}),t},u=e=>Se(e.childNodes,Ph).filter(e=>r.getContentEditable(e)!==`false`&&kw(r,e,a)).map(t=>{let n=r.clone(t,!1);return l(n),r.replace(n,e,!0),r.remove(t,!0),n}).getOr(e),d=s(o);if((c.length>1||!r.isBlock(o))&&d===0){r.remove(o,!0);return}(ag(a)||tg(a)&&a.wrapper)&&(!a.exact&&d===1&&(o=u(o)),nE(e,i,n,o),rE(e,a,t,n,o),eE(r,a,n,o),$T(r,a,n,o),tE(r,a,n,o),CT(e,a,n,o))})},p=Nh(r)?r:c.getNode();if(s.getContentEditable(p)===`false`&&!Gh(e,p)){r=p,u(i,r),Yg(e,t,r,n);return}if(a){if(r)if(Nh(r)){if(!u(i,r)){let e=s.createRng();e.setStartBefore(r),e.setEndAfter(r),f(s,Cg(s,e,i),!0)}}else f(s,r,!0);else !o||!ag(a)||Sh(e).length?(c.setRng(MC(c.getRng())),Lh(e,()=>{jh(e,(e,t)=>{f(s,t?e:Cg(s,e,i),!1)})},N),e.nodeChanged()):Yw(e,t,n),fT(e.formatter,t).each(t=>{F(_T(e.selection),e=>oE(s,e,t,n))});cT(t,e)}Yg(e,t,r,n)},cE=(e,t,n,r)=>{(r||e.selection.isEditable())&&sE(e,t,n,r)},lE=e=>Je(e,`vars`),uE=(e,t)=>{e.set({}),t.on(`NodeChange`,n=>{mE(t,n.element,e.get())}),t.on(`FormatApply FormatRemove`,n=>{mE(t,P.from(n.node).map(e=>Nh(e)?e:e.startContainer).bind(e=>U(e)?P.some(e):P.from(e.parentElement)).getOrThunk(()=>dE(t)),e.get())})},dE=e=>e.selection.getStart(),fE=(e,t,n,r,i)=>xe(t,t=>!C(e.formatter.matchNode(t,n,i??{},r)),t=>Dw(e,t,n)?!0:r?!1:w(e.formatter.matchNode(t,n,i,!0))),pE=(e,t)=>{let n=t??dE(e);return I(Zh(e.dom,n),e=>U(e)&&!fa(e))},mE=(e,t,n)=>{let r=pE(e,t);ze(n,(n,i)=>{let a=n=>{let a=fE(e,r,i,n.similar,lE(n)?n.vars:void 0),o=a.isSome();if(n.state.get()!==o){n.state.set(o);let e=a.getOr(t);lE(n)?n.callback(o,{node:e,format:i,parents:r}):F(n.callbacks,t=>t(o,{node:e,format:i,parents:r}))}};F([n.withSimilar,n.withoutSimilar],a),F(n.withVars,a)})},hE=(e,t,n,r,i,a)=>{let o=t.get();F(n.split(`,`),t=>{let n=qe(o,t).getOrThunk(()=>{let e={withSimilar:{state:Wc(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Wc(!1),similar:!1,callbacks:[]},withVars:[]};return o[t]=e,e}),s=()=>fE(e,pE(e),t,i,a).isSome();if(C(a)){let e=i?n.withSimilar:n.withoutSimilar;e.callbacks.push(r),e.callbacks.length===1&&e.state.set(s())}else n.withVars.push({state:Wc(s()),similar:i,vars:a,callback:r})}),t.set(o)},gE=(e,t,n)=>{let r=e.get();F(t.split(`,`),e=>qe(r,e).each(t=>{r[e]={withSimilar:{...t.withSimilar,callbacks:I(t.withSimilar.callbacks,e=>e!==n)},withoutSimilar:{...t.withoutSimilar,callbacks:I(t.withoutSimilar.callbacks,e=>e!==n)},withVars:I(t.withVars,e=>e.callback!==n)}})),e.set(r)},_E=(e,t,n,r,i,a)=>(hE(e,t,n,r,i,a),{unbind:()=>gE(t,n,r)}),vE=(e,t,n,r)=>{let i=e.formatter.get(t);i&&(Mw(e,t,n,r)&&(!(`toggle`in i[0])||i[0].toggle)?XT(e,t,n,r):cE(e,t,n,r))},yE=B.explode,bE=()=>{let e={};return{addFilter:(t,n)=>{F(yE(t),t=>{Je(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(n)})},getFilters:()=>Ke(e),removeFilter:(t,n)=>{F(yE(t),t=>{if(Je(e,t))if(w(n)){let r=e[t],i=I(r.callbacks,e=>e!==n);i.length>0?r.callbacks=i:delete e[t]}else delete e[t]})}}},xE=(e,t)=>{F(t,t=>{e.attr(t,null)})},SE=(e,t,n)=>{e.addNodeFilter(`font`,e=>{F(e,e=>{let r=t.parse(e.attr(`style`)),i=e.attr(`color`),a=e.attr(`face`),o=e.attr(`size`);i&&(r.color=i),a&&(r[`font-family`]=a),o&&jt(o).each(e=>{r[`font-size`]=n[e-1]}),e.name=`span`,e.attr(`style`,t.serialize(r)),xE(e,[`color`,`face`,`size`])})})},CE=(e,t,n)=>{e.addNodeFilter(`strike`,e=>{let r=t.type!==`html4`;F(e,e=>{if(r)e.name=`s`;else{let t=n.parse(e.attr(`style`));t[`text-decoration`]=`line-through`,e.name=`span`,e.attr(`style`,n.serialize(t))}})})},wE=(e,t,n)=>{let r=gc();t.convert_fonts_to_spans&&SE(e,r,B.explode(t.font_size_legacy_values??``)),CE(e,n,r)},TE=(e,t,n)=>{t.inline_styles&&wE(e,t,n)},EE=(e,t,n)=>{t.addNodeFilter(`br`,(t,r,i)=>{let a=B.extend({},n.getBlockElements()),o=n.getNonEmptyElements(),s=n.getWhitespaceElements();a.body=1;let c=e=>e.name in a||xs(n,e);for(let r=0,l=t.length;r<l;r++){let l=t[r],u=l.parent;if(u&&c(u)&&l===u.lastChild){let t=l.prev;for(;t;){let e=t.name;if(e!==`span`||t.attr(`data-mce-type`)!==`bookmark`){e===`br`&&(l=null);break}t=t.prev}if(l&&(l.remove(),CC(n,o,s,u))){let t=n.getElementRule(u.name);t&&(t.removeEmpty?u.remove():t.paddEmpty&&yC(e,i,c,u))}}else{let e=l;for(;u&&u.firstChild===e&&u.lastChild===e&&(e=u,!a[u.name]);)u=u.parent;if(e===u){let e=new Yy(`#text`,3);e.value=`\xA0`,l.replace(e)}}}})},DE=e=>fetch(e).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:`blob`})),OE=e=>{let t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:``},kE=e=>{let[t,...n]=e.split(`,`),r=n.join(`,`),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(i){let e=i[2]===`;base64`,t=e?OE(r):decodeURIComponent(r);return P.some({type:i[1],data:t,base64Encoded:e})}else return P.none()},AE=(e,t,n=!0)=>{let r=t;if(n)try{r=atob(t)}catch{return P.none()}let i=new Uint8Array(r.length);for(let e=0;e<i.length;e++)i[e]=r.charCodeAt(e);return P.some(new Blob([i],{type:e}))},jE=e=>new Promise((t,n)=>{kE(e).bind(({type:e,data:t,base64Encoded:n})=>AE(e,t,n)).fold(()=>n(`Invalid data URI`),t)}),ME=e=>St(e,`blob:`)?DE(e):St(e,`data:`)?jE(e):Promise.reject(`Unknown URI format`),NE=e=>new Promise((t,n)=>{let r=new FileReader;r.onloadend=()=>{t(r.result)},r.onerror=()=>{n(r.error?.message)},r.readAsDataURL(e)}),PE=0,FE=e=>(e||`blobid`)+ PE++,IE=(e,t,n)=>kE(e).bind(({data:e,type:r,base64Encoded:i})=>t&&!i?P.none():n(i?e:btoa(e),r)),LE=(e,t,n)=>{let r=e.create(FE(),t,n);return e.add(r),r},RE=(e,t,n=!1)=>IE(t,n,(t,n)=>P.from(e.getByData(t,n)).orThunk(()=>AE(n,t).map(n=>LE(e,n,t)))),zE=(e,t)=>{let n=()=>Promise.reject(`Invalid data URI`);if(St(t,`blob:`)){let r=e.getByUri(t);return w(r)?Promise.resolve(r):ME(t).then(t=>NE(t).then(r=>IE(r,!1,n=>P.some(LE(e,t,n))).getOrThunk(n)))}else if(St(t,`data:`))return RE(e,t).fold(n,e=>Promise.resolve(e));else return Promise.reject(`Unknown image data format`)},BE=e=>w(e.attr(`data-mce-bogus`)),VE=e=>e.attr(`src`)===fn.transparentSrc||w(e.attr(`data-mce-placeholder`)),HE=(e,t)=>{let{blob_cache:n}=t;if(n){let t=e=>{let t=e.attr(`src`);VE(e)||BE(e)||te(t)||RE(n,t,!0).each(t=>{e.attr(`src`,t.blobUri())})};e.addAttributeFilter(`src`,e=>F(e,t))}},UE=(e,t)=>{let n=e.schema;t.remove_trailing_brs&&EE(t,e,n),e.addAttributeFilter(`href`,e=>{let n=e.length,r=e=>e.split(` `).filter(e=>e.length>0).concat([`noopener`]).sort().join(` `),i=e=>{let t=e?B.trim(e):``;return/\b(noopener)\b/g.test(t)?t:r(t)};if(!t.allow_unsafe_link_target)for(;n--;){let t=e[n];t.name===`a`&&t.attr(`target`)===`_blank`&&t.attr(`rel`,i(t.attr(`rel`)))}}),t.allow_html_in_named_anchor||e.addAttributeFilter(`id,name`,e=>{let t=e.length,n,r,i,a;for(;t--;)if(a=e[t],a.name===`a`&&a.firstChild&&!a.attr(`href`))for(i=a.parent,n=a.lastChild;n&&i;)r=n.prev,i.insert(n,a),n=r}),t.fix_list_elements&&e.addNodeFilter(`ul,ol`,e=>{let t=e.length,n,r;for(;t--;)if(n=e[t],r=n.parent,r&&(r.name===`ul`||r.name===`ol`))if(n.prev&&n.prev.name===`li`)n.prev.append(n);else{let e=new Yy(`li`,1);e.attr(`style`,`list-style-type: none`),n.wrap(e)}});let r=n.getValidClasses();t.validate&&r&&e.addAttributeFilter(`class`,e=>{let t=e.length;for(;t--;){let n=e[t],i=n.attr(`class`)??``,a=B.explode(i,` `),o=``;for(let e=0;e<a.length;e++){let t=a[e],i=!1,s=r[`*`];s&&s[t]&&(i=!0),s=r[n.name],!i&&s&&s[t]&&(i=!0),i&&(o&&(o+=` `),o+=t)}o.length||(o=null),n.attr(`class`,o)}}),HE(e,t)};function WE(e){"@babel/helpers - typeof";return WE=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},WE(e)}function GE(e,t){return GE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},GE(e,t)}function KE(){if(typeof Reflect>`u`||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==`function`)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qE(e,t,n){return qE=KE()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&GE(i,n.prototype),i},qE.apply(null,arguments)}function JE(e){return YE(e)||XE(e)||ZE(e)||$E()}function YE(e){if(Array.isArray(e))return QE(e)}function XE(e){if(typeof Symbol<`u`&&e[Symbol.iterator]!=null||e[`@@iterator`]!=null)return Array.from(e)}function ZE(e,t){if(e){if(typeof e==`string`)return QE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n===`Object`&&e.constructor&&(n=e.constructor.name),n===`Map`||n===`Set`)return Array.from(e);if(n===`Arguments`||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QE(e,t)}}function QE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $E(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var eD=Object.hasOwnProperty,tD=Object.setPrototypeOf,nD=Object.isFrozen,rD=Object.getPrototypeOf,iD=Object.getOwnPropertyDescriptor,aD=Object.freeze,oD=Object.seal,sD=Object.create,cD=typeof Reflect<`u`&&Reflect,lD=cD.apply,uD=cD.construct;lD||=function(e,t,n){return e.apply(t,n)},aD||=function(e){return e},oD||=function(e){return e},uD||=function(e,t){return qE(e,JE(t))};var dD=xD(Array.prototype.forEach),fD=xD(Array.prototype.pop),pD=xD(Array.prototype.push),mD=xD(String.prototype.toLowerCase),hD=xD(String.prototype.match),gD=xD(String.prototype.replace),_D=xD(String.prototype.indexOf),vD=xD(String.prototype.trim),yD=xD(RegExp.prototype.test),bD=SD(TypeError);function xD(e){return function(t){var n=[...arguments].slice(1);return lD(e,t,n)}}function SD(e){return function(){return uD(e,[...arguments])}}function CD(e,t){tD&&tD(e,null);for(var n=t.length;n--;){var r=t[n];if(typeof r==`string`){var i=mD(r);i!==r&&(nD(t)||(t[n]=i),r=i)}e[r]=!0}return e}function wD(e){var t=sD(null),n;for(n in e)lD(eD,e,[n])&&(t[n]=e[n]);return t}function TD(e,t){for(;e!==null;){var n=iD(e,t);if(n){if(n.get)return xD(n.get);if(typeof n.value==`function`)return xD(n.value)}e=rD(e)}function r(e){return console.warn(`fallback value for`,e),null}return r}var ED=aD(`a.abbr.acronym.address.area.article.aside.audio.b.bdi.bdo.big.blink.blockquote.body.br.button.canvas.caption.center.cite.code.col.colgroup.content.data.datalist.dd.decorator.del.details.dfn.dialog.dir.div.dl.dt.element.em.fieldset.figcaption.figure.font.footer.form.h1.h2.h3.h4.h5.h6.head.header.hgroup.hr.html.i.img.input.ins.kbd.label.legend.li.main.map.mark.marquee.menu.menuitem.meter.nav.nobr.ol.optgroup.option.output.p.picture.pre.progress.q.rp.rt.ruby.s.samp.section.select.shadow.small.source.spacer.span.strike.strong.style.sub.summary.sup.table.tbody.td.template.textarea.tfoot.th.thead.time.tr.track.tt.u.ul.var.video.wbr`.split(`.`)),DD=aD(`svg.a.altglyph.altglyphdef.altglyphitem.animatecolor.animatemotion.animatetransform.circle.clippath.defs.desc.ellipse.filter.font.g.glyph.glyphref.hkern.image.line.lineargradient.marker.mask.metadata.mpath.path.pattern.polygon.polyline.radialgradient.rect.stop.style.switch.symbol.text.textpath.title.tref.tspan.view.vkern`.split(`.`)),OD=aD([`feBlend`,`feColorMatrix`,`feComponentTransfer`,`feComposite`,`feConvolveMatrix`,`feDiffuseLighting`,`feDisplacementMap`,`feDistantLight`,`feFlood`,`feFuncA`,`feFuncB`,`feFuncG`,`feFuncR`,`feGaussianBlur`,`feImage`,`feMerge`,`feMergeNode`,`feMorphology`,`feOffset`,`fePointLight`,`feSpecularLighting`,`feSpotLight`,`feTile`,`feTurbulence`]),kD=aD([`animate`,`color-profile`,`cursor`,`discard`,`fedropshadow`,`font-face`,`font-face-format`,`font-face-name`,`font-face-src`,`font-face-uri`,`foreignobject`,`hatch`,`hatchpath`,`mesh`,`meshgradient`,`meshpatch`,`meshrow`,`missing-glyph`,`script`,`set`,`solidcolor`,`unknown`,`use`]),AD=aD(`math.menclose.merror.mfenced.mfrac.mglyph.mi.mlabeledtr.mmultiscripts.mn.mo.mover.mpadded.mphantom.mroot.mrow.ms.mspace.msqrt.mstyle.msub.msup.msubsup.mtable.mtd.mtext.mtr.munder.munderover`.split(`.`)),jD=aD([`maction`,`maligngroup`,`malignmark`,`mlongdiv`,`mscarries`,`mscarry`,`msgroup`,`mstack`,`msline`,`msrow`,`semantics`,`annotation`,`annotation-xml`,`mprescripts`,`none`]),MD=aD([`#text`]),ND=aD(`accept.action.align.alt.autocapitalize.autocomplete.autopictureinpicture.autoplay.background.bgcolor.border.capture.cellpadding.cellspacing.checked.cite.class.clear.color.cols.colspan.controls.controlslist.coords.crossorigin.datetime.decoding.default.dir.disabled.disablepictureinpicture.disableremoteplayback.download.draggable.enctype.enterkeyhint.face.for.headers.height.hidden.high.href.hreflang.id.inputmode.integrity.ismap.kind.label.lang.list.loading.loop.low.max.maxlength.media.method.min.minlength.multiple.muted.name.nonce.noshade.novalidate.nowrap.open.optimum.pattern.placeholder.playsinline.poster.preload.pubdate.radiogroup.readonly.rel.required.rev.reversed.role.rows.rowspan.spellcheck.scope.selected.shape.size.sizes.span.srclang.start.src.srcset.step.style.summary.tabindex.title.translate.type.usemap.valign.value.width.xmlns.slot`.split(`.`)),PD=aD(`accent-height.accumulate.additive.alignment-baseline.ascent.attributename.attributetype.azimuth.basefrequency.baseline-shift.begin.bias.by.class.clip.clippathunits.clip-path.clip-rule.color.color-interpolation.color-interpolation-filters.color-profile.color-rendering.cx.cy.d.dx.dy.diffuseconstant.direction.display.divisor.dur.edgemode.elevation.end.fill.fill-opacity.fill-rule.filter.filterunits.flood-color.flood-opacity.font-family.font-size.font-size-adjust.font-stretch.font-style.font-variant.font-weight.fx.fy.g1.g2.glyph-name.glyphref.gradientunits.gradienttransform.height.href.id.image-rendering.in.in2.k.k1.k2.k3.k4.kerning.keypoints.keysplines.keytimes.lang.lengthadjust.letter-spacing.kernelmatrix.kernelunitlength.lighting-color.local.marker-end.marker-mid.marker-start.markerheight.markerunits.markerwidth.maskcontentunits.maskunits.max.mask.media.method.mode.min.name.numoctaves.offset.operator.opacity.order.orient.orientation.origin.overflow.paint-order.path.pathlength.patterncontentunits.patterntransform.patternunits.points.preservealpha.preserveaspectratio.primitiveunits.r.rx.ry.radius.refx.refy.repeatcount.repeatdur.restart.result.rotate.scale.seed.shape-rendering.specularconstant.specularexponent.spreadmethod.startoffset.stddeviation.stitchtiles.stop-color.stop-opacity.stroke-dasharray.stroke-dashoffset.stroke-linecap.stroke-linejoin.stroke-miterlimit.stroke-opacity.stroke.stroke-width.style.surfacescale.systemlanguage.tabindex.targetx.targety.transform.transform-origin.text-anchor.text-decoration.text-rendering.textlength.type.u1.u2.unicode.values.viewbox.visibility.version.vert-adv-y.vert-origin-x.vert-origin-y.width.word-spacing.wrap.writing-mode.xchannelselector.ychannelselector.x.x1.x2.xmlns.y.y1.y2.z.zoomandpan`.split(`.`)),FD=aD(`accent.accentunder.align.bevelled.close.columnsalign.columnlines.columnspan.denomalign.depth.dir.display.displaystyle.encoding.fence.frame.height.href.id.largeop.length.linethickness.lspace.lquote.mathbackground.mathcolor.mathsize.mathvariant.maxsize.minsize.movablelimits.notation.numalign.open.rowalign.rowlines.rowspacing.rowspan.rspace.rquote.scriptlevel.scriptminsize.scriptsizemultiplier.selection.separator.separators.stretchy.subscriptshift.supscriptshift.symmetric.voffset.width.xmlns`.split(`.`)),ID=aD([`xlink:href`,`xml:id`,`xlink:title`,`xml:space`,`xmlns:xlink`]),LD=oD(/\{\{[\w\W]*|[\w\W]*\}\}/gm),RD=oD(/<%[\w\W]*|[\w\W]*%>/gm),zD=oD(/^data-[\-\w.\u00B7-\uFFFF]/),BD=oD(/^aria-[\-\w]+$/),VD=oD(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),HD=oD(/^(?:\w+script|data):/i),UD=oD(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),WD=oD(/^html$/i),GD=function(){return typeof window>`u`?null:window},KD=function(e,t){if(WE(e)!==`object`||typeof e.createPolicy!=`function`)return null;var n=null,r=`data-tt-policy-suffix`;t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var i=`dompurify`+(n?`#`+n:``);try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch{return console.warn(`TrustedTypes policy `+i+` could not be created.`),null}};function qD(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:GD(),t=function(e){return qD(e)};if(t.version=`2.3.8`,t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var n=e.document,r=e.document,i=e.DocumentFragment,a=e.HTMLTemplateElement,o=e.Node,s=e.Element,c=e.NodeFilter,l=e.NamedNodeMap,u=l===void 0?e.NamedNodeMap||e.MozNamedAttrMap:l,d=e.HTMLFormElement,f=e.DOMParser,p=e.trustedTypes,m=s.prototype,h=TD(m,`cloneNode`),g=TD(m,`nextSibling`),_=TD(m,`childNodes`),v=TD(m,`parentNode`);if(typeof a==`function`){var y=r.createElement(`template`);y.content&&y.content.ownerDocument&&(r=y.content.ownerDocument)}var b=KD(p,n),x=b?b.createHTML(``):``,ee=r,S=ee.implementation,C=ee.createNodeIterator,te=ee.createDocumentFragment,w=ee.getElementsByTagName,T=n.importNode,E={};try{E=wD(r).documentMode?r.documentMode:{}}catch{}var ne={};t.isSupported=typeof v==`function`&&S&&S.createHTMLDocument!==void 0&&E!==9;var D=LD,re=RD,O=zD,k=BD,ie=HD,ae=UD,A=VD,j=null,oe=CD({},[].concat(JE(ED),JE(DD),JE(OD),JE(AD),JE(MD))),se=null,ce=CD({},[].concat(JE(ND),JE(PD),JE(FD),JE(ID))),M=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),N=null,P=null,le=!0,ue=!0,de=!1,fe=!1,pe=!1,me=!1,he=!1,ge=!1,F=!1,_e=!1,ve=!0,I=!0,ye=!1,be={},xe=null,Se=CD({},[`annotation-xml`,`audio`,`colgroup`,`desc`,`foreignobject`,`head`,`iframe`,`math`,`mi`,`mn`,`mo`,`ms`,`mtext`,`noembed`,`noframes`,`noscript`,`plaintext`,`script`,`style`,`svg`,`template`,`thead`,`title`,`video`,`xmp`]),Ce=null,we=CD({},[`audio`,`video`,`img`,`source`,`image`,`track`]),Te=null,Ee=CD({},[`alt`,`class`,`for`,`id`,`label`,`name`,`pattern`,`placeholder`,`role`,`summary`,`title`,`value`,`style`,`xmlns`]),De=`http://www.w3.org/1998/Math/MathML`,Oe=`http://www.w3.org/2000/svg`,ke=`http://www.w3.org/1999/xhtml`,Ae=ke,je=!1,Me,Ne=[`application/xhtml+xml`,`text/html`],Pe=`text/html`,Fe,Ie=null,Le=r.createElement(`form`),Re=function(e){return e instanceof RegExp||e instanceof Function},ze=function(e){Ie&&Ie===e||((!e||WE(e)!==`object`)&&(e={}),e=wD(e),j=`ALLOWED_TAGS`in e?CD({},e.ALLOWED_TAGS):oe,se=`ALLOWED_ATTR`in e?CD({},e.ALLOWED_ATTR):ce,Te=`ADD_URI_SAFE_ATTR`in e?CD(wD(Ee),e.ADD_URI_SAFE_ATTR):Ee,Ce=`ADD_DATA_URI_TAGS`in e?CD(wD(we),e.ADD_DATA_URI_TAGS):we,xe=`FORBID_CONTENTS`in e?CD({},e.FORBID_CONTENTS):Se,N=`FORBID_TAGS`in e?CD({},e.FORBID_TAGS):{},P=`FORBID_ATTR`in e?CD({},e.FORBID_ATTR):{},be=`USE_PROFILES`in e?e.USE_PROFILES:!1,le=e.ALLOW_ARIA_ATTR!==!1,ue=e.ALLOW_DATA_ATTR!==!1,de=e.ALLOW_UNKNOWN_PROTOCOLS||!1,fe=e.SAFE_FOR_TEMPLATES||!1,pe=e.WHOLE_DOCUMENT||!1,ge=e.RETURN_DOM||!1,F=e.RETURN_DOM_FRAGMENT||!1,_e=e.RETURN_TRUSTED_TYPE||!1,he=e.FORCE_BODY||!1,ve=e.SANITIZE_DOM!==!1,I=e.KEEP_CONTENT!==!1,ye=e.IN_PLACE||!1,A=e.ALLOWED_URI_REGEXP||A,Ae=e.NAMESPACE||ke,e.CUSTOM_ELEMENT_HANDLING&&Re(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(M.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Re(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(M.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements==`boolean`&&(M.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Me=Me=Ne.indexOf(e.PARSER_MEDIA_TYPE)===-1?Pe:e.PARSER_MEDIA_TYPE,Fe=Me===`application/xhtml+xml`?function(e){return e}:mD,fe&&(ue=!1),F&&(ge=!0),be&&(j=CD({},JE(MD)),se=[],be.html===!0&&(CD(j,ED),CD(se,ND)),be.svg===!0&&(CD(j,DD),CD(se,PD),CD(se,ID)),be.svgFilters===!0&&(CD(j,OD),CD(se,PD),CD(se,ID)),be.mathMl===!0&&(CD(j,AD),CD(se,FD),CD(se,ID))),e.ADD_TAGS&&(j===oe&&(j=wD(j)),CD(j,e.ADD_TAGS)),e.ADD_ATTR&&(se===ce&&(se=wD(se)),CD(se,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&CD(Te,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(xe===Se&&(xe=wD(xe)),CD(xe,e.FORBID_CONTENTS)),I&&(j[`#text`]=!0),pe&&CD(j,[`html`,`head`,`body`]),j.table&&(CD(j,[`tbody`]),delete N.tbody),aD&&aD(e),Ie=e)},L=CD({},[`mi`,`mo`,`mn`,`ms`,`mtext`]),Be=CD({},[`foreignobject`,`desc`,`title`,`annotation-xml`]),Ve=CD({},[`title`,`style`,`font`,`a`,`script`]),He=CD({},DD);CD(He,OD),CD(He,kD);var Ue=CD({},AD);CD(Ue,jD);var We=function(e){var t=v(e);(!t||!t.tagName)&&(t={namespaceURI:ke,tagName:`template`});var n=mD(e.tagName),r=mD(t.tagName);return e.namespaceURI===Oe?t.namespaceURI===ke?n===`svg`:t.namespaceURI===De?n===`svg`&&(r===`annotation-xml`||L[r]):!!He[n]:e.namespaceURI===De?t.namespaceURI===ke?n===`math`:t.namespaceURI===Oe?n===`math`&&Be[r]:!!Ue[n]:e.namespaceURI===ke?t.namespaceURI===Oe&&!Be[r]||t.namespaceURI===De&&!L[r]?!1:!Ue[n]&&(Ve[n]||!He[n]):!1},Ge=function(e){pD(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch{try{e.outerHTML=x}catch{e.remove()}}},Ke=function(e,n){try{pD(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch{pD(t.removed,{attribute:null,from:n})}if(n.removeAttribute(e),e===`is`&&!se[e])if(ge||F)try{Ge(n)}catch{}else try{n.setAttribute(e,``)}catch{}},qe=function(e){var t,n;if(he)e=`<remove></remove>`+e;else{var i=hD(e,/^[\r\n\t ]+/);n=i&&i[0]}Me===`application/xhtml+xml`&&(e=`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>`+e+`</body></html>`);var a=b?b.createHTML(e):e;if(Ae===ke)try{t=new f().parseFromString(a,Me)}catch{}if(!t||!t.documentElement){t=S.createDocument(Ae,`template`,null);try{t.documentElement.innerHTML=je?``:a}catch{}}var o=t.body||t.documentElement;return e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),Ae===ke?w.call(t,pe?`html`:`body`)[0]:pe?t.documentElement:o},Je=function(e){return C.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Ye=function(e){return e instanceof d&&(typeof e.nodeName!=`string`||typeof e.textContent!=`string`||typeof e.removeChild!=`function`||!(e.attributes instanceof u)||typeof e.removeAttribute!=`function`||typeof e.setAttribute!=`function`||typeof e.namespaceURI!=`string`||typeof e.insertBefore!=`function`)},Xe=function(e){return WE(o)===`object`?e instanceof o:e&&WE(e)===`object`&&typeof e.nodeType==`number`&&typeof e.nodeName==`string`},Ze=function(e,n,r){ne[e]&&dD(ne[e],function(e){e.call(t,n,r,Ie)})},Qe=function(e){var n;if(Ze(`beforeSanitizeElements`,e,null),Ye(e)||yD(/[\u0080-\uFFFF]/,e.nodeName))return Ge(e),!0;var r=Fe(e.nodeName);if(Ze(`uponSanitizeElement`,e,{tagName:r,allowedTags:j}),e.hasChildNodes()&&!Xe(e.firstElementChild)&&(!Xe(e.content)||!Xe(e.content.firstElementChild))&&yD(/<[/\w]/g,e.innerHTML)&&yD(/<[/\w]/g,e.textContent)||r===`select`&&yD(/<template/i,e.innerHTML))return Ge(e),!0;if(!j[r]||N[r]){if(!N[r]&&et(r)&&(M.tagNameCheck instanceof RegExp&&yD(M.tagNameCheck,r)||M.tagNameCheck instanceof Function&&M.tagNameCheck(r)))return!1;if(I&&!xe[r]){var i=v(e)||e.parentNode,a=_(e)||e.childNodes;if(a&&i)for(var o=a.length-1;o>=0;--o)i.insertBefore(h(a[o],!0),g(e))}return Ge(e),!0}return e instanceof s&&!We(e)||(r===`noscript`||r===`noembed`)&&yD(/<\/no(script|embed)/i,e.innerHTML)?(Ge(e),!0):(fe&&e.nodeType===3&&(n=e.textContent,n=gD(n,D,` `),n=gD(n,re,` `),e.textContent!==n&&(pD(t.removed,{element:e.cloneNode()}),e.textContent=n)),Ze(`afterSanitizeElements`,e,null),!1)},$e=function(e,t,n){if(ve&&(t===`id`||t===`name`)&&(n in r||n in Le))return!1;if(!(ue&&!P[t]&&yD(O,t))&&!(le&&yD(k,t))){if(!se[t]||P[t]){if(!(et(e)&&(M.tagNameCheck instanceof RegExp&&yD(M.tagNameCheck,e)||M.tagNameCheck instanceof Function&&M.tagNameCheck(e))&&(M.attributeNameCheck instanceof RegExp&&yD(M.attributeNameCheck,t)||M.attributeNameCheck instanceof Function&&M.attributeNameCheck(t))||t===`is`&&M.allowCustomizedBuiltInElements&&(M.tagNameCheck instanceof RegExp&&yD(M.tagNameCheck,n)||M.tagNameCheck instanceof Function&&M.tagNameCheck(n))))return!1}else if(!Te[t]&&!yD(A,gD(n,ae,``))&&!((t===`src`||t===`xlink:href`||t===`href`)&&e!==`script`&&_D(n,`data:`)===0&&Ce[e])&&!(de&&!yD(ie,gD(n,ae,``)))&&n)return!1}return!0},et=function(e){return e.indexOf(`-`)>0},tt=function(e){var t,n,r,i;Ze(`beforeSanitizeAttributes`,e,null);var a=e.attributes;if(a){var o={attrName:``,attrValue:``,keepAttr:!0,allowedAttributes:se};for(i=a.length;i--;){t=a[i];var s=t,c=s.name,l=s.namespaceURI;n=c===`value`?t.value:vD(t.value),r=Fe(c);var u=n;if(o.attrName=r,o.attrValue=n,o.keepAttr=!0,o.forceKeepAttr=void 0,Ze(`uponSanitizeAttribute`,e,o),n=o.attrValue,!o.forceKeepAttr){if(!o.keepAttr){Ke(c,e);continue}if(yD(/\/>/i,n)){Ke(c,e);continue}if(fe&&(n=gD(n,D,` `),n=gD(n,re,` `)),!$e(Fe(e.nodeName),r,n)){Ke(c,e);continue}if(n!==u)try{l?e.setAttributeNS(l,c,n):e.setAttribute(c,n)}catch{Ke(c,e)}}}Ze(`afterSanitizeAttributes`,e,null)}},nt=function e(t){var n,r=Je(t);for(Ze(`beforeSanitizeShadowDOM`,t,null);n=r.nextNode();)Ze(`uponSanitizeShadowNode`,n,null),!Qe(n)&&(n.content instanceof i&&e(n.content),tt(n));Ze(`afterSanitizeShadowDOM`,t,null)};return t.sanitize=function(r,a){var s,c,l,u,d;if(je=!r,je&&(r=`<!-->`),typeof r!=`string`&&!Xe(r)){if(typeof r.toString!=`function`)throw bD(`toString is not a function`);if(r=r.toString(),typeof r!=`string`)throw bD(`dirty is not a string, aborting`)}if(!t.isSupported){if(WE(e.toStaticHTML)===`object`||typeof e.toStaticHTML==`function`){if(typeof r==`string`)return e.toStaticHTML(r);if(Xe(r))return e.toStaticHTML(r.outerHTML)}return r}if(me||ze(a),t.removed=[],typeof r==`string`&&(ye=!1),ye){if(r.nodeName){var f=Fe(r.nodeName);if(!j[f]||N[f])throw bD(`root node is forbidden and cannot be sanitized in-place`)}}else if(r instanceof o)s=qe(`<!---->`),c=s.ownerDocument.importNode(r,!0),c.nodeType===1&&c.nodeName===`BODY`||c.nodeName===`HTML`?s=c:s.appendChild(c);else{if(!ge&&!fe&&!pe&&r.indexOf(`<`)===-1)return b&&_e?b.createHTML(r):r;if(s=qe(r),!s)return ge?null:_e?x:``}s&&he&&Ge(s.firstChild);for(var p=Je(ye?r:s);l=p.nextNode();)l.nodeType===3&&l===u||Qe(l)||(l.content instanceof i&&nt(l.content),tt(l),u=l);if(u=null,ye)return r;if(ge){if(F)for(d=te.call(s.ownerDocument);s.firstChild;)d.appendChild(s.firstChild);else d=s;return se.shadowroot&&(d=T.call(n,d,!0)),d}var m=pe?s.outerHTML:s.innerHTML;return pe&&j[`!doctype`]&&s.ownerDocument&&s.ownerDocument.doctype&&s.ownerDocument.doctype.name&&yD(WD,s.ownerDocument.doctype.name)&&(m=`<!DOCTYPE `+s.ownerDocument.doctype.name+`>
`+m),fe&&(m=gD(m,D,` `),m=gD(m,re,` `)),b&&_e?b.createHTML(m):m},t.setConfig=function(e){ze(e),me=!0},t.clearConfig=function(){Ie=null,me=!1},t.isValidAttribute=function(e,t,n){return Ie||ze({}),$e(Fe(e),Fe(t),n)},t.addHook=function(e,t){typeof t==`function`&&(ne[e]=ne[e]||[],pD(ne[e],t))},t.removeHook=function(e){if(ne[e])return fD(ne[e])},t.removeHooks=function(e){ne[e]&&(ne[e]=[])},t.removeAllHooks=function(){ne={}},t}var JD=qD();let YD=B.each,XD=B.trim,ZD=[`source`,`protocol`,`authority`,`userInfo`,`user`,`password`,`host`,`port`,`relative`,`path`,`directory`,`file`,`query`,`anchor`],QD={ftp:21,http:80,https:443,mailto:25},$D=[`img`,`video`],eO=(e,t)=>w(e)?!e:w(t)?!me($D,t):!0,tO=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},nO=(e,t,n)=>{let r=tO(t).replace(/\s/g,``);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?eO(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class rO{static parseDataUri(e){let t,n=decodeURIComponent(e).split(`,`),r=/data:([^;]+)/.exec(n[0]);return r&&(t=r[1]),{type:t,data:n[1]}}static isDomSafe(e,t,n={}){return n.allow_script_urls?!0:!nO(n,Zs.decode(e).replace(/[\s\u0000-\u001F]+/g,``),t)}static getDocumentBaseUrl(e){let t;return t=e.protocol.indexOf(`http`)!==0&&e.protocol!==`file:`?e.href??``:e.protocol+`//`+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,``).replace(/[\/\\][^\/]+$/,``),/[\/\\]$/.test(t)||(t+=`/`)),t}constructor(e,t={}){this.path=``,this.directory=``,e=XD(e),this.settings=t;let n=t.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)){r.source=e;return}let i=e.indexOf(`//`)===0;if(e.indexOf(`/`)===0&&!i&&(e=(n&&n.protocol||`http`)+`://mce_host`+e),!/^[\w\-]*:?\/\//.test(e)){let t=n?n.path:new rO(document.location.href).directory;if(n?.protocol===``)e=`//mce_host`+r.toAbsPath(t,e);else{let i=/([^#?]*)([#?]?.*)/.exec(e);i&&(e=(n&&n.protocol||`http`)+`://mce_host`+r.toAbsPath(t,i[1])+i[2])}}e=e.replace(/@@/g,`(mce_at)`);let a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&YD(ZD,(e,t)=>{let n=a[t];n&&=n.replace(/\(mce_at\)/g,`@@`),r[e]=n}),n&&(r.protocol||=n.protocol,r.userInfo||=n.userInfo,!r.port&&r.host===`mce_host`&&(r.port=n.port),(!r.host||r.host===`mce_host`)&&(r.host=n.host),r.source=``),i&&(r.protocol=``)}setPath(e){let t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source=``,this.getURI()}toRelative(e){if(e===`./`)return e;let t=new rO(e,{base_uri:this});if(t.host!==`mce_host`&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&t.protocol!==``)return t.getURI();let n=this.getURI(),r=t.getURI();if(n===r||n.charAt(n.length-1)===`/`&&n.substr(0,n.length-1)===r)return n;let i=this.toRelPath(this.path,t.path);return t.query&&(i+=`?`+t.query),t.anchor&&(i+=`#`+t.anchor),i}toAbsolute(e,t){let n=new rO(e,{base_uri:this});return n.getURI(t&&this.isSameOrigin(n))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;let t=this.protocol?QD[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let n=0,r=``,i,a,o=e.substring(0,e.lastIndexOf(`/`)).split(`/`),s=t.split(`/`);if(o.length>=s.length){for(i=0,a=o.length;i<a;i++)if(i>=s.length||o[i]!==s[i]){n=i+1;break}}if(o.length<s.length){for(i=0,a=s.length;i<a;i++)if(i>=o.length||o[i]!==s[i]){n=i+1;break}}if(n===1)return t;for(i=0,a=o.length-(n-1);i<a;i++)r+=`../`;for(i=n-1,a=s.length;i<a;i++)i===n-1?r+=s[i]:r+=`/`+s[i];return r}toAbsPath(e,t){let n=0,r=/\/$/.test(t)?`/`:``,i=e.split(`/`),a=t.split(`/`),o=[];YD(i,e=>{e&&o.push(e)});let s=[];for(let e=a.length-1;e>=0;e--)if(!(a[e].length===0||a[e]===`.`)){if(a[e]===`..`){n++;continue}if(n>0){n--;continue}s.push(a[e])}let c=o.length-n,l;return l=c<=0?De(s).join(`/`):o.slice(0,c).join(`/`)+`/`+De(s).join(`/`),l.indexOf(`/`)!==0&&(l=`/`+l),r&&l.lastIndexOf(`/`)!==l.length-1&&(l+=r),l}getURI(e=!1){let t;return(!this.source||e)&&(t=``,e||(this.protocol?t+=this.protocol+`://`:t+=`//`,this.userInfo&&(t+=this.userInfo+`@`),this.host&&(t+=this.host),this.port&&(t+=`:`+this.port)),this.path&&(t+=this.path),this.query&&(t+=`?`+this.query),this.anchor&&(t+=`#`+this.anchor),this.source=t),this.source}}let iO=B.makeMap(`src,href,data,background,action,formaction,poster,xlink:href`),aO=`data-mce-type`,oO=0,sO=(e,t,n,r)=>{let i=t.validate,a=n.getSpecialElements();e.nodeType===8&&!t.allow_conditional_comments&&/^\[if/i.test(e.nodeValue??``)&&(e.nodeValue=` `+e.nodeValue);let o=r?.tagName??e.nodeName.toLowerCase();if(e.nodeType!==1||o===`body`)return;let s=V.fromDom(e),c=Yn(s,aO),l=qn(s,`data-mce-bogus`);if(!c&&v(l)){l===`all`?Ai(s):ji(s);return}let u=n.getElementRule(o);if(i&&!u){Je(a,o)?Ai(s):ji(s);return}else w(r)&&(r.allowedTags[o]=!0);if(i&&u&&!c){if(F(u.attributesForced??[],e=>{Gn(s,e.name,e.value===`{$uid}`?`mce_${oO++}`:e.value)}),F(u.attributesDefault??[],e=>{Yn(s,e.name)||Gn(s,e.name,e.value===`{$uid}`?`mce_${oO++}`:e.value)}),u.attributesRequired&&!he(u.attributesRequired,e=>Yn(s,e))){ji(s);return}if(u.removeEmptyAttrs&&Zn(s)){ji(s);return}u.outputName&&u.outputName!==o&&Dl(s,u.outputName)}},cO=(e,t,n,r,i)=>!(r in iO&&nO(e,i,n))&&(!e.validate||t.isValid(n,r)||St(r,`data-`)||St(r,`aria-`)),lO=(e,t)=>e.hasAttribute(aO)&&(t===`id`||t===`class`||t===`style`),uO=(e,t)=>e in t.getBoolAttrs(),dO=(e,t,n)=>{let{attributes:r}=e;for(let i=r.length-1;i>=0;i--){let a=r[i],o=a.name,s=a.value;!cO(t,n,e.tagName.toLowerCase(),o,s)&&!lO(e,o)?e.removeAttribute(o):uO(o,n)&&e.setAttribute(o,o)}},fO=(e,t)=>{let n=JD();return n.addHook(`uponSanitizeElement`,(n,r)=>{sO(n,e,t,r)}),n.addHook(`uponSanitizeAttribute`,(n,r)=>{let i=n.tagName.toLowerCase(),{attrName:a,attrValue:o}=r;r.keepAttr=cO(e,t,i,a,o),r.keepAttr?(r.allowedAttributes[a]=!0,uO(a,t)&&(r.attrValue=a),e.allow_svg_data_urls&&St(o,`data:image/svg+xml`)&&(r.forceKeepAttr=!0)):lO(n,a)&&(r.forceKeepAttr=!0)}),n},pO=(e,t)=>{let n={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:[`#comment`,`#cdata-section`,`body`],ALLOWED_ATTR:[]};return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n},mO=(e,t)=>{if(e.sanitize){let n=fO(e,t);return(t,r)=>{n.sanitize(t,pO(e,r)),n.removed=[]}}else return(n,r)=>{let i=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT),a;for(;a=i.nextNode();)sO(a,e,t),U(a)&&dO(a,e,t)}},hO=B.makeMap,gO=B.extend,_O=(e,t,n)=>{let r=e.name,i=r in n&&r!==`title`&&r!==`textarea`,a=t.childNodes;for(let t=0,r=a.length;t<r;t++){let r=a[t],o=new Yy(r.nodeName.toLowerCase(),r.nodeType);if(U(r)){let e=r.attributes;for(let t=0,n=e.length;t<n;t++){let n=e[t];o.attr(n.name,n.value)}}else W(r)?(o.value=r.data,i&&(o.raw=!0)):(ya(r)||_a(r)||va(r))&&(o.value=r.data);_O(o,r,n),e.append(o)}},vO=(e,t,n)=>{let r=[];for(let n=e,i=n;n;i=n,n=n.walk()){let a=n;F(t,e=>e(a)),te(a.parent)&&a!==e?n=i:r.push(a)}for(let e=r.length-1;e>=0;e--){let t=r[e];F(n,e=>e(t))}},yO=(e,t,n,r)=>{let i=n.validate,a=t.getNonEmptyElements(),o=t.getWhitespaceElements(),s=gO(hO(`script,style,head,html,body,title,meta,param`),t.getBlockElements()),c=pc(t),l=/[ \t\r\n]+/g,u=/^[ \t\r\n]+/,d=/[ \t\r\n]+$/,f=e=>{let t=e.parent;for(;w(t);)if(t.name in o)return!0;else t=t.parent;return!1},p=e=>{let n=e;for(;w(n);)if(n.name in c)return CC(t,a,o,n);else n=n.parent;return!1},m=e=>e.name in s||xs(t,e),h=(t,n)=>w(n?t.prev:t.next)||te(t.parent)?!1:m(t.parent)&&(t.parent!==e||r.isRootContent===!0);return[e=>{if(e.type===3&&!f(e)){let t=e.value??``;t=t.replace(l,` `),(wC(e.prev,m)||h(e,!0))&&(t=t.replace(u,``)),t.length===0?e.remove():e.value=t}},e=>{if(e.type===1){let s=t.getElementRule(e.name);if(i&&s){let i=CC(t,a,o,e);s.paddInEmptyBlock&&i&&p(e)?yC(n,r,m,e):s.removeEmpty&&i?m(e)?e.remove():e.unwrap():s.paddEmpty&&(i||bC(e))&&yC(n,r,m,e)}}else if(e.type===3&&!f(e)){let t=e.value??``;(e.next&&m(e.next)||h(e,!1))&&(t=t.replace(d,``)),t.length===0?e.remove():e.value=t}}]},bO=(e,t)=>{let n=t.forced_root_block??e.forced_root_block;return n===!1?``:n===!0?`p`:n},xO=(e={},t=hc())=>{let n=bE(),r=bE(),i={validate:!0,root_name:`body`,sanitize:!0,...e},a=new DOMParser,o=mO(i,t),s=(e,n,r=`html`)=>{let i=r===`xhtml`?`application/xhtml+xml`:`text/html`,s=Je(t.getSpecialElements(),n.toLowerCase()),c=s?`<${n}>${e}</${n}>`:e,l=r===`xhtml`?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${c}</body></html>`:`<body>${c}</body>`,u=a.parseFromString(l,i).body;return o(u,i),s?u.firstChild:u},c=n.addFilter,l=n.getFilters,u=n.removeFilter,d=r.addFilter,f=r.getFilters,p=r.removeFilter,m=(e,n)=>{kC(t,e)&&n.push(e)},h=(e,n)=>{let r=v(n.attr(aO)),i=n.type===1&&!Je(e,n.name)&&!xs(t,n);return n.type===3||i&&!r},g=(e,n)=>{let r=gO(hO(`script,style,head,html,body,title,meta,param`),t.getBlockElements()),a=/^[ \t\r\n]+/,o=/[ \t\r\n]+$/,s=e.firstChild,c=null,l=e=>{e&&(s=e.firstChild,s&&s.type===3&&(s.value=s.value?.replace(a,``)),s=e.lastChild,s&&s.type===3&&(s.value=s.value?.replace(o,``)))};if(t.isValidChild(e.name,n.toLowerCase())){for(;s;){let t=s.next;h(r,s)?c?c.append(s):(c=new Yy(n,1),c.attr(i.forced_root_block_attrs),e.insert(c,s),c.append(s)):(l(c),c=null),s=t}l(c)}},_={schema:t,addAttributeFilter:d,getAttributeFilters:f,removeAttributeFilter:p,addNodeFilter:c,getNodeFilters:l,removeNodeFilter:u,parse:(e,n={})=>{let r=i.validate,a=n.context??i.root_name,o=s(e,a,n.format);ps(t,o);let c=new Yy(a,11);_O(c,o,t.getSpecialElements()),o.innerHTML=``;let[u,d]=yO(c,t,i,n),p=[],h=r?e=>m(e,p):D,_={nodes:{},attributes:{}},v=e=>hC(l(),f(),e,_);if(vO(c,[u,v],[d,h]),p.reverse(),r&&p.length>0)if(n.context){let{pass:e,fail:r}=ve(p,e=>e.parent===c);DC(r,t,c,v),n.invalid=e.length>0}else DC(p,t,c,v);let y=bO(i,n);return y&&(c.name===`body`||n.isRootContent)&&g(c,y),n.invalid||_C(_,n),c}};return UE(_,i),TE(_,i,t),_},SO=e=>hw(e)?ub({validate:!1}).serialize(e):e,CO=(e,t,n)=>{let r=SO(e),i=t(r);if(i.isDefaultPrevented())return i;if(hw(e))if(i.content!==r){let t=xO({validate:!1,forced_root_block:!1,sanitize:n}).parse(i.content,{context:e.name});return{...i,content:t}}else return{...i,content:e};else return i},wO=(e,t)=>{if(t.no_events)return Xu.value(t);{let n=$g(e,t);return n.isDefaultPrevented()?Xu.error(e_(e,{content:``,...n}).content):Xu.value(n)}},TO=(e,t,n)=>n.no_events?t:CO(t,t=>e_(e,{...n,content:t}),Qf(e)).content,EO=(e,t)=>{if(t.no_events)return Xu.value(t);{let n=CO(t.content,n=>Zg(e,{...t,content:n}),Qf(e));return n.isDefaultPrevented()?(Qg(e,n),Xu.error(void 0)):Xu.value(n)}},DO=(e,t,n)=>{n.no_events||Qg(e,{...n,content:t})},OO=(e,t,n)=>({element:e,width:t,rows:n}),kO=(e,t)=>({element:e,cells:t}),AO=(e,t)=>({x:e,y:t}),jO=(e,t)=>Jn(e,t).bind(jt).getOr(1),MO=(e,t,n,r,i)=>{let a=jO(i,`rowspan`),o=jO(i,`colspan`),s=e.rows;for(let e=n;e<n+a;e++){s[e]||(s[e]=kO(Tl(r),[]));for(let r=t;r<t+o;r++){let a=s[e].cells;a[r]=e===n&&r===t?i:wl(i)}}},NO=(e,t,n)=>{let r=e.rows;return!!(r[n]?r[n].cells:[])[t]},PO=(e,t,n)=>{for(;NO(e,t,n);)t++;return t},FO=e=>be(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),IO=(e,t)=>{let n=e.rows;for(let e=0;e<n.length;e++){let r=n[e].cells;for(let n=0;n<r.length;n++)if(xr(r[n],t))return P.some(AO(n,e))}return P.none()},LO=(e,t,n,r,i)=>{let a=[],o=e.rows;for(let e=n;e<=i;e++){let n=o[e].cells,i=t<r?n.slice(t,r+1):n.slice(r,t+1);a.push(kO(o[e].element,i))}return a},RO=(e,t,n)=>{let r=t.x,i=t.y,a=n.x,o=n.y,s=i<o?LO(e,r,i,a,o):LO(e,r,o,a,i);return OO(e.element,FO(s),s)},zO=(e,t)=>{let n=wl(e.element),r=V.fromTag(`tbody`);return Oi(r,t),Ti(n,r),n},BO=e=>ge(e.rows,e=>{let t=ge(e.cells,e=>{let t=Tl(e);return Xn(t,`colspan`),Xn(t,`rowspan`),t}),n=wl(e.element);return Oi(n,t),n}),VO=e=>{let t=OO(wl(e),0,[]);return F(H(e,`tr`),(e,n)=>{F(H(e,`td,th`),(r,i)=>{MO(t,PO(t,i,n),n,e,r)})}),OO(t.element,FO(t.rows),t.rows)},HO=e=>zO(e,BO(e)),UO=(e,t,n)=>IO(e,t).bind(t=>IO(e,n).map(n=>RO(e,t,n))),WO=e=>Se(e,e=>Pn(e)===`ul`||Pn(e)===`ol`),GO=(e,t)=>Se(e,e=>Pn(e)===`li`&&Oh(e,t)).fold(k([]),t=>WO(e).map(e=>{let t=V.fromTag(Pn(e));return hi(t,We(yi(e),(e,t)=>St(t,`list-style`))),[V.fromTag(`li`),t]}).getOr([])),KO=(e,t)=>{let n=be(t,(e,t)=>(Ti(t,e),t),e);return t.length>0?I_([n]):n},qO=e=>Qa(e)?Dr(e).filter(Za).fold(k([]),t=>[e,t]):Za(e)?[e]:[],JO=(e,t)=>{let n=V.fromDom(t.commonAncestorContainer),r=Ib(n,e),i=I(r,ro),a=GO(r,t);return ge(i.concat(a.length?a:qO(n)),wl)},YO=()=>I_([]),XO=(e,t)=>KO(V.fromDom(t.cloneContents()),JO(e,t)),ZO=(e,t)=>ai(t,`table`,A(xr,e)),QO=(e,t)=>ZO(e,t[0]).bind(e=>{let n=t[0],r=t[t.length-1];return UO(VO(e),n,r).map(e=>I_([HO(e)]))}).getOrThunk(YO),$O=(e,t)=>t.length>0&&t[0].collapsed?YO():XO(e,t[0]),ek=(e,t)=>{let n=xh(t,e);return n.length>0?QO(e,n):$O(e,t)},tk=(e,t)=>t>=0&&t<e.length&&ah(e.charAt(t)),nk=e=>uo(e.innerText),rk=e=>e.map(e=>e.nodeName).getOr(`div`).toLowerCase(),ik=e=>P.from(e.selection.getRng()).map(t=>{let n=P.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),i=rk(n),a=V.fromDom(t.cloneContents());nb(a),rb(a);let o=e.dom.add(r,i,{"data-mce-bogus":`all`,style:`overflow: hidden; opacity: 0;`},a.dom),s=nk(o),c=uo(o.textContent??``);if(e.dom.remove(o),tk(c,0)||tk(c,c.length-1)){let e=nk(n.getOr(r)),t=e.indexOf(s);if(t===-1)return s;{let n=tk(e,t-1),r=tk(e,t+s.length);return(n?` `:``)+s+(r?` `:``)}}else return s}).getOr(``),ak=(e,t)=>{let n=e.selection.getRng(),r=e.dom.create(`body`),i=jy(e,gh(e.selection.getSel())),a=t.contextual?ek(V.fromDom(e.getBody()),i).dom:n.cloneContents();return a&&r.appendChild(a),e.selection.serializer.serialize(r,t)},ok=(e,t)=>{if(t.format===`text`)return ik(e);{let n=ak(e,t);return t.format===`tree`?n:e.selection.isCollapsed()?``:n}},sk=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),ck=(e,t,n={})=>wO(e,sk(n,t)).fold(ie,t=>TO(e,ok(e,t),t)),lk=(e,t)=>{let n=e.length+t.length+2,r=Array(n),i=Array(n),a=(e,t,n)=>({start:e,end:t,diag:n}),o=(n,r,i,a,s)=>{let l=c(n,r,i,a);if(l===null||l.start===r&&l.diag===r-a||l.end===n&&l.diag===n-i){let o=n,c=i;for(;o<r||c<a;)o<r&&c<a&&e[o]===t[c]?(s.push([0,e[o]]),++o,++c):r-n>a-i?(s.push([2,e[o]]),++o):(s.push([1,t[c]]),++c)}else{o(n,l.start,i,l.start-l.diag,s);for(let t=l.start;t<l.end;++t)s.push([0,e[t]]);o(l.end,r,l.end-l.diag,a,s)}},s=(n,r,i,o)=>{let s=n;for(;s-r<o&&s<i&&e[s]===t[s-r];)++s;return a(n,s,r)},c=(n,a,o,c)=>{let l=a-n,u=c-o;if(l===0||u===0)return null;let d=l-u,f=u+l,p=(f%2==0?f:f+1)/2;r[1+p]=n,i[1+p]=a+1;let m,h,g,_,v;for(m=0;m<=p;++m){for(h=-m;h<=m;h+=2){for(g=h+p,h===-m||h!==m&&r[g-1]<r[g+1]?r[g]=r[g+1]:r[g]=r[g-1]+1,_=r[g],v=_-n+o-h;_<a&&v<c&&e[_]===t[v];)r[g]=++_,++v;if(d%2!=0&&d-m<=h&&h<=d+m&&i[g-d]<=r[g])return s(i[g-d],h+n-o,a,c)}for(h=d-m;h<=d+m;h+=2){for(g=h+p-d,h===d-m||h!==d+m&&i[g+1]<=i[g-1]?i[g]=i[g+1]-1:i[g]=i[g-1],_=i[g]-1,v=_-n+o-h;_>=n&&v>=o&&e[_]===t[v];)i[g]=_--,v--;if(d%2==0&&-m<=h&&h<=m&&i[g]<=r[g+d])return s(i[g],h+n-o,a,c)}}return null},l=[];return o(0,e.length,0,t.length,l),l},uk=e=>U(e)?e.outerHTML:W(e)?Zs.encodeRaw(e.data,!1):ya(e)?`<!--`+e.data+`-->`:``,dk=e=>{let t,n=document.createElement(`div`),r=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r},fk=(e,t,n)=>{let r=dk(t);if(e.hasChildNodes()&&n<e.childNodes.length){let t=e.childNodes[n];e.insertBefore(r,t)}else e.appendChild(r)},pk=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){let n=e.childNodes[t];e.removeChild(n)}},mk=(e,t)=>{let n=0;F(e,e=>{e[0]===0?n++:e[0]===1?(fk(t,e[1],n),n++):e[0]===2&&pk(t,n)})},hk=e=>I(ge(Pe(e.childNodes),uk),e=>e.length>0),gk=(e,t)=>(mk(lk(ge(Pe(t.childNodes),uk),e),t),t),_k=R(()=>document.implementation.createHTMLDocument(`undo`)),vk=e=>e.indexOf(`</iframe>`)!==-1,yk=e=>({type:`fragmented`,fragments:e,content:``,bookmark:null,beforeBookmark:null}),bk=e=>({type:`complete`,fragments:null,content:e,bookmark:null,beforeBookmark:null}),xk=e=>{let t=Te(hk(e.getBody()),t=>{let n=eb(e.serializer,t);return n.length>0?[n]:[]}),n=t.join(``);return vk(n)?yk(t):bk(n)},Sk=(e,t,n)=>{let r=n?t.beforeBookmark:t.bookmark;t.type===`fragmented`?gk(t.fragments,e.getBody()):e.setContent(t.content,{format:`raw`,no_selection:w(r)&&Bm(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},Ck=e=>e.type===`fragmented`?e.fragments.join(``):e.content,wk=e=>{let t=V.fromTag(`body`,_k());return Fi(t,Ck(e)),F(H(t,`*[data-mce-bogus]`),ji),Pi(t)},Tk=(e,t)=>Ck(e)===Ck(t),Ek=(e,t)=>wk(e)===wk(t),Dk=(e,t)=>!e||!t?!1:Tk(e,t)?!0:Ek(e,t),Ok=e=>e.get()===0,kk=(e,t,n)=>{Ok(n)&&(e.typing=t)},Ak=(e,t)=>{e.typing&&(kk(e,!1,t),e.add())},jk=e=>{e.typing&&(e.typing=!1,e.add())},Mk=(e,t,n)=>{Ok(t)&&n.set(qu(e.selection))},Nk=(e,t,n,r,i,a,o)=>{let s=xk(e),c=B.extend(a||{},s);if(!Ok(r)||e.removed)return null;let l=t.data[n.get()];if(e.dispatch(`BeforeAddUndo`,{level:c,lastLevel:l,originalEvent:o}).isDefaultPrevented()||l&&Dk(l,c))return null;t.data[n.get()]&&i.get().each(e=>{t.data[n.get()].beforeBookmark=e});let u=hf(e);if(u&&t.data.length>u){for(let e=0;e<t.data.length-1;e++)t.data[e]=t.data[e+1];t.data.length--,n.set(t.data.length)}c.bookmark=qu(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(c),n.set(t.data.length-1);let d={level:c,lastLevel:l,originalEvent:o};return n.get()>0?(e.setDirty(!0),e.dispatch(`AddUndo`,d),e.dispatch(`change`,d)):e.dispatch(`AddUndo`,d),c},Pk=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch(`ClearUndos`)},Fk=(e,t,n,r,i)=>{if(t.transact(r)){let r=t.data[n.get()].bookmark,a=t.data[n.get()-1];Sk(e,a,!0),t.transact(i)&&(t.data[n.get()-1].beforeBookmark=r)}},Ik=(e,t,n)=>{let r;return t.get()<n.length-1&&(t.set(t.get()+1),r=n[t.get()],Sk(e,r,!1),e.setDirty(!0),e.dispatch(`Redo`,{level:r})),r},Lk=(e,t,n,r)=>{let i;return t.typing&&(t.add(),t.typing=!1,kk(t,!1,n)),r.get()>0&&(r.set(r.get()-1),i=t.data[r.get()],Sk(e,i,!0),e.setDirty(!0),e.dispatch(`Undo`,{level:i})),i},Rk=e=>{e.clear(),e.add()},zk=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!Dk(xk(e),t.data[0]),Bk=(e,t)=>t.get()<e.data.length-1&&!e.typing,Vk=(e,t,n)=>(Ak(e,t),e.beforeChange(),e.ignore(n),e.add()),Hk=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},Uk=(e,t)=>{let n=e.dom,r=w(t)?t:e.getBody();F(n.select(`table,a`,r),t=>{switch(t.nodeName){case`TABLE`:let r=wf(e),i=n.getAttrib(t,`border`);(!i||i===`0`)&&e.hasVisual?n.addClass(t,r):n.removeClass(t,r);break;case`A`:if(!n.getAttrib(t,`href`)){let r=n.getAttrib(t,`name`)||t.id,i=Tf(e);r&&e.hasVisual?n.addClass(t,i):n.removeClass(t,i)}break}}),e.dispatch(`VisualAid`,{element:t,hasVisual:e.hasVisual})},Wk=e=>({init:{bindEvents:D},undoManager:{beforeChange:(t,n)=>Mk(e,t,n),add:(t,n,r,i,a,o)=>Nk(e,t,n,r,i,a,o),undo:(t,n,r)=>Lk(e,t,n,r),redo:(t,n)=>Ik(e,t,n),clear:(t,n)=>Pk(e,t,n),reset:e=>Rk(e),hasUndo:(t,n)=>zk(e,t,n),hasRedo:(e,t)=>Bk(e,t),transact:(e,t,n)=>Vk(e,t,n),ignore:(e,t)=>Hk(e,t),extra:(t,n,r,i)=>Fk(e,t,n,r,i)},formatter:{match:(t,n,r,i)=>Mw(e,t,n,r,i),matchAll:(t,n)=>Nw(e,t,n),matchNode:(t,n,r,i)=>jw(e,t,n,r,i),canApply:t=>Fw(e,t),closest:t=>Pw(e,t),apply:(t,n,r)=>cE(e,t,n,r),remove:(t,n,r,i)=>XT(e,t,n,r,i),toggle:(t,n,r)=>vE(e,t,n,r),formatChanged:(t,n,r,i,a)=>_E(e,t,n,r,i,a)},editor:{getContent:t=>sb(e,t),setContent:(t,n)=>bw(e,t,n),insertContent:(t,n)=>mw(e,t,n),addVisual:t=>Uk(e,t)},selection:{getContent:(t,n)=>ck(e,t,n)},autocompleter:{addDecoration:t=>Vy(e,t),removeDecoration:()=>Wy(e,V.fromDom(e.getBody()))},raw:{getModel:()=>P.none()}}),Gk=e=>{let t=e=>y(e)?e:{},{init:n,undoManager:r,formatter:i,editor:a,selection:o,autocompleter:s,raw:c}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(e,t,n)=>r.transact(n),ignore:(e,t)=>r.ignore(t),extra:(e,t,n,i)=>r.extra(n,i)},formatter:{match:(e,n,r,a)=>i.match(e,t(n),a),matchAll:i.matchAll,matchNode:i.matchNode,canApply:e=>i.canApply(e),closest:e=>i.closest(e),apply:(e,n,r)=>i.apply(e,t(n)),remove:(e,n,r,a)=>i.remove(e,t(n)),toggle:(e,n,r)=>i.toggle(e,t(n)),formatChanged:(e,t,n,r,a)=>i.formatChanged(t,n,r,a)},editor:{getContent:e=>a.getContent(e),setContent:(e,t)=>({content:a.setContent(e,t),html:``}),insertContent:(e,t)=>(a.insertContent(e),``),addVisual:a.addVisual},selection:{getContent:(e,t)=>o.getContent(t)},autocompleter:{addDecoration:s.addDecoration,removeDecoration:s.removeDecoration},raw:{getModel:()=>P.some(c.getRawModel())}}},Kk=()=>{let e=k(null),t=k(``);return{init:{bindEvents:D},undoManager:{beforeChange:D,add:e,undo:e,redo:e,clear:D,reset:D,hasUndo:M,hasRedo:M,transact:e,ignore:D,extra:D},formatter:{match:M,matchAll:k([]),matchNode:k(void 0),canApply:M,closest:t,apply:D,remove:D,toggle:D,formatChanged:k({unbind:D})},editor:{getContent:t,setContent:k({content:``,html:``}),insertContent:k(``),addVisual:D},selection:{getContent:t},autocompleter:{addDecoration:D,removeDecoration:D},raw:{getModel:k(P.none())}}},qk=e=>Je(e.plugins,`rtc`),Jk=e=>qe(e.plugins,`rtc`).bind(e=>P.from(e.setup)),Yk=e=>{let t=e;return Jk(e).fold(()=>(t.rtcInstance=Wk(e),P.none()),e=>(t.rtcInstance=Kk(),P.some(()=>e().then(e=>(t.rtcInstance=Gk(e),e.rtc.isRemote)))))},Xk=e=>e.rtcInstance?e.rtcInstance:Wk(e),Zk=e=>{let t=e.rtcInstance;if(t)return t;throw Error(`Failed to get RTC instance not yet initialized.`)},Qk=(e,t,n)=>{Zk(e).undoManager.beforeChange(t,n)},$k=(e,t,n,r,i,a,o)=>Zk(e).undoManager.add(t,n,r,i,a,o),eA=(e,t,n,r)=>Zk(e).undoManager.undo(t,n,r),tA=(e,t,n)=>Zk(e).undoManager.redo(t,n),nA=(e,t,n)=>{Zk(e).undoManager.clear(t,n)},rA=(e,t)=>{Zk(e).undoManager.reset(t)},iA=(e,t,n)=>Zk(e).undoManager.hasUndo(t,n),aA=(e,t,n)=>Zk(e).undoManager.hasRedo(t,n),oA=(e,t,n,r)=>Zk(e).undoManager.transact(t,n,r),sA=(e,t,n)=>{Zk(e).undoManager.ignore(t,n)},cA=(e,t,n,r,i)=>{Zk(e).undoManager.extra(t,n,r,i)},lA=(e,t,n,r,i)=>Zk(e).formatter.match(t,n,r,i),uA=(e,t,n)=>Zk(e).formatter.matchAll(t,n),dA=(e,t,n,r,i)=>Zk(e).formatter.matchNode(t,n,r,i),fA=(e,t)=>Zk(e).formatter.canApply(t),pA=(e,t)=>Zk(e).formatter.closest(t),mA=(e,t,n,r)=>{Zk(e).formatter.apply(t,n,r)},hA=(e,t,n,r,i)=>{Zk(e).formatter.remove(t,n,r,i)},gA=(e,t,n,r)=>{Zk(e).formatter.toggle(t,n,r)},_A=(e,t,n,r,i,a)=>Zk(e).formatter.formatChanged(t,n,r,i,a),vA=(e,t)=>Xk(e).editor.getContent(t),yA=(e,t,n)=>Xk(e).editor.setContent(t,n),bA=(e,t,n)=>Xk(e).editor.insertContent(t,n),xA=(e,t,n)=>Zk(e).selection.getContent(t,n),SA=(e,t)=>Zk(e).editor.addVisual(t),CA=e=>Zk(e).init.bindEvents(),wA=(e,t)=>Zk(e).autocompleter.addDecoration(t),TA=e=>Zk(e).autocompleter.removeDecoration(),EA=(e,t={})=>xA(e,t.format?t.format:`html`,t),DA=e=>e.dom.length===0?(Ai(e),P.none()):P.some(e),OA=(e,t)=>e.filter(e=>Fg.isBookmarkNode(e.dom)).bind(t?Mr:jr),kA=(e,t,n,r)=>{let i=e.dom,a=t.dom,o=r?i.length:a.length;r?(Dx(i,a,!1,!r),n.setStart(a,o)):(Dx(a,i,!1,!r),n.setEnd(a,o))},AA=(e,t)=>{Dr(e).each(n=>{let r=e.dom;t&&dx(n,Y(r,0))?Tx(r,0):!t&&px(n,Y(r,r.length))&&Ex(r,r.length)})},jA=(e,t,n,r)=>{e.bind(e=>((r?Ex:Tx)(e.dom,r?e.dom.length:0),t.filter(Bn).map(t=>kA(e,t,n,r)))).orThunk(()=>OA(t,r).or(t).filter(Bn).map(e=>AA(e,r)))},MA=(e,t)=>{let n=P.from(t.firstChild).map(V.fromDom),r=P.from(t.lastChild).map(V.fromDom);e.deleteContents(),e.insertNode(t);let i=n.bind(jr).filter(Bn).bind(DA),a=r.bind(Mr).filter(Bn).bind(DA);jA(i,n,e,!0),jA(a,r,e,!1),e.collapse(!1)},NA=(e,t)=>({format:`html`,...e,set:!0,selection:!0,content:t}),PA=(e,t)=>{if(t.format!==`raw`){let n=e.selection.getRng(),r=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},a=e.parser.parse(t.content,{forced_root_block:!1,...i,...t});return ub({validate:!1},e.schema).serialize(a)}else return t.content},FA=(e,t,n={})=>{EO(e,NA(n,t)).each(t=>{let n=PA(e,t),r=e.selection.getRng();MA(r,r.createContextualFragment(n)),e.selection.setRng(r),Ov(e,r),DO(e,n,t)})},IA=(e,t,n)=>{if(Je(e,t)){let r=I(e[t],e=>e!==n);r.length===0?delete e[t]:e[t]=r}};var LA=(e,t)=>{let n,r,i=(t,n)=>Se(n,n=>e.is(n,t)),a=t=>e.getParents(t,void 0,e.getRoot()),o=()=>{n={},r={},t.on(`NodeChange`,e=>{let t=e.element,o=a(t),s={};ze(n,(e,t)=>{i(t,o).each(n=>{r[t]||(F(e,e=>{e(!0,{node:n,selector:t,parents:o})}),r[t]=e),s[t]=e})}),ze(r,(e,n)=>{s[n]||(delete r[n],F(e,e=>{e(!1,{node:t,selector:n,parents:o})}))})})};return{selectorChangedWithUnbind:(e,s)=>(n||o(),n[e]||(n[e]=[]),n[e].push(s),i(e,a(t.selection.getStart())).each(()=>{r[e]=n[e]}),{unbind:()=>{IA(n,e,s),IA(r,e,s)}})}};let RA=e=>!!(e&&e.ownerDocument)&&Sr(V.fromDom(e.ownerDocument),V.fromDom(e)),zA=e=>e?RA(e.startContainer)&&RA(e.endContainer):!1,BA=(e,t,n,r)=>{let i,a,{selectorChangedWithUnbind:o}=LA(e,r),s=(t,n)=>{let i=e.createRng();w(t)&&w(n)?(i.setStart(t,n),i.setEnd(t,n),b(i),_(!1)):(kh(e,i,r.getBody(),!0),b(i))},c=e=>EA(r,e),l=(e,t)=>FA(r,e,t),u=e=>Ty(r.getBody(),y(),e),d=e=>Ey(r.getBody(),y(),e),f=(e,t)=>T.getBookmark(e,t),p=e=>T.moveToBookmark(e),m=(t,n)=>(Ay(e,t,n).each(b),t),h=()=>{let e=y(),t=v();return!e||e.item?!1:e.compareEndPoints?e.compareEndPoints(`StartToEnd`,e)===0:!t||e.collapsed},g=()=>{let t=y(),n=r.getBody().querySelectorAll(`[data-mce-selected="1"]`);return n.length>0?Ee(n,t=>e.isEditable(t.parentElement)):t.startContainer===t.endContainer?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer)},_=e=>{let t=y();t.collapse(!!e),b(t)},v=()=>t.getSelection?t.getSelection():t.document.selection,y=()=>{let n,o=(e,t,n)=>{try{return t.compareBoundaryPoints(e,n)}catch{return-1}},s=t.document;if(w(r.bookmark)&&!yy(r)){let e=Wv(r);if(e.isSome())return e.map(e=>jy(r,[e])[0]).getOr(s.createRange())}try{let e=v();e&&!oa(e.anchorNode)&&(n=e.rangeCount>0?e.getRangeAt(0):s.createRange(),n=jy(r,[n])[0])}catch{}if(n||=s.createRange(),ba(n.startContainer)&&n.collapsed){let t=e.getRoot();n.setStart(t,0),n.setEnd(t,0)}return i&&a&&(o(n.START_TO_START,n,i)===0&&o(n.END_TO_END,n,i)===0?n=a:(i=null,a=null)),n},b=(e,t)=>{if(!zA(e))return;let n=v();if(e=r.dispatch(`SetSelectionRange`,{range:e,forward:t}).range,n){a=e;try{n.removeAllRanges(),n.addRange(e)}catch{}t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),i=n.rangeCount>0?n.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&n?.setBaseAndExtent&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){let t=e.startContainer.childNodes[e.startOffset];t&&t.nodeName===`IMG`&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),(n.anchorNode!==e.startContainer||n.focusNode!==e.endContainer)&&n.setBaseAndExtent(t,0,t,1))}r.dispatch(`AfterSetSelectionRange`,{range:e,forward:t})},x=t=>(l(e.getOuterHTML(t)),t),ee=()=>Oy(r.getBody(),y()),S=(t,n)=>ky(e,y(),t,n),C=()=>{let t=v(),n=t?.anchorNode,r=t?.focusNode;if(!t||!n||!r||oa(n)||oa(r))return!0;let i=e.createRng(),a=e.createRng();try{i.setStart(n,t.anchorOffset),i.collapse(!0),a.setStart(r,t.focusOffset),a.collapse(!0)}catch{return!0}return i.compareBoundaryPoints(i.START_TO_START,a)<=0},te={dom:e,win:t,serializer:n,editor:r,expand:(t={type:`word`})=>b($_(e).expand(y(),t)),collapse:_,setCursorLocation:s,getContent:c,setContent:l,getBookmark:f,moveToBookmark:p,select:m,isCollapsed:h,isEditable:g,isForward:C,setNode:x,getNode:ee,getSel:v,setRng:b,getRng:y,getStart:u,getEnd:d,getSelectedBlocks:S,normalize:()=>{let t=y();if(!vh(v())&&Ah(r)){let n=X_(e,t);return n.each(e=>{b(e,C())}),n.getOr(t)}return t},selectorChanged:(e,t)=>(o(e,t),te),selectorChangedWithUnbind:o,getScrollContainer:()=>{let t,n=e.getRoot();for(;n&&n.nodeName!==`BODY`;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:(e,t)=>{w(e)?Dv(r,e,t):Ov(r,y(),t)},placeCaretAt:(e,t)=>b(z_(e,t,r.getDoc())),getBoundingClientRect:()=>{let e=y();return e.collapsed?Y.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{t=i=a=null,E.destroy()}},T=Fg(te),E=p_(te,r);return te.bookmarkManager=T,te.controlSelection=E,te},VA=(e,t,n)=>{e.addAttributeFilter(`data-mce-tabindex`,(e,t)=>{let n=e.length;for(;n--;){let r=e[n];r.attr(`tabindex`,r.attr(`data-mce-tabindex`)),r.attr(t,null)}}),e.addAttributeFilter(`src,href,style`,(e,r)=>{let i=`data-mce-`+r,a=t.url_converter,o=t.url_converter_scope,s=e.length;for(;s--;){let t=e[s],c=t.attr(i);c===void 0?(c=t.attr(r),r===`style`?c=n.serializeStyle(n.parseStyle(c),t.name):a&&(c=a.call(o,c,r,t.name)),t.attr(r,c.length>0?c:null)):(t.attr(r,c.length>0?c:null),t.attr(i,null))}}),e.addAttributeFilter(`class`,e=>{let t=e.length;for(;t--;){let n=e[t],r=n.attr(`class`);r&&(r=r.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,``),n.attr(`class`,r.length>0?r:null))}}),e.addAttributeFilter(`data-mce-type`,(e,t,n)=>{let r=e.length;for(;r--;){let t=e[r];t.attr(`data-mce-type`)===`bookmark`&&!n.cleanup&&(P.from(t.firstChild).exists(e=>!lo(e.value??``))?t.unwrap():t.remove())}}),e.addNodeFilter(`noscript`,e=>{let t=e.length;for(;t--;){let n=e[t].firstChild;n&&(n.value=Zs.decode(n.value??``))}}),e.addNodeFilter(`script,style`,(e,n)=>{let r=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,``).replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,``).replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,``),i=e.length;for(;i--;){let a=e[i],o=a.firstChild,s=o?.value??``;if(n===`script`){let e=a.attr(`type`);e&&a.attr(`type`,e===`mce-no/type`?null:e.replace(/^mce\-/,``)),t.element_format===`xhtml`&&o&&s.length>0&&(o.value=`// <![CDATA[
`+r(s)+`
// ]]>`)}else t.element_format===`xhtml`&&o&&s.length>0&&(o.value=`<!--
`+r(s)+`
-->`)}}),e.addNodeFilter(`#comment`,e=>{let r=e.length;for(;r--;){let i=e[r],a=i.value;t.preserve_cdata&&a?.indexOf(`[CDATA[`)===0?(i.name=`#cdata`,i.type=4,i.value=n.decode(a.replace(/^\[CDATA\[|\]\]$/g,``))):a?.indexOf(`mce:protected `)===0&&(i.name=`#text`,i.type=3,i.raw=!0,i.value=unescape(a).substr(14))}}),e.addNodeFilter(`xml:namespace,input`,(e,t)=>{let n=e.length;for(;n--;){let r=e[n];r.type===7?r.remove():r.type===1&&t===`input`&&!r.attr(`type`)&&r.attr(`type`,`text`)}}),e.addAttributeFilter(`data-mce-type`,t=>{F(t,t=>{t.attr(`data-mce-type`)===`format-caret`&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter(`data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder`,(e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)}),t.remove_trailing_brs&&EE(t,e,e.schema)},HA=e=>{let t=e=>e?.name===`br`,n=e.lastChild;if(t(n)){let e=n.prev;t(e)&&(n.remove(),e.remove())}},UA=(e,t,n)=>{let r,i=e.dom,a=t.cloneNode(!0),o=document.implementation;if(o.createHTMLDocument){let e=o.createHTMLDocument(``);B.each(a.nodeName===`BODY`?a.childNodes:[a],t=>{e.body.appendChild(e.importNode(t,!0))}),a=a.nodeName===`BODY`?e.body:e.body.firstChild,r=i.doc,i.doc=e}return Lg(e,{...n,node:a}),r&&(i.doc=r),a},WA=(e,t)=>w(e)&&e.hasEventListeners(`PreProcess`)&&!t.no_events,GA=(e,t,n)=>WA(e,n)?UA(e,t,n):t,KA=(e,t,n)=>{B.inArray(t,n)===-1&&(e.addAttributeFilter(n,(e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)}),t.push(n))},qA=(e,t,n)=>!t.no_events&&e?Rg(e,{...t,content:n}).content:n,JA=(e,t,n)=>{let r=uo(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||to(V.fromDom(t))?r:B.trim(r)},YA=(e,t,n)=>{let r=n.selection?{forced_root_block:!1,...n}:n,i=e.parse(t,r);return HA(i),i},XA=(e,t,n)=>ub(e,t).serialize(n),ZA=(e,t,n,r,i)=>qA(e,i,XA(t,n,r)),QA=(e,t)=>{let n=[`data-mce-selected`],r={entity_encoding:`named`,remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=t&&t.dom?t.dom:Vc.DOM,a=t&&t.schema?t.schema:hc(r),o=xO(r,a);return VA(o,r,i),{schema:a,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:(e,n={})=>{let s={format:`html`,...n},c=YA(o,JA(i,GA(t,e,s),s),s);return s.format===`tree`?c:ZA(t,r,a,c,s)},addRules:a.addValidElements,setRules:a.setValidElements,addTempAttr:A(KA,o,n),getTempAttrs:k(n),getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},$A=(e,t)=>{let n=QA(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},ej=(e,t)=>({...e,format:t,get:!0,getInner:!0}),tj=(e,t={})=>wO(e,ej(t,t.format?t.format:`html`)).fold(ie,t=>TO(e,vA(e,t),t)),nj=(e,t)=>({format:`html`,...e,set:!0,content:t}),rj=(e,t,n={})=>EO(e,nj(n,t)).map(t=>{let n=yA(e,t.content,t);return DO(e,n.html,t),n.content}).getOr(t),ij=`autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists`.split(`,`),aj=`template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format`.split(`,`),oj=`bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor`.split(`,`),sj=[{name:`template`,replacedWith:`Advanced Template`},{name:`rtc`}],cj=(e,t)=>Ae(I(t,t=>Je(e,t))),lj=e=>{let t=cj(e,ij),n=e.forced_root_block;return(n===!1||n===``)&&t.push(`forced_root_block (false only)`),Ae(t)},uj=e=>cj(e,aj),dj=(e,t)=>{let n=B.makeMap(e.plugins,` `);return Ae(I(t,e=>Je(n,e)))},fj=e=>dj(e,oj),pj=e=>dj(e,sj.map(e=>e.name)),mj=(e,t)=>{let n=lj(e),r=fj(t),i=r.length>0,a=n.length>0,o=t.theme===`mobile`;if(i||a||o){let e=o?`

Themes:
- mobile`:``,t=i?`\n\nPlugins:
- ${r.join(`
- `)}`:``,s=a?`\n\nOptions:
- ${n.join(`
- `)}`:``;console.warn(`The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information.`+e+t+s)}},hj=e=>Se(sj,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),gj=(e,t)=>{let n=uj(e),r=pj(t),i=r.length>0,a=n.length>0;if(i||a){let e=i?`\n\nPlugins:
- ${r.map(hj).join(`
- `)}`:``,t=a?`\n\nOptions:
- ${n.join(`
- `)}`:``;console.warn(`The following deprecated features are currently enabled but will be removed soon.`+e+t)}},_j=(e,t)=>{mj(e,t),gj(e,t)},vj=Vc.DOM,yj=e=>{vj.setStyle(e.id,`display`,e.orgDisplay)},bj=e=>P.from(e).each(e=>e.destroy()),xj=e=>{let t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;let n=e.selection;if(n){let e=n.dom;t.selection=n.win=n.dom=e.doc=null}},Sj=e=>{let t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),vj.unbind(t,`submit reset`,e.formEventDelegate))},Cj=e=>{if(!e.removed){let{_selectionOverrides:t,editorUpload:n}=e,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&w(i?.nextSibling)&&vj.remove(i.nextSibling),zg(e),e.editorManager.remove(e),!e.inline&&r&&yj(e),Bg(e),vj.remove(e.getContainer()),bj(t),bj(n),e.destroy()}},wj=(e,t)=>{let{selection:n,dom:r}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off(`beforeunload`,e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),bj(n),bj(r)),Sj(e),xj(e),e.destroyed=!0}},Tj=(()=>{let e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Je(e,t)}})(),Ej=Qc.ModelManager,Dj=(e,t)=>t.dom[e],Oj=(e,t)=>parseInt(gi(t,e),10),kj=A(Dj,`clientWidth`),Aj=A(Dj,`clientHeight`),jj=A(Oj,`margin-top`),Mj=A(Oj,`margin-left`),Nj=e=>e.dom.getBoundingClientRect(),Pj=(e,t,n)=>{let r=kj(e),i=Aj(e);return t>=0&&n>=0&&t<=r&&n<=i},Fj=(e,t,n,r)=>{let i=Nj(t),a=e?i.left+t.dom.clientLeft+Mj(t):0,o=e?i.top+t.dom.clientTop+jj(t):0;return{x:n-a,y:r-o}},Ij=(e,t,n)=>{let r=V.fromDom(e.getBody()),i=e.inline?r:Tr(r),a=Fj(e.inline,i,t,n);return Pj(i,a.x,a.y)},Lj=e=>P.from(e).map(V.fromDom),Rj=e=>Lj(e.inline?e.getBody():e.getContentAreaContainer()).map(Qr).getOr(!1);var zj=()=>{let e=()=>{throw Error(`Theme did not provide a NotificationManager implementation.`)};return{open:e,close:e,getArgs:e}};let Bj=e=>{let t=[],n=()=>{let t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():zj()},r=()=>P.from(t[0]),i=(e,t)=>e.type===t.type&&e.text===t.text&&!e.progressBar&&!e.timeout&&!t.progressBar&&!t.timeout,a=()=>{F(t,e=>{e.reposition()})},o=e=>{t.push(e)},s=e=>{Ce(t,t=>t===e).each(e=>{t.splice(e,1)})},c=(c,l=!0)=>e.removed||!Rj(e)?{}:(l&&e.dispatch(`BeforeOpenNotification`,{notification:c}),Se(t,e=>i(n().getArgs(e),c)).getOrThunk(()=>{e.editorManager.setActive(e);let t=n().open(c,()=>{s(t),a(),r().fold(()=>e.focus(),e=>kv(V.fromDom(e.getEl())))});return o(t),a(),e.dispatch(`OpenNotification`,{notification:{...t}}),t})),l=()=>{r().each(e=>{n().close(e),s(e),a()})},u=k(t);return(e=>{e.on(`SkinLoaded`,()=>{let t=Qd(e);t&&c({text:t,type:`warning`,timeout:0},!1),a()}),e.on(`show ResizeEditor ResizeWindow NodeChange`,()=>{requestAnimationFrame(a)}),e.on(`remove`,()=>{F(t.slice(),e=>{n().close(e)})})})(e),{open:c,close:l,getNotifications:u}},Vj=Qc.PluginManager,Hj=Qc.ThemeManager;var Uj=()=>{let e=()=>{throw Error(`Theme did not provide a WindowManager implementation.`)};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};let Wj=e=>{let t=[],n=()=>{let t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():Uj()},r=(e,t)=>(...n)=>t?t.apply(e,n):void 0,i=t=>{e.dispatch(`OpenWindow`,{dialog:t})},a=t=>{e.dispatch(`CloseWindow`,{dialog:t})},o=e=>{t.push(e),i(e)},s=n=>{a(n),t=I(t,e=>e!==n),t.length===0&&e.focus()},c=()=>P.from(t[t.length-1]),l=t=>{e.editorManager.setActive(e),Uv(e),e.ui.show();let n=t();return o(n),n};return e.on(`remove`,()=>{F(t,e=>{n().close(e)})}),{open:(e,t)=>l(()=>n().open(e,t,s)),openUrl:e=>l(()=>n().openUrl(e,s)),alert:(e,t,i)=>{let a=n();a.alert(e,r(i||a,t))},confirm:(e,t,i)=>{let a=n();a.confirm(e,r(i||a,t))},close:()=>{c().each(e=>{n().close(e),s(e)})}}},Gj=(e,t)=>{e.notificationManager.open({type:`error`,text:t})},Kj=(e,t)=>{e._skinLoaded?Gj(e,t):e.on(`SkinLoaded`,()=>{Gj(e,t)})},qj=(e,t)=>{Kj(e,Zc.translate([`Failed to upload image: {0}`,t]))},Jj=(e,t,n)=>{Jg(e,t,{message:n}),console.error(n)},Yj=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,Xj=(e,t,n)=>{Jj(e,`PluginLoadError`,Yj(`plugin`,t,n))},Zj=(e,t,n)=>{Jj(e,`IconsLoadError`,Yj(`icons`,t,n))},Qj=(e,t,n)=>{Jj(e,`LanguageLoadError`,Yj(`language`,t,n))},$j=(e,t,n)=>{Jj(e,`ThemeLoadError`,Yj(`theme`,t,n))},eM=(e,t,n)=>{Jj(e,`ModelLoadError`,Yj(`model`,t,n))},tM=(e,t,n)=>{let r=Zc.translate([`Failed to initialize plugin: {0}`,t]);Jg(e,`PluginLoadError`,{message:r}),nM(r,n),Kj(e,r)},nM=(e,...t)=>{let n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},rM=e=>/^[a-z0-9\-]+$/i.test(e),iM=e=>oM(e,Ud(e)),aM=e=>oM(e,Gd(e)),oM=(e,t)=>{let n=e.editorManager.baseURL+`/skins/content`,r=`content${e.editorManager.suffix}.css`;return ge(t,t=>rM(t)&&!e.inline?`${n}/${t}/${r}`:e.documentBaseURI.toAbsolute(t))},sM=e=>{e.contentCSS=e.contentCSS.concat(iM(e),aM(e))},cM=e=>e?Pe(e.getElementsByTagName(`img`)):[],lM=(e,t)=>{let n={};return{findAll:(r,i=N)=>{let a=ge(I(cM(r),t=>{let n=t.src;return t.hasAttribute(`data-mce-bogus`)||t.hasAttribute(`data-mce-placeholder`)||!n||n===fn.transparentSrc?!1:St(n,`blob:`)?!e.isUploaded(n)&&i(t):St(n,`data:`)?i(t):!1}),e=>{let r=e.src;if(Je(n,r))return n[r].then(t=>v(t)?t:{image:e,blobInfo:t.blobInfo});{let i=zE(t,r).then(t=>(delete n[r],{image:e,blobInfo:t})).catch(e=>(delete n[r],e));return n[r]=i,i}});return Promise.all(a)}}},uM=()=>{let e={},t=(e,t)=>({status:e,resultUri:t}),n=t=>t in e;return{hasBlobUri:n,getResultUri:t=>{let n=e[t];return n?n.resultUri:null},isPending:t=>n(t)?e[t].status===1:!1,isUploaded:t=>n(t)?e[t].status===2:!1,markPending:n=>{e[n]=t(1,null)},markUploaded:(n,r)=>{e[n]=t(2,r)},removeFailed:t=>{delete e[t]},destroy:()=>{e={}}}},dM=0,fM=()=>{let e=()=>Math.round(Math.random()*4294967295).toString(36);return`s`+new Date().getTime().toString(36)+e()+e()+e()},pM=e=>e+ dM+++fM(),mM=()=>{let e=[],t=e=>({"image/jpeg":`jpg`,"image/jpg":`jpg`,"image/gif":`gif`,"image/png":`png`,"image/apng":`apng`,"image/avif":`avif`,"image/svg+xml":`svg`,"image/webp":`webp`,"image/bmp":`bmp`,"image/tiff":`tiff`})[e.toLowerCase()]||`dat`,n=(e,t,n,i,a)=>{if(v(e))return r({id:e,name:i,filename:a,blob:t,base64:n});if(y(e))return r(e);throw Error(`Unknown input type`)},r=e=>{if(!e.blob||!e.base64)throw Error(`blob and base64 representations of the image are required for BlobInfo to be created`);let n=e.id||pM(`blobid`),r=e.name||n,i=e.blob;return{id:k(n),name:k(r),filename:k(e.filename||r+`.`+t(i.type)),blob:k(i),base64:k(e.base64),blobUri:k(e.blobUri||URL.createObjectURL(i)),uri:k(e.uri)}},i=t=>{o(t.id())||e.push(t)},a=t=>Se(e,t).getOrUndefined(),o=e=>a(t=>t.id()===e);return{create:n,add:i,get:o,getByUri:e=>a(t=>t.blobUri()===e),getByData:(e,t)=>a(n=>n.base64()===e&&n.blob().type===t),findFirst:a,removeByUri:t=>{e=I(e,e=>e.blobUri()===t?(URL.revokeObjectURL(e.blobUri()),!1):!0)},destroy:()=>{F(e,e=>{URL.revokeObjectURL(e.blobUri())}),e=[]}}},hM=(e,t)=>{let n={},r=(e,t)=>e?e.replace(/\/$/,``)+`/`+t.replace(/^\//,``):t,i=(e,n)=>new Promise((i,a)=>{let o=new XMLHttpRequest;o.open(`POST`,t.url),o.withCredentials=t.credentials,o.upload.onprogress=e=>{n(e.loaded/e.total*100)},o.onerror=()=>{a(`Image upload failed due to a XHR Transport error. Code: `+o.status)},o.onload=()=>{if(o.status<200||o.status>=300){a(`HTTP Error: `+o.status);return}let e=JSON.parse(o.responseText);if(!e||!v(e.location)){a(`Invalid JSON: `+o.responseText);return}i(r(t.basePath,e.location))};let s=new FormData;s.append(`file`,e.blob(),e.filename()),o.send(s)}),a=T(t.handler)?t.handler:i,o=()=>new Promise(e=>{e([])}),s=(e,t)=>({url:t,blobInfo:e,status:!0}),c=(e,t)=>({url:``,blobInfo:e,status:!1,error:t}),l=(e,t)=>{B.each(n[e],e=>{e(t)}),delete n[e]},u=(t,n,r)=>(e.markPending(t.blobUri()),new Promise(i=>{let a,o;try{let u=()=>{a&&(a.close(),o=D)},d=n=>{u(),e.markUploaded(t.blobUri(),n),l(t.blobUri(),s(t,n)),i(s(t,n))},f=n=>{u(),e.removeFailed(t.blobUri()),l(t.blobUri(),c(t,n)),i(c(t,n))};o=e=>{e<0||e>100||P.from(a).orThunk(()=>P.from(r).map(se)).each(t=>{a=t,t.progressBar.value(e)})},n(t,o).then(d,e=>{f(v(e)?{message:e}:e)})}catch(e){i(c(t,e))}})),d=e=>e===i,f=e=>{let t=e.blobUri();return new Promise(e=>{n[t]=n[t]||[],n[t].push(e)})},p=(t,n)=>(t=B.grep(t,t=>!e.isUploaded(t.blobUri())),Promise.all(B.map(t,t=>e.isPending(t.blobUri())?f(t):u(t,a,n))));return{upload:(e,n)=>!t.url&&d(a)?o():p(e,n)}},gM=e=>()=>e.notificationManager.open({text:e.translate(`Image uploading...`),type:`info`,timeout:-1,progressBar:!0}),_M=(e,t)=>hM(t,{url:Nd(e),basePath:Pd(e),credentials:Fd(e),handler:Id(e)}),vM=e=>{let t=_M(e,uM());return{upload:(n,r=!0)=>t.upload(n,r?gM(e):void 0)}},yM=(e,t)=>e.dom.isEmpty(t.dom)&&w(e.schema.getTextBlockElements()[Pn(t)]),bM=e=>t=>{yM(e,t)&&Ti(t,V.fromHtml(`<br data-mce-bogus="1" />`))},xM=e=>{let t=mM(),n,r,i=uM(),a=[],o=t=>n=>e.selection?t(n):[],s=e=>e+(e.indexOf(`?`)===-1?`?`:`&`)+new Date().getTime(),c=(e,t,n)=>{let r=0;do r=e.indexOf(t,r),r!==-1&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1);while(r!==-1);return e},l=(e,t,n)=>{let r=`src="${n}"${n===fn.transparentSrc?` data-mce-placeholder="1"`:``}`;return e=c(e,`src="${t}"`,r),e=c(e,`data-mce-src="`+t+`"`,`data-mce-src="`+n+`"`),e},u=(t,n)=>{F(e.undoManager.data,e=>{e.type===`fragmented`?e.fragments=ge(e.fragments,e=>l(e,t,n)):e.content=l(e.content,t,n)})},d=(t,n)=>{let r=e.convertURL(n,`src`);u(t.src,n),Kn(V.fromDom(t),{src:kd(e)?s(n):n,"data-mce-src":r})},f=()=>(n||=_M(e,i),g().then(o(r=>{let i=ge(r,e=>e.blobInfo);return n.upload(i,gM(e)).then(o(n=>{let i=[],a=!1,o=ge(n,(n,o)=>{let{blobInfo:s,image:c}=r[o],l=!1;return n.status&&Ad(e)?(n.url&&!xt(c.src,n.url)&&(a=!0),t.removeByUri(c.src),qk(e)||d(c,n.url)):n.error&&(n.error.remove&&(u(c.src,fn.transparentSrc),i.push(c),l=!0),qj(e,n.error.message)),{element:c,status:n.status,uploadUri:n.url,blobInfo:s,removed:l}});return i.length>0&&!qk(e)?e.undoManager.transact(()=>{F(Ni(i),n=>{let r=Dr(n);Ai(n),r.each(bM(e)),t.removeByUri(n.dom.src)})}):a&&e.undoManager.dispatchChange(),o}))}))),p=()=>Od(e)?f():Promise.resolve([]),m=e=>Ee(a,t=>t(e)),h=e=>{a.push(e)},g=()=>(r||=lM(i,t),r.findAll(e.getBody(),m).then(o(t=>{let n=I(t,t=>v(t)?(Kj(e,t),!1):t.uriType!==`blob`);return qk(e)||F(n,e=>{u(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute(`data-mce-src`)}),n}))),_=()=>{t.destroy(),i.destroy(),r=n=null},y=n=>n.replace(/src="(blob:[^"]+)"/g,(n,r)=>{let a=i.getResultUri(r);if(a)return`src="`+a+`"`;let o=t.getByUri(r);return o||=be(e.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r),void 0),o?`src="data:`+o.blob().type+`;base64,`+o.base64()+`"`:n});return e.on(`SetContent`,()=>{Od(e)?p():g()}),e.on(`RawSaveContent`,e=>{e.content=y(e.content)}),e.on(`GetContent`,e=>{e.source_view||e.format===`raw`||e.format===`tree`||(e.content=y(e.content))}),e.on(`PostRender`,()=>{e.parser.addNodeFilter(`img`,e=>{F(e,e=>{let n=e.attr(`src`);if(!n||t.getByUri(n))return;let r=i.getResultUri(n);r&&e.attr(`src`,r)})})}),{blobCache:t,addFilter:h,uploadImages:f,uploadImagesAuto:p,scanForImages:g,destroy:_}},SM=e=>{let t=e.dom,n=e.schema.type,r={valigntop:[{selector:`td,th`,styles:{verticalAlign:`top`}}],valignmiddle:[{selector:`td,th`,styles:{verticalAlign:`middle`}}],valignbottom:[{selector:`td,th`,styles:{verticalAlign:`bottom`}}],alignleft:[{selector:`figure.image`,collapsed:!1,classes:`align-left`,ceFalseOverride:!0,preview:`font-family font-size`},{selector:`figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre`,styles:{textAlign:`left`},inherit:!1,preview:!1},{selector:`img,audio,video`,collapsed:!1,styles:{float:`left`},preview:`font-family font-size`},{selector:`table`,collapsed:!1,styles:{marginLeft:`0px`,marginRight:`auto`},onformat:e=>{t.setStyle(e,`float`,null)},preview:`font-family font-size`},{selector:`.mce-preview-object,[data-ephox-embed-iri]`,ceFalseOverride:!0,styles:{float:`left`}}],aligncenter:[{selector:`figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre`,styles:{textAlign:`center`},inherit:!1,preview:`font-family font-size`},{selector:`figure.image`,collapsed:!1,classes:`align-center`,ceFalseOverride:!0,preview:`font-family font-size`},{selector:`img,audio,video`,collapsed:!1,styles:{display:`block`,marginLeft:`auto`,marginRight:`auto`},preview:!1},{selector:`table`,collapsed:!1,styles:{marginLeft:`auto`,marginRight:`auto`},preview:`font-family font-size`},{selector:`.mce-preview-object`,ceFalseOverride:!0,styles:{display:`table`,marginLeft:`auto`,marginRight:`auto`},preview:!1},{selector:`[data-ephox-embed-iri]`,ceFalseOverride:!0,styles:{marginLeft:`auto`,marginRight:`auto`},preview:!1}],alignright:[{selector:`figure.image`,collapsed:!1,classes:`align-right`,ceFalseOverride:!0,preview:`font-family font-size`},{selector:`figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre`,styles:{textAlign:`right`},inherit:!1,preview:`font-family font-size`},{selector:`img,audio,video`,collapsed:!1,styles:{float:`right`},preview:`font-family font-size`},{selector:`table`,collapsed:!1,styles:{marginRight:`0px`,marginLeft:`auto`},onformat:e=>{t.setStyle(e,`float`,null)},preview:`font-family font-size`},{selector:`.mce-preview-object,[data-ephox-embed-iri]`,ceFalseOverride:!0,styles:{float:`right`},preview:!1}],alignjustify:[{selector:`figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre`,styles:{textAlign:`justify`},inherit:!1,preview:`font-family font-size`}],bold:[{inline:`strong`,remove:`all`,preserve_attributes:[`class`,`style`]},{inline:`span`,styles:{fontWeight:`bold`}},{inline:`b`,remove:`all`,preserve_attributes:[`class`,`style`]}],italic:[{inline:`em`,remove:`all`,preserve_attributes:[`class`,`style`]},{inline:`span`,styles:{fontStyle:`italic`}},{inline:`i`,remove:`all`,preserve_attributes:[`class`,`style`]}],underline:[{inline:`span`,styles:{textDecoration:`underline`},exact:!0},{inline:`u`,remove:`all`,preserve_attributes:[`class`,`style`]}],strikethrough:(()=>{let e={inline:`span`,styles:{textDecoration:`line-through`},exact:!0},t={inline:`strike`,remove:`all`,preserve_attributes:[`class`,`style`]},r={inline:`s`,remove:`all`,preserve_attributes:[`class`,`style`]};return n===`html4`?[e,r,t]:[r,e,t]})(),forecolor:{inline:`span`,styles:{color:`%value`},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:`span`,styles:{backgroundColor:`%value`},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:`span`,toggle:!1,styles:{fontFamily:`%value`},clear_child_styles:!0},fontsize:{inline:`span`,toggle:!1,styles:{fontSize:`%value`},clear_child_styles:!0},lineheight:{selector:`h1,h2,h3,h4,h5,h6,p,li,td,th,div`,styles:{lineHeight:`%value`}},fontsize_class:{inline:`span`,attributes:{class:`%value`}},blockquote:{block:`blockquote`,wrapper:!0,remove:`all`},subscript:{inline:`sub`},superscript:{inline:`sup`},code:{inline:`code`},link:{inline:`a`,selector:`a`,remove:`all`,split:!0,deep:!0,onmatch:(e,t,n)=>U(e)&&e.hasAttribute(`href`),onformat:(e,n,r)=>{B.each(r,(n,r)=>{t.setAttrib(e,r,n)})}},lang:{inline:`span`,clear_child_styles:!0,remove_similar:!0,attributes:{lang:`%value`,"data-mce-lang":e=>e?.customValue??null}},removeformat:[{selector:`b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small`,remove:`all`,split:!0,expand:!1,block_expand:!0,deep:!0},{selector:`span`,attributes:[`style`,`class`],remove:`empty`,split:!0,expand:!1,deep:!0},{selector:`*`,attributes:[`style`,`class`],split:!1,expand:!1,deep:!0}]};return B.each(`p h1 h2 h3 h4 h5 h6 div address pre dt dd samp`.split(/\s/),e=>{r[e]={block:e,remove:`all`}}),r},CM={remove_similar:!0,inherit:!1},wM={selector:`td,th`,...CM},TM=k({tablecellbackgroundcolor:{styles:{backgroundColor:`%value`},...wM},tablecellverticalalign:{styles:{"vertical-align":`%value`},...wM},tablecellbordercolor:{styles:{borderColor:`%value`},...wM},tablecellclass:{classes:[`%value`],...wM},tableclass:{selector:`table`,classes:[`%value`],...CM},tablecellborderstyle:{styles:{borderStyle:`%value`},...wM},tablecellborderwidth:{styles:{borderWidth:`%value`},...wM}}),EM=e=>{let t={},n=e=>w(e)?t[e]:t,r=e=>Je(t,e),i=(e,n)=>{e&&(v(e)?(x(n)||(n=[n]),F(n,e=>{C(e.deep)&&(e.deep=!ig(e)),C(e.split)&&(e.split=!ig(e)||ag(e)),C(e.remove)&&ig(e)&&!ag(e)&&(e.remove=`none`),ig(e)&&ag(e)&&(e.mixed=!0,e.block_expand=!0),v(e.classes)&&(e.classes=e.classes.split(/\s+/))}),t[e]=n):ze(e,(e,t)=>{i(t,e)}))};return i(SM(e)),i(TM()),i(af(e)),{get:n,has:r,register:i,unregister:e=>(e&&t[e]&&delete t[e],t)}},DM=B.each,OM=Vc.DOM,kM=e=>w(e)&&y(e),AM=(e,t)=>{let n=t&&t.schema||hc({}),r=(e,t)=>{t.classes.length>0&&OM.addClass(e,t.classes.join(` `)),OM.setAttribs(e,t.attrs)},i=e=>{let t=v(e)?{name:e,classes:[],attrs:{}}:e,n=OM.create(t.name);return r(n,t),n},a=(e,t)=>{let r=n.getElementRule(e.nodeName.toLowerCase())?.parentsRequired;return r&&r.length?t&&me(r,t)?t:r[0]:!1},o=(e,t,n)=>{let r,s=t[0],c=kM(s)?s.name:void 0,l=a(e,c);if(l)c===l?(r=s,t=t.slice(1)):r=l;else if(s)r=s,t=t.slice(1);else if(!n)return e;let u=r?i(r):OM.create(`div`);u.appendChild(e),n&&B.each(n,t=>{let n=i(t);u.insertBefore(n,e)});let d=kM(r)?r.siblings:void 0;return o(u,t,d)},s=OM.create(`div`);if(e.length>0){let t=e[0],n=i(t),r=kM(t)?t.siblings:void 0;s.appendChild(o(n,e.slice(1),r))}return s},jM=e=>{e=B.trim(e);let t=`div`,n={name:t,classes:[],attrs:{},selector:e};return e!==`*`&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(e,t,r,i,a)=>{switch(t){case`#`:n.attrs.id=r;break;case`.`:n.classes.push(r);break;case`:`:B.inArray(`checked disabled enabled read-only required`.split(` `),r)!==-1&&(n.attrs[r]=r);break}if(i===`[`){let e=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);e&&(n.attrs[e[1]]=e[2])}return``})),n.name=t||`div`,n},MM=e=>v(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,`$1`),B.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{let t=B.map(e.split(/(?:~\+|~|\+)/),jM),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[],NM=(e,t)=>{let n=``,r=of(e);if(r===``)return``;let i=e=>v(e)?e.replace(/%(\w+)/g,``):``,a=(t,n)=>OM.getStyle(n??e.getBody(),t,!0);if(v(t)){let n=e.formatter.get(t);if(!n)return``;t=n[0]}if(`preview`in t){let e=t.preview;if(e===!1)return``;r=e||r}let o=t.block||t.inline||`span`,s,c=MM(t.selector);c.length>0?(c[0].name||(c[0].name=o),o=t.selector,s=AM(c,e)):s=AM([o],e);let l=OM.select(o,s)[0]||s.firstChild;DM(t.styles,(e,t)=>{let n=i(e);n&&OM.setStyle(l,t,n)}),DM(t.attributes,(e,t)=>{let n=i(e);n&&OM.setAttrib(l,t,n)}),DM(t.classes,e=>{let t=i(e);OM.hasClass(l,t)||OM.addClass(l,t)}),e.dispatch(`PreviewFormats`),OM.setStyles(s,{position:`absolute`,left:-65535}),e.getBody().appendChild(s);let u=a(`fontSize`),d=/px$/.test(u)?parseInt(u,10):0;return DM(r.split(` `),e=>{let t=a(e,l);if(!(e===`background-color`&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=a(e),hh(t).toLowerCase()===`#ffffff`))&&!(e===`color`&&hh(t).toLowerCase()===`#000000`)){if(e===`font-size`&&/em|%$/.test(t)){if(d===0)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*d+`px`}e===`border`&&t&&(n+=`padding:0 2px;`),n+=e+`:`+t+`;`}}),e.dispatch(`AfterPreviewFormats`),OM.remove(s),n},PM=e=>{e.addShortcut(`meta+b`,``,`Bold`),e.addShortcut(`meta+i`,``,`Italic`),e.addShortcut(`meta+u`,``,`Underline`);for(let t=1;t<=6;t++)e.addShortcut(`access+`+t,``,[`FormatBlock`,!1,`h`+t]);e.addShortcut(`access+7`,``,[`FormatBlock`,!1,`p`]),e.addShortcut(`access+8`,``,[`FormatBlock`,!1,`div`]),e.addShortcut(`access+9`,``,[`FormatBlock`,!1,`address`])},FM=e=>{let t=EM(e),n=Wc({});return PM(e),$w(e),qk(e)||uE(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,n,r)=>{mA(e,t,n,r)},remove:(t,n,r,i)=>{hA(e,t,n,r,i)},toggle:(t,n,r)=>{gA(e,t,n,r)},match:(t,n,r,i)=>lA(e,t,n,r,i),closest:t=>pA(e,t),matchAll:(t,n)=>uA(e,t,n),matchNode:(t,n,r,i)=>dA(e,t,n,r,i),canApply:t=>fA(e,t),formatChanged:(t,r,i,a)=>_A(e,n,t,r,i,a),getCssText:A(NM,e)}},IM=e=>{switch(e.toLowerCase()){case`undo`:case`redo`:case`mcefocus`:return!0;default:return!1}},LM=(e,t,n)=>{let r=Wc(!1),i=e=>{kk(t,!1,n),t.add({},e)};e.on(`init`,()=>{t.add()}),e.on(`BeforeExecCommand`,e=>{let r=e.command;IM(r)||(Ak(t,n),t.beforeChange())}),e.on(`ExecCommand`,e=>{let t=e.command;IM(t)||i(e)}),e.on(`ObjectResizeStart cut`,()=>{t.beforeChange()}),e.on(`SaveContent ObjectResized blur`,i),e.on(`dragend`,i),e.on(`keyup`,n=>{let a=n.keyCode;if(n.isDefaultPrevented())return;let o=fn.os.isMacOS()&&n.key===`Meta`;(a>=33&&a<=36||a>=37&&a<=40||a===45||n.ctrlKey||o)&&(i(),e.nodeChanged()),(a===46||a===8)&&e.nodeChanged(),r.get()&&t.typing&&!Dk(xk(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch(`TypingUndo`),r.set(!1),e.nodeChanged())}),e.on(`keydown`,e=>{let a=e.keyCode;if(e.isDefaultPrevented())return;if(a>=33&&a<=36||a>=37&&a<=40||a===45){t.typing&&i(e);return}let o=e.ctrlKey&&!e.altKey||e.metaKey;if((a<16||a>20)&&a!==224&&a!==91&&!t.typing&&!o){t.beforeChange(),kk(t,!0,n),t.add({},e),r.set(!0);return}(fn.os.isMacOS()?e.metaKey:e.ctrlKey&&!e.altKey)&&t.beforeChange()}),e.on(`mousedown`,e=>{t.typing&&i(e)});let a=e=>e.inputType===`insertReplacementText`,o=e=>e.inputType===`insertText`&&e.data===null,s=e=>e.inputType===`insertFromPaste`||e.inputType===`insertFromDrop`;e.on(`input`,e=>{e.inputType&&(a(e)||o(e)||s(e))&&i(e)}),e.on(`AddUndo Undo Redo ClearUndos`,t=>{t.isDefaultPrevented()||e.nodeChanged()})},RM=e=>{e.addShortcut(`meta+z`,``,`Undo`),e.addShortcut(`meta+y,meta+shift+z`,``,`Redo`)},zM=e=>{let t=tl(),n=Wc(0),r=Wc(0),i={data:[],typing:!1,beforeChange:()=>{Qk(e,n,t)},add:(a,o)=>$k(e,i,r,n,t,a,o),dispatchChange:()=>{e.setDirty(!0);let t=xk(e);t.bookmark=qu(e.selection),e.dispatch(`change`,{level:t,lastLevel:je(i.data,r.get()).getOrUndefined()})},undo:()=>eA(e,i,n,r),redo:()=>tA(e,r,i.data),clear:()=>{nA(e,i,r)},reset:()=>{rA(e,i)},hasUndo:()=>iA(e,i,r),hasRedo:()=>aA(e,i,r),transact:t=>oA(e,i,n,t),ignore:t=>{sA(e,n,t)},extra:(t,n)=>{cA(e,i,r,t,n)}};return qk(e)||LM(e,i,n),RM(e),i},BM=[9,27,$.HOME,$.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,$.DOWN,$.UP,$.LEFT,$.RIGHT].concat(fn.browser.isFirefox()?[224]:[]),VM=`data-mce-placeholder`,HM=e=>e.type===`keydown`||e.type===`keyup`,UM=e=>{let t=e.keyCode;return t===$.BACKSPACE||t===$.DELETE},WM=e=>{if(HM(e)){let t=e.keyCode;return!UM(e)&&($.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||me(BM,t))}else return!1},GM=e=>HM(e)&&!(UM(e)||e.type===`keyup`&&e.keyCode===229),KM=(e,t,n)=>{if(rs(V.fromDom(t),!1)){let r=t.firstElementChild;return r?e.getStyle(t.firstElementChild,`padding-left`)||e.getStyle(t.firstElementChild,`padding-right`)?!1:n===r.nodeName.toLowerCase():!0}else return!1},qM=e=>{let t=e.dom,n=Sd(e),r=Xd(e)??``,i=(a,o)=>{if(WM(a))return;let s=e.getBody(),c=GM(a)?!1:KM(t,s,n);(t.getAttrib(s,VM)!==``!==c||o)&&(t.setAttrib(s,VM,c?r:null),t.setAttrib(s,`aria-placeholder`,c?r:null),qg(e,c),e.on(c?`keydown`:`keyup`,i),e.off(c?`keyup`:`keydown`,i))};Ot(r)&&e.on(`init`,t=>{i(t,!0),e.on(`change SetContent ExecCommand`,i),e.on(`paste`,t=>Yv.setEditorTimeout(e,()=>i(t)))})},JM=(e,t)=>({block:e,position:t}),YM=(e,t)=>({from:e,to:t}),XM=(e,t)=>uS(V.fromDom(e),V.fromDom(t.container())).map(e=>JM(e,t)),ZM=e=>!xr(e.from.block,e.to.block),QM=(e,t)=>ti(t,e=>eo(e)||wa(e.dom),t=>xr(t,e)).filter(zn).getOr(e),$M=(e,t)=>{let n=V.fromDom(e);return xr(QM(n,t.from.block),QM(n,t.to.block))},eN=e=>Ta(e.from.block.dom)===!1&&Ta(e.to.block.dom)===!1,tN=e=>{let t=e=>Xa(e)||gs(e.dom);return t(e.from.block)&&t(e.to.block)},nN=(e,t,n)=>Sa(n.position.getNode())&&!rs(n.block)?Om(!1,n.block.dom).bind(r=>r.isEqual(n.position)?Tm(t,e,r).bind(t=>XM(e,t)):P.some(n)).getOr(n):n,rN=(e,t,n)=>{let r=XM(e,Y.fromRangeStart(n));return Cn(r,r.bind(n=>Tm(t,e,n.position).bind(n=>XM(e,n).map(n=>nN(e,t,n)))),YM).filter(t=>ZM(t)&&$M(e,t)&&eN(t)&&tN(t))},iN=(e,t,n)=>n.collapsed?rN(e,t,n):P.none(),aN=e=>{let t=Fr(e);return Ce(t,qa).fold(k(t),e=>t.slice(0,e))},oN=e=>{let t=aN(e);return F(t,Ai),t},sN=(e,t)=>Se(Ib(t,e).reverse(),e=>rs(e)).each(Ai),cN=e=>I(Nr(e),e=>!rs(e)).length===0,lN=(e,t,n,r)=>{if(rs(n))return so(n),jm(n.dom);cN(r)&&rs(t)&&Si(r,V.fromTag(`br`));let i=Am(n.dom,Y.before(r.dom));return F(oN(t),e=>{Si(r,e)}),sN(e,t),i},uN=(e,t,n)=>{if(rs(n)){if(rs(t)){let e=ye((e=>{let t=(e,n)=>Lr(e).fold(()=>n,e=>Ja(e)?t(e,n.concat(wl(e))):n);return t(e,[])})(n),(e,t)=>(Ei(e,t),t),oo());ki(t),Ti(t,e)}return Ai(n),jm(t.dom)}let r=Mm(n.dom);return F(oN(t),e=>{Ti(n,e)}),sN(e,t),r},dN=(e,t)=>{let n=Ib(t,e);return P.from(n[n.length-1])},fN=(e,t)=>Sr(t,e)?dN(t,e):P.none(),pN=(e,t)=>{Om(e,t.dom).bind(e=>P.from(e.getNode())).map(V.fromDom).filter(Ya).each(Ai)},mN=(e,t,n)=>(pN(!0,t),pN(!1,n),fN(t,n).fold(A(uN,e,t,n),A(lN,e,t,n))),hN=(e,t,n,r)=>t?mN(e,r,n):mN(e,n,r),gN=(e,t)=>{let n=V.fromDom(e.getBody());return iN(n.dom,t,e.selection.getRng()).map(r=>()=>{hN(n,t,r.from.block,r.to.block).each(t=>{e.selection.setRng(t.toRange())})})},_N=(e,t)=>{let n=t.getRng();return Cn(uS(e,V.fromDom(n.startContainer)),uS(e,V.fromDom(n.endContainer)),(r,i)=>xr(r,i)?P.none():P.some(()=>{n.deleteContents(),hN(e,!0,r,i).each(e=>{t.setRng(e.toRange())})})).getOr(P.none())},vN=(e,t)=>ei(V.fromDom(t),eo,A(xr,e)).isSome(),yN=(e,t)=>vN(e,t.startContainer)||vN(e,t.endContainer),bN=(e,t)=>{let n=Am(e.dom,Y.fromRangeStart(t)).isNone(),r=km(e.dom,Y.fromRangeEnd(t)).isNone();return!yN(e,t)&&n&&r},xN=e=>P.some(()=>{e.setContent(``),e.selection.setCursorLocation()}),SN=e=>{let t=V.fromDom(e.getBody());return bN(t,e.selection.getRng())?xN(e):_N(t,e.selection)},CN=(e,t)=>e.selection.isCollapsed()?P.none():SN(e),wN=(e,t,n,r,i)=>P.from(t._selectionOverrides.showCaret(e,n,r,i)),TN=e=>{let t=e.ownerDocument.createRange();return t.selectNode(e),t},EN=(e,t)=>e.dispatch(`BeforeObjectSelected`,{target:t}).isDefaultPrevented()?P.none():P.some(TN(t)),DN=(e,t,n)=>{let r=Zp(1,e.getBody(),t),i=Y.fromRangeStart(r),a=i.getNode();if(Dp(a))return wN(1,e,a,!i.isAtEnd(),!1);let o=i.getNode(!0);if(Dp(o))return wN(1,e,o,!1,!1);let s=uC(e.dom.getRoot(),i.getNode());return Dp(s)?wN(1,e,s,!1,n):P.none()},ON=(e,t,n)=>t.collapsed?DN(e,t,n).getOr(t):t,kN=e=>jb(e)||Db(e),AN=e=>Mb(e)||Ob(e),jN=(e,t)=>{W(t)&&t.data.length===0&&e.remove(t)},MN=(e,t,n,r,i,a)=>{wN(r,e,a.getNode(!i),i,!0).each(n=>{if(t.collapsed){let e=t.cloneRange();i?e.setEnd(n.startContainer,n.startOffset):e.setStart(n.endContainer,n.endOffset),e.deleteContents()}else t.deleteContents();e.selection.setRng(n)}),jN(e.dom,n)},NN=(e,t)=>{let n=e.selection.getRng();if(!W(n.commonAncestorContainer))return P.none();let r=t?im.Forwards:im.Backwards,i=_m(e.getBody()),a=A(nm,t?i.next:i.prev),o=t?kN:AN,s=$p(r,e.getBody(),n),c=a(s),l=c&&tS(t,c);if(!l||!rm(s,l))return P.none();if(o(l))return P.some(()=>MN(e,n,s.getNode(),r,t,l));let u=a(l);return u&&o(u)&&rm(l,u)?P.some(()=>MN(e,n,s.getNode(),r,t,u)):P.none()},PN=(e,t)=>NN(e,t),FN=(e,t)=>{let n=e.getBody();return t?jm(n).filter(jb):Mm(n).filter(Mb)},IN=e=>{let t=e.selection.getRng();return!t.collapsed&&(FN(e,!0).exists(e=>e.isEqual(Y.fromRangeStart(t)))||FN(e,!1).exists(e=>e.isEqual(Y.fromRangeEnd(t))))},LN=e=>w(e)&&(eo(V.fromDom(e))||Qa(V.fromDom(e))),RN=Zu.generate([{remove:[`element`]},{moveToElement:[`element`]},{moveToPosition:[`position`]}]),zN=(e,t)=>{let n=t.getNode(!e),r=e?`after`:`before`;return U(n)&&n.getAttribute(`data-mce-caret`)===r},BN=(e,t,n,r)=>{let i=t=>Ja(V.fromDom(t))&&!Wp(n,r,e);return Qp(!t,n).fold(()=>Qp(t,r).fold(M,i),i)},VN=(e,t,n,r)=>{let i=r.getNode(!t);return uS(V.fromDom(e),V.fromDom(n.getNode())).map(e=>rs(e)?RN.remove(e.dom):RN.moveToElement(i)).orThunk(()=>P.some(RN.moveToElement(i)))},HN=(e,t,n)=>Tm(t,e,n).bind(r=>LN(r.getNode())||BN(e,t,n,r)?P.none():t&&Ta(r.getNode())||!t&&Ta(r.getNode(!0))?VN(e,t,n,r):t&&Mb(n)||!t&&jb(n)?P.some(RN.moveToPosition(r)):P.none()),UN=(e,t)=>te(t)?P.none():e&&Ta(t.nextSibling)?P.some(RN.moveToElement(t.nextSibling)):!e&&Ta(t.previousSibling)?P.some(RN.moveToElement(t.previousSibling)):P.none(),WN=(e,t,n)=>n.fold(e=>P.some(RN.remove(e)),e=>P.some(RN.moveToElement(e)),n=>Wp(t,n,e)?P.none():P.some(RN.moveToPosition(n))),GN=(e,t,n)=>zN(t,n)?UN(t,n.getNode(!t)).orThunk(()=>HN(e,t,n)):HN(e,t,n).bind(t=>WN(e,n,t)),KN=(e,t,n)=>{let r=Zp(t?1:-1,e,n),i=Y.fromRangeStart(r),a=V.fromDom(e);return!t&&Mb(i)?P.some(RN.remove(i.getNode(!0))):t&&jb(i)?P.some(RN.remove(i.getNode())):!t&&jb(i)&&Jb(a,i)?Yb(a,i).map(e=>RN.remove(e.getNode())):t&&Mb(i)&&qb(a,i)?Xb(a,i).map(e=>RN.remove(e.getNode())):GN(e,t,i)},qN=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),Kx(e,t,V.fromDom(n)),!0),JN=(e,t)=>n=>{let r=t?Y.before(n):Y.after(n);return e.selection.setRng(r.toRange()),!0},YN=e=>t=>(e.selection.setRng(t.toRange()),!0),XN=(e,t)=>P.from(uC(e.getBody(),t)),ZN=(e,t)=>XN(e,e.selection.getNode()).filter(Ta).fold(()=>KN(e.getBody(),t,e.selection.getRng()).map(n=>()=>n.fold(qN(e,t),JN(e,t),YN(e))),()=>P.some(D)),QN=e=>{F(H(e,`.mce-offscreen-selection`),Ai)},$N=(e,t)=>{let n=e.selection.getNode();return Ta(n)&&!Ea(n)?XN(e,n.parentNode).filter(Ta).fold(()=>P.some(()=>{QN(V.fromDom(e.getBody())),Kx(e,t,V.fromDom(e.selection.getNode())),dS(e)}),()=>P.some(D)):IN(e)?P.some(()=>{mS(e,e.selection.getRng(),V.fromDom(e.getBody()))}):P.none()},eP=e=>{let t=e.dom,n=e.selection,r=uC(e.getBody(),n.getNode());if(wa(r)&&t.isBlock(r)&&t.isEmpty(r)){let e=t.create(`br`,{"data-mce-bogus":`1`});t.setHTML(r,``),r.appendChild(e),n.setRng(Y.before(e).toRange())}return!0},tP=(e,t)=>e.selection.isCollapsed()?ZN(e,t):$N(e,t),nP=(e,t)=>{let n=Y.fromRangeStart(e.selection.getRng());return Tm(t,e.getBody(),n).filter(e=>t?Tb(e):Eb(e)).bind(e=>Gp(t?0:-1,e)).map(t=>()=>e.selection.select(t))},rP=(e,t)=>e.selection.isCollapsed()?nP(e,t):P.none(),iP=W,aP=e=>iP(e)&&e.data[0]===`﻿`,oP=e=>iP(e)&&e.data[e.data.length-1]===`﻿`,sP=e=>(e.ownerDocument??document).createTextNode(`﻿`),cP=e=>{var t;if(iP(e.previousSibling))return oP(e.previousSibling)||e.previousSibling.appendData(`﻿`),e.previousSibling;if(iP(e))return aP(e)||e.insertData(0,`﻿`),e;{let n=sP(e);return(t=e.parentNode)==null||t.insertBefore(n,e),n}},lP=e=>{var t,n;if(iP(e.nextSibling))return aP(e.nextSibling)||e.nextSibling.insertData(0,`﻿`),e.nextSibling;if(iP(e))return oP(e)||e.appendData(`﻿`),e;{let r=sP(e);return e.nextSibling?(t=e.parentNode)==null||t.insertBefore(r,e.nextSibling):(n=e.parentNode)==null||n.appendChild(r),r}},uP=(e,t)=>e?cP(t):lP(t),dP=A(uP,!0),fP=A(uP,!1),pP=(e,t)=>W(e.container())?uP(t,e.container()):uP(t,e.getNode()),mP=(e,t)=>{let n=t.get();return n&&e.container()===n&&ho(n)},hP=(e,t)=>t.fold(t=>{yp(e.get());let n=dP(t);return e.set(n),P.some(Y(n,n.length-1))},t=>jm(t).map(t=>{if(mP(t,e))return Y(e.get(),1);{yp(e.get());let n=pP(t,!0);return e.set(n),Y(n,1)}}),t=>Mm(t).map(t=>{if(mP(t,e)){let t=e.get();return Y(t,t.length-1)}else{yp(e.get());let n=pP(t,!1);return e.set(n),Y(n,n.length-1)}}),t=>{yp(e.get());let n=fP(t);return e.set(n),P.some(Y(n,1))}),gP=(e,t)=>{for(let n=0;n<e.length;n++){let r=e[n].apply(null,t);if(r.isSome())return r}return P.none()},_P=Zu.generate([{before:[`element`]},{start:[`element`]},{end:[`element`]},{after:[`element`]}]),vP=(e,t)=>Up(t,e)||e,yP=(e,t,n)=>{let r=nS(n),i=vP(t,r.container());return Qx(e,i,r).fold(()=>km(i,r).bind(A(Qx,e,i)).map(e=>_P.before(e)),P.none)},bP=(e,t)=>Fm(e,t)===null,xP=(e,t,n)=>Qx(e,t,n).filter(A(bP,t)),SP=(e,t,n)=>{let r=rS(n);return xP(e,t,r).bind(e=>Am(e,r).isNone()?P.some(_P.start(e)):P.none())},CP=(e,t,n)=>{let r=nS(n);return xP(e,t,r).bind(e=>km(e,r).isNone()?P.some(_P.end(e)):P.none())},wP=(e,t,n)=>{let r=rS(n),i=vP(t,r.container());return Qx(e,i,r).fold(()=>Am(i,r).bind(A(Qx,e,i)).map(e=>_P.after(e)),P.none)},TP=e=>!Xx(DP(e)),EP=(e,t,n)=>gP([yP,SP,CP,wP],[e,t,n]).filter(TP),DP=e=>e.fold(ie,ie,ie,ie),OP=e=>e.fold(k(`before`),k(`start`),k(`end`),k(`after`)),kP=e=>e.fold(_P.before,_P.before,_P.after,_P.after),AP=e=>e.fold(_P.start,_P.start,_P.end,_P.end),jP=(e,t)=>OP(e)===OP(t)&&DP(e)===DP(t),MP=(e,t,n,r,i,a)=>Cn(Qx(t,n,r),Qx(t,n,i),(t,r)=>t!==r&&$x(n,t,r)?_P.after(e?t:r):a).getOr(a),NP=(e,t)=>e.fold(N,e=>!jP(e,t)),PP=(e,t,n,r,i)=>{let a=tS(e,i);return Tm(e,n,a).map(A(tS,e)).fold(()=>r.map(kP),i=>EP(t,n,i).map(A(MP,e,t,n,a,i)).filter(A(NP,r))).filter(TP)},FP=(e,t)=>e?t.fold(re(P.some,_P.start),P.none,re(P.some,_P.after),P.none):t.fold(P.none,re(P.some,_P.before),P.none,re(P.some,_P.end)),IP=(e,t,n,r)=>{let i=tS(e,r),a=EP(t,n,i);return EP(t,n,i).bind(A(FP,e)).orThunk(()=>PP(e,t,n,a,r))},LP=e=>T(e.selection.getSel().modify),RP=(e,t,n)=>{let r=e?1:-1;return t.setRng(Y(n.container(),n.offset()+r).toRange()),t.getSel().modify(`move`,e?`forward`:`backward`,`word`),!0},zP=(e,t)=>{let n=t.selection.getRng(),r=e?Y.fromRangeEnd(n):Y.fromRangeStart(n);return LP(t)?e&&yo(r)?RP(!0,t.selection,r):!e&&bo(r)?RP(!1,t.selection,r):!1:!1};var BP;(function(e){e[e.Br=0]=`Br`,e[e.Block=1]=`Block`,e[e.Wrap=2]=`Wrap`,e[e.Eol=3]=`Eol`})(BP||={});let VP=(e,t)=>e===im.Backwards?De(t):t,HP=(e,t,n)=>e===im.Forwards?t.next(n):t.prev(n),UP=(e,t,n,r)=>Sa(r.getNode(t===im.Forwards))?BP.Br:Wp(n,r)===!1?BP.Block:BP.Wrap,WP=(e,t,n,r)=>{let i=_m(n),a=r,o=[];for(;a;){let r=HP(t,i,a);if(!r)break;if(Sa(r.getNode(!1)))return t===im.Forwards?{positions:VP(t,o).concat([r]),breakType:BP.Br,breakAt:P.some(r)}:{positions:VP(t,o),breakType:BP.Br,breakAt:P.some(r)};if(!r.isVisible()){a=r;continue}if(e(a,r)){let e=UP(n,t,a,r);return{positions:VP(t,o),breakType:e,breakAt:P.some(r)}}o.push(r),a=r}return{positions:VP(t,o),breakType:BP.Eol,breakAt:P.none()}},GP=(e,t,n,r)=>t(n,r).breakAt.map(r=>{let i=t(n,r).positions;return e===im.Backwards?i.concat(r):[r].concat(i)}).getOr([]),KP=(e,t)=>be(e,(e,n)=>e.fold(()=>P.some(n),r=>Cn(Me(r.getClientRects()),Me(n.getClientRects()),(e,i)=>{let a=Math.abs(t-e.left);return Math.abs(t-i.left)<=a?n:r}).or(e)),P.none()),qP=(e,t)=>Me(t.getClientRects()).bind(t=>KP(e,t.left)),JP=A(WP,Y.isAbove,-1),YP=A(WP,Y.isBelow,1),XP=A(GP,-1,JP),ZP=A(GP,1,YP),QP=(e,t)=>JP(e,t).breakAt.isNone(),$P=(e,t)=>YP(e,t).breakAt.isNone(),eF=e=>jm(e).map(t=>[t].concat(YP(e,t).positions)).getOr([]),tF=e=>Mm(e).map(t=>JP(e,t).positions.concat(t)).getOr([]),nF=(e,t)=>qP(XP(e,t),t),rF=(e,t)=>qP(ZP(e,t),t),iF=Ta,aF=(e,t)=>Math.abs(e.left-t),oF=(e,t)=>Math.abs(e.right-t),sF=e=>Ye(e,`node`),cF=(e,t)=>at(e,(e,n)=>{let r=Math.min(aF(e,t),oF(e,t)),i=Math.min(aF(n,t),oF(n,t));return i===r&&sF(n)&&iF(n.node)||i<r?n:e}),lF=e=>{let t=t=>ge(t,t=>{let n=jl(t);return n.node=e,n});if(U(e))return t(e.getClientRects());if(W(e)){let n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},uF=e=>Te(e,lF);var dF;(function(e){e[e.Up=-1]=`Up`,e[e.Down=1]=`Down`})(dF||={});let fF=(e,t,n,r)=>{let i=r;for(;i=Vp(i,e,Vo,t);)if(n(i))return},pF=(e,t,n,r,i,a)=>{let o=0,s=[],c=r=>{let a=uF([r]);e===-1&&(a=a.reverse());for(let e=0;e<a.length;e++){let r=a[e];if(!n(r,l)){if(s.length>0&&t(r,st(s))&&o++,r.line=o,i(r))return!0;s.push(r)}}return!1},l=st(a.getClientRects());if(!l)return s;let u=a.getNode();return u&&(c(u),fF(e,r,c,u)),s},mF=(e,t)=>t.line>e,hF=(e,t)=>t.line===e,gF=A(pF,dF.Up,Fl,Il),_F=A(pF,dF.Down,Il,Fl),vF=e=>st(e.getClientRects()),yF=(e,t,n,r)=>{let i=_m(t),a,o,s,c,l=[],u=0;e===1?(a=i.next,o=Il,s=Fl,c=Y.after(r)):(a=i.prev,o=Fl,s=Il,c=Y.before(r));let d=vF(c);do{if(!c.isVisible())continue;let e=vF(c);if(s(e,d))continue;l.length>0&&o(e,st(l))&&u++;let t=jl(e);if(t.position=c,t.line=u,n(t))return l;l.push(t)}while(c=a(c));return l},bF=e=>t=>mF(e,t),xF=e=>t=>hF(e,t),SF=(e,t)=>{e.selection.setRng(t),Ov(e,e.selection.getRng())},CF=(e,t,n)=>P.some(ON(e,t,n)),wF=(e,t,n,r,i,a)=>{let o=t===im.Forwards,s=_m(e.getBody()),c=A(nm,o?s.next:s.prev),l=o?r:i;if(!n.collapsed){let r=Hl(n);if(a(r))return wN(t,e,r,t===im.Backwards,!1);if(IN(e)){let e=n.cloneRange();return e.collapse(t===im.Backwards),P.from(e)}}let u=$p(t,e.getBody(),n);if(l(u))return EN(e,u.getNode(!o));let d=c(u),f=Eo(n);if(d)d=tS(o,d);else return f?P.some(n):P.none();if(l(d))return wN(t,e,d.getNode(!o),o,!1);let p=c(d);return p&&l(p)&&rm(d,p)?wN(t,e,p.getNode(!o),o,!1):f?CF(e,d.toRange(),!1):P.none()},TF=(e,t,n,r,i,a)=>{let o=$p(t,e.getBody(),n),s=st(o.getClientRects()),c=t===dF.Down,l=e.getBody();if(!s)return P.none();if(IN(e)){let e=c?Y.fromRangeEnd(n):Y.fromRangeStart(n);return(c?rF:nF)(l,e).orThunk(()=>P.from(e)).map(e=>e.toRange())}let u=I((c?_F:gF)(l,bF(1),o),xF(1)),d=s.left,f=cF(u,d);if(f&&a(f.node)){let n=Math.abs(d-f.left),r=Math.abs(d-f.right);return wN(t,e,f.node,n<r,!1)}let p;if(p=r(o)?o.getNode():i(o)?o.getNode(!0):Hl(n),p){let n=yF(t,l,bF(1),p),r=cF(I(n,xF(1)),d);if(r||(r=st(I(n,xF(0))),r))return CF(e,r.position.toRange(),!1)}return u.length===0?EF(e,c).filter(c?i:r).map(t=>ON(e,t.toRange(),!1)):P.none()},EF=(e,t)=>{let n=e.selection.getRng(),r=t?Y.fromRangeEnd(n):Y.fromRangeStart(n),i=Hp(r.container(),e.getBody());return t?Ne(YP(i,r).positions):Me(JP(i,r).positions)},DF=(e,t,n)=>EF(e,t).filter(n).exists(t=>(e.selection.setRng(t.toRange()),!0)),OF=(e,t)=>{let n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},kF=(e,t)=>{e?t.setAttribute(`data-mce-selected`,`inline-boundary`):t.removeAttribute(`data-mce-selected`)},AF=(e,t,n)=>hP(t,n).map(t=>(OF(e,t),n)),jF=(e,t,n)=>{let r=Y.fromRangeStart(e);if(e.collapsed)return r;{let i=Y.fromRangeEnd(e);return n?Am(t,i).getOr(i):km(t,r).getOr(r)}},MF=(e,t,n)=>{let r=e.getBody(),i=jF(e.selection.getRng(),r,n);return IP(n,A(Yx,e),r,i).bind(n=>AF(e,t,n))},NF=(e,t,n)=>{let r=I(ge(H(V.fromDom(t.getRoot()),`*[data-mce-selected="inline-boundary"]`),e=>e.dom),e),i=I(n,e);F(Oe(r,i),A(kF,!1)),F(Oe(i,r),A(kF,!0))},PF=(e,t)=>{let n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){let r=Y.fromRangeStart(e.selection.getRng());Y.isTextPosition(r)&&!eS(r)&&(OF(e,vp(n,r)),t.set(null))}},FF=(e,t,n,r)=>{t.selection.isCollapsed()&&F(I(r,e),r=>{let i=Y.fromRangeStart(t.selection.getRng());EP(e,t.getBody(),i).bind(e=>AF(t,n,e))})},IF=(e,t,n)=>rf(e)?MF(e,t,n).isSome():!1,LF=(e,t,n)=>rf(t)?zP(e,t):!1,RF=e=>{let t=Wc(null),n=A(Yx,e);return e.on(`NodeChange`,r=>{rf(e)&&(NF(n,e.dom,r.parents),PF(e,t),FF(n,e,t,r.parents))}),t},zF=A(LF,!0),BF=A(LF,!1),VF=(e,t,n)=>{if(rf(e)){let r=EF(e,t).getOrThunk(()=>{let n=e.selection.getRng();return t?Y.fromRangeEnd(n):Y.fromRangeStart(n)});return EP(A(Yx,e),e.getBody(),r).exists(t=>hP(n,kP(t)).exists(t=>(OF(e,t),!0)))}else return!1},HF=(e,t)=>{let n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},UF=e=>Cn(jm(e),Mm(e),(t,n)=>{let r=tS(!0,t),i=tS(!1,n);return km(e,r).forall(e=>e.isEqual(i))}).getOr(!0),WF=(e,t)=>n=>hP(t,n).map(t=>()=>OF(e,t)),GF=(e,t,n,r)=>{let i=e.getBody(),a=A(Yx,e);e.undoManager.ignore(()=>{e.selection.setRng(HF(n,r)),oS(e),EP(a,i,Y.fromRangeStart(e.selection.getRng())).map(AP).bind(WF(e,t)).each(ce)}),e.nodeChanged()},KF=(e,t)=>Up(t,e)||e,qF=(e,t,n,r)=>{let i=KF(e.getBody(),r.container()),a=A(Yx,e),o=EP(a,i,r);return o.bind(e=>n?e.fold(k(P.some(AP(e))),P.none,k(P.some(kP(e))),P.none):e.fold(P.none,k(P.some(kP(e))),P.none,k(P.some(AP(e))))).map(WF(e,t)).getOrThunk(()=>{let s=Em(n,i,r),c=s.bind(e=>EP(a,i,e));return Cn(o,c,()=>Qx(a,i,r).bind(t=>UF(t)?P.some(()=>{Kx(e,n,V.fromDom(t))}):P.none())).getOrThunk(()=>c.bind(()=>s.map(i=>()=>{n?GF(e,t,r,i):GF(e,t,i,r)})))})},JF=(e,t,n)=>e.selection.isCollapsed()&&rf(e)?qF(e,t,n,Y.fromRangeStart(e.selection.getRng())):P.none(),YF=e=>zr(e)>1,XF=(e,t)=>{let n=V.fromDom(e.getBody()),r=Ib(V.fromDom(e.selection.getStart()),n);return Ce(r,t).fold(k(r),e=>r.slice(0,e))},ZF=e=>zr(e)===1,QF=e=>XF(e,e=>qa(e)||YF(e)),$F=e=>XF(e,qa),eI=(e,t)=>{let n=A(rT,e);return Te(t,e=>n(e)?[e.dom]:[])},tI=e=>eI(e,$F(e)),nI=(e,t,n,r)=>{let i=eI(t,r);if(i.length===0)Kx(t,e,n);else{let e=tT(n.dom,i);t.selection.setRng(e.toRange())}},rI=(e,t)=>{let n=I(QF(e),ZF);return Ne(n).bind(r=>fS(t,Y.fromRangeStart(e.selection.getRng()),r.dom)&&!iT(r)?P.some(()=>nI(t,e,r,n)):P.none())},iI=(e,t)=>{let n=t.parentElement;return Sa(t)&&!ee(n)&&e.dom.isEmpty(n)},aI=e=>iT(V.fromDom(e)),oI=(e,t)=>{let n=e.selection.getStart(),r=iI(e,n)||aI(n)?tT(n,t):nT(e.selection.getRng(),t);e.selection.setRng(r.toRange())},sI=(e,t)=>{let n=Oe(t,tI(e));n.length>0&&oI(e,n)},cI=e=>W(e.startContainer),lI=e=>e.startOffset===0&&cI(e),uI=(e,t)=>{let n=t.startContainer.parentElement;return!ee(n)&&rT(e,V.fromDom(n))},dI=e=>{let t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!ee(t)&&!ee(n)&&t.isEqualNode(n)},fI=e=>{let t=e.endContainer;return e.endOffset===(W(t)?t.length:t.childNodes.length)},pI=e=>dI(e)&&fI(e),mI=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),hI=e=>pI(e)||mI(e),gI=e=>{let t=e.selection.getRng();return lI(t)&&uI(e,t)&&hI(t)},_I=e=>{if(gI(e)){let t=tI(e);return P.some(()=>{oS(e),sI(e,t)})}else return P.none()},vI=(e,t)=>e.selection.isCollapsed()?rI(e,t):_I(e),yI=e=>xw(e,e=>Pm(e.dom),qa),bI=e=>yI(V.fromDom(e.selection.getStart())),xI=e=>{let t=e.selection.getRng();return t.collapsed&&(cI(t)||e.dom.isEmpty(t.startContainer))&&!bI(e)},SI=e=>(xI(e)&&oI(e,[]),!0),CI=(e,t,n)=>w(n)?P.some(()=>{e._selectionOverrides.hideFakeCaret(),Kx(e,t,V.fromDom(n))}):P.none(),wI=(e,t)=>{let n=t?Db:Ob,r=$p(t?im.Forwards:im.Backwards,e.getBody(),e.selection.getRng());return n(r)?CI(e,t,r.getNode(!t)):P.from(tS(t,r)).filter(e=>n(e)&&rm(r,e)).bind(n=>CI(e,t,n.getNode(!t)))},TI=(e,t)=>{let n=e.selection.getNode();return Oa(n)?CI(e,t,n):P.none()},EI=(e,t)=>e.selection.isCollapsed()?wI(e,t):TI(e,t),DI=e=>ti(e,e=>wa(e.dom)||Ta(e.dom)).exists(e=>wa(e.dom)),OI=e=>jt(e??``).getOr(0),kI=(e,t)=>(e||K(t)?`margin`:`padding`)+(gi(t,`direction`)===`rtl`?`-right`:`-left`),AI=(e,t,n,r,i,a)=>{let o=kI(n,V.fromDom(a)),s=OI(e.getStyle(a,o));if(t===`outdent`){let t=Math.max(0,s-r);e.setStyle(a,o,t?t+i:``)}else{let t=s+r+i;e.setStyle(a,o,t)}},jI=(e,t)=>Ee(t,t=>{let n=vi(t,kI(Vd(e),t)).map(OI).getOr(0);return e.dom.getContentEditable(t.dom)!==`false`&&n>0}),MI=e=>{let t=FI(e);return!e.mode.isReadOnly()&&(t.length>1||jI(e,t))},NI=e=>Za(e)||Qa(e),PI=e=>Dr(e).exists(NI),FI=e=>I(Ni(e.selection.getSelectedBlocks()),e=>!NI(e)&&!PI(e)&&DI(e)),II=(e,t)=>{let{dom:n}=e,r=Hd(e),i=/[a-z%]+$/i.exec(r)?.[0]??`px`,a=OI(r),o=Vd(e);F(FI(e),e=>{AI(n,t,o,a,i,e.dom)})},LI=e=>II(e,`indent`),RI=e=>II(e,`outdent`),zI=e=>{if(e.selection.isCollapsed()&&MI(e)){let t=e.dom,n=e.selection.getRng(),r=Y.fromRangeStart(n),i=t.getParent(n.startContainer,t.isBlock);if(i!==null&&Vb(V.fromDom(i),r))return P.some(()=>RI(e))}return P.none()},BI=(e,t,n)=>Fe([zI,tP,PN,(e,n)=>JF(e,t,n),gN,lC,rP,EI,CN,vI],t=>t(e,n)).filter(t=>e.selection.isEditable()),VI=(e,t)=>{BI(e,t,!1).fold(()=>{oS(e),dS(e)},ce)},HI=(e,t)=>{BI(e,t,!0).fold(()=>sS(e),ce)},UI=(e,t)=>{e.addCommand(`delete`,()=>{VI(e,t)}),e.addCommand(`forwardDelete`,()=>{HI(e,t)})},WI=e=>e.touches===void 0||e.touches.length!==1?P.none():P.some(e.touches[0]),GI=(e,t)=>{let n=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return n>5||r>5},KI=e=>{let t=tl(),n=Wc(!1),r=rl(t=>{e.dispatch(`longpress`,{...t,type:`longpress`}),n.set(!0)},400);e.on(`touchstart`,e=>{WI(e).each(i=>{r.cancel();let a={x:i.clientX,y:i.clientY,target:e.target};r.throttle(e),n.set(!1),t.set(a)})},!0),e.on(`touchmove`,i=>{r.cancel(),WI(i).each(r=>{t.on(i=>{GI(r,i)&&(t.clear(),n.set(!1),e.dispatch(`longpresscancel`))})})},!0),e.on(`touchend touchcancel`,i=>{r.cancel(),i.type!==`touchcancel`&&t.get().filter(e=>e.target.isEqualNode(i.target)).each(()=>{n.get()?i.preventDefault():e.dispatch(`tap`,{...i,type:`tap`})})},!0)},qI=(e,t)=>Je(e,t.nodeName),JI=(e,t)=>W(t)?!0:U(t)?!qI(e.getBlockElements(),t)&&!rh(t)&&!ys(e,t):!1,YI=(e,t,n)=>he(Fb(V.fromDom(n),V.fromDom(t)),t=>qI(e,t.dom)),XI=(e,t)=>!!(W(t)&&(t.data.length===0||/^\s+$/.test(t.data)&&(!t.nextSibling||qI(e,t.nextSibling)))),ZI=e=>e.dom.create(Sd(e),Z(e)),QI=e=>{let t=e.dom,n=e.selection,r=e.schema,i=r.getBlockElements(),a=n.getStart(),o=e.getBody(),s,c,l=!1,u=Sd(e);if(!a||!U(a))return;let d=o.nodeName.toLowerCase();if(!r.isValidChild(d,u.toLowerCase())||YI(i,o,a))return;let f=n.getRng(),{startContainer:p,startOffset:m,endContainer:h,endOffset:g}=f,_=yy(e),v=o.firstChild;for(;v;)if(U(v)&&ms(r,v),JI(r,v)){if(XI(i,v)){c=v,v=v.nextSibling,t.remove(c);continue}s||(s=ZI(e),o.insertBefore(s,v),l=!0),c=v,v=v.nextSibling,s.appendChild(c)}else s=null,v=v.nextSibling;l&&_&&(f.setStart(p,m),f.setEnd(h,g),n.setRng(f),e.nodeChanged())},$I=(e,t,n)=>{let r=V.fromDom(ZI(e)),i=oo();Ti(r,i),n(t,r);let a=document.createRange();return a.setStartBefore(i.dom),a.setEndBefore(i.dom),a},eL=e=>{e.on(`NodeChange`,A(QI,e))},tL=e=>t=>(` `+t.attr(`class`)+` `).indexOf(e)!==-1,nL=(e,t,n)=>function(r){let i=arguments,a=i[i.length-2],o=a>0?t.charAt(a-1):``;if(o===`"`)return r;if(o===`>`){let e=t.lastIndexOf(`<`,a);if(e!==-1&&t.substring(e,a).indexOf(`contenteditable="false"`)!==-1)return r}return`<span class="`+n+`" data-mce-content="`+e.dom.encode(i[0])+`">`+e.dom.encode(typeof i[1]==`string`?i[1]:i[0])+`</span>`},rL=(e,t,n)=>{let r=t.length,i=n.content;if(n.format!==`raw`){for(;r--;)i=i.replace(t[r],nL(e,i,qf(e)));n.content=i}},iL=e=>{let t=`contenteditable`,n=` `+B.trim(Jf(e))+` `,r=` `+B.trim(qf(e))+` `,i=tL(n),a=tL(r),o=Yf(e);o.length>0&&e.on(`BeforeSetContent`,t=>{rL(e,o,t)}),e.parser.addAttributeFilter(`class`,e=>{let n=e.length;for(;n--;){let r=e[n];i(r)?r.attr(t,`true`):a(r)&&r.attr(t,`false`)}}),e.serializer.addAttributeFilter(t,e=>{let n=e.length;for(;n--;){let r=e[n];!i(r)&&!a(r)||(o.length>0&&r.attr(`data-mce-content`)?(r.name=`#text`,r.type=3,r.raw=!0,r.value=r.attr(`data-mce-content`)):r.attr(t,null))}})},aL=e=>oi(V.fromDom(e.getBody()),`*[data-mce-caret]`).map(e=>e.dom).getOrNull(),oL=(e,t)=>{t.hasAttribute(`data-mce-caret`)&&(To(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},sL=(e,t)=>{let n=aL(e);if(n){if(t.type===`compositionstart`){t.preventDefault(),t.stopPropagation(),oL(e,n);return}_o(n)&&(oL(e,n),e.undoManager.add())}},cL=e=>{e.on(`keyup compositionstart`,A(sL,e))},lL=Ta,uL=(e,t,n)=>wF(t,e,n,jb,Mb,lL),dL=(e,t,n)=>TF(t,e,n,e=>jb(e)||kb(e),e=>Mb(e)||Ab(e),lL),fL=e=>{let t=e.dom.create(Sd(e));return t.innerHTML=`<br data-mce-bogus="1">`,t},pL=(e,t,n)=>{let r=_m(e.getBody()),i=A(nm,t===1?r.next:r.prev);if(n.collapsed){let r=e.dom.getParent(n.startContainer,`PRE`);if(!r)return;if(!i(Y.fromRangeStart(n))){let n=V.fromDom(fL(e));t===1?Ci(V.fromDom(r),n):Si(V.fromDom(r),n),e.selection.select(n.dom,!0),e.selection.collapse()}}},mL=(e,t)=>{let n=t?im.Forwards:im.Backwards,r=e.selection.getRng();return uL(n,e,r).orThunk(()=>(pL(e,n,r),P.none()))},hL=(e,t)=>{let n=t?1:-1,r=e.selection.getRng();return dL(n,e,r).orThunk(()=>(pL(e,n,r),P.none()))},gL=(e,t)=>Xx(t?e.getEnd(!0):e.getStart(!0))?!t:t,_L=(e,t)=>mL(e,gL(e.selection,t)).exists(t=>(SF(e,t),!0)),vL=(e,t)=>hL(e,t).exists(t=>(SF(e,t),!0)),yL=(e,t)=>DF(e,t,t?Mb:jb),bL=(e,t)=>FN(e,!t).map(n=>{let r=n.toRange(),i=e.selection.getRng();return t?r.setStart(i.startContainer,i.startOffset):r.setEnd(i.endContainer,i.endOffset),r}).exists(t=>(SF(e,t),!0)),xL=e=>me([`figcaption`],Pn(e)),SL=(e,t)=>{let n=A(xr,t);return ti(V.fromDom(e.container()),qa,n).filter(xL)},CL=(e,t,n)=>t?$P(e.dom,n):QP(e.dom,n),wL=(e,t)=>{let n=V.fromDom(e.getBody()),r=Y.fromRangeStart(e.selection.getRng());return SL(r,n).exists(()=>{if(CL(n,t,r)){let r=$I(e,n,t?Ti:wi);return e.selection.setRng(r),!0}else return!1})},TL=(e,t)=>e.selection.isCollapsed()?wL(e,t):!1,EL=(e,t,n)=>{let r=e.selection.getRng(),i=Y.fromRangeStart(r);return e.getBody().firstChild===t&&QP(n,i)?(e.execCommand(`InsertNewBlockBefore`),!0):!1},DL=(e,t)=>{let n=e.selection.getRng(),r=Y.fromRangeStart(n);return e.getBody().lastChild===t&&$P(t,r)?(e.execCommand(`InsertNewBlockAfter`),!0):!1},OL=(e,t)=>t?P.from(e.dom.getParent(e.selection.getNode(),`details`)).map(t=>DL(e,t)).getOr(!1):P.from(e.dom.getParent(e.selection.getNode(),`summary`)).bind(t=>P.from(e.dom.getParent(t,`details`)).map(n=>EL(e,n,t))).getOr(!1),kL=(e,t)=>OL(e,t),AL={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},jL=e=>ge(e,e=>({...AL,...e})),ML=e=>ge(e,e=>({...AL,...e})),NL=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,PL=(e,t)=>Te(jL(e),e=>NL(e,t)?[e]:[]),FL=(e,t)=>Te(ML(e),e=>NL(e,t)?[e]:[]),IL=(e,...t)=>()=>e.apply(null,t),LL=(e,t)=>Se(PL(e,t),e=>e.action()),RL=(e,t)=>Fe(FL(e,t),e=>e.action()),zL=(e,t)=>wF(e,t?im.Forwards:im.Backwards,e.selection.getRng(),Db,Ob,Oa).exists(t=>(SF(e,t),!0)),BL=(e,t)=>TF(e,t?1:-1,e.selection.getRng(),Db,Ob,Oa).exists(t=>(SF(e,t),!0)),VL=(e,t)=>DF(e,t,t?Ob:Db),HL=Zu.generate([{none:[`current`]},{first:[`current`]},{middle:[`current`,`target`]},{last:[`current`]}]),UL=e=>HL.none(e),WL={...HL,none:UL},GL=(e,t)=>KL(e,t,N),KL=(e,t,n)=>Te(Fr(e),e=>_r(e,t)?n(e)?[e]:[]:KL(e,t,n)),qL=(e,t,n=M)=>n(t)?P.none():me(e,Pn(t))?P.some(t):ai(t,e.join(`,`),e=>_r(e,`table`)||n(e)),JL=(e,t)=>qL([`td`,`th`],e,t),YL=e=>GL(e,`th,td`),XL=(e,t)=>si(e,`table`,t),ZL=(e,t,n,r,i=N)=>{let a=r===1;if(!a&&n<=0)return WL.first(e[0]);if(a&&n>=e.length-1)return WL.last(e[e.length-1]);{let a=n+r,o=e[a];return i(o)?WL.middle(t,o):ZL(e,t,a,r,i)}},QL=(e,t)=>XL(e,t).bind(t=>{let n=YL(t);return Ce(n,t=>xr(e,t)).map(e=>({index:e,all:n}))}),$L=(e,t,n)=>QL(e,n).fold(()=>WL.none(e),n=>ZL(n.all,e,n.index,1,t)),eR=(e,t,n)=>QL(e,n).fold(()=>WL.none(),n=>ZL(n.all,e,n.index,-1,t)),tR=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),nR=(e,t)=>Te(t,t=>{let n=tR(jl(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]}),rR=(e,t,n)=>be(e,(e,r)=>e.fold(()=>P.some(r),e=>{let i=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),a=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return P.some(a<i?r:e)}),P.none()),iR=(e,t,n,r,i)=>rR(I(nR(e,H(V.fromDom(n),`td,th,caption`).map(e=>e.dom)),e=>t(e,i)),r,i).map(e=>e.cell),aR=e=>e.bottom,oR=e=>e.top,sR=(e,t)=>e.y<t,cR=(e,t)=>e.y>t,lR=A(iR,aR,sR),uR=A(iR,oR,cR),dR=(e,t)=>Me(t.getClientRects()).bind(t=>lR(e,t.left,t.top)).bind(e=>qP(tF(e),t)),fR=(e,t)=>Ne(t.getClientRects()).bind(t=>uR(e,t.left,t.top)).bind(e=>qP(eF(e),t)),pR=(e,t,n)=>n.breakAt.exists(n=>e(t,n).breakAt.isSome()),mR=e=>e.breakType===BP.Wrap&&e.positions.length===0,hR=e=>e.breakType===BP.Br&&e.positions.length===1,gR=(e,t,n)=>{let r=e(t,n);return mR(r)||!Sa(n.getNode())&&hR(r)?!pR(e,t,r):r.breakAt.isNone()},_R=A(gR,JP),vR=A(gR,YP),yR=(e,t,n)=>{let r=Y.fromRangeStart(t);return Om(!e,n).exists(e=>e.isEqual(r))},bR=(e,t,n,r)=>{let i=e.selection.getRng(),a=t?1:-1;return Ep()&&yR(t,i,n)?(wN(a,e,n,!t,!1).each(t=>{SF(e,t)}),!0):!1},xR=(e,t,n)=>dR(t,n).orThunk(()=>Me(n.getClientRects()).bind(n=>KP(XP(e,Y.before(t)),n.left))).getOr(Y.before(t)),SR=(e,t,n)=>fR(t,n).orThunk(()=>Me(n.getClientRects()).bind(n=>KP(ZP(e,Y.after(t)),n.left))).getOr(Y.after(t)),CR=(e,t)=>{let n=t.getNode(e);return ma(n)?P.some(n):P.none()},wR=(e,t,n)=>{t.undoManager.transact(()=>{let r=e?Ci:Si;SF(t,$I(t,V.fromDom(n),r))})},TR=(e,t,n)=>{let r=CR(!!t,n),i=t===!1;r.fold(()=>SF(e,n.toRange()),r=>Om(i,e.getBody()).filter(e=>e.isEqual(n)).fold(()=>SF(e,n.toRange()),n=>wR(t,e,r)))},ER=(e,t,n,r)=>{let i=e.selection.getRng(),a=Y.fromRangeStart(i),o=e.getBody();return!t&&_R(r,a)?(TR(e,t,xR(o,n,a)),!0):t&&vR(r,a)?(TR(e,t,SR(o,n,a)),!0):!1},DR=(e,t,n)=>P.from(e.dom.getParent(e.selection.getNode(),`td,th`)).bind(r=>P.from(e.dom.getParent(r,`table`)).map(i=>n(e,t,i,r))).getOr(!1),OR=(e,t)=>DR(e,t,bR),kR=(e,t)=>DR(e,t,ER),AR=e=>L_(j_.exact(e,0,e,0)),jR=(e,t,n)=>n.fold(P.none,P.none,(e,t)=>Ly(t).map(e=>AR(e)),n=>(e.execCommand(`mceTableInsertRowAfter`),MR(e,t,n))),MR=(e,t,n)=>jR(e,t,$L(n,li)),NR=(e,t,n)=>jR(e,t,eR(n,li)),PR=(e,t)=>{let n=[`table`,`li`,`dl`],r=V.fromDom(e.getBody()),i=e=>{let t=Pn(e);return xr(e,r)||me(n,t)},a=e.selection.getRng();return JL(V.fromDom(t?a.endContainer:a.startContainer),i).map(n=>(XL(n,i).each(t=>{e.model.table.clearSelectedCells(t.dom)}),e.selection.collapse(!t),(t?MR:NR)(e,i,n).each(t=>{e.selection.setRng(t)}),!0)).getOr(!1)},FR=(e,t,n)=>{let r=fn.os.isMacOS()||fn.os.isiOS();LL([{keyCode:$.RIGHT,action:IL(_L,e,!0)},{keyCode:$.LEFT,action:IL(_L,e,!1)},{keyCode:$.UP,action:IL(vL,e,!1)},{keyCode:$.DOWN,action:IL(vL,e,!0)},...r?[{keyCode:$.UP,action:IL(bL,e,!1),metaKey:!0,shiftKey:!0},{keyCode:$.DOWN,action:IL(bL,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:$.RIGHT,action:IL(OR,e,!0)},{keyCode:$.LEFT,action:IL(OR,e,!1)},{keyCode:$.UP,action:IL(kR,e,!1)},{keyCode:$.DOWN,action:IL(kR,e,!0)},{keyCode:$.UP,action:IL(kR,e,!1)},{keyCode:$.UP,action:IL(kL,e,!1)},{keyCode:$.DOWN,action:IL(kL,e,!0)},{keyCode:$.RIGHT,action:IL(zL,e,!0)},{keyCode:$.LEFT,action:IL(zL,e,!1)},{keyCode:$.UP,action:IL(BL,e,!1)},{keyCode:$.DOWN,action:IL(BL,e,!0)},{keyCode:$.RIGHT,action:IL(IF,e,t,!0)},{keyCode:$.LEFT,action:IL(IF,e,t,!1)},{keyCode:$.RIGHT,ctrlKey:!r,altKey:r,action:IL(zF,e,t)},{keyCode:$.LEFT,ctrlKey:!r,altKey:r,action:IL(BF,e,t)},{keyCode:$.UP,action:IL(TL,e,!1)},{keyCode:$.DOWN,action:IL(TL,e,!0)}],n).each(e=>{n.preventDefault()})},IR=(e,t)=>{e.on(`keydown`,n=>{n.isDefaultPrevented()||FR(e,t,n)})},LR=(e,t)=>({container:e,offset:t}),RR=Vc.DOM,zR=e=>t=>e===t?-1:0,BR=e=>t=>e.isBlock(t)||me([`BR`,`IMG`,`HR`,`INPUT`],t.nodeName)||e.getContentEditable(t)===`false`,VR=(e,t,n)=>{if(W(e)&&t>=0)return P.some(LR(e,t));{let r=kl(RR);return P.from(r.backwards(e,t,zR(e),n)).map(e=>LR(e.container,e.container.data.length))}},HR=(e,t,n)=>{if(W(e)&&t>=e.length)return P.some(LR(e,t));{let r=kl(RR);return P.from(r.forwards(e,t,zR(e),n)).map(e=>LR(e.container,0))}},UR=(e,t,n)=>{if(!W(e))return P.none();let r=e.data;if(t>=0&&t<=r.length)return P.some(LR(e,t));{let r=kl(RR);return P.from(r.backwards(e,t,zR(e),n)).bind(e=>{let r=e.container.data;return UR(e.container,t+r.length,n)})}},WR=(e,t,n)=>{if(!W(e))return P.none();let r=e.data;if(t<=r.length)return P.some(LR(e,t));{let i=kl(RR);return P.from(i.forwards(e,t,zR(e),n)).bind(e=>WR(e.container,t-r.length,n))}},GR=(e,t,n,r,i)=>{let a=kl(e,BR(e));return P.from(a.backwards(t,n,r,i))},KR=e=>e.collapsed&&W(e.startContainer),qR=e=>uo(e.toString().replace(/\u00A0/g,` `)),JR=e=>e!==``&&` \xA0\f
\r	\v`.indexOf(e)!==-1,YR=(e,t)=>e.substring(t.length),XR=(e,t,n)=>{let r,i=n.charAt(0);for(r=t-1;r>=0;r--){let a=e.charAt(r);if(JR(a))return P.none();if(i===a&&xt(e,n,r,t))break}return P.some(r)},ZR=(e,t,n,r=0)=>{if(!KR(t))return P.none();let i={text:``,offset:0},a=(e,t,r)=>(i.text=r+i.text,i.offset+=t,XR(i.text,i.offset,n).getOr(t)),o=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return GR(e,t.startContainer,t.startOffset,a,o).bind(e=>{let i=t.cloneRange();if(i.setStart(e.container,e.offset),i.setEnd(t.endContainer,t.endOffset),i.collapsed)return P.none();let a=qR(i);return a.lastIndexOf(n)!==0||YR(a,n).length<r?P.none():P.some({text:YR(a,n),range:i,trigger:n})})},QR=(e,t,n,r=0)=>Hy(V.fromDom(t.startContainer)).fold(()=>ZR(e,t,n,r),t=>{let r=e.createRng();r.selectNode(t.dom);let i=qR(r);return P.some({range:r,text:YR(i,n),trigger:n})}),$R=e=>e.nodeType===3,ez=e=>e.nodeType===1,tz=e=>{if($R(e))return LR(e,e.data.length);{let t=e.childNodes;return t.length>0?tz(t[t.length-1]):LR(e,t.length)}},nz=(e,t)=>{let n=e.childNodes;return n.length>0&&t<n.length?nz(n[t],0):n.length>0&&ez(e)&&n.length===t?tz(n[n.length-1]):LR(e,t)},rz=(e,t)=>{let n=e.getParent(t.container,e.isBlock)??e.getRoot();return GR(e,t.container,t.offset,(e,t)=>t===0?-1:t,n).filter(e=>!JR(e.container.data.charAt(e.offset-1))).isSome()},iz=e=>t=>!rz(e,nz(t.startContainer,t.startOffset)),az=(e,t,n)=>Fe(n.triggers,n=>QR(e,t,n)),oz=(e,t)=>{let n=t(),r=e.selection.getRng();return az(e.dom,r,n).bind(n=>sz(e,t,n))},sz=(e,t,n,r={})=>{let i=t(),a=e.selection.getRng().startContainer.nodeValue??``,o=I(i.lookupByTrigger(n.trigger),t=>n.text.length>=t.minChars&&t.matches.getOrThunk(()=>iz(e.dom))(n.range,a,n.text));if(o.length===0)return P.none();let s=Promise.all(ge(o,e=>e.fetch(n.text,e.maxResults,r).then(t=>({matchText:n.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))));return P.some({lookupData:s,context:n})};var cz;(function(e){e[e.Error=0]=`Error`,e[e.Value=1]=`Value`})(cz||={});let lz=(e,t,n)=>e.stype===cz.Error?t(e.serror):n(e.svalue),uz=e=>{let t=[],n=[];return F(e,e=>{lz(e,e=>n.push(e),e=>t.push(e))}),{values:t,errors:n}},dz=(e,t)=>e.stype===cz.Error?{stype:cz.Error,serror:t(e.serror)}:e,fz=(e,t)=>e.stype===cz.Value?{stype:cz.Value,svalue:t(e.svalue)}:e,pz=(e,t)=>e.stype===cz.Value?t(e.svalue):e,mz=(e,t)=>e.stype===cz.Error?t(e.serror):e,hz=e=>({stype:cz.Value,svalue:e}),gz=e=>({stype:cz.Error,serror:e}),_z={fromResult:e=>e.fold(gz,hz),toResult:e=>lz(e,Xu.error,Xu.value),svalue:hz,partition:uz,serror:gz,bind:pz,bindError:mz,map:fz,mapError:dz,fold:lz},vz=e=>y(e)&&Le(e).length>100?` removed due to size`:JSON.stringify(e,null,2),yz=e=>ge(e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:k(`... (only showing first ten failures)`)}]):e,e=>`Failed path: (`+e.path.join(` > `)+`)
`+e.getErrorInfo()),bz=(e,t)=>_z.serror([{path:e,getErrorInfo:t}]),xz=(e,t,n)=>bz(e,()=>`Could not find valid *required* value for "`+t+`" in `+vz(n)),Sz=(e,t)=>bz(e,()=>`Choice schema did not contain choice key: "`+t+`"`),Cz=(e,t,n)=>bz(e,()=>`The chosen schema: "`+n+`" did not exist in branches: `+vz(t)),wz=(e,t)=>bz(e,k(t)),Tz=(e,t,n,r)=>qe(n,r).fold(()=>Cz(e,n,r),n=>n.extract(e.concat([`branch: `+r]),t)),Ez=(e,t)=>({extract:(n,r)=>qe(r,e).fold(()=>Sz(n,e),e=>Tz(n,r,t,e)),toString:()=>`chooseOn(`+e+`). Possible values: `+Le(t)}),Dz=(e,t)=>t,Oz=(e,t)=>b(e)&&b(t)?Az(e,t):t,kz=e=>(...t)=>{if(t.length===0)throw Error(`Can't merge zero objects`);let n={};for(let r=0;r<t.length;r++){let i=t[r];for(let t in i)Je(i,t)&&(n[t]=e(n[t],i[t]))}return n},Az=kz(Oz),jz=kz(Dz),Mz=()=>({tag:`required`,process:{}}),Nz=e=>({tag:`defaultedThunk`,process:e}),Pz=e=>Nz(k(e)),Fz=()=>({tag:`option`,process:{}}),Iz=(e,t)=>e.length>0?_z.svalue(Az(t,jz.apply(void 0,e))):_z.svalue(t),Lz=e=>re(_z.serror,we)(e),Rz={consolidateObj:(e,t)=>{let n=_z.partition(e);return n.errors.length>0?Lz(n.errors):Iz(n.values,t)},consolidateArr:e=>{let t=_z.partition(e);return t.errors.length>0?Lz(t.errors):_z.svalue(t.values)}},zz=(e,t,n,r)=>({tag:`field`,key:e,newKey:t,presence:n,prop:r}),Bz=(e,t)=>({tag:`custom`,newKey:e,instantiator:t}),Vz=(e,t,n)=>{switch(e.tag){case`field`:return t(e.key,e.newKey,e.presence,e.prop);case`custom`:return n(e.newKey,e.instantiator)}},Hz=e=>({extract:(t,n)=>_z.bindError(e(n),e=>wz(t,e)),toString:k(`val`)}),Uz=Hz(_z.svalue),Wz=(e,t,n,r)=>qe(t,n).fold(()=>xz(e,n,t),r),Gz=(e,t,n,r)=>r(qe(e,t).getOrThunk(()=>n(e))),Kz=(e,t,n)=>n(qe(e,t)),qz=(e,t,n,r)=>r(qe(e,t).map(t=>t===!0?n(e):t)),Jz=(e,t,n,r,i)=>{let a=e=>i.extract(t.concat([r]),e),o=e=>e.fold(()=>_z.svalue(P.none()),e=>{let n=i.extract(t.concat([r]),e);return _z.map(n,P.some)});switch(e.tag){case`required`:return Wz(t,n,r,a);case`defaultedThunk`:return Gz(n,r,e.process,a);case`option`:return Kz(n,r,o);case`defaultedOptionThunk`:return qz(n,r,e.process,o);case`mergeWithThunk`:return Gz(n,r,k({}),t=>a(Az(e.process(n),t)))}},Yz=(e,t,n)=>{let r={},i=[];for(let a of n)Vz(a,(n,a,o,s)=>{let c=Jz(o,e,t,n,s);_z.fold(c,e=>{i.push(...e)},e=>{r[a]=e})},(e,n)=>{r[e]=n(t)});return i.length>0?_z.serror(i):_z.svalue(r)},Xz=e=>({extract:(t,n)=>Yz(t,n,e),toString:()=>`obj{
`+ge(e,e=>Vz(e,(e,t,n,r)=>e+` -> `+r.toString(),(e,t)=>`state(`+e+`)`)).join(`
`)+`}`}),Zz=e=>({extract:(t,n)=>{let r=ge(n,(n,r)=>e.extract(t.concat([`[`+r+`]`]),n));return Rz.consolidateArr(r)},toString:()=>`array(`+e.toString()+`)`}),Qz=e=>Hz(t=>e(t).fold(_z.serror,_z.svalue)),$z=(e,t,n)=>{let r=t.extract([e],n);return _z.mapError(r,e=>({input:n,errors:e}))},eB=(e,t,n)=>_z.toResult($z(e,t,n)),tB=e=>`Errors: 
`+yz(e.errors).join(`
`)+`

Input object: `+vz(e.input),nB=(e,t)=>Ez(e,L(t,Xz)),rB=k(Uz),iB=(e,t)=>Hz(n=>{let r=typeof n;return e(n)?_z.svalue(n):_z.serror(`Expected type: ${t} but got: ${r}`)}),aB=iB(E,`number`),oB=iB(v,`string`),sB=iB(S,`boolean`),cB=iB(T,`function`),lB=zz,uB=Bz,dB=e=>Qz(t=>me(e,t)?Xu.value(t):Xu.error(`Unsupported value: "${t}", choose one of "${e.join(`, `)}".`)),fB=(e,t)=>lB(e,e,Mz(),t),pB=e=>fB(e,oB),mB=e=>fB(e,cB),hB=(e,t)=>lB(e,e,Mz(),Zz(t)),gB=(e,t)=>lB(e,e,Fz(),t),_B=e=>gB(e,oB),vB=e=>gB(e,cB),yB=(e,t)=>lB(e,e,Pz(t),rB()),bB=(e,t,n)=>lB(e,e,Pz(t),n),xB=(e,t)=>bB(e,t,aB),SB=(e,t)=>bB(e,t,oB),CB=(e,t,n)=>bB(e,t,dB(n)),wB=(e,t)=>bB(e,t,sB),TB=(e,t)=>bB(e,t,cB),EB=(e,t,n)=>bB(e,t,Zz(n)),DB=pB(`type`),OB=mB(`fetch`),kB=mB(`onAction`),AB=TB(`onSetup`,()=>D),jB=_B(`text`),MB=_B(`icon`),NB=_B(`tooltip`),PB=_B(`label`),FB=wB(`active`,!1),IB=wB(`enabled`,!0),LB=wB(`primary`,!1),RB=e=>yB(`columns`,e),zB=e=>SB(`type`,e),BB=Xz([DB,pB(`trigger`),xB(`minChars`,1),RB(1),xB(`maxResults`,10),vB(`matches`),OB,kB,EB(`highlightOn`,[],oB)]),VB=e=>eB(`Autocompleter`,BB,{trigger:e.ch,...e}),HB=[IB,NB,MB,jB,AB],UB=[FB].concat(HB),WB=[TB(`predicate`,M),CB(`scope`,`node`,[`node`,`editor`]),CB(`position`,`selection`,[`node`,`selection`,`line`])],GB=HB.concat([zB(`contextformbutton`),LB,kB,uB(`original`,ie)]),KB=UB.concat([zB(`contextformbutton`),LB,kB,uB(`original`,ie)]),qB=HB.concat([zB(`contextformbutton`)]),JB=UB.concat([zB(`contextformtogglebutton`)]),YB=nB(`type`,{contextformbutton:GB,contextformtogglebutton:KB});[zB(`contextform`),TB(`initValue`,k(``)),PB,hB(`commands`,YB),gB(`launch`,nB(`type`,{contextformbutton:qB,contextformtogglebutton:JB}))].concat(WB);let XB=e=>{let t=e.ui.registry.getAll().popups,n=L(t,e=>VB(e).fold(e=>{throw Error(tB(e))},ie)),r=Ze(Ge(n,e=>e.trigger)),i=Ke(n);return{dataset:n,triggers:r,lookupByTrigger:e=>I(i,t=>t.trigger===e)}},ZB=(e,t)=>{let n=rl(t.load,50);e.on(`keypress compositionend`,e=>{e.which!==27&&n.throttle()}),e.on(`keydown`,e=>{let r=e.which;r===8?n.throttle():r===27&&t.cancelIfNecessary()}),e.on(`remove`,n.cancel)},QB=e=>{let t=tl(),n=Wc(!1),r=t.isSet,i=()=>{r()&&(TA(e),r_(e),n.set(!1),t.clear())},a=n=>{r()||(wA(e,n.range),t.set({trigger:n.trigger,matchLength:n.text.length}))},o=R(()=>XB(e)),s=n=>t.get().map(t=>QR(e.dom,e.selection.getRng(),t.trigger).bind(t=>sz(e,o,t,n))).getOrThunk(()=>oz(e,o)),c=r=>{s(r).fold(i,r=>{a(r.context),r.lookupData.then(a=>{t.get().map(o=>{let s=r.context;o.trigger===s.trigger&&(s.text.length-o.matchLength>=10?i():(t.set({...o,matchLength:s.text.length}),n.get()?n_(e,{lookupData:a}):(n.set(!0),t_(e,{lookupData:a}))))})})})};e.addCommand(`mceAutocompleterReload`,(e,t)=>{c(y(t)?t.fetchOptions:{})}),e.addCommand(`mceAutocompleterClose`,i),ZB(e,{cancelIfNecessary:i,load:c})},$B=an().browser.isSafari(),eV=e=>so(V.fromDom(e)),tV=(e,t)=>e.startOffset===0&&e.endOffset===t.textContent?.length,nV=(e,t)=>P.from(e.getParent(t.container(),`details`)),rV=(e,t)=>nV(e,t).isSome(),iV=(e,t)=>{let n=P.from(e.getParent(t.startContainer,`details`)),r=P.from(e.getParent(t.endContainer,`details`));if(n.isSome()||r.isSome()){let t=n.bind(t=>P.from(e.select(`summary`,t)[0]));return P.some({startSummary:t,startDetails:n,endDetails:r})}else return P.none()},aV=(e,t)=>jm(t).exists(t=>t.isEqual(e)),oV=(e,t)=>Mm(t).exists(n=>Sa(n.getNode())&&Am(t,n).exists(t=>t.isEqual(e))||n.isEqual(e)),sV=(e,t)=>t.startSummary.exists(t=>aV(e,t)),cV=(e,t)=>t.startSummary.exists(t=>oV(e,t)),lV=(e,t)=>t.startDetails.exists(n=>Am(n,e).forall(n=>t.startSummary.exists(t=>!t.contains(e.container())&&t.contains(n.container())))),uV=(e,t,n)=>n.startDetails.exists(n=>km(e,t).forall(e=>!n.contains(e.container()))),dV=(e,t)=>{let n=t.getNode();C(n)||e.selection.setCursorLocation(n,t.offset())},fV=(e,t,n)=>{let r=e.dom.getParent(t.container(),`details`);if(r&&!r.open){let t=e.dom.select(`summary`,r)[0];t&&(n?jm(t):Mm(t)).each(t=>dV(e,t))}else dV(e,t)},pV=(e,t)=>{let n=t=>t.contains(e.startContainer),r=t=>t.contains(e.endContainer),i=t.startSummary.exists(n),a=t.startSummary.exists(r),o=t.startDetails.forall(e=>t.endDetails.forall(t=>e!==t));return(i||a)&&!(i&&a)||o},mV=(e,t,n)=>{let{dom:r,selection:i}=e,a=e.getBody();if(n===`character`){let n=Y.fromRangeStart(i.getRng()),o=r.getParent(n.container(),r.isBlock),s=nV(r,n),c=o&&r.isEmpty(o),l=ee(o?.previousSibling),u=ee(o?.nextSibling);return c&&(t?u:l)&&Em(!t,a,n).exists(e=>rV(r,e)&&!xn(s,nV(r,e)))?!0:Em(t,a,n).fold(M,n=>{let i=nV(r,n);if(rV(r,n)&&!xn(s,i)){if(t||fV(e,n,!1),o&&c){if(t&&l||!t&&u)return!0;fV(e,n,t),e.dom.remove(o)}return!0}else return!1})}else return!1},hV=(e,t,n,r)=>{let i=e.selection.getRng(),a=Y.fromRangeStart(i),o=e.getBody();return r===`selection`?pV(i,t):n?cV(a,t)||uV(o,a,t):sV(a,t)||lV(a,t)},gV=(e,t,n)=>iV(e.dom,e.selection.getRng()).fold(()=>mV(e,t,n),r=>hV(e,r,t,n)||mV(e,t,n)),_V=(e,t,n)=>{let r=e.selection,i=r.getNode(),a=r.getRng(),o=Y.fromRangeStart(a);return Aa(i)?(n===`selection`&&tV(a,i)||fS(t,o,i)?eV(i):e.undoManager.transact(()=>{let a=r.getSel(),{anchorNode:o,anchorOffset:s,focusNode:c,focusOffset:l}=a??{},u=()=>{w(o)&&w(s)&&w(c)&&w(l)&&a?.setBaseAndExtent(o,s,c,l)},d=()=>{o=a?.anchorNode,s=a?.anchorOffset,c=a?.focusNode,l=a?.focusOffset},f=(e,t)=>{F(e.childNodes,e=>{Nh(e)&&t.appendChild(e)})},p=e.dom.create(`span`,{"data-mce-bogus":`1`});f(i,p),i.appendChild(p),u(),(n===`word`||n===`line`)&&a?.modify(`extend`,t?`right`:`left`,n),!r.isCollapsed()&&tV(r.getRng(),p)?eV(i):(e.execCommand(t?`ForwardDelete`:`Delete`),d(),f(p,i),u()),e.dom.remove(p)}),!0):!1},vV=(e,t,n)=>gV(e,t,n)||$B&&_V(e,t,n)?P.some(D):P.none(),yV=e=>(t,n,r={})=>{let i=t.getBody(),a={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:D,inputType:n},o=xc(new InputEvent(e));return t.dispatch(e,{...o,...a,...r})},bV=yV(`input`),xV=yV(`beforeinput`),SV=an(),CV=SV.os,wV=CV.isMacOS()||CV.isiOS(),TV=SV.browser.isFirefox(),EV=(e,t,n)=>{let r=n.keyCode===$.BACKSPACE?`deleteContentBackward`:`deleteContentForward`,i=e.selection.isCollapsed(),a=i?`character`:`selection`,o=e=>i?e?`word`:`line`:`selection`;RL([{keyCode:$.BACKSPACE,action:IL(zI,e)},{keyCode:$.BACKSPACE,action:IL(tP,e,!1)},{keyCode:$.DELETE,action:IL(tP,e,!0)},{keyCode:$.BACKSPACE,action:IL(PN,e,!1)},{keyCode:$.DELETE,action:IL(PN,e,!0)},{keyCode:$.BACKSPACE,action:IL(JF,e,t,!1)},{keyCode:$.DELETE,action:IL(JF,e,t,!0)},{keyCode:$.BACKSPACE,action:IL(lC,e,!1)},{keyCode:$.DELETE,action:IL(lC,e,!0)},{keyCode:$.BACKSPACE,action:IL(vV,e,!1,a)},{keyCode:$.DELETE,action:IL(vV,e,!0,a)},...wV?[{keyCode:$.BACKSPACE,altKey:!0,action:IL(vV,e,!1,o(!0))},{keyCode:$.DELETE,altKey:!0,action:IL(vV,e,!0,o(!0))},{keyCode:$.BACKSPACE,metaKey:!0,action:IL(vV,e,!1,o(!1))}]:[{keyCode:$.BACKSPACE,ctrlKey:!0,action:IL(vV,e,!1,o(!0))},{keyCode:$.DELETE,ctrlKey:!0,action:IL(vV,e,!0,o(!0))}],{keyCode:$.BACKSPACE,action:IL(rP,e,!1)},{keyCode:$.DELETE,action:IL(rP,e,!0)},{keyCode:$.BACKSPACE,action:IL(EI,e,!1)},{keyCode:$.DELETE,action:IL(EI,e,!0)},{keyCode:$.BACKSPACE,action:IL(CN,e,!1)},{keyCode:$.DELETE,action:IL(CN,e,!0)},{keyCode:$.BACKSPACE,action:IL(gN,e,!1)},{keyCode:$.DELETE,action:IL(gN,e,!0)},{keyCode:$.BACKSPACE,action:IL(vI,e,!1)},{keyCode:$.DELETE,action:IL(vI,e,!0)}],n).filter(t=>e.selection.isEditable()).each(t=>{n.preventDefault(),xV(e,r).isDefaultPrevented()||(t(),bV(e,r))})},DV=(e,t,n)=>LL([{keyCode:$.BACKSPACE,action:IL(eP,e)},{keyCode:$.DELETE,action:IL(eP,e)},...wV?[{keyCode:$.BACKSPACE,altKey:!0,action:IL(SI,e)},{keyCode:$.DELETE,altKey:!0,action:IL(SI,e)},...n?[{keyCode:TV?224:91,action:IL(SI,e)}]:[]]:[{keyCode:$.BACKSPACE,ctrlKey:!0,action:IL(SI,e)},{keyCode:$.DELETE,ctrlKey:!0,action:IL(SI,e)}]],t),OV=(e,t)=>{let n=!1;e.on(`keydown`,r=>{n=r.keyCode===$.BACKSPACE,r.isDefaultPrevented()||EV(e,t,r)}),e.on(`keyup`,t=>{t.isDefaultPrevented()||DV(e,t,n),n=!1})},kV=e=>{for(;e;){if(U(e)||W(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},AV=(e,t)=>{let n=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){let e=kV(t.firstChild);e&&/^(UL|OL|DL)$/.test(e.nodeName)&&t.insertBefore(n.doc.createTextNode(`\xA0`),t.firstChild)}let i=n.createRng();if(t.normalize(),t.hasChildNodes()){let e=new ia(t,t),n=t,a;for(;a=e.current();){if(W(a)){i.setStart(a,0),i.setEnd(a,0);break}if(r[a.nodeName.toLowerCase()]){i.setStartBefore(a),i.setEndBefore(a);break}n=a,a=e.next()}a||(i.setStart(n,0),i.setEnd(n,0))}else Sa(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),Ov(e,i)},jV=(e,t)=>{let n=e.getRoot(),r,i=t;for(;i!==n&&i&&e.getContentEditable(i)!==`false`;){if(e.getContentEditable(i)===`true`){r=i;break}i=i.parentNode}return i===n?n:r},MV=e=>P.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),NV=e=>MV(e).fold(k(``),e=>e.nodeName.toUpperCase()),PV=e=>MV(e).filter(e=>Qa(V.fromDom(e))).isSome(),FV=e=>{e.innerHTML=`<br data-mce-bogus="1">`},IV=(e,t,n)=>{let r=e.dom;P.from(n.style).map(r.parseStyle).each(e=>{let n={...yi(V.fromDom(t)),...e};r.setStyles(t,n)}),Cn(P.from(n.class).map(e=>e.split(/\s+/)),P.from(t.className).map(e=>I(e.split(/\s+/),e=>e!==``)),(e,n)=>{let i=I(n,t=>!me(e,t)),a=[...e,...i];r.setAttrib(t,`class`,a.join(` `))});let i=[`style`,`class`],a=We(n,(e,t)=>!me(i,t));r.setAttribs(t,a)},LV=(e,t)=>{Sd(e).toLowerCase()===t.tagName.toLowerCase()&&IV(e,t,Z(e))},RV=(e,t,n,r,i=!0,a)=>{let o=e.dom,s=e.schema,c=Sd(e),l=n?n.nodeName.toUpperCase():``,u=t,d=s.getTextInlineElements(),f;f=a||l===`TABLE`||l===`HR`?o.create(a||c):n.cloneNode(!1);let p=f;if(!i)o.setAttrib(f,`style`,null),o.setAttrib(f,`class`,null);else do if(d[u.nodeName]){if(Pm(u)||rh(u))continue;let e=u.cloneNode(!1);o.setAttrib(e,`id`,``),f.hasChildNodes()?(e.appendChild(f.firstChild),f.appendChild(e)):(p=e,f.appendChild(e))}while((u=u.parentNode)&&u!==r);return LV(e,f),FV(p),f},zV=(e,t)=>e.dom.getParent(t,ka),BV=(e,t,n)=>{let r=t;for(;r&&r!==e&&ee(r.nextSibling);){let e=r.parentElement;if(!e||!n(e))return ka(e);r=e}return!1},VV=(e,t,n)=>!t&&n.nodeName.toLowerCase()===Sd(e)&&e.dom.isEmpty(n)&&BV(e.getBody(),n,t=>Je(e.schema.getTextBlockElements(),t.nodeName.toLowerCase())),HV=(e,t,n)=>{let r=t(Sd(e)),i=zV(e,n);i&&(e.dom.insertAfter(r,i),AV(e,r),(n.parentElement?.childNodes?.length??0)>1&&e.dom.remove(n))},UV=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,WV=e=>e.parentNode?.firstChild===e,GV=(e,t)=>{let n=e?.parentNode;return w(n)&&n.nodeName===t},KV=e=>w(e)&&/^(OL|UL|LI)$/.test(e.nodeName),qV=e=>w(e)&&/^(LI|DT|DD)$/.test(e.nodeName),JV=e=>KV(e)&&KV(e.parentNode),YV=e=>{let t=e.parentNode;return qV(t)?t:e},XV=(e,t,n)=>{let r=e[n?`firstChild`:`lastChild`];for(;r&&!U(r);)r=r[n?`nextSibling`:`previousSibling`];return r===t},ZV=(e,t,n,r,i)=>{let a=e.dom,o=e.selection.getRng(),s=n.parentNode;if(n===e.getBody()||!s)return;JV(n)&&(i=`LI`);let c=t(i);if(XV(n,r,!0)&&XV(n,r,!1))if(GV(n,`LI`)){let e=YV(n);a.insertAfter(c,e),WV(n)?a.remove(e):a.remove(n)}else a.replace(c,n);else if(XV(n,r,!0))GV(n,`LI`)?(a.insertAfter(c,YV(n)),c.appendChild(a.doc.createTextNode(` `)),c.appendChild(n)):s.insertBefore(c,n),a.remove(r);else if(XV(n,r,!1))a.insertAfter(c,YV(n)),a.remove(r);else{n=YV(n);let e=o.cloneRange();e.setStartAfter(r),e.setEndAfter(n);let t=e.extractContents();i===`LI`&&UV(t,`LI`)?(c=t.firstChild,a.insertAfter(t,n)):(a.insertAfter(t,n),a.insertAfter(c,n)),a.remove(r)}AV(e,c)},QV=e=>{F(na(V.fromDom(e),Bn),e=>{let t=e.dom;t.nodeValue=uo(t.data)})},$V=(e,t)=>{let n=e.dom.getParent(t,`ol,ul,dl`);return n!==null&&e.dom.getContentEditableParent(n)===`false`},eH=(e,t)=>t&&t.nodeName===`A`&&e.isEmpty(t),tH=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,nH=(e,t)=>w(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!==`false`,rH=(e,t,n)=>{let r=[];if(!n)return;let i=n;for(;i=i.firstChild;){if(e.isBlock(i))return;U(i)&&!t[i.nodeName.toLowerCase()]&&r.push(i)}let a=r.length;for(;a--;)i=r[a],(!i.hasChildNodes()||i.firstChild===i.lastChild&&i.firstChild?.nodeValue===``||eH(e,i))&&e.remove(i)},iH=(e,t,n)=>W(t)?e?n===1&&t.data.charAt(n-1)===`﻿`?0:n:n===t.data.length-1&&t.data.charAt(n)===`﻿`?t.data.length:n:n,aH=e=>{let t=e.cloneRange();return t.setStart(e.startContainer,iH(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,iH(!1,e.endContainer,e.endOffset)),t},oH=e=>{let t=e;do W(t)&&(t.data=t.data.replace(/^[\r\n]+/,``)),t=t.firstChild;while(t)},sH=(e,t,n,r,i)=>{let a=e.dom,o=jV(a,r)??a.getRoot(),s=a.getParent(r,a.isBlock);if(!s||!nH(a,s)){if(s||=o,!s.hasChildNodes()){let r=a.create(t);return LV(e,r),s.appendChild(r),n.setStart(r,0),n.setEnd(r,0),r}let c=r;for(;c&&c.parentNode!==s;)c=c.parentNode;let l;for(;c&&!a.isBlock(c);)l=c,c=c.previousSibling;let u=l?.parentElement?.nodeName;if(l&&u&&e.schema.isValidChild(u,t.toLowerCase())){let o=l.parentNode,s=a.create(t);for(LV(e,s),o.insertBefore(s,l),c=l;c&&!a.isBlock(c);){let e=c.nextSibling;s.appendChild(c),c=e}n.setStart(r,i),n.setEnd(r,i)}}return r},cH=(e,t)=>{t.normalize();let n=t.lastChild;(!n||U(n)&&/^(left|right)$/gi.test(e.getStyle(n,`float`,!0)))&&e.add(t,`br`)},lH=(e,t)=>{let n=Dd(e);return te(t)?!1:v(n)?me(B.explode(n),t.nodeName.toLowerCase()):n},uH={insert:(e,t)=>{let n,r,i,a,o=!1,s=e.dom,c=e.schema.getNonEmptyElements(),l=e.selection.getRng(),u=Sd(e),d=V.fromDom(l.startContainer),f=Ir(d,l.startOffset),p=f.exists(e=>Rn(e)&&!li(e)),m=l.collapsed&&p,h=t=>RV(e,n,x,b,Ed(e),t),g=e=>{let t=iH(e,n,r);if(W(n)&&(e?t>0:t<n.data.length))return!1;if(n.parentNode===x&&o&&!e||e&&U(n)&&n===x.firstChild)return!0;if(tH(n,`TABLE`)||tH(n,`HR`))return o&&!e||!o&&e;let i=new ia(n,x);W(n)&&(e&&t===0?i.prev():!e&&t===n.data.length&&i.next());let a;for(;a=i.current();){if(U(a)){if(!a.getAttribute(`data-mce-bogus`)){let e=a.nodeName.toLowerCase();if(c[e]&&e!==`br`)return!1}}else if(W(a)&&!Uo(a.data))return!1;e?i.prev():i.next()}return!0},_=()=>{let t;return t=/^(H[1-6]|PRE|FIGURE)$/.test(i)&&ee!==`HGROUP`?h(u):h(),lH(e,a)&&nH(s,a)&&s.isEmpty(x,void 0,{includeZwsp:!0})?t=s.split(a,x):s.insertAfter(t,x),AV(e,t),t};X_(s,l).each(e=>{l.setStart(e.startContainer,e.startOffset),l.setEnd(e.endContainer,e.endOffset)}),n=l.startContainer,r=l.startOffset;let v=!!(t&&t.shiftKey),y=!!(t&&t.ctrlKey);U(n)&&n.hasChildNodes()&&!m&&(o=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=o&&W(n)?n.data.length:0);let b=jV(s,n);if(!b||$V(e,n))return;v||(n=sH(e,u,l,n,r));let x=s.getParent(n,s.isBlock)||s.getRoot();a=w(x?.parentNode)?s.getParent(x.parentNode,s.isBlock):null,i=x?x.nodeName.toUpperCase():``;let ee=a?a.nodeName.toUpperCase():``;if(ee===`LI`&&!y){let e=a;x=e,a=e.parentNode,i=ee}if(U(a)&&VV(e,v,x))return HV(e,h,x);if(/^(LI|DT|DD)$/.test(i)&&U(a)&&s.isEmpty(x)){ZV(e,h,a,x,u);return}if(!m&&(x===e.getBody()||!nH(s,x)))return;let S=x.parentNode,C;if(m)C=h(u),f.fold(()=>{Ti(d,V.fromDom(C))},e=>{Si(e,V.fromDom(C))}),e.selection.setCursorLocation(C,0);else if(mo(x))C=To(x),s.isEmpty(x)&&FV(x),LV(e,C),AV(e,C);else if(g(!1))C=_();else if(g(!0)&&S){C=S.insertBefore(h(),x);let t=Br(V.fromDom(l.startContainer))&&l.collapsed;AV(e,tH(x,`HR`)||t?C:x)}else{let t=aH(l).cloneRange();t.setEndAfter(x);let n=t.extractContents();QV(n),oH(n),C=n.firstChild,s.insertAfter(n,x),rH(s,c,C),cH(s,x),s.isEmpty(x)&&FV(x),C.normalize(),s.isEmpty(C)?(s.remove(C),_()):(LV(e,C),AV(e,C))}s.setAttrib(C,`id`,``),e.dispatch(`NewBlock`,{newBlock:C})},fakeEventName:`insertParagraph`},dH=(e,t,n)=>{let r=new ia(t,n),i,a=e.getNonEmptyElements();for(;i=r.next();)if(a[i.nodeName.toLowerCase()]||W(i)&&i.length>0)return!0;return!1},fH=(e,t,n)=>{let r=e.dom.createRng();n?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),Ov(e,r)},pH=(e,t)=>{let n=e.selection,r=e.dom,i=n.getRng(),a,o=!1;X_(r,i).each(e=>{i.setStart(e.startContainer,e.startOffset),i.setEnd(e.endContainer,e.endOffset)});let s=i.startOffset,c=i.startContainer;if(U(c)&&c.hasChildNodes()){let e=s>c.childNodes.length-1;c=c.childNodes[Math.min(s,c.childNodes.length-1)]||c,s=e&&W(c)?c.data.length:0}let l=r.getParent(c,r.isBlock),u=l&&l.parentNode?r.getParent(l.parentNode,r.isBlock):null,d=u?u.nodeName.toUpperCase():``,f=!!(t&&t.ctrlKey);d===`LI`&&!f&&(l=u),W(c)&&s>=c.data.length&&(dH(e.schema,c,l||r.getRoot())||(a=r.create(`br`),i.insertNode(a),i.setStartAfter(a),i.setEndAfter(a),o=!0)),a=r.create(`br`),_u(r,i,a),fH(e,a,o),e.undoManager.add()},mH=(e,t)=>{let n=V.fromTag(`br`);Si(V.fromDom(t),n),e.undoManager.add()},hH=(e,t)=>{_H(e.getBody(),t)||Ci(V.fromDom(t),V.fromTag(`br`));let n=V.fromTag(`br`);Ci(V.fromDom(t),n),fH(e,n.dom,!1),e.undoManager.add()},gH=e=>Sa(e.getNode()),_H=(e,t)=>gH(Y.after(t))?!0:km(e,Y.after(t)).map(e=>Sa(e.getNode())).getOr(!1),vH=e=>e&&e.nodeName===`A`&&`href`in e,yH=e=>e.fold(M,vH,vH,M),bH=e=>{let t=A(Yx,e),n=Y.fromRangeStart(e.selection.getRng());return EP(t,e.getBody(),n).filter(yH)},xH=(e,t)=>{t.fold(D,A(mH,e),A(hH,e),D)},SH={insert:(e,t)=>{let n=bH(e);n.isSome()?n.each(A(xH,e)):pH(e,t)},fakeEventName:`insertLineBreak`},CH=(e,t)=>MV(e).filter(e=>t.length>0&&_r(V.fromDom(e),t)).isSome(),wH=e=>CH(e,wd(e)),TH=e=>CH(e,Td(e)),EH=Zu.generate([{br:[]},{block:[]},{none:[]}]),DH=(e,t)=>TH(e),OH=e=>(t,n)=>PV(t)===e,kH=(e,t)=>(n,r)=>NV(n)===e.toUpperCase()===t,AH=e=>te(jV(e.dom,e.selection.getStart())),jH=e=>kH(`pre`,e),MH=()=>kH(`summary`,!0),NH=e=>(t,n)=>xd(t)===e,PH=(e,t)=>wH(e),FH=(e,t)=>t,IH=e=>{let t=Sd(e),n=jV(e.dom,e.selection.getStart());return w(n)&&e.schema.isValidChild(n.nodeName,t)},LH=e=>{let t=e.selection.getRng(),n=Ir(V.fromDom(t.startContainer),t.startOffset).map(e=>Rn(e)&&!li(e));return t.collapsed&&n.getOr(!0)},RH=(e,t)=>(n,r)=>be(e,(e,t)=>e&&t(n,r),!0)?P.some(t):P.none(),zH=(e,t)=>gP([RH([DH],EH.none()),RH([jH(!0),AH],EH.none()),RH([MH()],EH.br()),RH([jH(!0),NH(!1),FH],EH.br()),RH([jH(!0),NH(!1)],EH.block()),RH([jH(!0),NH(!0),FH],EH.block()),RH([jH(!0),NH(!0)],EH.br()),RH([OH(!0),FH],EH.br()),RH([OH(!0)],EH.block()),RH([PH],EH.br()),RH([FH],EH.br()),RH([IH],EH.block()),RH([LH],EH.block())],[e,!!(t&&t.shiftKey)]).getOr(EH.none()),BH=(e,t,n)=>{t.selection.isCollapsed()||aS(t),!(w(n)&&xV(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),w(n)&&bV(t,e.fakeEventName))},VH=(e,t)=>{let n=()=>BH(SH,e,t),r=()=>BH(uH,e,t),i=zH(e,t);switch(Cd(e)){case`linebreak`:i.fold(n,n,D);break;case`block`:i.fold(r,r,D);break;case`invert`:i.fold(r,n,D);break;default:i.fold(n,r,D);break}},HH=an(),UH=HH.os.isiOS()&&HH.browser.isSafari(),WH=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),jk(e.undoManager),e.undoManager.transact(()=>{VH(e,t)}))},GH=e=>{if(!e.collapsed)return!1;let t=e.startContainer;if(W(t)){let n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=t.data.charAt(e.startOffset-1);return n.test(r)}else return!1},KH=e=>{let t=P.none(),n=e=>{t=P.some(e.selection.getBookmark()),e.undoManager.add()},r=(e,n)=>{e.undoManager.undo(),t.fold(D,t=>e.selection.moveToBookmark(t)),WH(e,n),t=P.none()};e.on(`keydown`,t=>{t.keyCode===$.ENTER&&(UH&&GH(e.selection.getRng())?n(e):WH(e,t))}),e.on(`keyup`,n=>{n.keyCode===$.ENTER&&t.each(()=>r(e,n))})},qH=(e,t,n)=>{let r=fn.os.isMacOS()||fn.os.isiOS();LL([{keyCode:$.END,action:IL(yL,e,!0)},{keyCode:$.HOME,action:IL(yL,e,!1)},...r?[]:[{keyCode:$.HOME,action:IL(bL,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:$.END,action:IL(bL,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:$.END,action:IL(VL,e,!0)},{keyCode:$.HOME,action:IL(VL,e,!1)},{keyCode:$.END,action:IL(VF,e,!0,t)},{keyCode:$.HOME,action:IL(VF,e,!1,t)}],n).each(e=>{n.preventDefault()})},JH=(e,t)=>{e.on(`keydown`,n=>{n.isDefaultPrevented()||qH(e,t,n)})},YH=e=>{e.on(`input`,t=>{t.isComposing||Cx(e)})},XH=an(),ZH=(e,t,n)=>{LL([{keyCode:$.PAGE_UP,action:IL(VF,e,!1,t)},{keyCode:$.PAGE_DOWN,action:IL(VF,e,!0,t)}],n)},QH=e=>e.stopImmediatePropagation(),$H=e=>e.keyCode===$.PAGE_UP||e.keyCode===$.PAGE_DOWN,eU=(e,t,n)=>{n&&!e.get()?t.on(`NodeChange`,QH,!0):!n&&e.get()&&t.off(`NodeChange`,QH),e.set(n)},tU=(e,t)=>{if(XH.os.isMacOS())return;let n=Wc(!1);e.on(`keydown`,t=>{$H(t)&&eU(n,e,!0)}),e.on(`keyup`,r=>{r.isDefaultPrevented()||ZH(e,t,r),$H(r)&&n.get()&&(eU(n,e,!1),e.nodeChanged())})},nU=(e,t)=>{let n=t.container(),r=t.offset();return W(n)?(n.insertData(r,e),P.some(Y(n,r+e.length))):em(t).map(n=>{let r=V.fromText(e);return t.isAtEnd()?Ci(n,r):Si(n,r),Y(r.dom,e.length)})},rU=A(nU,`\xA0`),iU=A(nU,` `),aU=(e,t)=>ux(e,t)?rU(t):iU(t),oU=e=>t=>t.fold(t=>Am(e.dom,Y.before(t)),e=>jm(e),e=>Mm(e),t=>km(e.dom,Y.after(t))),sU=(e,t)=>n=>ux(e,n)?rU(t):iU(t),cU=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},lU=(e,t)=>e.isEditable(e.getParent(t,`summary`)),uU=e=>{let t=Y.fromRangeStart(e.selection.getRng()),n=V.fromDom(e.getBody());if(e.selection.isCollapsed()){let r=A(Yx,e),i=Y.fromRangeStart(e.selection.getRng());return EP(r,e.getBody(),i).bind(oU(n)).map(r=>()=>sU(n,t)(r).each(cU(e)))}else return P.none()},dU=e=>Tn(fn.browser.isFirefox()&&e.selection.isEditable()&&lU(e.dom,e.selection.getRng().startContainer),()=>{let t=V.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand(`Delete`),aU(t,Y.fromRangeStart(e.selection.getRng())).each(cU(e))}),fU=(e,t)=>{RL([{keyCode:$.SPACEBAR,action:IL(uU,e)},{keyCode:$.SPACEBAR,action:IL(dU,e)}],t).each(n=>{t.preventDefault(),xV(e,`insertText`,{data:` `}).isDefaultPrevented()||(n(),bV(e,`insertText`,{data:` `}))})},pU=e=>{e.on(`keydown`,t=>{t.isDefaultPrevented()||fU(e,t)})},mU=e=>ap(e)?[{keyCode:$.TAB,action:IL(PR,e,!0)},{keyCode:$.TAB,shiftKey:!0,action:IL(PR,e,!1)}]:[],hU=(e,t)=>{LL([...mU(e)],t).each(e=>{t.preventDefault()})},gU=e=>{e.on(`keydown`,t=>{t.isDefaultPrevented()||hU(e,t)})},_U=e=>{if(e.addShortcut(`Meta+P`,``,`mcePrint`),QB(e),qk(e))return Wc(null);{let t=RF(e);return cL(e),IR(e,t),OV(e,t),KH(e),pU(e),YH(e),gU(e),JH(e,t),tU(e,t),t}};class vU{constructor(e){this.lastPath=[],this.editor=e;let t,n=this;`onselectionchange`in e.getDoc()||e.on(`NodeChange click mouseup keyup focus`,n=>{let r=e.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(n.type===`nodechange`||!B_(i,t))&&e.dispatch(`SelectionChange`),t=i}),e.on(`contextmenu`,()=>{e.dispatch(`SelectionChange`)}),e.on(`SelectionChange`,()=>{let t=e.selection.getStart(!0);t&&Ah(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on(`mouseup`,t=>{!t.isDefaultPrevented()&&Ah(e)&&(e.selection.getNode().nodeName===`IMG`?Yv.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){let t=this.editor.selection,n;if(this.editor.initialized&&t&&!gf(this.editor)&&!this.editor.mode.isReadOnly()){let r=this.editor.getBody();n=t.getStart(!0)||r,(n.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(n,r))&&(n=r);let i=[];this.editor.dom.getParent(n,e=>e===r?!0:(i.push(e),!1)),this.editor.dispatch(`NodeChange`,{...e,element:n,parents:i})}}isSameElementPath(e){let t,n=this.editor,r=De(n.dom.getParents(e,N,n.getBody()));if(r.length===this.lastPath.length){for(t=r.length;t>=0&&r[t]===this.lastPath[t];t--);if(t===-1)return this.lastPath=r,!0}return this.lastPath=r,!1}}let yU=bl(`image`),bU=e=>{let t=e;return P.from(t[yU])},xU=(e,t)=>{let n=e;n[yU]=t},SU=bl(`event`),CU=e=>{let t=e;return P.from(t[SU])},wU=e=>t=>{let n=t;n[SU]=e},TU=(e,t)=>wU(t)(e),EU=wU(0),DU=wU(2),OU=wU(1),kU=(e=>t=>{let n=t;return P.from(n[SU]).exists(t=>t===e)})(0),AU=()=>Object.freeze({length:0,item:e=>null}),jU=bl(`mode`),MU=e=>{let t=e;return P.from(t[jU])},NU=e=>t=>{let n=t;n[jU]=e},PU=(e,t)=>NU(t)(e),FU=NU(0),IU=NU(2),LU=NU(1),RU=e=>t=>{let n=t;return P.from(n[jU]).exists(t=>t===e)},zU=RU(0),BU=RU(1),VU=(e,t)=>({...t,get length(){return t.length},add:(n,r)=>{if(zU(e))if(v(n)){if(!C(r))return t.add(n,r)}else return t.add(n);return null},remove:n=>{zU(e)&&t.remove(n)},clear:()=>{zU(e)&&t.clear()}}),HU=[`none`,`copy`,`link`,`move`],UU=[`none`,`copy`,`copyLink`,`copyMove`,`link`,`linkMove`,`move`,`all`,`uninitialized`],WU=()=>{let e=new window.DataTransfer,t=`move`,n=`all`,r={get dropEffect(){return t},set dropEffect(e){me(HU,e)&&(t=e)},get effectAllowed(){return n},set effectAllowed(e){kU(r)&&me(UU,e)&&(n=e)},get items(){return VU(r,e.items)},get files(){return BU(r)?AU():e.files},get types(){return e.types},setDragImage:(t,n,i)=>{zU(r)&&(xU(r,{image:t,x:n,y:i}),e.setDragImage(t,n,i))},getData:t=>BU(r)?``:e.getData(t),setData:(t,n)=>{zU(r)&&e.setData(t,n)},clearData:t=>{zU(r)&&e.clearData(t)}};return FU(r),r},GU=e=>{let t=WU(),n=MU(e);return IU(e),EU(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,bU(e).each(e=>t.setDragImage(e.image,e.x,e.y)),F(e.types,n=>{n!==`Files`&&t.setData(n,e.getData(n))}),F(e.files,e=>t.items.add(e)),CU(e).each(e=>{TU(t,e)}),n.each(n=>{PU(e,n),PU(t,n)}),t},KU=e=>{let t=e.getData(`text/html`);return t===``?P.none():P.some(t)},qU=(e,t)=>e.setData(`text/html`,t),JU=`x-tinymce/html`,YU=k(JU),XU=`<!-- `+JU+` -->`,ZU=e=>XU+e,QU=e=>e.replace(XU,``),$U=e=>e.indexOf(XU)!==-1,eW=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),tW=(e,t)=>{let n=`<`+e,r=Ge(t,(e,t)=>t+`="`+Zs.encodeAllRaw(e)+`"`);return r.length&&(n+=` `+r.join(` `)),n+`>`},nW=(e,t,n)=>{let r=e.split(/\n\n/),i=tW(t,n),a=`</`+t+`>`,o=ge(r,e=>e.split(/\n/).join(`<br />`));return o.length===1?o[0]:ge(o,e=>i+e+a).join(``)},rW=`%MCEPASTEBIN%`,iW=(e,t)=>{let{dom:n,selection:r}=e,i=e.getBody();t.set(r.getRng());let a=n.add(e.getBody(),`div`,{id:`mcepastebin`,class:`mce-pastebin`,contentEditable:!0,"data-mce-bogus":`all`,style:`position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0`},rW);fn.browser.isFirefox()&&n.setStyle(a,`left`,n.getStyle(i,`direction`,!0)===`rtl`?65535:-65535),n.bind(a,`beforedeactivate focusin focusout`,e=>{e.stopPropagation()}),a.focus(),r.select(a,!0)},aW=(e,t)=>{let n=e.dom;if(oW(e)){let r,i=t.get();for(;r=oW(e);)n.remove(r),n.unbind(r);i&&e.selection.setRng(i)}t.set(null)},oW=e=>e.dom.get(`mcepastebin`),sW=e=>w(e)&&e.id===`mcepastebin`,cW=e=>{let t=e.dom,n=(e,n)=>{e.appendChild(n),t.remove(n,!0)},[r,...i]=I(e.getBody().childNodes,sW);F(i,e=>{n(r,e)});let a=t.select(`div[id=mcepastebin]`,r);for(let e=a.length-1;e>=0;e--){let i=t.create(`div`);r.insertBefore(i,a[e]),n(i,a[e])}return r?r.innerHTML:``},lW=e=>e===rW,uW=e=>{let t=Wc(null);return{create:()=>iW(e,t),remove:()=>aW(e,t),getEl:()=>oW(e),getHtml:()=>cW(e),getLastRng:t.get}},dW=(e,t)=>(B.each(t,t=>{e=_(t,RegExp)?e.replace(t,``):e.replace(t[0],t[1])}),e),fW=e=>{let t=hc(),n=xO({},t),r=``,i=t.getVoidElements(),a=B.makeMap(`script noscript style textarea video audio iframe object`,` `),o=t.getBlockElements(),s=e=>{let n=e.name,c=e;if(n===`br`){r+=`
`;return}if(n!==`wbr`){if(i[n]&&(r+=` `),a[n]){r+=` `;return}if(e.type===3&&(r+=e.value),!(e.name in t.getVoidElements())){let t=e.firstChild;if(t)do s(t);while(t=t.next)}o[n]&&c.next&&(r+=`
`,n===`p`&&(r+=`
`))}};return e=dW(e,[/<!\[[^\]]+\]>/g]),s(n.parse(e)),r},pW=e=>(e=dW(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,n)=>!t&&!n?` `:`\xA0`],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),mW=e=>{let t=0;return()=>e+ t++},hW=e=>{let t=e.toLowerCase(),n={jpg:`jpeg`,jpe:`jpeg`,jfi:`jpeg`,jif:`jpeg`,jfif:`jpeg`,pjpeg:`jpeg`,pjp:`jpeg`,svg:`svg+xml`};return B.hasOwn(n,t)?`image/`+n[t]:`image/`+t},gW=(e,t)=>{let n=xO({sanitize:Qf(e)},e.schema);n.addNodeFilter(`meta`,e=>{B.each(e,e=>{e.remove()})});let r=n.parse(t,{forced_root_block:!1,isRootContent:!0});return ub({validate:!0},e.schema).serialize(r)},_W=(e,t)=>({content:e,cancelled:t}),vW=(e,t,n)=>{let r=a_(e,e.dom.create(`div`,{style:`display:none`},t),n);return _W(r.node.innerHTML,r.isDefaultPrevented())},yW=(e,t,n)=>{let r=i_(e,t,n),i=gW(e,r.content);return e.hasEventListeners(`PastePostProcess`)&&!r.isDefaultPrevented()?vW(e,i,n):_W(i,r.isDefaultPrevented())},bW=(e,t,n)=>yW(e,t,n),xW=(e,t)=>(e.insertContent(t,{merge:Bf(e),paste:!0}),!0),SW=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),CW=(e,t)=>SW(t)&&he(ip(e),e=>Ct(t.toLowerCase(),`.${e.toLowerCase()}`)),wW=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent(`<img src="`+t+`">`)}),!0),TW=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand(`mceInsertLink`,!1,t)}),!0),EW=(e,t,n)=>!e.selection.isCollapsed()&&SW(t)?TW(e,t,n):!1,DW=(e,t,n)=>CW(e,t)?wW(e,t,n):!1,OW=(e,t)=>{B.each([EW,DW,xW],n=>!n(e,t,xW))},kW=(e,t,n)=>{n||!Vf(e)?xW(e,t):OW(e,t)},AW=mW(`mceclip`),jW=e=>{let t=WU();return qU(t,e),IU(t),t},MW=(e,t,n,r,i)=>{let a=bW(e,t,n);if(!a.cancelled){let t=a.content,n=()=>kW(e,t,r);i?xV(e,`insertFromPaste`,{dataTransfer:jW(t)}).isDefaultPrevented()||(n(),bV(e,`insertFromPaste`)):n()}},NW=(e,t,n,r)=>{let i=n||$U(t);MW(e,QU(t),i,!1,r)},PW=(e,t,n)=>{MW(e,nW(Jo(e.dom.encode(t).replace(/\r\n/g,`
`),Uf(e)),Sd(e),Z(e)),!1,!0,n)},FW=e=>{let t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){let r=e.types[n];try{t[r]=e.getData(r)}catch{t[r]=``}}return t},IW=(e,t)=>t in e&&e[t].length>0,LW=e=>IW(e,`text/html`)||IW(e,`text/plain`),RW=(e,t)=>{let n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return w(n)?e.dom.encode(n[1]):void 0},zW=(e,t,n,r)=>{let i=AW(),a=kd(e)&&w(n.name),o=a?RW(e,n.name):i,s=a?n.name:void 0,c=t.create(i,n,r,o,s);return t.add(c),c},BW=(e,t)=>{kE(t.uri).each(({data:n,type:r,base64Encoded:i})=>{let a=i?n:btoa(n),o=t.file,s=e.editorUpload.blobCache;NW(e,`<img src="${(s.getByData(a,r)??zW(e,s,o,a)).blobUri()}">`,!1,!0)})},VW=e=>e.type===`paste`,HW=e=>Promise.all(ge(e,e=>NE(e).then(t=>({file:e,uri:t})))),UW=e=>{let t=ip(e);return e=>St(e.type,`image/`)&&he(t,t=>hW(t)===e.type)},WW=(e,t)=>{let n=t.items?Te(Pe(t.items),e=>e.kind===`file`?[e.getAsFile()]:[]):[],r=t.files?Pe(t.files):[];return I(n.length>0?n:r,UW(e))},GW=(e,t,n)=>{let r=VW(t)?t.clipboardData:t.dataTransfer;if(Pf(e)&&r){let i=WW(e,r);if(i.length>0)return t.preventDefault(),HW(i).then(t=>{n&&e.selection.setRng(n),F(t,t=>{BW(e,t)})}),!0}return!1},KW=e=>fn.os.isAndroid()&&e.clipboardData?.items?.length===0,qW=e=>$.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,JW=(e,t,n,r,i)=>{let a=pW(n),o=IW(t,YU())||$U(n),s=!o&&eW(a),c=SW(a);(lW(a)||!a.length||s&&!c)&&(r=!0),(r||c)&&(a=IW(t,`text/plain`)&&s?t[`text/plain`]:fW(a)),!lW(a)&&(r?PW(e,a,i):NW(e,a,o,i))},YW=(e,t,n)=>{let r,i=()=>t.getLastRng()||e.selection.getRng();e.on(`keydown`,e=>{qW(e)&&!e.isDefaultPrevented()&&(r=e.shiftKey&&e.keyCode===86)}),e.on(`paste`,a=>{if(a.isDefaultPrevented()||KW(a))return;let o=n.get()===`text`||r;r=!1;let s=FW(a.clipboardData);!LW(s)&&GW(e,a,i())||(IW(s,`text/html`)?(a.preventDefault(),JW(e,s,s[`text/html`],o,!0)):IW(s,`text/plain`)&&IW(s,`text/uri-list`)?(a.preventDefault(),JW(e,s,s[`text/plain`],o,!0)):(t.create(),Yv.setEditorTimeout(e,()=>{let n=t.getHtml();t.remove(),JW(e,s,n,o,!1)},0)))})},XW=e=>{let t=e=>St(e,`webkit-fake-url`),n=e=>St(e,`data:`),r=e=>e.data?.paste===!0;e.parser.addNodeFilter(`img`,(i,a,o)=>{if(!Pf(e)&&r(o))for(let r of i){let i=r.attr(`src`);v(i)&&!r.attr(`data-mce-object`)&&i!==fn.transparentSrc&&(t(i)||!Wf(e)&&n(i))&&r.remove()}})},ZW=(e,t,n)=>{YW(e,t,n),XW(e)},QW=(e,t)=>{t.get()===`text`?(t.set(`html`),o_(e,!1)):(t.set(`text`),o_(e,!0)),e.focus()},$W=(e,t)=>{e.addCommand(`mceTogglePlainTextPaste`,()=>{QW(e,t)}),e.addCommand(`mceInsertClipboardContent`,(t,n)=>{n.html&&NW(e,n.html,n.internal,!1),n.text&&PW(e,n.text,!1)})},eG=(e,t,n)=>{if(e)try{return e.clearData(),e.setData(`text/html`,t),e.setData(`text/plain`,n),e.setData(YU(),t),!0}catch{return!1}else return!1},tG=(e,t,n,r)=>{eG(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},nG=e=>(t,n)=>{let{dom:r,selection:i}=e,a=r.create(`div`,{contenteditable:`false`,"data-mce-bogus":`all`}),o=r.create(`div`,{contenteditable:`true`},t);r.setStyles(a,{position:`fixed`,top:`0`,left:`-3000px`,width:`1000px`,overflow:`hidden`}),a.appendChild(o),r.add(e.getBody(),a);let s=i.getRng();o.focus();let c=r.createRng();c.selectNodeContents(o),i.setRng(c),Yv.setEditorTimeout(e,()=>{i.setRng(s),r.remove(a),n()},0)},rG=e=>({html:ZU(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:`text`})}),iG=e=>!!e.dom.getParent(e.selection.getStart(),`td[data-mce-selected],th[data-mce-selected]`,e.getBody()),aG=e=>!e.selection.isCollapsed()||iG(e),oG=e=>t=>{!t.isDefaultPrevented()&&aG(e)&&tG(t,rG(e),nG(e),()=>{if(fn.browser.isChromium()||fn.browser.isFirefox()){let t=e.selection.getRng();Yv.setEditorTimeout(e,()=>{e.selection.setRng(t),e.execCommand(`Delete`)},0)}else e.execCommand(`Delete`)})},sG=e=>t=>{!t.isDefaultPrevented()&&aG(e)&&tG(t,rG(e),nG(e),D)},cG=e=>{e.on(`cut`,oG(e)),e.on(`copy`,sG(e))},lG=(e,t)=>$_.getCaretRangeFromPoint(t.clientX??0,t.clientY??0,e.getDoc()),uG=e=>{let t=e[`text/plain`];return t?t.indexOf(`file://`)===0:!1},dG=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},fG=e=>he(e.files,e=>/^image\//.test(e.type)),pG=(e,t,n,r)=>{let i=e.getParent(n,e=>ys(t,e));if(ee(e.getParent(n,`summary`)))if(i&&Je(r,`text/html`)){let e=new DOMParser().parseFromString(r[`text/html`],`text/html`).body;return!ee(e.querySelector(i.nodeName.toLowerCase()))}else return!1;else return!0},mG=e=>{e.on(`input`,t=>{t.inputType===`deleteByDrag`&&F(I(e.dom.select(`details`),e=>ee(e.querySelector(`summary`))),t=>{Sa(t.firstChild)&&t.firstChild.remove();let n=e.dom.create(`summary`);n.appendChild(oo().dom),t.prepend(n)})})},hG=(e,t)=>{Nf(e)&&e.on(`dragend dragover draggesture dragdrop drop drag`,e=>{e.preventDefault(),e.stopPropagation()}),Pf(e)||e.on(`drop`,e=>{let t=e.dataTransfer;t&&fG(t)&&e.preventDefault()}),e.on(`drop`,n=>{if(n.isDefaultPrevented())return;let r=lG(e,n);if(te(r))return;let i=FW(n.dataTransfer),a=IW(i,YU());if((!LW(i)||uG(i))&&GW(e,n,r))return;let o=i[YU()],s=o||i[`text/html`]||i[`text/plain`],c=pG(e.dom,e.schema,r.startContainer,i),l=t.get();l&&!c||s&&(n.preventDefault(),Yv.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(o||l&&c)&&e.execCommand(`Delete`),dG(e,r);let t=pW(s);i[`text/html`]?NW(e,t,a,!0):PW(e,t,!0)})}))}),e.on(`dragstart`,e=>{t.set(!0)}),e.on(`dragover dragend`,n=>{Pf(e)&&!t.get()&&(n.preventDefault(),dG(e,lG(e,n))),n.type===`dragend`&&t.set(!1)}),mG(e)},gG=e=>{let t=t=>n=>{t(e,n)},n=Ff(e);T(n)&&e.on(`PastePreProcess`,t(n));let r=If(e);T(r)&&e.on(`PastePostProcess`,t(r))},_G=(e,t)=>{e.on(`PastePreProcess`,n=>{n.content=t(e,n.content,n.internal)})},vG=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,yG=e=>B.trim(e).replace(vG,hh).toLowerCase(),bG=(e,t,n)=>{let r=Rf(e);if(n||r===`all`||!zf(e))return t;let i=r?r.split(/[, ]/):[];if(i&&r!==`none`){let n=e.dom,r=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,t,a,o)=>{let s=n.parseStyle(n.decode(a)),c={};for(let e=0;e<i.length;e++){let t=s[i[e]],a=t,o=n.getStyle(r,i[e],!0);/color/.test(i[e])&&(a=yG(a),o=yG(o)),o!==a&&(c[i[e]]=t)}let l=n.serializeStyle(c,`span`);return l?t+` style="`+l+`"`+o:t+o})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,`$1$3`);return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,n,r)=>t+` style="`+n+`"`+r),t},xG=e=>{(fn.browser.isChromium()||fn.browser.isSafari())&&_G(e,bG)},SG=e=>{let t=Wc(!1),n=Wc(Hf(e)?`text`:`html`),r=uW(e);xG(e),$W(e,n),gG(e),e.on(`PreInit`,()=>{cG(e),hG(e,t),ZW(e,r,n)})},CG=e=>{e.on(`click`,t=>{e.dom.getParent(t.target,`details`)&&t.preventDefault()})},wG=e=>{e.parser.addNodeFilter(`details`,t=>{let n=op(e);F(t,e=>{n===`expanded`?e.attr(`open`,`open`):n===`collapsed`&&e.attr(`open`,null)})}),e.serializer.addNodeFilter(`details`,t=>{let n=sp(e);F(t,e=>{n===`expanded`?e.attr(`open`,`open`):n===`collapsed`&&e.attr(`open`,null)})})},TG=e=>{CG(e),wG(e)},EG=Sa,DG=W,OG=e=>Ta(e.dom),kG=e=>wa(e.dom),AG=e=>t=>xr(V.fromDom(e),t),jG=(e,t)=>ti(V.fromDom(e),e=>kG(e)||qa(e),AG(t)).getOr(V.fromDom(t)).dom,MG=(e,t)=>ti(V.fromDom(e),OG,AG(t)),NG=(e,t,n)=>{let r=new ia(e,t),i=n?r.next.bind(r):r.prev.bind(r),a=e;for(let t=n?e:i();t&&!EG(t);t=i())Fo(t)&&(a=t);return a},PG=(e,t)=>{let n=Y.fromRangeStart(e).getNode(),r=jG(n,t),i=NG(n,r,!1),a=NG(n,r,!0),o=document.createRange();return MG(i,r).fold(()=>{DG(i)?o.setStart(i,0):o.setStartBefore(i)},e=>o.setStartBefore(e.dom)),MG(a,r).fold(()=>{DG(a)?o.setEnd(a,a.data.length):o.setEndAfter(a)},e=>o.setEndAfter(e.dom)),o},FG=e=>{let t=PG(e.selection.getRng(),e.getBody());e.selection.setRng(MC(t))},IG=e=>{e.on(`mousedown`,t=>{t.detail>=3&&(t.preventDefault(),FG(e))})};var LG;(function(e){e.Before=`before`,e.After=`after`})(LG||={});let RG=(e,t)=>Math.abs(e.left-t),zG=(e,t)=>Math.abs(e.right-t),BG=(e,t)=>e>=t.top&&e<=t.bottom,VG=(e,t)=>e.top<t.bottom&&e.bottom>t.top,HG=(e,t)=>{let n=Bl(e,t)/Math.min(e.height,t.height);return VG(e,t)&&n>.5},UG=(e,t)=>Rl(I(e,e=>BG(t,e))).fold(()=>[[],e],t=>{let{pass:n,fail:r}=ve(e,e=>HG(e,t));return[n,r]}),WG=(e,t)=>({node:e.node,position:RG(e,t)<zG(e,t)?LG.Before:LG.After}),GG=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),KG=(e,t,n)=>{let r=e=>Fo(e.node)?P.some(e):U(e.node)?KG(Pe(e.node.childNodes),t,n):P.none(),i=(e,i)=>{if(e.length>=2){let a=r(e[0]).getOr(e[0]),o=r(e[1]).getOr(e[1]);if(Math.abs(i(a,t,n)-i(o,t,n))<2){if(W(a.node))return P.some(a);if(W(o.node))return P.some(o)}}return P.none()},a=(e,a)=>{let o=Ae(e,(e,r)=>a(e,t,n)-a(r,t,n));return i(o,a).orThunk(()=>Fe(o,r))},[o,s]=UG(uF(e),n),{pass:c,fail:l}=ve(s,e=>e.top<n);return a(o,GG).orThunk(()=>a(l,zl)).orThunk(()=>a(c,zl))},qG=(e,t,n,r)=>{let i=(t,a)=>{let o=I(t.dom.childNodes,j(e=>U(e)&&e.classList.contains(`mce-drag-container`)));return a.fold(()=>KG(o,n,r),e=>KG(I(o,t=>t!==e.dom),n,r)).orThunk(()=>(xr(t,e)?P.none():Or(t)).bind(e=>i(e,P.some(t))))};return i(t,P.none())},JG=(e,t,n)=>{let r=V.fromDom(e),i=wr(r);return qG(r,V.fromPoint(i,t,n).filter(e=>Sr(r,e)).getOr(r),t,n)},YG=(e,t,n)=>JG(e,t,n).filter(e=>Op(e.node)).map(e=>WG(e,t)),XG=e=>{let t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.documentElement,i=n.defaultView;return{top:t.top+(i?.scrollY??0)-r.clientTop,left:t.left+(i?.scrollX??0)-r.clientLeft}},ZG=e=>e.inline?XG(e.getBody()):{left:0,top:0},QG=e=>{let t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},$G=e=>{let t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i},eK=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){let n=XG(e.getContentAreaContainer()),r=$G(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}},tK=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),nK=(e,t)=>tK(ZG(e),QG(e),eK(e,t)),rK=e=>({target:e,srcElement:e}),iK=(e,t,n,r)=>({...t,dataTransfer:r,type:e,...rK(n)}),aK=(e,t,n)=>{let r=oe(`Function not supported on simulated event.`);return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:D,stopImmediatePropagation:D,stopPropagation:D,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:n,...rK(t)}},oK=(e,t)=>{let n=GU(e);return t===`dragstart`?(EU(n),FU(n)):t===`drop`?(DU(n),IU(n)):(OU(n),LU(n)),n},sK=(e,t,n,r)=>{let i=oK(n,e);return C(r)?aK(e,t,i):iK(e,r,t,i)},cK=Ta,lK=ql(cK,wa),uK=(e,t,n)=>cK(n)&&n!==t&&e.isEditable(n.parentElement),dK=(e,t,n)=>te(t)||t===n||e.dom.isChildOf(t,n)?!1:e.dom.isEditable(t),fK=(e,t,n,r)=>{let i=e.dom,a=t.cloneNode(!0);i.setStyles(a,{width:n,height:r}),i.setAttrib(a,`data-mce-selected`,null);let o=i.create(`div`,{class:`mce-drag-container`,"data-mce-bogus":`all`,unselectable:`on`,contenteditable:`false`});return i.setStyles(o,{position:`absolute`,opacity:.5,overflow:`hidden`,border:0,padding:0,margin:0,width:n,height:r}),i.setStyles(a,{margin:0,boxSizing:`border-box`}),o.appendChild(a),o},pK=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},mK=(e,t)=>n=>()=>{let r=e===`left`?n.scrollX:n.scrollY;n.scroll({[e]:r+t,behavior:`smooth`})},hK=mK(`left`,-32),gK=mK(`left`,32),_K=mK(`top`,-32),vK=mK(`top`,32),yK=(e,t,n,r,i,a,o,s,c,l,u,d)=>{let f=0,p=0;e.style.left=t.pageX+`px`,e.style.top=t.pageY+`px`,t.pageX+n>i&&(f=t.pageX+n-i),t.pageY+r>a&&(p=t.pageY+r-a),e.style.width=n-f+`px`,e.style.height=r-p+`px`;let m=c.clientHeight,h=c.clientWidth,g=o+c.getBoundingClientRect().top,_=s+c.getBoundingClientRect().left;u.on(e=>{e.intervalId.clear(),e.dragging&&d&&(o+8>=m?e.intervalId.set(vK(l)):o-8<=0?e.intervalId.set(_K(l)):s+8>=h?e.intervalId.set(gK(l)):s-8<=0?e.intervalId.set(hK(l)):g+16>=window.innerHeight?e.intervalId.set(vK(window)):g-16<=0?e.intervalId.set(_K(window)):_+16>=window.innerWidth?e.intervalId.set(gK(window)):_-16<=0&&e.intervalId.set(hK(window)))})},bK=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},xK=(e,t)=>{let n=e.getParent(t.parentNode,e.isBlock);bK(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&so(V.fromDom(n))},SK=e=>e.button===0,CK=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),wK=(e,t)=>n=>{if(SK(n)){let r=Se(t.dom.getParents(n.target),lK).getOr(null);if(w(r)&&uK(t.dom,t.getBody(),r)){let i=t.dom.getPos(r),a=t.getBody(),o=t.getDoc().documentElement;e.set({element:r,dataTransfer:WU(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?a.scrollWidth:o.offsetWidth)-2,maxY:(t.inline?a.scrollHeight:o.offsetHeight)-2,relX:n.pageX-i.x,relY:n.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:fK(t,r,r.offsetWidth,r.offsetHeight),intervalId:el(100)})}}},TK=(e,t,n)=>{e._selectionOverrides.hideFakeCaret(),YG(e.getBody(),t,n).fold(()=>e.selection.placeCaretAt(t,n),r=>{let i=e._selectionOverrides.showCaret(1,r.node,r.position===LG.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(t,n)})},EK=(e,t,n,r,i)=>{t===`dragstart`&&qU(r,e.dom.getOuterHTML(n));let a=sK(t,n,r,i);return e.dispatch(t,a)},DK=(e,t)=>{let n=nl((e,n)=>TK(t,e,n),0);t.on(`remove`,n.cancel);let r=e;return i=>e.on(e=>{let a=Math.max(Math.abs(i.screenX-e.screenX),Math.abs(i.screenY-e.screenY));if(!e.dragging&&a>10){let n=EK(t,`dragstart`,e.element,e.dataTransfer,i);if(w(n.dataTransfer)&&(e.dataTransfer=n.dataTransfer),n.isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){let a=i.currentTarget===t.getDoc().documentElement,o=CK(e,nK(t,i));pK(e.ghost,t.getBody()),yK(e.ghost,o,e.width,e.height,e.maxX,e.maxY,i.clientY,i.clientX,t.getContentAreaContainer(),t.getWin(),r,a),n.throttle(i.clientX,i.clientY)}})},OK=e=>{let t=e.getSel();if(w(t)){let e=t.getRangeAt(0).startContainer;return W(e)?e.parentNode:e}else return null},kK=(e,t)=>n=>{e.on(e=>{e.intervalId.clear(),e.dragging&&(dK(t,OK(t.selection),e.element)&&(EK(t,`drop`,t.getDoc().elementFromPoint(n.clientX,n.clientY)??t.getBody(),e.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{xK(t.dom,e.element),KU(e.dataTransfer).each(e=>t.insertContent(e)),t._selectionOverrides.hideFakeCaret()})),EK(t,`dragend`,t.getBody(),e.dataTransfer,n))}),MK(e)},AK=(e,t,n)=>{e.on(e=>{e.intervalId.clear(),e.dragging&&n.fold(()=>EK(t,`dragend`,e.element,e.dataTransfer),n=>EK(t,`dragend`,e.element,e.dataTransfer,n))}),MK(e)},jK=(e,t)=>n=>AK(e,t,P.some(n)),MK=e=>{e.on(e=>{e.intervalId.clear(),bK(e.ghost)}),e.clear()},NK=e=>{let t=tl(),n=Vc.DOM,r=document,i=wK(t,e),a=DK(t,e),o=kK(t,e),s=jK(t,e);e.on(`mousedown`,i),e.on(`mousemove`,a),e.on(`mouseup`,o),n.bind(r,`mousemove`,a),n.bind(r,`mouseup`,s),e.on(`remove`,()=>{n.unbind(r,`mousemove`,a),n.unbind(r,`mouseup`,s)}),e.on(`keydown`,n=>{n.keyCode===$.ESC&&AK(t,e,P.none())})},PK=e=>{let t=t=>{if(!t.isDefaultPrevented()){let n=t.dataTransfer;n&&(me(n.types,`Files`)||n.files.length>0)&&(t.preventDefault(),t.type===`drop`&&Kj(e,`Dropped file type is not supported`))}},n=n=>{ay(e,n.target)&&t(n)},r=()=>{let r=Vc.DOM,i=e.dom,a=document,o=e.inline?e.getBody():e.getDoc(),s=[`drop`,`dragover`];F(s,e=>{r.bind(a,e,n),i.bind(o,e,t)}),e.on(`remove`,()=>{F(s,e=>{r.unbind(a,e,n),i.unbind(o,e,t)})})};e.on(`init`,()=>{Yv.setEditorTimeout(e,r,0)})},FK=e=>{NK(e),Sf(e)&&PK(e)},IK=e=>{let t=nl(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){let t=e.selection.getRng();if(t.collapsed){let n=ON(e,t,!1);e.selection.setRng(n)}}},0);e.on(`focus`,()=>{t.throttle()}),e.on(`blur`,()=>{t.cancel()})},LK=e=>{e.on(`init`,()=>{e.on(`focusin`,t=>{let n=t.target;if(Oa(n)){let t=uC(e.getBody(),n),r=Ta(t)?t:n;e.selection.getNode()!==r&&EN(e,r).each(t=>e.selection.setRng(t))}})})},RK=Ta,zK=(e,t)=>uC(e.getBody(),t),BK=e=>{let t=e.selection,n=e.dom,r=e.getBody(),i=Tp(e,r,n.isBlock,()=>yy(e)),a=`sel-`+n.uniqueId(),o=`data-mce-selected`,s,c=e=>w(e)&&n.hasClass(e,`mce-offscreen-selection`),l=e=>e!==r&&(RK(e)||Oa(e))&&n.isChildOf(e,r)&&n.isEditable(e.parentNode),u=e=>{e&&t.setRng(e)},d=(n,r,a,o=!0)=>e.dispatch(`ShowCaret`,{target:r,direction:n,before:a}).isDefaultPrevented()?null:(o&&t.scrollIntoView(r,n===-1),i.show(a,r)),f=e=>{e.hasAttribute(`data-mce-caret`)&&(To(e),t.scrollIntoView(e))},p=()=>{e.on(`click`,t=>{n.isEditable(t.target)||(t.preventDefault(),e.focus())}),e.on(`blur NewBlock`,b),e.on(`ResizeWindow FullscreenStateChanged`,i.reposition),e.on(`tap`,t=>{let n=t.target,r=zK(e,n);RK(r)?(t.preventDefault(),EN(e,r).each(y)):l(n)&&EN(e,n).each(y)},!0),e.on(`mousedown`,t=>{let i=t.target;if(i!==r&&i.nodeName!==`HTML`&&!n.isChildOf(i,r)||!Ij(e,t.clientX,t.clientY))return;b(),ee();let a=zK(e,i);RK(a)?(t.preventDefault(),EN(e,a).each(y)):YG(r,t.clientX,t.clientY).each(n=>{t.preventDefault(),u(d(1,n.node,n.position===LG.Before,!1)),U(a)?a.focus():e.getBody().focus()})}),e.on(`keypress`,e=>{$.modifierPressed(e)||RK(t.getNode())&&e.preventDefault()}),e.on(`GetSelectionRange`,e=>{let t=e.range;if(s){if(!s.parentNode){s=null;return}t=t.cloneRange(),t.selectNode(s),e.range=t}}),e.on(`SetSelectionRange`,e=>{e.range=g(e.range);let t=y(e.range,e.forward);t&&(e.range=t)});let a=e=>U(e)&&e.id===`mcepastebin`;e.on(`AfterSetSelectionRange`,e=>{let t=e.range,n=t.startContainer.parentElement;!h(t)&&!a(n)&&ee(),c(n)||b()}),FK(e),IK(e),LK(e)},m=e=>go(e)||So(e)||Co(e),h=e=>m(e.startContainer)||m(e.endContainer),g=t=>{let r=e.schema.getVoidElements(),i=n.createRng(),a=t.startContainer,o=t.startOffset,s=t.endContainer,c=t.endOffset;return Je(r,a.nodeName.toLowerCase())?o===0?i.setStartBefore(a):i.setStartAfter(a):i.setStart(a,o),Je(r,s.nodeName.toLowerCase())?c===0?i.setEndBefore(s):i.setEndAfter(s):i.setEnd(s,c),i},_=(r,i)=>{let o=V.fromDom(e.getBody()),s=e.getDoc(),c=oi(o,`#`+a).getOrThunk(()=>{let e=V.fromHtml(`<div data-mce-bogus="all" class="mce-offscreen-selection"></div>`,s);return Gn(e,`id`,a),Ti(o,e),e}),l=n.createRng();ki(c),Oi(c,[V.fromText(`\xA0`,s),V.fromDom(i),V.fromText(`\xA0`,s)]),l.setStart(c.dom.firstChild,1),l.setEnd(c.dom.lastChild,0),hi(c,{top:n.getPos(r,e.getBody()).y+`px`}),kv(c);let u=t.getSel();return u&&(u.removeAllRanges(),u.addRange(l)),l},v=t=>{let r=t.cloneNode(!0),i=e.dispatch(`ObjectSelected`,{target:t,targetClone:r});if(i.isDefaultPrevented())return null;let a=_(t,i.targetClone),c=V.fromDom(t);return F(H(V.fromDom(e.getBody()),`*[${o}]`),e=>{xr(c,e)||Xn(e,o)}),n.getAttrib(t,o)||t.setAttribute(o,`1`),s=t,ee(),a},y=(e,t)=>{if(!e)return null;if(e.collapsed){if(!h(e)){let i=t?1:-1,a=$p(i,r,e),o=a.getNode(!t);if(w(o)){if(Op(o))return d(i,o,t?!a.isAtEnd():!1,!1);if(ho(o)&&Ta(o.nextSibling)){let e=n.createRng();return e.setStart(o,0),e.setEnd(o,0),e}}let s=a.getNode(t);if(w(s)){if(Op(s))return d(i,s,t?!1:!a.isAtEnd(),!1);if(ho(s)&&Ta(s.previousSibling)){let e=n.createRng();return e.setStart(s,1),e.setEnd(s,1),e}}}return null}let i=e.startContainer,a=e.startOffset,o=e.endOffset;if(W(i)&&a===0&&RK(i.parentNode)&&(i=i.parentNode,a=n.nodeIndex(i),i=i.parentNode),!U(i))return null;if(o===a+1&&i===e.endContainer){let e=i.childNodes[a];if(l(e))return v(e)}return null},b=()=>{s&&s.removeAttribute(o),oi(V.fromDom(e.getBody()),`#`+a).each(Ai),s=null},x=()=>{i.destroy(),s=null},ee=()=>{i.hide()};return qk(e)||p(),{showCaret:d,showBlockCaretContainer:f,hideFakeCaret:ee,destroy:x}},VK=(e,t)=>{let n=t;for(let t=e.previousSibling;W(t);t=t.previousSibling)n+=t.data.length;return n},HK=(e,t,n,r,i)=>{if(W(n)&&(r<0||r>n.data.length))return[];let a=i&&W(n)?[VK(n,r)]:[r],o=n;for(;o!==t&&o.parentNode;)a.push(e.nodeIndex(o,i)),o=o.parentNode;return o===t?a.reverse():[]},UK=(e,t,n,r,i,a,o=!1)=>({start:HK(e,t,n,r,o),end:HK(e,t,i,a,o)}),WK=(e,t)=>{let n=t.slice(),r=n.pop();return E(r)?be(n,(e,t)=>e.bind(e=>P.from(e.childNodes[t])),P.some(e)).bind(e=>W(e)&&(r<0||r>e.data.length)?P.none():P.some({node:e,offset:r})):P.none()},GK=(e,t)=>WK(e,t.start).bind(({node:n,offset:r})=>WK(e,t.end).map(({node:e,offset:t})=>{let i=document.createRange();return i.setStart(n,r),i.setEnd(e,t),i})),KK=(e,t,n,r=!1)=>UK(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,r),qK=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){let r=t.parentNode;e.remove(t,W(t.firstChild)&&Uo(t.firstChild.data)),qK(e,r,n)}},JK=(e,t,n,r=!0)=>{let i=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),r&&!n(t.startContainer)&&(W(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),W(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),qK(e,i,n),i!==a&&qK(e,a,n))},YK=(e,t)=>P.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),XK=(e,t,n)=>{let r=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:nd(r).concat(e.blockPatterns),inlinePatterns:rd(r).concat(e.inlinePatterns)}},ZK=(e,t,n,r)=>{let i=e.createRng();return i.setStart(t,0),i.setEnd(n,r),i.toString()},QK=e=>/^\s[^\s]/.test(e),$K=(e,t,n)=>{HR(t,0,t).each(r=>{let i=r.container;WR(i,n.start.length,t).each(n=>{let r=e.createRng();r.setStart(i,0),r.setEnd(n.container,n.offset),JK(e,r,e=>e===t)});let a=V.fromDom(i),o=Pa(a);QK(o)&&Ia(a,o.slice(1))})},eq=(e,t)=>{let n=e.dom,r=t.pattern,i=GK(n.getRoot(),t.range).getOrDie(`Unable to resolve path range`),a=(e,t)=>{let n=t.get(e);return x(n)&&Me(n).exists(e=>Je(e,`block`))};return YK(e,i).each(t=>{r.type===`block-format`?a(r.format,e.formatter)&&e.undoManager.transact(()=>{$K(e.dom,t,r),e.formatter.apply(r.format)}):r.type===`block-command`&&e.undoManager.transact(()=>{$K(e.dom,t,r),e.execCommand(r.cmd,!1,r.value)})}),!0},tq=e=>Ae(e,(e,t)=>t.start.length-e.start.length),nq=(e,t)=>{let n=tq(e),r=t.replace(`\xA0`,` `);return Se(n,e=>t.indexOf(e.start)===0||r.indexOf(e.start)===0)},rq=(e,t,n,r)=>{let i=e.dom,a=Sd(e);if(!i.is(t,a))return[];let o=t.textContent??``;return nq(n.blockPatterns,o).map(e=>B.trim(o).length===e.start.length?[]:[{pattern:e,range:UK(i,i.getRoot(),t,0,t,0,r)}]).getOr([])},iq=(e,t)=>{if(t.length===0)return;let n=e.selection.getBookmark();F(t,t=>eq(e,t)),e.selection.moveToBookmark(n)},aq=(e,t)=>e.create(`span`,{"data-mce-type":`bookmark`,id:t}),oq=(e,t)=>{let n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},sq=(e,t,n)=>{let r=GK(e.getRoot(),n).getOrDie(`Unable to resolve path range`),i=r.startContainer,a=r.endContainer,o=r.endOffset===0?a:a.splitText(r.endOffset),s=r.startOffset===0?i:i.splitText(r.startOffset),c=s.parentNode;return{prefix:t,end:o.parentNode.insertBefore(aq(e,t+`-end`),o),start:c.insertBefore(aq(e,t+`-start`),s)}},cq=(e,t,n)=>{qK(e,e.get(t.prefix+`-end`),n),qK(e,e.get(t.prefix+`-start`),n)},lq=e=>e.start.length===0,uq=e=>(t,n)=>{let r=t.data.substring(0,n),i=r.lastIndexOf(e.charAt(e.length-1)),a=r.lastIndexOf(e);return a===-1?i===-1?-1:i+1:a+e.length},dq=(e,t,n,r)=>{let i=t.start;return GR(e,r.container,r.offset,uq(i),n).bind(r=>{let a=n.textContent?.indexOf(i)??-1;if(a!==-1&&r.offset>=a+i.length){let t=e.createRng();return t.setStart(r.container,r.offset-i.length),t.setEnd(r.container,r.offset),P.some(t)}else{let a=r.offset-i.length;return UR(r.container,a,n).map(t=>{let n=e.createRng();return n.setStart(t.container,t.offset),n.setEnd(r.container,r.offset),n}).filter(e=>e.toString()===i).orThunk(()=>dq(e,t,n,LR(r.container,0)))}})},fq=(e,t,n,r,i,a=!1)=>{if(t.start.length===0&&!a){let t=e.createRng();return t.setStart(n,r),t.setEnd(n,r),P.some(t)}return VR(n,r,i).bind(n=>dq(e,t,i,n).bind(e=>a&&(e.endContainer===n.container&&e.endOffset===n.offset||n.offset===0&&e.endContainer.textContent?.length===e.endOffset)?P.none():P.some(e)))},pq=(e,t,n,r)=>{let i=e.dom,a=i.getRoot(),o=n.pattern,s=n.position.container,c=n.position.offset;return UR(s,c-n.pattern.end.length,t).bind(l=>{let u=UK(i,a,l.container,l.offset,s,c,r);if(lq(o))return P.some({matches:[{pattern:o,startRng:u,endRng:u}],position:l});{let s=mq(e,n.remainingPatterns,l.container,l.offset,t,r),c=s.getOr({matches:[],position:l}),d=c.position;return fq(i,o,d.container,d.offset,t,s.isNone()).map(e=>{let t=KK(i,a,e,r);return{matches:c.matches.concat([{pattern:o,startRng:t,endRng:u}]),position:LR(e.startContainer,e.startOffset)}})}})},mq=(e,t,n,r,i,a)=>{let o=e.dom;return VR(n,r,o.getRoot()).bind(s=>{let c=ZK(o,i,n,r);for(let o=0;o<t.length;o++){let l=t[o];if(!Ct(c,l.end))continue;let u=t.slice();u.splice(o,1);let d=pq(e,i,{pattern:l,remainingPatterns:u,position:s},a);if(d.isNone()&&r>0)return mq(e,t,n,r-1,i,a);if(d.isSome())return d}return P.none()})},hq=(e,t,n)=>{e.selection.setRng(n),t.type===`inline-format`?F(t.format,t=>{e.formatter.apply(t)}):e.execCommand(t.cmd,!1,t.value)},gq=(e,t,n,r)=>{let i=oq(e.dom,n);JK(e.dom,i,r),hq(e,t,i)},_q=(e,t,n,r,i)=>{let a=e.dom,o=oq(a,r);JK(a,oq(a,n),i),JK(a,o,i),hq(e,t,oq(a,{prefix:n.prefix,start:n.end,end:r.start}))},vq=(e,t)=>{let n=bl(`mce_textpattern`),r=ye(t,(t,r)=>{let i=sq(e,n+`_end${t.length}`,r.endRng);return t.concat([{...r,endMarker:i}])},[]);return ye(r,(t,i)=>{let a=r.length-t.length-1,o=lq(i.pattern)?i.endMarker:sq(e,n+`_start${a}`,i.startRng);return t.concat([{...i,startMarker:o}])},[])},yq=e=>Ae(e,(e,t)=>t.end.length-e.end.length),bq=(e,t)=>{let n=Ee(e,e=>he(t,t=>e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t},xq=(e,t,n,r,i,a)=>bq(mq(e,i.inlinePatterns,n,r,t,a).fold(()=>[],e=>e.matches),mq(e,yq(i.inlinePatterns),n,r,t,a).fold(()=>[],e=>e.matches)),Sq=(e,t)=>{if(t.length===0)return;let n=e.dom,r=e.selection.getBookmark();F(vq(n,t),t=>{let r=n.getParent(t.startMarker.start,n.isBlock),i=e=>e===r;lq(t.pattern)?gq(e,t.pattern,t.endMarker,i):_q(e,t.pattern,t.startMarker,t.endMarker,i),cq(n,t.endMarker,i),cq(n,t.startMarker,i)}),e.selection.moveToBookmark(r)},Cq=(e,t)=>{let n=e.selection.getRng();return YK(e,n).map(r=>{let i=Math.max(0,n.startOffset),a=XK(t,r,r.textContent??``),o=xq(e,r,n.startContainer,i,a,!0),s=rq(e,r,a,!0);return s.length>0||o.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand(`mceInsertNewLine`)},()=>{e.insertContent(`﻿`),Sq(e,o),iq(e,s);let t=e.selection.getRng(),n=VR(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand(`mceInsertNewLine`),n.each(t=>{let n=t.container;n.data.charAt(t.offset-1)===`﻿`&&(n.deleteData(t.offset-1,1),qK(e.dom,n.parentNode,t=>t===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},wq=(e,t)=>{let n=e.selection.getRng();YK(e,n).map(r=>{let i=Math.max(0,n.startOffset-1),a=XK(t,r,ZK(e.dom,r,n.startContainer,i)),o=xq(e,r,n.startContainer,i,a,!1);o.length>0&&e.undoManager.transact(()=>{Sq(e,o)})})},Tq=(e,t,n)=>{for(let r=0;r<e.length;r++)if(n(e[r],t))return!0;return!1},Eq=(e,t)=>Tq(e,t,(e,t)=>e===t.keyCode&&!$.modifierPressed(t)),Dq=(e,t)=>Tq(e,t,(e,t)=>e.charCodeAt(0)===t.charCode),Oq=e=>{let t=[`,`,`.`,`;`,`:`,`!`,`?`],n=[32],r=()=>id(Gf(e),Kf(e)),i=()=>ep(e);e.on(`keydown`,t=>{if(t.keyCode===13&&!$.modifierPressed(t)&&e.selection.isCollapsed()){let n=r();(n.inlinePatterns.length>0||n.blockPatterns.length>0||i())&&Cq(e,n)&&t.preventDefault()}},!0);let a=()=>{if(e.selection.isCollapsed()){let t=r();(t.inlinePatterns.length>0||i())&&wq(e,t)}};e.on(`keyup`,e=>{Eq(n,e)&&a()}),e.on(`keypress`,n=>{Dq(t,n)&&Yv.setEditorTimeout(e,a)})},kq=e=>{Oq(e)},Aq=e=>{let t=B.each,n=$.BACKSPACE,r=$.DELETE,i=e.dom,a=e.selection,o=e.parser,s=fn.browser,c=s.isFirefox(),l=s.isChromium()||s.isSafari(),u=fn.deviceType.isiPhone()||fn.deviceType.isiPad(),d=fn.os.isMacOS()||fn.os.isiOS(),f=(t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},p=e=>e.isDefaultPrevented(),m=()=>{let t=e=>{let t=i.create(`body`),n=e.cloneContents();return t.appendChild(n),a.serializer.serialize(t,{format:`html`})},o=n=>{let r=t(n),a=i.createRng();return a.selectNode(e.getBody()),r===t(a)},s=e=>he(H(V.fromDom(e),`[contenteditable="true"]`),e=>Or(e).exists(e=>!li(e)));e.on(`keydown`,t=>{let a=t.keyCode;if(!p(t)&&(a===r||a===n)&&e.selection.isEditable()){let n=e.selection.isCollapsed(),r=e.getBody();if(n&&(!i.isEmpty(r)||s(r))||!n&&!o(e.selection.getRng()))return;t.preventDefault(),e.setContent(``),r.firstChild&&i.isBlock(r.firstChild)?e.selection.setCursorLocation(r.firstChild,0):e.selection.setCursorLocation(r,0),e.nodeChanged()}})},h=()=>{e.shortcuts.add(`meta+a`,null,`SelectAll`)},g=()=>{e.inline||i.bind(e.getDoc(),`mousedown mouseup`,t=>{let n;if(t.target===e.getDoc().documentElement)if(n=a.getRng(),e.getBody().focus(),t.type===`mousedown`){if(go(n.startContainer))return;a.placeCaretAt(t.clientX,t.clientY)}else a.setRng(n)})},_=()=>{e.on(`keydown`,t=>{if(!p(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName(`hr`).length)return;if(a.isCollapsed()&&a.getRng().startOffset===0){let e=a.getNode(),n=e.previousSibling;if(e.nodeName===`HR`){i.remove(e),t.preventDefault();return}n&&n.nodeName&&n.nodeName.toLowerCase()===`hr`&&(i.remove(n),t.preventDefault())}}})},y=()=>{Range.prototype.getClientRects||e.on(`mousedown`,t=>{if(!p(t)&&t.target.nodeName===`HTML`){let t=e.getBody();t.blur(),Yv.setEditorTimeout(e,()=>{t.focus()})}})},b=()=>{let t=Tf(e);e.on(`click`,n=>{let r=n.target;/^(IMG|HR)$/.test(r.nodeName)&&i.isEditable(r.parentNode)&&(n.preventDefault(),e.selection.select(r),e.nodeChanged()),r.nodeName===`A`&&i.hasClass(r,t)&&r.childNodes.length===0&&i.isEditable(r.parentNode)&&(n.preventDefault(),a.select(r))})},x=()=>{let n=()=>{let n=i.getAttribs(a.getStart().cloneNode(!1));return()=>{let r=a.getStart();r!==e.getBody()&&(i.setAttrib(r,`style`,null),t(n,e=>{r.setAttributeNode(e.cloneNode(!0))}))}},r=()=>!a.isCollapsed()&&i.getParent(a.getStart(),i.isBlock)!==i.getParent(a.getEnd(),i.isBlock);e.on(`keypress`,t=>{let i;return!p(t)&&(t.keyCode===8||t.keyCode===46)&&r()?(i=n(),e.getDoc().execCommand(`delete`,!1),i(),t.preventDefault(),!1):!0}),i.bind(e.getDoc(),`cut`,t=>{if(!p(t)&&r()){let t=n();Yv.setEditorTimeout(e,()=>{t()})}})},ee=()=>{e.on(`keydown`,e=>{if(!p(e)&&e.keyCode===n&&a.isCollapsed()&&a.getRng().startOffset===0){let t=a.getNode().previousSibling;if(t&&t.nodeName&&t.nodeName.toLowerCase()===`table`)return e.preventDefault(),!1}return!0})},S=()=>{e.on(`keydown`,t=>{if(p(t)||t.keyCode!==$.BACKSPACE)return;let n=a.getRng(),r=n.startContainer,o=n.startOffset,s=i.getRoot(),c=r;if(!(!n.collapsed||o!==0)){for(;c.parentNode&&c.parentNode.firstChild===c&&c.parentNode!==s;)c=c.parentNode;c.nodeName===`BLOCKQUOTE`&&(e.formatter.toggle(`blockquote`,void 0,c),n=i.createRng(),n.setStart(r,0),n.setEnd(r,0),a.setRng(n))}})},C=()=>{_f(e)||e.on(`BeforeExecCommand mousedown`,()=>{f(`StyleWithCSS`,!1),f(`enableInlineTableEditing`,!1),Jd(e)||f(`enableObjectResizing`,!1)})},te=()=>{let n=()=>{t(i.select(`a:not([data-mce-block])`),e=>{let t=e.parentNode,n=i.getRoot();if(t?.lastChild===e){for(;t&&!i.isBlock(t);){if(t.parentNode?.lastChild!==t||t===n)return;t=t.parentNode}i.add(t,`br`,{"data-mce-bogus":1})}})};e.on(`SetContent ExecCommand`,e=>{(e.type===`setcontent`||e.command===`mceInsertLink`)&&n()})},w=()=>{e.on(`init`,()=>{f(`DefaultParagraphSeparator`,Sd(e))})},T=e=>{let t=e.getBody(),n=e.selection.getRng();return n.startContainer===n.endContainer&&n.startContainer===t&&n.startOffset===0&&n.endOffset===t.childNodes.length},E=()=>{e.on(`keyup focusin mouseup`,t=>{!$.modifierPressed(t)&&!T(e)&&a.normalize()},!0)},ne=()=>{e.contentStyles.push(`img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}`)},re=()=>{e.inline||e.on(`keydown`,()=>{document.activeElement===document.body&&e.getWin().focus()})},O=()=>{e.inline||(e.contentStyles.push(`body {min-height: 150px}`),e.on(`click`,t=>{let n;t.target.nodeName===`HTML`&&(n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged())}))},k=()=>{d&&e.on(`keydown`,t=>{$.metaKeyPressed(t)&&!t.shiftKey&&(t.keyCode===37||t.keyCode===39)&&(t.preventDefault(),e.selection.getSel().modify(`move`,t.keyCode===37?`backward`:`forward`,`lineboundary`))})},ie=()=>{e.on(`click`,e=>{let t=e.target;do if(t.tagName===`A`){e.preventDefault();return}while(t=t.parentNode)}),e.contentStyles.push(`.mce-content-body {-webkit-touch-callout: none}`)},ae=()=>{e.on(`init`,()=>{e.dom.bind(e.getBody(),`submit`,e=>{e.preventDefault()})})},A=()=>{o.addNodeFilter(`br`,e=>{let t=e.length;for(;t--;)e[t].attr(`class`)===`Apple-interchange-newline`&&e[t].remove()})},j=D;return qk(e)?(l&&(g(),b(),ae(),h(),u&&(re(),O(),ie())),c&&(y(),C(),ne(),k())):(S(),m(),fn.windowsPhone||E(),l&&(g(),b(),w(),ae(),ee(),A(),u?(re(),O(),ie()):h()),c&&(_(),y(),x(),C(),te(),ne(),k(),ee(),e.on(`drop`,t=>{let n=t.dataTransfer?.getData(`text/html`);v(n)&&/^<img[^>]*>$/.test(n)&&e.dispatch(`dragend`,new window.DragEvent(`dragend`,t))}))),{refreshContentEditable:j,isHidden:()=>{if(!c||e.removed)return!1;let t=e.selection.getSel();return!t||!t.rangeCount||t.rangeCount===0}}},jq=Vc.DOM,Mq=(e,t)=>{let n=Kr(Gr(V.fromDom(e.getBody()))),r=V.fromTag(`style`);Gn(r,`type`,`text/css`),Ti(r,V.fromText(t)),Ti(n,r),e.on(`remove`,()=>{Ai(r)})},Nq=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Pq=e=>We(e,e=>C(e)===!1),Fq=e=>{let t=e.options.get,n=e.editorUpload.blobCache;return Pq({allow_conditional_comments:t(`allow_conditional_comments`),allow_html_data_urls:t(`allow_html_data_urls`),allow_svg_data_urls:t(`allow_svg_data_urls`),allow_html_in_named_anchor:t(`allow_html_in_named_anchor`),allow_script_urls:t(`allow_script_urls`),allow_unsafe_link_target:t(`allow_unsafe_link_target`),convert_fonts_to_spans:t(`convert_fonts_to_spans`),fix_list_elements:t(`fix_list_elements`),font_size_legacy_values:t(`font_size_legacy_values`),forced_root_block:t(`forced_root_block`),forced_root_block_attrs:t(`forced_root_block_attrs`),preserve_cdata:t(`preserve_cdata`),inline_styles:t(`inline_styles`),root_name:Nq(e),sanitize:t(`xss_sanitization`),validate:!0,blob_cache:n,document:e.getDoc()})},Iq=e=>{let t=e.options.get;return Pq({custom_elements:t(`custom_elements`),extended_valid_elements:t(`extended_valid_elements`),invalid_elements:t(`invalid_elements`),invalid_styles:t(`invalid_styles`),schema:t(`schema`),valid_children:t(`valid_children`),valid_classes:t(`valid_classes`),valid_elements:t(`valid_elements`),valid_styles:t(`valid_styles`),verify_html:t(`verify_html`),padd_empty_block_inline_children:t(`format_empty_lines`)})},Lq=e=>{let t=e.options.get;return{...Fq(e),...Iq(e),...Pq({remove_trailing_brs:t(`remove_trailing_brs`),pad_empty_with_br:t(`pad_empty_with_br`),url_converter:t(`url_converter`),url_converter_scope:t(`url_converter_scope`),element_format:t(`element_format`),entities:t(`entities`),entity_encoding:t(`entity_encoding`),indent:t(`indent`),indent_after:t(`indent_after`),indent_before:t(`indent_before`)})}},Rq=e=>{let t=xO(Fq(e),e.schema);return t.addAttributeFilter(`src,href,style,tabindex`,(t,n)=>{let r=e.dom,i=`data-mce-`+n,a=t.length;for(;a--;){let o=t[a],s=o.attr(n);if(s&&!o.attr(i)){if(s.indexOf(`data:`)===0||s.indexOf(`blob:`)===0)continue;n===`style`?(s=r.serializeStyle(r.parseStyle(s),o.name),s.length||(s=null),o.attr(i,s),o.attr(n,s)):n===`tabindex`?(o.attr(i,s),o.attr(n,null)):o.attr(i,e.convertURL(s,n,o.name))}}}),t.addNodeFilter(`script`,e=>{let t=e.length;for(;t--;){let n=e[t],r=n.attr(`type`)||`no/type`;r.indexOf(`mce-`)!==0&&n.attr(`type`,`mce-`+r)}}),Xf(e)&&t.addNodeFilter(`#cdata`,t=>{let n=t.length;for(;n--;){let r=t[n];r.type=8,r.name=`#comment`,r.value=`[CDATA[`+e.dom.encode(r.value??``)+`]]`}}),t.addNodeFilter(`p,h1,h2,h3,h4,h5,h6,div`,t=>{let n=t.length,r=e.schema.getNonEmptyElements();for(;n--;){let e=t[n];e.isEmpty(r)&&e.getAll(`br`).length===0&&e.append(new Yy(`br`,1))}}),t},zq=e=>{let t=Af(e);t&&Yv.setEditorTimeout(e,()=>{let n;n=t===!0?e:e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},Bq=e=>{let t=e.dom.getRoot();!e.inline&&(!Ah(e)||e.selection.getStart(!0)===t)&&jm(t).each(t=>{let n=t.getNode(),r=ma(n)?jm(n).getOr(t):t;e.selection.setRng(r.toRange())})},Vq=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Kg(e),e.focus(!0),Bq(e),e.nodeChanged({initial:!0});let t=Of(e);T(t)&&t.call(e,e),zq(e)},Hq=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,Uq=(e,t,n)=>{let r=[Hq(e).loadAll(t)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(n)])},Wq=e=>{let t=Hq(e),n=Gd(e),r=e.contentCSS,i=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(n)},a=()=>{e.removed?i():e.on(`remove`,i)};if(e.contentStyles.length>0){let t=``;B.each(e.contentStyles,e=>{t+=e+`\r
`}),e.dom.addStyle(t)}let o=Promise.all(Uq(e,r,n)).then(a).catch(a),s=Wd(e);return s&&Mq(e,s),o},Gq=e=>{let t=e.getDoc(),n=e.getBody();Wg(e),jf(e)||(t.body.spellcheck=!1,jq.setAttrib(n,`spellcheck`,`false`)),e.quirks=Aq(e),Gg(e);let r=Kd(e);r!==void 0&&(n.dir=r);let i=Mf(e);i&&e.on(`BeforeSetContent`,e=>{B.each(i,t=>{e.content=e.content.replace(t,e=>`<!--mce:protected `+escape(e)+`-->`)})}),e.on(`SetContent`,()=>{e.addVisual(e.getBody())}),e.on(`compositionstart compositionend`,t=>{e.composing=t.type===`compositionstart`})},Kq=e=>{qk(e)||e.load({initial:!0,format:`html`}),e.startContent=e.getContent({format:`raw`})},qq=e=>{e.removed!==!0&&(Kq(e),Vq(e))},Jq=e=>{let t=!1,n=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(n),t=!0,e.setProgressState(!1)}},Yq=e=>{let t=e.getElement(),n=e.getDoc();e.inline&&(jq.addClass(t,`mce-content-body`),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);let r=e.getBody();r.disabled=!0,e.readonly=_f(e),e._editableRoot=vf(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&jq.getStyle(r,`position`,!0)===`static`&&(r.style.position=`relative`),r.contentEditable=`true`),r.disabled=!1,e.editorUpload=xM(e),e.schema=hc(Iq(e)),e.dom=Vc(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Ld(e),referrerPolicy:Rd(e),onSetAttrib:t=>{e.dispatch(`SetAttrib`,t)}}),e.parser=Rq(e),e.serializer=$A(Lq(e),e),e.selection=BA(e.dom,e.getWin(),e.serializer,e),e.annotator=Pg(e),e.formatter=FM(e),e.undoManager=zM(e),e._nodeChangeDispatcher=new vU(e),e._selectionOverrides=BK(e),KI(e),TG(e),iL(e),qk(e)||(IG(e),kq(e)),UI(e,_U(e)),eL(e),qM(e),SG(e);let i=Yk(e);Gq(e),i.fold(()=>{let t=Jq(e);Wq(e).then(()=>{qq(e),t()})},t=>{e.setProgressState(!0),Wq(e).then(()=>{t().then(t=>{e.setProgressState(!1),qq(e),CA(e)},t=>{e.notificationManager.open({type:`error`,text:String(t)}),qq(e),CA(e)})})})},Xq=N,Zq=(e,t,n)=>Vi(e,t,Xq,n),Qq=Vc.DOM,$q=(e,t,n,r)=>{let i=V.fromTag(`iframe`);return r.each(e=>Gn(i,`tabindex`,e)),Kn(i,n),Kn(i,{id:e+`_ifr`,frameBorder:`0`,allowTransparency:`true`,title:t}),sr(i,`tox-edit-area__iframe`),i},eJ=e=>{let t=gd(e)+`<html><head>`;_d(e)!==e.documentBaseUrl&&(t+=`<base href="`+e.documentBaseURI.getURI()+`" />`),t+=`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`;let n=vd(e),r=yd(e),i=e.translate(Ef(e));return bd(e)&&(t+=`<meta http-equiv="Content-Security-Policy" content="`+bd(e)+`" />`),t+=`</head><body id="${n}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,t},tJ=(e,t)=>{let n=e.translate(`Rich Text Area`),r=Jn(V.fromDom(e.getElement()),`tabindex`).bind(jt),i=$q(e.id,n,hd(e),r).dom;i.onload=()=>{i.onload=null,e.dispatch(`load`)},e.contentAreaContainer=t.iframeContainer,e.iframeElement=i,e.iframeHTML=eJ(e),Qq.add(t.iframeContainer,i)},nJ=e=>{let t=e.iframeElement,n=()=>{e.contentDocument=t.contentDocument,Yq(e)};if($f(e)||fn.browser.isFirefox()){let t=e.getDoc();t.open(),t.write(e.iframeHTML),t.close(),n()}else{let r=Zq(V.fromDom(t),`load`,()=>{r.unbind(),n()});t.srcdoc=e.iframeHTML}},rJ=(e,t)=>{tJ(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=Qq.isHidden(t.editorContainer)),e.getElement().style.display=`none`,Qq.setAttrib(e.id,`aria-hidden`,`true`),e.getElement().style.visibility=e.orgVisibility,nJ(e)},iJ=Vc.DOM,aJ=(e,t,n)=>{let r=Vj.get(n),i=Vj.urls[n]||e.documentBaseUrl.replace(/\/$/,``);if(n=B.trim(n),r&&B.inArray(t,n)===-1){if(e.plugins[n])return;try{let a=r(e,i)||{};e.plugins[n]=a,T(a.init)&&(a.init(e,i),t.push(n))}catch(t){tM(e,n,t)}}},oJ=e=>e.replace(/^\-/,``),sJ=e=>{let t=[];F(bf(e),n=>{aJ(e,t,oJ(n))})},cJ=e=>{let t=B.trim(jd(e)),n=e.ui.registry.getAll().icons;ze({...Tj.get(`default`).icons,...Tj.get(t).icons},(t,r)=>{Je(n,r)||e.ui.registry.addIcon(r,t)})},lJ=e=>{let t=$d(e);v(t)?(e.theme=Hj.get(t)(e,Hj.urls[t])||{},T(e.theme.init)&&e.theme.init(e,Hj.urls[t]||e.documentBaseUrl.replace(/\/$/,``))):e.theme={}},uJ=e=>{let t=tf(e);e.model=Ej.get(t)(e,Ej.urls[t])},dJ=e=>{let t=e.theme.renderUI;return t?t():hJ(e)},fJ=e=>{let t=e.getElement(),n=$d(e)(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+`_parent`),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+`_iframecontainer`),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n},pJ=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),mJ=e=>{let t=iJ.create(`div`);return iJ.insertAfter(t,e),pJ(t,t)},hJ=e=>{let t=e.getElement();return e.inline?pJ(null):mJ(t)},gJ=e=>(e.orgDisplay=e.getElement().style.display,v($d(e))?dJ(e):T($d(e))?fJ(e):hJ(e)),_J=(e,t)=>{let n={show:P.from(t.show).getOr(D),hide:P.from(t.hide).getOr(D),isEnabled:P.from(t.isEnabled).getOr(N),setEnabled:n=>{e.mode.isReadOnly()||P.from(t.setEnabled).each(e=>e(n))}};e.ui={...e.ui,...n}},vJ=async e=>{e.dispatch(`ScriptsLoaded`),cJ(e),lJ(e),uJ(e),sJ(e);let t=await gJ(e);_J(e,P.from(t.api).getOr({})),e.editorContainer=t.editorContainer,sM(e),e.inline?Yq(e):rJ(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},yJ=Vc.DOM,bJ=e=>e.charAt(0)===`-`,xJ=(e,t)=>{let n=zd(t),r=Bd(t);if(!Zc.hasCode(n)&&n!==`en`){let i=Ot(r)?r:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(i).catch(()=>{Qj(t,i,n)})}},SJ=(e,t)=>{let n=$d(e);if(v(n)&&!bJ(n)&&!Je(Hj.urls,n)){let r=ef(e),i=r?e.documentBaseURI.toAbsolute(r):`themes/${n}/theme${t}.js`;Hj.load(n,i).catch(()=>{$j(e,i,n)})}},CJ=(e,t)=>{let n=tf(e);if(n!==`plugin`&&!Je(Ej.urls,n)){let r=nf(e),i=v(r)?e.documentBaseURI.toAbsolute(r):`models/${n}/model${t}.js`;Ej.load(n,i).catch(()=>{eM(e,i,n)})}},wJ=e=>P.from(Md(e)).filter(Ot).map(e=>({url:e,name:P.none()})),TJ=(e,t,n)=>P.from(t).filter(e=>Ot(e)&&!Tj.has(e)).map(t=>({url:`${e.editorManager.baseURL}/icons/${t}/icons${n}.js`,name:P.some(t)})),EJ=(e,t,n)=>{F(Sn([TJ(t,`default`,n),wJ(t).orThunk(()=>TJ(t,jd(t),``))]),n=>{e.add(n.url).catch(()=>{Zj(t,n.url,n.name.getOrUndefined())})})},DJ=(e,t)=>{let n=(t,n)=>{Vj.load(t,n).catch(()=>{Xj(e,n,t)})};ze(xf(e),(t,r)=>{n(r,t),e.options.set(`plugins`,bf(e).concat(r))}),F(bf(e),e=>{e=B.trim(e),e&&!Vj.urls[e]&&!bJ(e)&&n(e,`plugins/${e}/plugin${t}.js`)})},OJ=e=>{let t=$d(e);return!v(t)||w(Hj.get(t))},kJ=e=>{let t=tf(e);return w(Ej.get(t))},AJ=(e,t)=>{let n=Uc.ScriptLoader,r=()=>{!e.removed&&OJ(e)&&kJ(e)&&vJ(e)};SJ(e,t),CJ(e,t),xJ(n,e),EJ(n,e,t),DJ(e,t),n.loadQueue().then(r,r)},jJ=(e,t)=>Os.forElement(e,{contentCssCors:yf(t),referrerPolicy:Rd(t)}),MJ=e=>{let t=e.id;Zc.setCode(zd(e));let n=()=>{yJ.unbind(window,`ready`,n),e.render()};if(!kc.Event.domLoaded){yJ.bind(window,`ready`,n);return}if(!e.getElement())return;let r=V.fromDom(e.getElement()),i=Qn(r);e.on(`remove`,()=>{_e(r.dom.attributes,e=>Xn(r,e.name)),Kn(r,i)}),e.ui.styleSheetLoader=jJ(r,e),uf(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility=`hidden`);let a=e.getElement().form||yJ.getParent(t,`form`);a&&(e.formElement=a,df(e)&&!ga(e.getElement())&&(yJ.insertAfter(yJ.create(`input`,{type:`hidden`,name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},yJ.bind(a,`submit reset`,e.formEventDelegate),e.on(`reset`,()=>{e.resetContent()}),ff(e)&&!a.submit.nodeType&&!a.submit.length&&!a._mceOldSubmit&&(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=Wj(e),e.notificationManager=Bj(e),rp(e)&&e.on(`GetContent`,e=>{e.save&&(e.content=yJ.encode(e.content))}),pf(e)&&e.on(`submit`,()=>{e.initialized&&e.save()}),mf(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:`raw`,no_events:!0,set_dirty:!1})},e.editorManager.on(`BeforeUnload`,e._beforeUnload)),e.editorManager.add(e),AJ(e,e.suffix)},NJ=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),s_(e,t))},PJ=e=>e._editableRoot,FJ=(e,t)=>({sections:k(e),options:k(t)}),IJ=an().deviceType,LJ=IJ.isPhone(),RJ=IJ.isTablet(),zJ=e=>te(e)?[]:I(ge(x(e)?e:e.split(/[ ,]/),Tt),Ot),BJ=(e,t)=>{let n=Ue(t,(t,n)=>me(e,n));return FJ(n.t,n.f)},VJ=(e,t,n={})=>{let r=qe(e.sections(),t).getOr({});return B.extend({},n,r)},HJ=(e,t)=>Je(e.sections(),t),UJ=(e,t)=>HJ(e,t)?e.sections()[t]:{},WJ=(e,t)=>{let n={table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:qe(e,`toolbar_mode`).getOr(`scrolling`),toolbar_sticky:!1},r={menubar:!1};return{...n,...t?r:{}}},GJ=(e,t)=>{let n=t.external_plugins??{};return e&&e.external_plugins?B.extend({},e.external_plugins,n):n},KJ=(e,t)=>[...zJ(e),...zJ(t)],qJ=(e,t,n,r)=>e&&HJ(t,`mobile`)?r:n,JJ=(e,t,n,r)=>{let i=zJ(n.forced_plugins),a=zJ(r.plugins),o=UJ(t,`mobile`),s=KJ(i,qJ(e,t,a,o.plugins?zJ(o.plugins):a));return B.extend(r,{forced_plugins:i,plugins:s})},YJ=(e,t)=>e&&HJ(t,`mobile`),XJ=(e,t,n,r,i)=>{let a=BJ([`mobile`],Az(e?{mobile:WJ(i.mobile??{},t)}:{},i));return JJ(e,a,r,B.extend(n,r,a.options(),YJ(e,a)?VJ(a,`mobile`):{},{external_plugins:GJ(r,a.options())}))},ZJ=(e,t)=>XJ(LJ||RJ,LJ,t,e,t),QJ=(e,t)=>SA(e,t),$J=e=>{let t=(t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()},n=n=>()=>{F(`left,center,right,justify`.split(`,`),t=>{n!==t&&e.formatter.remove(`align`+t)}),n!==`none`&&t(`align`+n)};e.editorCommands.addCommands({JustifyLeft:n(`left`),JustifyCenter:n(`center`),JustifyRight:n(`right`),JustifyFull:n(`justify`),JustifyNone:n(`none`)})},eY=e=>{let t=t=>()=>{let n=e.selection;return he(n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks(),n=>w(e.formatter.matchNode(n,t)))};e.editorCommands.addCommands({JustifyLeft:t(`alignleft`),JustifyCenter:t(`aligncenter`),JustifyRight:t(`alignright`),JustifyFull:t(`alignjustify`)},`state`)},tY=e=>{$J(e),eY(e)},nY=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{let n=e.getDoc(),r;try{n.execCommand(t)}catch{r=!0}if(t===`paste`&&!n.queryCommandEnabled(t)&&(r=!0),r||!n.queryCommandSupported(t)){let t=e.translate(`Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.`);(fn.os.isMacOS()||fn.os.isiOS())&&(t=t.replace(/Ctrl\+/g,`⌘+`)),e.notificationManager.open({text:t,type:`error`})}}})},rY=(e,t,n)=>{let r=V.fromDom(e.getRoot());return n=dx(r,Y.fromRangeStart(t))?n.replace(/^ /,`&nbsp;`):n.replace(/^&nbsp;/,` `),n=px(r,Y.fromRangeEnd(t))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,`&nbsp;`):n.replace(/&nbsp;(<br( \/)?>)?$/,` `),n},iY=e=>{if(typeof e!=`string`){let t=B.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},aY=(e,t)=>{let n=e.selection,r=e.dom;return/^ | $/.test(t)?rY(r,n.getRng(),t):t},oY=(e,t)=>{if(e.selection.isEditable()){let{content:n,details:r}=iY(t);EO(e,{...r,content:aY(e,n),format:`html`,set:!1,selection:!0}).each(t=>{DO(e,bA(e,t.content,r),t),e.addVisual()})}},sY=e=>{e.editorCommands.addCommands({mceCleanup:()=>{let t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,r)=>{oY(e,e.dom.createHTML(`img`,{src:r}))},insertHorizontalRule:()=>{e.execCommand(`mceInsertContent`,!1,`<hr>`)},insertText:(t,n,r)=>{oY(e,e.dom.encode(r))},insertHTML:(t,n,r)=>{oY(e,r)},mceInsertContent:(t,n,r)=>{oY(e,r)},mceSetContent:(t,n,r)=>{e.setContent(r)},mceReplaceContent:(t,n,r)=>{e.execCommand(`mceInsertContent`,!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:`text`})))},mceNewDocument:()=>{e.setContent(Lf(e))}})},cY={"font-size":`size`,"font-family":`face`},lY=Un(`font`),uY=(e,t,n)=>{let r=t=>vi(t,e).orThunk(()=>lY(t)?qe(cY,e).bind(e=>Jn(t,e)):P.none());return Tw(V.fromDom(n),e=>r(e),e=>xr(V.fromDom(t),e))},dY=e=>e.replace(/[\'\"\\]/g,``).replace(/,\s+/g,`,`),fY=(e,t)=>P.from(Vc.DOM.getStyle(t,e,!0)),pY=e=>(t,n)=>P.from(n).map(V.fromDom).filter(zn).bind(n=>uY(e,t,n.dom).or(fY(e,n.dom))).getOr(``),mY=pY(`font-size`),hY=re(dY,pY(`font-family`)),gY=e=>jm(e.getBody()).bind(e=>{let t=e.container();return P.from(W(t)?t.parentNode:t)}),_Y=e=>P.from(e.selection.getRng()).bind(t=>{let n=e.getBody();return t.startContainer===n&&t.startOffset===0?P.none():P.from(e.selection.getStart(!0))}),vY=(e,t)=>_Y(e).orThunk(A(gY,e)).map(V.fromDom).filter(zn).bind(t),yY=(e,t)=>vY(e,O(P.some,t)),bY=(e,t)=>{if(/^[0-9.]+$/.test(t)){let n=parseInt(t,10);if(n>=1&&n<=7){let r=tp(e),i=np(e);return i.length>0?i[n-1]||t:r[n-1]||t}else return t}else return t},xY=e=>ge(e.split(/\s*,\s*/),e=>e.indexOf(` `)!==-1&&!(St(e,`"`)||St(e,`'`))?`'${e}'`:e).join(`,`),SY=(e,t)=>{let n=bY(e,t);e.formatter.toggle(`fontname`,{value:xY(n)}),e.nodeChanged()},CY=e=>yY(e,t=>hY(e.getBody(),t.dom)).getOr(``),wY=(e,t)=>{e.formatter.toggle(`fontsize`,{value:bY(e,t)}),e.nodeChanged()},TY=e=>yY(e,t=>mY(e.getBody(),t.dom)).getOr(``),EY=e=>yY(e,t=>Tw(t,e=>vi(e,`line-height`),A(xr,V.fromDom(e.getBody()))).getOrThunk(()=>{let e=parseFloat(gi(t,`line-height`)),n=parseFloat(gi(t,`font-size`));return String(e/n)})).getOr(``),DY=(e,t)=>{e.formatter.toggle(`lineheight`,{value:String(t)}),e.nodeChanged()},OY=e=>{let t=(t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,n,r)=>{t(e,{value:r})},BackColor:(e,n,r)=>{t(`hilitecolor`,{value:r})},FontName:(t,n,r)=>{SY(e,r)},FontSize:(t,n,r)=>{wY(e,r)},LineHeight:(t,n,r)=>{DY(e,r)},Lang:(e,n,r)=>{t(e,{value:r.code,customValue:r.customCode??null})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t(`blockquote`)},FormatBlock:(e,n,r)=>{t(v(r)?r:`p`)},mceToggleFormat:(e,n,r)=>{t(r)}})},kY=e=>{let t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t(`blockquote`)},`state`),e.editorCommands.addQueryValueHandler(`FontName`,()=>CY(e)),e.editorCommands.addQueryValueHandler(`FontSize`,()=>TY(e)),e.editorCommands.addQueryValueHandler(`LineHeight`,()=>EY(e))},AY=e=>{OY(e),kY(e)},jY=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},MY=e=>{e.editorCommands.addCommands({Indent:()=>{LI(e)},Outdent:()=>{RI(e)}}),e.editorCommands.addCommands({Outdent:()=>MI(e)},`state`)},NY=e=>{let t=(t,n,r)=>{let i=v(r)?{href:r}:r,a=e.dom.getParent(e.selection.getNode(),`a`);y(i)&&v(i.href)&&(i.href=i.href.replace(/ /g,`%20`),(!a||!i.href)&&e.formatter.remove(`link`),i.href&&e.formatter.apply(`link`,i,a))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){let t=e.dom.getParent(e.selection.getStart(),`a`);t&&e.dom.remove(t,!0);return}e.formatter.remove(`link`)}},mceInsertLink:t,createLink:t})},PY=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);let n=e.dom.getParent(e.selection.getNode(),`ol,ul`);if(n){let t=n.parentNode;if(t&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(t.nodeName)){let r=e.selection.getBookmark();e.dom.split(t,n),e.selection.moveToBookmark(r)}}}})},FY=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{let n=e.dom.getParent(e.selection.getNode(),`ul,ol`);return n&&(t===`insertunorderedlist`&&n.tagName===`UL`||t===`insertorderedlist`&&n.tagName===`OL`)}},`state`)},IY=e=>{PY(e),FY(e)},LY=(e,t,n,r)=>{let i=e.dom,a=e=>i.isBlock(e)&&e.parentElement===n,o=a(t)?t:i.getParent(r,a,n);return P.from(o).map(V.fromDom)},RY=(e,t)=>{let n=e.dom,r=e.selection.getRng(),i=t?e.selection.getStart():e.selection.getEnd(),a=t?r.startContainer:r.endContainer,o=jV(n,a);if(!o||!o.isContentEditable)return;let s=t?Si:Ci,c=Sd(e);LY(e,i,o,a).each(t=>{let n=RV(e,a,t.dom,o,!1,c);s(t,V.fromDom(n)),e.selection.setCursorLocation(n,0),e.dispatch(`NewBlock`,{newBlock:n}),bV(e,`insertParagraph`)})},zY=e=>RY(e,!0),BY=e=>RY(e,!1),VY=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{zY(e)},InsertNewBlockAfter:()=>{BY(e)}})},HY=e=>{e.editorCommands.addCommands({insertParagraph:()=>{BH(uH,e)},mceInsertNewLine:(t,n,r)=>{VH(e,r)},InsertLineBreak:(t,n,r)=>{BH(SH,e)}})},UY=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,r)=>{let i=0;e.dom.getParent(e.selection.getNode(),t=>U(t)&&i++===r?(e.selection.select(t),!1):!0,e.getBody())},mceSelectNode:(t,n,r)=>{e.selection.select(r)},selectAll:()=>{let t=e.dom.getParent(e.selection.getStart(),wa);if(t){let n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},WY=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,r)=>{let i=r??e.selection.getNode();if(i!==e.getBody()){let t=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(t)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,r)=>{Cy(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},GY=e=>{tY(e),nY(e),jY(e),UY(e),sY(e),NY(e),MY(e),VY(e),HY(e),IY(e),AY(e),WY(e)},KY=[`toggleview`],qY=e=>me(KY,e.toLowerCase());class JY{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,n,r){let i=this.editor,a=e.toLowerCase(),o=r?.skip_focus;if(i.removed||(a!==`mcefocus`&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)&&!o?i.focus():Gv(i)),i.dispatch(`BeforeExecCommand`,{command:e,ui:t,value:n}).isDefaultPrevented()))return!1;let s=this.commands.exec[a];return T(s)?(s(a,t,n),i.dispatch(`ExecCommand`,{command:e,ui:t,value:n}),!0):!1}queryCommandState(e){if(!qY(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;let t=e.toLowerCase(),n=this.commands.state[t];return T(n)?n(t):!1}queryCommandValue(e){if(!qY(e)&&this.editor.quirks.isHidden()||this.editor.removed)return``;let t=e.toLowerCase(),n=this.commands.value[t];return T(n)?n(t):``}addCommands(e,t=`exec`){let n=this.commands;ze(e,(e,r)=>{F(r.toLowerCase().split(`,`),r=>{n[t][r]=e})})}addCommand(e,t,n){let r=e.toLowerCase();this.commands.exec[r]=(e,r,i)=>t.call(n??this.editor,r,i)}queryCommandSupported(e){let t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,n){this.commands.state[e.toLowerCase()]=()=>t.call(n??this.editor)}addQueryValueHandler(e,t,n){this.commands.value[e.toLowerCase()]=()=>t.call(n??this.editor)}}let YY=`data-mce-contenteditable`,XY=(e,t,n)=>{dr(e,t)&&!n?lr(e,t):n&&sr(e,t)},ZY=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},QY=(e,t)=>{e.dom.contentEditable=t?`true`:`false`},$Y=e=>{F(H(e,`*[contenteditable="true"]`),e=>{Gn(e,YY,`true`),QY(e,!1)})},eX=e=>{F(H(e,`*[${YY}="true"]`),e=>{Xn(e,YY),QY(e,!0)})},tX=e=>{P.from(e.selection.getNode()).each(e=>{e.removeAttribute(`data-mce-selected`)})},nX=e=>{e.selection.setRng(e.selection.getRng())},rX=(e,t)=>{let n=V.fromDom(e.getBody());XY(n,`mce-content-readonly`,t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),tX(e),e.readonly=!0,QY(n,!1),$Y(n)):(e.readonly=!1,e.hasEditableRoot()&&QY(n,!0),eX(n),ZY(e,`StyleWithCSS`,!1),ZY(e,`enableInlineTableEditing`,!1),ZY(e,`enableObjectResizing`,!1),by(e)&&e.focus(),nX(e),e.nodeChanged())},iX=e=>e.readonly,aX=e=>{e.parser.addAttributeFilter(`contenteditable`,t=>{iX(e)&&F(t,e=>{e.attr(YY,e.attr(`contenteditable`)),e.attr(`contenteditable`,`false`)})}),e.serializer.addAttributeFilter(YY,t=>{iX(e)&&F(t,e=>{e.attr(`contenteditable`,e.attr(YY))})}),e.serializer.addTempAttr(YY)},oX=e=>{e.serializer?aX(e):e.on(`PreInit`,()=>{aX(e)})},sX=e=>e.type===`click`,cX=[`copy`],lX=e=>me(cX,e.type),uX=(e,t)=>si(t,`a`,t=>xr(t,V.fromDom(e.getBody()))).bind(e=>Jn(e,`href`)),dX=(e,t)=>{sX(t)&&!$.metaKeyPressed(t)?uX(e,V.fromDom(t.target)).each(n=>{if(t.preventDefault(),/^#/.test(n)){let t=e.dom.select(`${n},[name="${bt(n,`#`)}"]`);t.length&&e.selection.scrollIntoView(t[0],!0)}else window.open(n,`_blank`,`rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes`)}):lX(t)&&e.dispatch(t.type,t)},fX=e=>{e.on(`ShowCaret`,t=>{iX(e)&&t.preventDefault()}),e.on(`ObjectSelected`,t=>{iX(e)&&t.preventDefault()})},pX=B.makeMap(`focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel`,` `);class mX{static isNative(e){return!!pX[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||M}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){let n=e.toLowerCase(),r=Sc(n,t??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);let i=this.bindings[n];if(i)for(let e=0,t=i.length;e<t;e++){let t=i[e];if(!t.removed){if(t.once&&this.off(n,t.func),r.isImmediatePropagationStopped())return r;if(t.func.call(this.scope,r)===!1)return r.preventDefault(),r}}return r}on(e,t,n,r){if(t===!1&&(t=M),t){let i={func:t,removed:!1};r&&B.extend(i,r);let a=e.toLowerCase().split(` `),o=a.length;for(;o--;){let e=a[o],t=this.bindings[e];t||(t=[],this.toggleEvent(e,!0)),t=n?[i,...t]:[...t,i],this.bindings[e]=t}}return this}off(e,t){if(e){let n=e.toLowerCase().split(` `),r=n.length;for(;r--;){let i=n[r],a=this.bindings[i];if(!i)return ze(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]}),this;if(a){if(!t)a.length=0;else{let e=ve(a,e=>e.func===t);a=e.fail,this.bindings[i]=a,F(e.pass,e=>{e.removed=!0})}a.length||(this.toggleEvent(e,!1),delete this.bindings[i])}}}else ze(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,n){return this.on(e,t,n,{once:!0})}has(e){e=e.toLowerCase();let t=this.bindings[e];return!(!t||t.length===0)}}let hX=e=>(e._eventDispatcher||=new mX({scope:e,toggleEvent:(t,n)=>{mX.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}}),e._eventDispatcher),gX={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){let r=this;if(r.removed&&e!==`remove`&&e!==`detach`)return Sc(e.toLowerCase(),t??{},r);let i=hX(r).dispatch(e,t);if(n!==!1&&r.parent){let t=r.parent();for(;t&&!i.isPropagationStopped();)t.dispatch(e,i,!1),t=t.parent?t.parent():void 0}return i},on(e,t,n){return hX(this).on(e,t,n)},off(e,t){return hX(this).off(e,t)},once(e,t){return hX(this).once(e,t)},hasEventListeners(e){return hX(this).has(e)}},_X=Vc.DOM,vX,yX=(e,t)=>{if(t===`selectionchange`)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;let n=Zd(e);return n?(e.eventRoot||=_X.select(n)[0],e.eventRoot):e.getBody()},bX=e=>!e.hidden&&!iX(e),xX=(e,t,n)=>{bX(e)?e.dispatch(t,n):iX(e)&&dX(e,n)},SX=(e,t)=>{if(e.delegates||={},e.delegates[t]||e.removed)return;let n=yX(e,t);if(Zd(e)){if(vX||(vX={},e.editorManager.on(`removeEditor`,()=>{e.editorManager.activeEditor||(vX&&=(ze(vX,(t,n)=>{e.dom.unbind(yX(e,n))}),null))})),vX[t])return;let r=n=>{let r=n.target,i=e.editorManager.get(),a=i.length;for(;a--;){let e=i[a].getBody();(e===r||_X.isChildOf(r,e))&&xX(i[a],t,n)}};vX[t]=r,_X.bind(n,t,r)}else{let r=n=>{xX(e,t,n)};_X.bind(n,t,r),e.delegates[t]=r}},CX={...gX,bindPendingEventDelegates(){let e=this;B.each(e._pendingNativeEvents,t=>{SX(e,t)})},toggleNativeEvent(e,t){let n=this;e===`focus`||e===`blur`||n.removed||(t?n.initialized?SX(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(yX(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){let e=this,t=e.getBody(),n=e.dom;e.delegates&&(ze(e.delegates,(t,n)=>{e.dom.unbind(yX(e,n),n,t)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},wX=e=>v(e)?{value:e.split(/[ ,]/),valid:!0}:ne(e,v)?{value:e,valid:!0}:{valid:!1,message:`The value must be a string[] or a comma/space separated string.`},TX=e=>{let t=(()=>{switch(e){case`array`:return x;case`boolean`:return S;case`function`:return T;case`number`:return E;case`object`:return y;case`string`:return v;case`string[]`:return wX;case`object[]`:return e=>ne(e,y);case`regexp`:return e=>_(e,RegExp);default:return N}})();return n=>kX(n,t,`The value must be a ${e}.`)},EX=e=>v(e.processor),DX=(e,t)=>e+(kt(t.message)?``:`. ${t.message}`),OX=e=>e.valid,kX=(e,t,n=``)=>{let r=t(e);return S(r)?r?{value:e,valid:!0}:{valid:!1,message:n}:r},AX=(e,t,n)=>{if(!C(t)){let r=kX(t,n);if(OX(r))return r.value;console.error(DX(`Invalid default value passed for the "${e}" option`,r))}},jX=(e,t)=>{let n={},r={},i=(e,t,n)=>{let i=kX(t,n);return OX(i)?(r[e]=i.value,!0):(console.warn(DX(`Invalid value passed for the ${e} option`,i)),!1)},a=(e,a)=>{let o=EX(a)?TX(a.processor):a.processor,s=AX(e,a.default,o);n[e]={...a,default:s,processor:o},qe(r,e).orThunk(()=>qe(t,e)).each(t=>i(e,t,o))},o=e=>Je(n,e);return{register:a,isRegistered:o,get:e=>qe(r,e).orThunk(()=>qe(n,e).map(e=>e.default)).getOrUndefined(),set:(e,t)=>{if(o(e)){let r=n[e];return r.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):i(e,t,r.processor)}else return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:e=>{let t=o(e);return t&&delete r[e],t},isSet:e=>Je(r,e)}},MX=[`design`,`readonly`],NX=(e,t,n,r)=>{let i=n[t.get()],a=n[r];try{a.activate()}catch(e){console.error(`problem while activating editor mode ${r}:`,e);return}i.deactivate(),i.editorReadOnly!==a.editorReadOnly&&rX(e,a.editorReadOnly),t.set(r),Vg(e,r)},PX=(e,t,n,r)=>{if(r!==n.get()){if(!Je(t,r))throw Error(`Editor mode '${r}' is invalid`);e.initialized?NX(e,n,t,r):e.on(`init`,()=>NX(e,n,t,r))}},FX=(e,t,n)=>{if(me(MX,t))throw Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}},IX=e=>{let t=Wc(`design`),n=Wc({design:{activate:D,deactivate:D,editorReadOnly:!1},readonly:{activate:D,deactivate:D,editorReadOnly:!0}});return oX(e),fX(e),{isReadOnly:()=>iX(e),set:r=>PX(e,n.get(),t,r),get:()=>t.get(),register:(e,t)=>{n.set(FX(n.get(),e,t))}}},LX=B.each,RX=B.explode,zX={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},BX=B.makeMap(`alt,ctrl,shift,meta,access`),VX=e=>e in BX,HX=e=>{let t={},n=fn.os.isMacOS()||fn.os.isiOS();LX(RX(e.toLowerCase(),`+`),e=>{VX(e)?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=zX[e]||e.toUpperCase().charCodeAt(0))});let r=[t.keyCode],i;for(i in BX)t[i]?r.push(i):t[i]=!1;return t.id=r.join(`,`),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class UX{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;let t=this;e.on(`keyup keypress keydown`,e=>{(t.hasModifier(e)||t.isFunctionKey(e))&&!e.isDefaultPrevented()&&(LX(t.shortcuts,n=>{t.matchShortcut(e,n)&&(t.pendingPatterns=n.subpatterns.slice(0),e.type===`keydown`&&t.executeShortcutAction(n))}),t.matchShortcut(e,t.pendingPatterns[0])&&(t.pendingPatterns.length===1&&e.type===`keydown`&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))})}add(e,t,n,r){let i=this,a=i.normalizeCommandFunc(n);return LX(RX(B.trim(e)),e=>{let n=i.createShortcut(e,t,a,r);i.shortcuts[n.id]=n}),!0}remove(e){let t=this.createShortcut(e);return this.shortcuts[t.id]?(delete this.shortcuts[t.id],!0):!1}normalizeCommandFunc(e){let t=this,n=e;return typeof n==`string`?()=>{t.editor.execCommand(n,!1,null)}:B.isArray(n)?()=>{t.editor.execCommand(n[0],n[1],n[2])}:n}createShortcut(e,t,n,r){let i=B.map(RX(e,`>`),HX);return i[i.length-1]=B.extend(i[i.length-1],{func:n,scope:r||this.editor}),B.extend(i[0],{desc:this.editor.translate(t),subpatterns:i.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return e.type===`keydown`&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!t||t.ctrl!==e.ctrlKey||t.meta!==e.metaKey||t.alt!==e.altKey||t.shift!==e.shiftKey?!1:e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode?(e.preventDefault(),!0):!1}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}let WX=()=>{let e={},t={},n={},r={},i={},a={},o={},s={},c=(e,t)=>(n,r)=>{e[n.toLowerCase()]={...r,type:t}};return{addButton:c(e,`button`),addGroupToolbarButton:c(e,`grouptoolbarbutton`),addToggleButton:c(e,`togglebutton`),addMenuButton:c(e,`menubutton`),addSplitButton:c(e,`splitbutton`),addMenuItem:c(t,`menuitem`),addNestedMenuItem:c(t,`nestedmenuitem`),addToggleMenuItem:c(t,`togglemenuitem`),addAutocompleter:c(n,`autocompleter`),addContextMenu:c(i,`contextmenu`),addContextToolbar:c(a,`contexttoolbar`),addContextForm:c(a,`contextform`),addSidebar:c(o,`sidebar`),addView:c(s,`views`),addIcon:(e,t)=>r[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:r,popups:n,contextMenus:i,contextToolbars:a,sidebars:o,views:s})}},GX=()=>{let e=WX();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},KX=Vc.DOM,qX=B.extend,JX=B.each;class YX{constructor(e,t,n){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent=``,this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,qX(this,CX);let r=this;this.id=e,this.hidden=!1;let i=ZJ(n.defaultOptions,t);this.options=jX(r,i),md(r);let a=this.options.get;a(`deprecation_warnings`)&&_j(t,i);let o=a(`suffix`);o&&(n.suffix=o),this.suffix=n.suffix;let s=a(`base_url`);s&&n._setBaseUrl(s),this.baseUri=n.baseURI;let c=Rd(r);c&&(Uc.ScriptLoader._setReferrerPolicy(c),Vc.DOM.styleSheetLoader._setReferrerPolicy(c));let l=yf(r);w(l)&&Vc.DOM.styleSheetLoader._setContentCssCors(l),Qc.languageLoad=a(`language_load`),Qc.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new rO(_d(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=uf(r),this.hasVisual=Cf(r),this.shortcuts=new UX(this),this.editorCommands=new JY(this),GY(this);let u=a(`cache_suffix`);u&&(fn.cacheSuffix=u.replace(/^[\?\&]+/,``)),this.ui={registry:GX(),styleSheetLoader:void 0,show:D,hide:D,setEnabled:D,isEnabled:N},this.mode=IX(r),n.dispatch(`SetupEditor`,{editor:this});let d=Df(r);T(d)&&d.call(r,r)}render(){MJ(this)}focus(e){this.execCommand(`mceFocus`,!1,e)}hasFocus(){return yy(this)}translate(e){return Zc.translate(e)}getParam(e,t,n){let r=this.options;return r.isRegistered(e)||(w(n)?r.register(e,{processor:n,default:t}):r.register(e,{processor:N,default:t})),!r.isSet(e)&&!C(t)?t:r.get(e)}hasPlugin(e,t){return me(bf(this),e)?t?Vj.get(e)!==void 0:!0:!1}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,n){this.editorCommands.addCommand(e,t,n)}addQueryStateHandler(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)}addQueryValueHandler(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)}addShortcut(e,t,n,r){this.shortcuts.add(e,t,n,r)}execCommand(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){let e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=`true`:(KX.show(e.getContainer()),KX.hide(e.id)),e.load(),e.dispatch(`show`))}hide(){let e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable=`false`,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(KX.hide(e.getContainer()),KX.setStyle(e.id,`display`,e.orgDisplay)),e.hidden=!0,e.dispatch(`hide`))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch(`ProgressState`,{state:e,time:t})}load(e={}){let t=this,n=t.getElement();if(t.removed)return``;if(n){let r={...e,load:!0},i=ga(n)?n.value:n.innerHTML,a=t.setContent(i,r);return r.no_events||t.dispatch(`LoadContent`,{...r,element:n}),a}else return``}save(e={}){let t=this,n=t.getElement();if(!n||!t.initialized||t.removed)return``;let r={...e,save:!0,element:n},i=t.getContent(r),a={...r,content:i};if(a.no_events||t.dispatch(`SaveContent`,a),a.format===`raw`&&t.dispatch(`RawSaveContent`,a),i=a.content,ga(n))n.value=i;else{(e.is_removing||!t.inline)&&(n.innerHTML=i);let r=KX.getParent(t.id,`form`);r&&JX(r.elements,e=>e.name===t.id?(e.value=i,!1):!0)}return a.element=r.element=n=null,a.set_dirty!==!1&&t.setDirty(!1),i}setContent(e,t){return rj(this,e,t)}getContent(e){return tj(this,e)}insertContent(e,t){t&&(e=qX({content:e},t)),this.execCommand(`mceInsertContent`,!1,e)}resetContent(e){e===void 0?rj(this,this.startContent,{format:`raw`}):rj(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){let t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch(`dirty`)}getContainer(){let e=this;return e.container||=e.editorContainer||KX.get(e.id+`_parent`),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||=KX.get(this.id),this.targetElm}getWin(){let e=this;if(!e.contentWindow){let t=e.iframeElement;t&&(e.contentWindow=t.contentWindow)}return e.contentWindow}getDoc(){let e=this;if(!e.contentDocument){let t=e.getWin();t&&(e.contentDocument=t.document)}return e.contentDocument}getBody(){let e=this.getDoc();return this.bodyElement??e?.body??null}convertURL(e,t,n){let r=this,i=r.options.get,a=kf(r);return T(a)?a.call(r,e,n,!0,t):!i(`convert_urls`)||n===`link`||y(n)&&n.nodeName===`LINK`||e.indexOf(`file:`)===0||e.length===0?e:i(`relative_urls`)?r.documentBaseURI.toRelative(e):(e=r.documentBaseURI.toAbsolute(e,i(`remove_script_host`)),e)}addVisual(e){QJ(this,e)}setEditableRoot(e){NJ(this,e)}hasEditableRoot(){return PJ(this)}remove(){Cj(this)}destroy(e){wj(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}let XX=Vc.DOM,ZX=B.each,QX=!1,$X,eZ=[],tZ=e=>{let t=e.type;ZX(oZ.get(),n=>{switch(t){case`scroll`:n.dispatch(`ScrollWindow`,e);break;case`resize`:n.dispatch(`ResizeWindow`,e);break}})},nZ=e=>{if(e!==QX){let t=Vc.DOM;e?(t.bind(window,`resize`,tZ),t.bind(window,`scroll`,tZ)):(t.unbind(window,`resize`,tZ),t.unbind(window,`scroll`,tZ)),QX=e}},rZ=e=>{let t=eZ;return eZ=I(eZ,t=>e!==t),oZ.activeEditor===e&&(oZ.activeEditor=eZ.length>0?eZ[0]:null),oZ.focusedEditor===e&&(oZ.focusedEditor=null),t.length!==eZ.length},iZ=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(rZ(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},aZ=document.compatMode!==`CSS1Compat`,oZ={...gX,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:`6`,minorVersion:`7.0`,releaseDate:`2023-08-30`,i18n:Zc,activeEditor:null,focusedEditor:null,setup(){let e=this,t=``,n=``,r=rO.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,``).replace(/[\/\\][^\/]+$/,``),/[\/\\]$/.test(r)||(r+=`/`));let i=window.tinymce||window.tinyMCEPreInit;if(i)t=i.base||i.baseURL,n=i.suffix;else{let e=document.getElementsByTagName(`script`);for(let r=0;r<e.length;r++){let i=e[r].src||``;if(i===``)continue;let a=i.substring(i.lastIndexOf(`/`));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(i)){a.indexOf(`.min`)!==-1&&(n=`.min`),t=i.substring(0,i.lastIndexOf(`/`));break}}if(!t&&document.currentScript){let e=document.currentScript.src;e.indexOf(`.min`)!==-1&&(n=`.min`),t=e.substring(0,e.lastIndexOf(`/`))}}e.baseURL=new rO(r).toAbsolute(t),e.documentBaseURL=r,e.baseURI=new rO(e.baseURL),e.suffix=n,ly(e)},overrideDefaults(e){let t=e.base_url;t&&this._setBaseUrl(t);let n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;let r=e.plugin_base_urls;r!==void 0&&ze(r,(e,t)=>{Qc.PluginManager.urls[t]=e})},init(e){let t=this,n,r=B.makeMap(`area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu`,` `),i=(e,t)=>e.inline&&t.tagName.toLowerCase()in r,a=e=>{let t=e.id;return t||(t=qe(e,`name`).filter(e=>!XX.get(e)).getOrThunk(XX.uniqueId),e.setAttribute(`id`,t)),t},o=n=>{let r=e[n];if(r)return r.apply(t,[])},s=e=>fn.browser.isIE()||fn.browser.isEdge()?(nM(`TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers`),[]):aZ?(nM(`Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode.`),[]):v(e.selector)?XX.select(e.selector):w(e.target)?[e.target]:[],c=e=>{n=e},l=()=>{let n=0,r=[],u,d=(e,i,a)=>{let o=new YX(e,i,t);r.push(o),o.on(`init`,()=>{++n===u.length&&c(r)}),o.targetElm=o.targetElm||a,o.render()};XX.unbind(window,`ready`,l),o(`onpageload`),u=Ie(s(e)),B.each(u,e=>{iZ(t.get(e.id))}),u=B.grep(u,e=>!t.get(e.id)),u.length===0?c([]):ZX(u,t=>{i(e,t)?nM(`Could not initialize inline editor on invalid inline target element`,t):d(a(t),e,t)})};return XX.bind(window,`ready`,l),new Promise(e=>{n?e(n):c=t=>{e(t)}})},get(e){return arguments.length===0?eZ.slice(0):v(e)?Se(eZ,t=>t.id===e).getOr(null):E(e)&&eZ[e]?eZ[e]:null},add(e){let t=this,n=t.get(e.id);return n===e?e:(n===null&&eZ.push(e),nZ(!0),t.activeEditor=e,t.dispatch(`AddEditor`,{editor:e}),$X||($X=e=>{let n=t.dispatch(`BeforeUnload`);if(n.returnValue)return e.preventDefault(),e.returnValue=n.returnValue,n.returnValue},window.addEventListener(`beforeunload`,$X)),e)},createEditor(e,t){return this.add(new YX(e,t,this))},remove(e){let t=this,n;if(!e){for(let e=eZ.length-1;e>=0;e--)t.remove(eZ[e]);return}if(v(e)){ZX(XX.select(e),e=>{n=t.get(e.id),n&&t.remove(n)});return}return n=e,ee(t.get(n.id))?null:(rZ(n)&&t.dispatch(`RemoveEditor`,{editor:n}),eZ.length===0&&window.removeEventListener(`beforeunload`,$X),n.remove(),nZ(eZ.length>0),n)},execCommand(e,t,n){let r=this,i=y(n)?n.id??n.index:n;switch(e){case`mceAddEditor`:if(!r.get(i)){let e=n.options;new YX(i,e,r).render()}return!0;case`mceRemoveEditor`:{let e=r.get(i);return e&&e.remove(),!0}case`mceToggleEditor`:{let e=r.get(i);return e?(e.isHidden()?e.show():e.hide(),!0):(r.execCommand(`mceAddEditor`,!1,n),!0)}}return r.activeEditor?r.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{ZX(eZ,e=>{e.save()})},addI18n:(e,t)=>{Zc.add(e,t)},translate:e=>Zc.translate(e),setActive(e){let t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch(`deactivate`,{relatedTarget:e}),e.dispatch(`activate`,{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new rO(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,``)),this.baseURI=new rO(this.baseURL)}};oZ.setup();let sZ=(()=>{let e=tl();return{FakeClipboardItem:e=>({items:e,types:Le(e),getType:t=>qe(e,t).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),cZ=Math.min,lZ=Math.max,uZ=Math.round,dZ=(e,t,n)=>{let r=t.x,i=t.y,a=e.w,o=e.h,s=t.w,c=t.h,l=(n||``).split(``);return l[0]===`b`&&(i+=c),l[1]===`r`&&(r+=s),l[0]===`c`&&(i+=uZ(c/2)),l[1]===`c`&&(r+=uZ(s/2)),l[3]===`b`&&(i-=o),l[4]===`r`&&(r-=a),l[3]===`c`&&(i-=uZ(o/2)),l[4]===`c`&&(r-=uZ(a/2)),gZ(r,i,a,o)},fZ=(e,t,n,r)=>{for(let i=0;i<r.length;i++){let a=dZ(e,t,r[i]);if(a.x>=n.x&&a.x+a.w<=n.w+n.x&&a.y>=n.y&&a.y+a.h<=n.h+n.y)return r[i]}return null},pZ=(e,t,n)=>gZ(e.x-t,e.y-n,e.w+t*2,e.h+n*2),mZ=(e,t)=>{let n=lZ(e.x,t.x),r=lZ(e.y,t.y),i=cZ(e.x+e.w,t.x+t.w),a=cZ(e.y+e.h,t.y+t.h);return i-n<0||a-r<0?null:gZ(n,r,i-n,a-r)},hZ=(e,t,n)=>{let r=e.x,i=e.y,a=e.x+e.w,o=e.y+e.h,s=t.x+t.w,c=t.y+t.h,l=lZ(0,t.x-r),u=lZ(0,t.y-i),d=lZ(0,a-s),f=lZ(0,o-c);return r+=l,i+=u,n&&(a+=l,o+=u,r-=d,i-=f),a-=d,o-=f,gZ(r,i,a-r,o-i)},gZ=(e,t,n,r)=>({x:e,y:t,w:n,h:r}),_Z={inflate:pZ,relativePosition:dZ,findBestRelativePosition:fZ,intersect:mZ,clamp:hZ,create:gZ,fromClientRect:e=>gZ(e.left,e.top,e.width,e.height)},vZ=(e,t,n=1e3)=>{let r=!1,i=null,a=e=>(...t)=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),e.apply(null,t))},o=a(e),s=a(t);return{start:(...e)=>{!r&&i===null&&(i=setTimeout(()=>s.apply(null,e),n))},resolve:o,reject:s}},yZ=(()=>{let e={},t={};return{load:(n,r)=>{let i=`Script at URL "${r}" failed to load`,a=`Script at URL "${r}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(e[n]!==void 0)return e[n];{let o=new Promise((e,o)=>{let s=vZ(e,o);t[n]=s.resolve,Uc.ScriptLoader.loadScript(r).then(()=>s.start(a),()=>s.reject(i))});return e[n]=o,o}},add:(n,r)=>{t[n]!==void 0&&(t[n](r),delete t[n]),e[n]=Promise.resolve(r)},unload:t=>{delete e[t]}}})(),bZ=()=>(()=>{let e={},t=[],n={getItem:t=>e[t]||null,setItem:(n,r)=>{t.push(n),e[n]=String(r)},key:e=>t[e],removeItem:n=>{t=t.filter(e=>e===n),delete e[n]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,`length`,{get:()=>t.length,configurable:!1,enumerable:!1}),n})(),xZ;try{let e=`__storage_test__`;xZ=window.localStorage,xZ.setItem(e,e),xZ.removeItem(e)}catch{xZ=bZ()}let SZ={geom:{Rect:_Z},util:{Delay:Yv,Tools:B,VK:$,URI:rO,EventDispatcher:mX,Observable:gX,I18n:Zc,LocalStorage:xZ,ImageUploader:vM},dom:{EventUtils:kc,TreeWalker:ia,TextSeeker:kl,DOMUtils:Vc,ScriptLoader:Uc,RangeUtils:$_,Serializer:$A,StyleSheetLoader:Ds,ControlSelection:p_,BookmarkManager:Fg,Selection:BA,Event:kc.Event},html:{Styles:gc,Entities:Zs,Node:Yy,Schema:hc,DomParser:xO,Writer:lb,Serializer:ub},Env:fn,AddOnManager:Qc,Annotator:Pg,Formatter:FM,UndoManager:zM,EditorCommands:JY,WindowManager:Wj,NotificationManager:Bj,EditorObservable:CX,Shortcuts:UX,Editor:YX,FocusManager:Kv,EditorManager:oZ,DOM:Vc.DOM,ScriptLoader:Uc.ScriptLoader,PluginManager:Vj,ThemeManager:Hj,ModelManager:Ej,IconManager:Tj,Resource:yZ,FakeClipboard:sZ,trim:B.trim,isArray:B.isArray,is:B.is,toArray:B.toArray,makeMap:B.makeMap,each:B.each,map:B.map,grep:B.grep,inArray:B.inArray,extend:B.extend,walk:B.walk,resolve:B.resolve,explode:B.explode,_addCacheSuffix:B._addCacheSuffix},CZ=B.extend(oZ,SZ);(e=>{window.tinymce=e,window.tinyMCE=e})(CZ),(e=>{if(typeof t==`object`)try{t.exports=e}catch{}})(CZ)})()})),u=o((()=>{tinymce.IconManager.add(`default`,{icons:{"accessibility-check":`<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>`,"accordion-toggle":`<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>`,accordion:`<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>`,"action-next":`<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>`,"action-prev":`<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>`,addtag:`<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>`,"ai-prompt":`<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>`,ai:`<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>`,"align-center":`<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>`,"align-justify":`<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>`,"align-left":`<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>`,"align-none":`<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>`,"align-right":`<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>`,"arrow-left":`<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>`,"arrow-right":`<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>`,bold:`<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>`,bookmark:`<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>`,"border-style":`<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>`,"border-width":`<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>`,brightness:`<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>`,browse:`<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>`,cancel:`<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>`,"cell-background-color":`<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>`,"cell-border-color":`<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>`,"change-case":`<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>`,"character-count":`<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>`,"checklist-rtl":`<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>`,checklist:`<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>`,checkmark:`<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>`,"chevron-down":`<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>`,"chevron-left":`<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>`,"chevron-right":`<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>`,"chevron-up":`<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>`,close:`<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>`,"code-sample":`<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>`,"color-levels":`<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>`,"color-picker":`<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>`,"color-swatch-remove-color":`<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>`,"color-swatch":`<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>`,"comment-add":`<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>`,comment:`<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>`,contrast:`<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>`,copy:`<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>`,crop:`<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>`,"cut-column":`<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>`,"cut-row":`<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>`,cut:`<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>`,"document-properties":`<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>`,drag:`<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>`,"duplicate-column":`<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>`,"duplicate-row":`<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>`,duplicate:`<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>`,"edit-block":`<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>`,"edit-image":`<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>`,"embed-page":`<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>`,embed:`<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>`,emoji:`<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>`,export:`<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>`,fill:`<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>`,"flip-horizontally":`<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>`,"flip-vertically":`<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>`,footnote:`<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>`,"format-painter":`<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>`,format:`<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>`,fullscreen:`<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>`,gallery:`<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>`,gamma:`<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>`,help:`<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>`,"highlight-bg-color":`<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>`,home:`<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>`,"horizontal-rule":`<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>`,"image-options":`<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>`,image:`<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>`,indent:`<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>`,info:`<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>`,"insert-character":`<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>`,"insert-time":`<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>`,invert:`<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>`,italic:`<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>`,language:`<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>`,"line-height":`<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>`,line:`<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>`,link:`<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>`,"list-bull-circle":`<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>`,"list-bull-default":`<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>`,"list-bull-square":`<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>`,"list-num-default-rtl":`<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>`,"list-num-default":`<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>`,"list-num-lower-alpha-rtl":`<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>`,"list-num-lower-alpha":`<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>`,"list-num-lower-greek-rtl":`<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>`,"list-num-lower-greek":`<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>`,"list-num-lower-roman-rtl":`<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>`,"list-num-lower-roman":`<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>`,"list-num-upper-alpha-rtl":`<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>`,"list-num-upper-alpha":`<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>`,"list-num-upper-roman-rtl":`<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>`,"list-num-upper-roman":`<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>`,lock:`<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>`,ltr:`<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>`,minus:`<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>`,"more-drawer":`<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>`,"new-document":`<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>`,"new-tab":`<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>`,"non-breaking":`<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>`,notice:`<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>`,"ordered-list-rtl":`<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>`,"ordered-list":`<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>`,orientation:`<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>`,outdent:`<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>`,"page-break":`<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>`,paragraph:`<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>`,"paste-column-after":`<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>`,"paste-column-before":`<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>`,"paste-row-after":`<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>`,"paste-row-before":`<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>`,"paste-text":`<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>`,paste:`<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>`,"permanent-pen":`<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>`,plus:`<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>`,preferences:`<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>`,preview:`<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>`,print:`<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>`,quote:`<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>`,redo:`<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>`,reload:`<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>`,"remove-formatting":`<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>`,remove:`<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>`,"resize-handle":`<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>`,resize:`<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>`,"restore-draft":`<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>`,"rotate-left":`<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>`,"rotate-right":`<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>`,rtl:`<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>`,save:`<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>`,search:`<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>`,"select-all":`<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>`,selected:`<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>`,send:`<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>`,settings:`<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>`,sharpen:`<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>`,sourcecode:`<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>`,"spell-check":`<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>`,"strike-through":`<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>`,subscript:`<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>`,superscript:`<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>`,"table-caption":`<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>`,"table-cell-classes":`<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>`,"table-cell-properties":`<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>`,"table-cell-select-all":`<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>`,"table-cell-select-inner":`<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>`,"table-classes":`<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>`,"table-delete-column":`<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>`,"table-delete-row":`<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>`,"table-delete-table":`<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>`,"table-insert-column-after":`<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>`,"table-insert-column-before":`<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>`,"table-insert-row-above":`<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>`,"table-insert-row-after":`<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>`,"table-left-header":`<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>`,"table-merge-cells":`<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>`,"table-row-numbering-rtl":`<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>`,"table-row-numbering":`<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>`,"table-row-properties":`<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>`,"table-split-cells":`<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>`,"table-top-header":`<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>`,table:`<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>`,"template-add":`<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>`,template:`<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>`,"temporary-placeholder":`<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>`,"text-color":`<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>`,"text-size-decrease":`<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>`,"text-size-increase":`<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>`,toc:`<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>`,translate:`<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>`,typography:`<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>`,underline:`<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>`,undo:`<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>`,unlink:`<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>`,unlock:`<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>`,"unordered-list":`<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>`,unselected:`<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>`,upload:`<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>`,user:`<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>`,"vertical-align":`<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>`,visualblocks:`<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>`,visualchars:`<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>`,warning:`<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>`,"zoom-in":`<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>`,"zoom-out":`<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>`}})})),d=c(l(),1);u(),o((()=>{(function(){"use strict";var e=tinymce.util.Tools.resolve(`tinymce.ModelManager`);let t=(e,t,n)=>n(e,t.prototype)?!0:e.constructor?.name===t.name,n=e=>{let n=typeof e;return e===null?`null`:n===`object`&&Array.isArray(e)?`array`:n===`object`&&t(e,String,(e,t)=>t.isPrototypeOf(e))?`string`:n},r=e=>t=>n(t)===e,i=e=>t=>typeof t===e,a=e=>t=>e===t,o=r(`string`),s=r(`object`),c=r(`array`),l=a(null),u=i(`boolean`),d=a(void 0),f=e=>e==null,p=e=>!f(e),m=i(`function`),h=i(`number`),g=()=>{},_=(e,t)=>(...n)=>e(t.apply(null,n)),v=(e,t)=>n=>e(t(n)),y=e=>()=>e,b=e=>e,x=(e,t)=>e===t;function ee(e,...t){return(...n)=>{let r=t.concat(n);return e.apply(null,r)}}let S=e=>t=>!e(t),C=e=>()=>{throw Error(e)},te=e=>e(),w=y(!1),T=y(!0);class E{constructor(e,t){this.tag=e,this.value=t}static some(e){return new E(!0,e)}static none(){return E.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?E.some(e(this.value)):E.none()}bind(e){return this.tag?e(this.value):E.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:E.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(e??`Called getOrDie on None`)}static from(e){return p(e)?E.some(e):E.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:`none()`}}E.singletonNone=new E(!1);let ne=Array.prototype.slice,D=Array.prototype.indexOf,re=Array.prototype.push,O=(e,t)=>D.call(e,t),k=(e,t)=>O(e,t)>-1,ie=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];if(t(r,n))return!0}return!1},ae=(e,t)=>{let n=[];for(let r=0;r<e;r++)n.push(t(r));return n},A=(e,t)=>{let n=e.length,r=Array(n);for(let i=0;i<n;i++){let n=e[i];r[i]=t(n,i)}return r},j=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];t(r,n)}},oe=(e,t)=>{for(let n=e.length-1;n>=0;n--){let r=e[n];t(r,n)}},se=(e,t)=>{let n=[],r=[];for(let i=0,a=e.length;i<a;i++){let a=e[i];(t(a,i)?n:r).push(a)}return{pass:n,fail:r}},ce=(e,t)=>{let n=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];t(i,r)&&n.push(i)}return n},M=(e,t,n)=>(oe(e,(e,r)=>{n=t(n,e,r)}),n),N=(e,t,n)=>(j(e,(e,r)=>{n=t(n,e,r)}),n),P=(e,t,n)=>{for(let r=0,i=e.length;r<i;r++){let i=e[r];if(t(i,r))return E.some(i);if(n(i,r))break}return E.none()},le=(e,t)=>P(e,t,w),ue=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];if(t(r,n))return E.some(n)}return E.none()},de=e=>{let t=[];for(let n=0,r=e.length;n<r;++n){if(!c(e[n]))throw Error(`Arr.flatten item `+n+` was not an array, input: `+e);re.apply(t,e[n])}return t},fe=(e,t)=>de(A(e,t)),pe=(e,t)=>{for(let n=0,r=e.length;n<r;++n){let r=e[n];if(t(r,n)!==!0)return!1}return!0},me=e=>{let t=ne.call(e,0);return t.reverse(),t},he=(e,t)=>{let n={};for(let r=0,i=e.length;r<i;r++){let i=e[r];n[String(i)]=t(i,r)}return n},ge=(e,t)=>{let n=ne.call(e,0);return n.sort(t),n},F=(e,t)=>t>=0&&t<e.length?E.some(e[t]):E.none(),_e=e=>F(e,0),ve=e=>F(e,e.length-1),I=(e,t)=>{for(let n=0;n<e.length;n++){let r=t(e[n],n);if(r.isSome())return r}return E.none()},ye=Object.keys,be=Object.hasOwnProperty,xe=(e,t)=>{let n=ye(e);for(let r=0,i=n.length;r<i;r++){let i=n[r],a=e[i];t(a,i)}},Se=(e,t)=>Ce(e,(e,n)=>({k:n,v:t(e,n)})),Ce=(e,t)=>{let n={};return xe(e,(e,r)=>{let i=t(e,r);n[i.k]=i.v}),n},we=e=>(t,n)=>{e[n]=t},Te=(e,t,n,r)=>{xe(e,(e,i)=>{(t(e,i)?n:r)(e,i)})},Ee=(e,t)=>{let n={};return Te(e,t,we(n),g),n},De=(e,t)=>{let n=[];return xe(e,(e,r)=>{n.push(t(e,r))}),n},Oe=e=>De(e,b),ke=(e,t)=>Ae(e,t)?E.from(e[t]):E.none(),Ae=(e,t)=>be.call(e,t),je=(e,t)=>Ae(e,t)&&e[t]!==void 0&&e[t]!==null,Me=e=>{for(let t in e)if(be.call(e,t))return!1;return!0},Ne=typeof window<`u`?window:Function(`return this;`)(),Pe=(e,t)=>{let n=t??Ne;for(let t=0;t<e.length&&n!=null;++t)n=n[e[t]];return n},Fe=(e,t)=>Pe(e.split(`.`),t),Ie=(e,t)=>Fe(e,t),Le=(e,t)=>{let n=Ie(e,t);if(n==null)throw Error(e+` not available on this browser`);return n},Re=Object.getPrototypeOf,ze=e=>Le(`HTMLElement`,e),L=e=>{let t=Fe(`ownerDocument.defaultView`,e);return s(e)&&(ze(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Re(e).constructor.name))},Be=e=>e.dom.nodeName.toLowerCase(),Ve=e=>e.dom.nodeType,He=e=>t=>Ve(t)===e,Ue=e=>Ve(e)===8||Be(e)===`#comment`,We=e=>Ge(e)&&L(e.dom),Ge=He(1),Ke=He(3),qe=He(9),Je=He(11),Ye=e=>t=>Ge(t)&&Be(t)===e,Xe=(e,t,n)=>{if(o(n)||u(n)||h(n))e.setAttribute(t,n+``);else throw console.error(`Invalid call to Attribute.set. Key `,t,`:: Value `,n,`:: Element `,e),Error(`Attribute value was not simple`)},Ze=(e,t,n)=>{Xe(e.dom,t,n)},Qe=(e,t)=>{let n=e.dom;xe(t,(e,t)=>{Xe(n,t,e)})},$e=(e,t)=>{xe(t,(t,n)=>{t.fold(()=>{nt(e,n)},t=>{Xe(e.dom,n,t)})})},et=(e,t)=>{let n=e.dom.getAttribute(t);return n===null?void 0:n},tt=(e,t)=>E.from(et(e,t)),nt=(e,t)=>{e.dom.removeAttribute(t)},rt=e=>N(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),it=(e,t)=>{let n=(t||document).createElement(`div`);if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){let t=`HTML does not have a single root node`;throw console.error(t,e),Error(t)}return st(n.childNodes[0])},at=(e,t)=>st((t||document).createElement(e)),ot=(e,t)=>st((t||document).createTextNode(e)),st=e=>{if(e==null)throw Error(`Node cannot be null or undefined`);return{dom:e}},R={fromHtml:it,fromTag:at,fromText:ot,fromDom:st,fromPoint:(e,t,n)=>E.from(e.dom.elementFromPoint(t,n)).map(st)},ct=(e,t)=>{let n=e.dom;if(n.nodeType!==1)return!1;{let e=n;if(e.matches!==void 0)return e.matches(t);if(e.msMatchesSelector!==void 0)return e.msMatchesSelector(t);if(e.webkitMatchesSelector!==void 0)return e.webkitMatchesSelector(t);if(e.mozMatchesSelector!==void 0)return e.mozMatchesSelector(t);throw Error(`Browser lacks native selectors`)}},lt=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,ut=(e,t)=>{let n=t===void 0?document:t.dom;return lt(n)?[]:A(n.querySelectorAll(e),R.fromDom)},z=(e,t)=>{let n=t===void 0?document:t.dom;return lt(n)?E.none():E.from(n.querySelector(e)).map(R.fromDom)},dt=(e,t)=>e.dom===t.dom,ft=(e,t)=>{let n=e.dom,r=t.dom;return n===r?!1:n.contains(r)},pt=ct,mt=e=>R.fromDom(e.dom.ownerDocument),ht=e=>qe(e)?e:mt(e),gt=e=>R.fromDom(ht(e).dom.documentElement),_t=e=>R.fromDom(ht(e).dom.defaultView),vt=e=>E.from(e.dom.parentNode).map(R.fromDom),yt=e=>E.from(e.dom.parentElement).map(R.fromDom),bt=(e,t)=>{let n=m(t)?t:w,r=e.dom,i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){let e=r.parentNode,t=R.fromDom(e);if(i.push(t),n(t)===!0)break;r=e}return i},xt=e=>E.from(e.dom.previousSibling).map(R.fromDom),St=e=>E.from(e.dom.nextSibling).map(R.fromDom),Ct=e=>A(e.dom.childNodes,R.fromDom),wt=(e,t)=>{let n=e.dom.childNodes;return E.from(n[t]).map(R.fromDom)},Tt=e=>wt(e,0),Et=(e,t)=>{vt(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},Dt=(e,t)=>{St(e).fold(()=>{vt(e).each(e=>{kt(e,t)})},e=>{Et(e,t)})},Ot=(e,t)=>{Tt(e).fold(()=>{kt(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},kt=(e,t)=>{e.dom.appendChild(t.dom)},At=(e,t,n)=>{wt(e,n).fold(()=>{kt(e,t)},e=>{Et(e,t)})},jt=(e,t)=>{Et(e,t),kt(t,e)},Mt=(e,t)=>{j(t,(n,r)=>{Dt(r===0?e:t[r-1],n)})},Nt=(e,t)=>{j(t,t=>{kt(e,t)})},Pt=e=>{e.dom.textContent=``,j(Ct(e),e=>{Ft(e)})},Ft=e=>{let t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},It=e=>{let t=Ct(e);t.length>0&&Mt(e,t),Ft(e)},Lt=(e,t)=>R.fromDom(e.dom.cloneNode(t)),Rt=e=>Lt(e,!1),zt=e=>Lt(e,!0),Bt=(e,t)=>{let n=R.fromTag(t);return Qe(n,rt(e)),n},Vt=(e,t)=>{let n=Bt(e,t);return Nt(n,Ct(zt(e))),n},Ht=(e,t)=>{let n=Bt(e,t);return Dt(e,n),Nt(n,Ct(e)),Ft(e),n},Ut=[`tfoot`,`thead`,`tbody`,`colgroup`],Wt=e=>k(Ut,e),Gt=(e,t)=>({rows:e,columns:t}),Kt=(e,t)=>({row:e,column:t}),qt=(e,t,n)=>({element:e,rowspan:t,colspan:n}),Jt=(e,t,n,r)=>({element:e,rowspan:t,colspan:n,isNew:r}),Yt=(e,t,n,r,i,a)=>({element:e,rowspan:t,colspan:n,row:r,column:i,isLocked:a}),Xt=(e,t,n)=>({element:e,cells:t,section:n}),Zt=(e,t,n,r)=>({element:e,cells:t,section:n,isNew:r}),Qt=(e,t,n)=>({element:e,isNew:t,isLocked:n}),$t=(e,t,n,r)=>({element:e,cells:t,section:n,isNew:r}),en=(e,t,n,r)=>({startRow:e,startCol:t,finishRow:n,finishCol:r}),tn=(e,t,n)=>({element:e,colspan:t,column:n}),nn=(e,t)=>({element:e,columns:t}),rn=e=>Je(e)&&p(e.dom.host),an=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode),on=y(an),sn=an?e=>R.fromDom(e.dom.getRootNode()):ht,cn=e=>{let t=sn(e);return rn(t)?E.some(t):E.none()},ln=e=>R.fromDom(e.dom.host),un=e=>{if(on()&&p(e.target)){let t=R.fromDom(e.target);if(Ge(t)&&dn(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return _e(t)}}return E.from(e.target)},dn=e=>p(e.dom.shadowRoot),fn=e=>{let t=Ke(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;let n=t.ownerDocument;return cn(R.fromDom(t)).fold(()=>n.body.contains(t),v(fn,ln))},pn=()=>mn(R.fromDom(document)),mn=e=>{let t=e.dom.body;if(t==null)throw Error(`Body is not available yet`);return R.fromDom(t)},hn=(e,t,n)=>ce(bt(e,n),t),gn=(e,t)=>ce(Ct(e),t),_n=(e,t)=>{let n=[];return j(Ct(e),e=>{t(e)&&(n=n.concat([e])),n=n.concat(_n(e,t))}),n},vn=(e,t,n)=>hn(e,e=>ct(e,t),n),yn=(e,t)=>gn(e,e=>ct(e,t)),B=(e,t)=>ut(t,e);var bn=(e,t,n,r,i)=>e(n,r)?E.some(n):m(i)&&i(n)?E.none():t(n,r,i);let xn=(e,t,n)=>{let r=e.dom,i=m(n)?n:w;for(;r.parentNode;){r=r.parentNode;let e=R.fromDom(r);if(t(e))return E.some(e);if(i(e))break}return E.none()},Sn=(e,t,n)=>bn((e,t)=>t(e),xn,e,t,n),Cn=(e,t)=>le(e.dom.childNodes,e=>t(R.fromDom(e))).map(R.fromDom),wn=(e,t)=>{let n=e=>{for(let r=0;r<e.childNodes.length;r++){let i=R.fromDom(e.childNodes[r]);if(t(i))return E.some(i);let a=n(e.childNodes[r]);if(a.isSome())return a}return E.none()};return n(e.dom)},Tn=(e,t,n)=>xn(e,e=>ct(e,t),n),En=(e,t)=>Cn(e,e=>ct(e,t)),Dn=(e,t)=>z(t,e),On=(e,t,n)=>bn((e,t)=>ct(e,t),Tn,e,t,n),kn=(e,t,n=x)=>e.exists(e=>n(e,t)),An=e=>{let t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},jn=(e,t)=>e==null?E.none():t(e),Mn=(e,t)=>e?E.some(t):E.none(),Nn=(e,t,n)=>t===``||e.length>=t.length&&e.substr(n,n+t.length)===t,Pn=(e,t,n=0,r)=>{let i=e.indexOf(t,n);return i===-1?!1:d(r)?!0:i+t.length<=r},Fn=(e,t)=>Nn(e,t,0),In=(e,t)=>Nn(e,t,e.length-t.length),Ln=(e=>t=>t.replace(e,``))(/^\s+|\s+$/g),Rn=e=>e.length>0,zn=e=>{let t=parseFloat(e);return isNaN(t)?E.none():E.some(t)},Bn=e=>e.style!==void 0&&m(e.style.getPropertyValue),Vn=(e,t,n)=>{if(!o(n))throw console.error(`Invalid call to CSS.set. Property `,t,`:: Value `,n,`:: Element `,e),Error(`CSS value must be a string: `+n);Bn(e)&&e.style.setProperty(t,n)},Hn=(e,t)=>{Bn(e)&&e.style.removeProperty(t)},Un=(e,t,n)=>{let r=e.dom;Vn(r,t,n)},Wn=(e,t)=>{let n=e.dom;xe(t,(e,t)=>{Vn(n,t,e)})},Gn=(e,t)=>{let n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return r===``&&!fn(e)?Kn(n,t):r},Kn=(e,t)=>Bn(e)?e.style.getPropertyValue(t):``,qn=(e,t)=>{let n=e.dom,r=Kn(n,t);return E.from(r).filter(e=>e.length>0)},Jn=(e,t)=>{let n=e.dom;Hn(n,t),kn(tt(e,`style`).map(Ln),``)&&nt(e,`style`)},Yn=(e,t)=>{let n=e.dom,r=t.dom;Bn(n)&&Bn(r)&&(r.style.cssText=n.style.cssText)},Xn=(e,t,n=0)=>tt(e,t).map(e=>parseInt(e,10)).getOr(n),Zn=(e,t)=>Xn(e,t,1),Qn=e=>Ye(`col`)(e)?Xn(e,`span`,1)>1:Zn(e,`colspan`)>1,$n=e=>Zn(e,`rowspan`)>1,er=(e,t)=>parseInt(Gn(e,t),10),tr=y(10),nr=y(10),rr=(e,t)=>ir(e,t,T),ir=(e,t,n)=>fe(Ct(e),e=>ct(e,t)?n(e)?[e]:[]:ir(e,t,n)),ar=(e,t,n=w)=>n(t)?E.none():k(e,Be(t))?E.some(t):Tn(t,e.join(`,`),e=>ct(e,`table`)||n(e)),or=(e,t)=>ar([`td`,`th`],e,t),sr=e=>rr(e,`th,td`),cr=e=>ct(e,`colgroup`)?yn(e,`col`):fe(dr(e),e=>yn(e,`col`)),lr=(e,t)=>On(e,`table`,t),ur=e=>rr(e,`tr`),dr=e=>lr(e).fold(y([]),e=>yn(e,`colgroup`)),fr=(e,t)=>A(e,e=>Be(e)===`colgroup`?Xt(e,A(cr(e),e=>qt(e,1,Xn(e,`span`,1))),`colgroup`):Xt(e,A(sr(e),e=>qt(e,Xn(e,`rowspan`,1),Xn(e,`colspan`,1))),t(e))),pr=e=>vt(e).map(e=>{let t=Be(e);return Wt(t)?t:`tbody`}).getOr(`tbody`),mr=e=>{let t=ur(e);return fr([...dr(e),...t],pr)},hr=(e,t)=>fr(e,()=>t),V=e=>{let t=!1,n;return(...r)=>(t||(t=!0,n=e.apply(null,r)),n)},gr=(e,t,n,r)=>{let i=e.isiOS()&&/ipad/i.test(n)===!0,a=e.isiOS()&&!i,o=e.isiOS()||e.isAndroid(),s=o||r(`(pointer:coarse)`),c=i||!a&&o&&r(`(min-device-width:768px)`),l=a||o&&!c,u=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,d=!l&&!c&&!u;return{isiPad:y(i),isiPhone:y(a),isTablet:y(c),isPhone:y(l),isTouch:y(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:y(u),isDesktop:y(d)}},_r=(e,t)=>{for(let n=0;n<e.length;n++){let r=e[n];if(r.test(t))return r}},vr=(e,t)=>{let n=_r(e,t);if(!n)return{major:0,minor:0};let r=e=>Number(t.replace(n,`$`+e));return xr(r(1),r(2))},yr=(e,t)=>{let n=String(t).toLowerCase();return e.length===0?br():vr(e,n)},br=()=>xr(0,0),xr=(e,t)=>({major:e,minor:t}),Sr={nu:xr,detect:yr,unknown:br},Cr=(e,t)=>I(t.brands,t=>{let n=t.brand.toLowerCase();return le(e,e=>n===e.brand?.toLowerCase()).map(e=>({current:e.name,version:Sr.nu(parseInt(t.version,10),0)}))}),wr=(e,t)=>{let n=String(t).toLowerCase();return le(e,e=>e.search(n))},Tr=(e,t)=>wr(e,t).map(e=>{let n=Sr.detect(e.versionRegexes,t);return{current:e.name,version:n}}),Er=(e,t)=>wr(e,t).map(e=>{let n=Sr.detect(e.versionRegexes,t);return{current:e.name,version:n}}),Dr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Or=e=>t=>Pn(t,e),kr=[{name:`Edge`,versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Pn(e,`edge/`)&&Pn(e,`chrome`)&&Pn(e,`safari`)&&Pn(e,`applewebkit`)},{name:`Chromium`,brand:`Chromium`,versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Dr],search:e=>Pn(e,`chrome`)&&!Pn(e,`chromeframe`)},{name:`IE`,versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Pn(e,`msie`)||Pn(e,`trident`)},{name:`Opera`,versionRegexes:[Dr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Or(`opera`)},{name:`Firefox`,versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Or(`firefox`)},{name:`Safari`,versionRegexes:[Dr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Pn(e,`safari`)||Pn(e,`mobile/`))&&Pn(e,`applewebkit`)}],Ar=[{name:`Windows`,search:Or(`win`),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:`iOS`,search:e=>Pn(e,`iphone`)||Pn(e,`ipad`),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:`Android`,search:Or(`android`),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:`macOS`,search:Or(`mac os x`),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:`Linux`,search:Or(`linux`),versionRegexes:[]},{name:`Solaris`,search:Or(`sunos`),versionRegexes:[]},{name:`FreeBSD`,search:Or(`freebsd`),versionRegexes:[]},{name:`ChromeOS`,search:Or(`cros`),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],jr={browsers:y(kr),oses:y(Ar)},Mr=`Edge`,Nr=`Chromium`,Pr=`Opera`,Fr=`Firefox`,Ir=`Safari`,Lr=()=>Rr({current:void 0,version:Sr.unknown()}),Rr=e=>{let t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isEdge:r(Mr),isChromium:r(Nr),isIE:r(`IE`),isOpera:r(Pr),isFirefox:r(Fr),isSafari:r(Ir)}},zr={unknown:Lr,nu:Rr,edge:y(Mr),chromium:y(Nr),ie:y(`IE`),opera:y(Pr),firefox:y(Fr),safari:y(Ir)},Br=`Windows`,Vr=`Android`,Hr=`Linux`,Ur=`macOS`,Wr=`Solaris`,Gr=`FreeBSD`,Kr=`ChromeOS`,qr=()=>Jr({current:void 0,version:Sr.unknown()}),Jr=e=>{let t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isWindows:r(Br),isiOS:r(`iOS`),isAndroid:r(Vr),isMacOS:r(Ur),isLinux:r(Hr),isSolaris:r(Wr),isFreeBSD:r(Gr),isChromeOS:r(Kr)}},Yr={unknown:qr,nu:Jr,windows:y(Br),ios:y(`iOS`),android:y(Vr),linux:y(Hr),macos:y(Ur),solaris:y(Wr),freebsd:y(Gr),chromeos:y(Kr)},Xr={detect:(e,t,n)=>{let r=jr.browsers(),i=jr.oses(),a=t.bind(e=>Cr(r,e)).orThunk(()=>Tr(r,e)).fold(zr.unknown,zr.nu),o=Er(i,e).fold(Yr.unknown,Yr.nu);return{browser:a,os:o,deviceType:gr(o,a,e,n)}}},Zr=e=>window.matchMedia(e).matches,Qr=V(()=>Xr.detect(navigator.userAgent,E.from(navigator.userAgentData),Zr)),$r=()=>Qr(),ei=(e,t)=>{let n=(t,n)=>{if(!h(n)&&!n.match(/^[0-9]+$/))throw Error(e+`.set accepts only positive integer values. Value was `+n);let r=t.dom;Bn(r)&&(r.style[e]=n+`px`)},r=n=>{let r=t(n);if(r<=0||r===null){let t=Gn(n,e);return parseFloat(t)||0}return r},i=r,a=(e,t)=>N(t,(t,n)=>{let r=Gn(e,n),i=r===void 0?0:parseInt(r,10);return isNaN(i)?t:t+i},0);return{set:n,get:r,getOuter:i,aggregate:a,max:(e,t,n)=>{let r=a(e,n);return t>r?t-r:0}}},ti=(e,t)=>zn(e).getOr(t),ni=(e,t,n)=>ti(Gn(e,t),n),ri=(e,t,n,r)=>{let i=ni(e,`padding-${n}`,0),a=ni(e,`padding-${r}`,0),o=ni(e,`border-${n}-width`,0),s=ni(e,`border-${r}-width`,0);return t-i-a-o-s},ii=(e,t)=>{let n=e.dom,r=n.getBoundingClientRect().width||n.offsetWidth;return t===`border-box`?r:ri(e,r,`left`,`right`)},ai=e=>ni(e,`height`,e.dom.offsetHeight),oi=e=>ni(e,`width`,e.dom.offsetWidth),si=e=>ii(e,`content-box`),ci=ei(`width`,e=>e.dom.offsetWidth),li=e=>ci.get(e),ui=e=>ci.getOuter(e),di=si,fi=oi,pi=(e,t,n)=>{let r=e.cells,i=r.slice(0,t),a=r.slice(t);return gi(e,i.concat(n).concat(a))},mi=(e,t,n)=>pi(e,t,[n]),hi=(e,t,n)=>{let r=e.cells;r[t]=n},gi=(e,t)=>$t(e.element,t,e.section,e.isNew),_i=(e,t)=>{let n=e.cells,r=A(n,t);return $t(e.element,r,e.section,e.isNew)},vi=(e,t)=>e.cells[t],yi=(e,t)=>vi(e,t).element,bi=e=>e.cells.length,xi=e=>{let t=se(e,e=>e.section===`colgroup`);return{rows:t.fail,cols:t.pass}},Si=(e,t,n)=>{let r=A(e.cells,n);return $t(t(e.element),r,e.section,!0)},Ci=`data-snooker-locked-cols`,wi=e=>tt(e,Ci).bind(e=>E.from(e.match(/\d+/g))).map(e=>he(e,T)),Ti=e=>ge(De(N(xi(e).rows,(e,t)=>(j(t.cells,(t,n)=>{t.isLocked&&(e[n]=!0)}),e),{}),(e,t)=>parseInt(t,10))),Ei=(e,t)=>e+`,`+t,Di=(e,t,n)=>E.from(e.access[Ei(t,n)]),Oi=(e,t,n)=>{let r=ki(e,e=>n(t,e.element));return r.length>0?E.some(r[0]):E.none()},ki=(e,t)=>ce(fe(e.all,e=>e.cells),t),Ai=e=>{let t={},n=0;return j(e.cells,e=>{let r=e.colspan;ae(r,i=>{let a=n+i;t[a]=tn(e.element,r,a)}),n+=r}),t},ji=e=>{let t={},n=[],r=_e(e).map(e=>e.element).bind(lr).bind(wi).getOr({}),i=0,a=0,o=0,{pass:s,fail:c}=se(e,e=>e.section===`colgroup`);j(c,e=>{let s=[];j(e.cells,e=>{let n=0;for(;t[Ei(o,n)]!==void 0;)n++;let i=je(r,n.toString()),c=Yt(e.element,e.rowspan,e.colspan,o,n,i);for(let r=0;r<e.colspan;r++)for(let i=0;i<e.rowspan;i++){let e=o+i,s=n+r,l=Ei(e,s);t[l]=c,a=Math.max(a,s+1)}s.push(c)}),i++,n.push(Xt(e.element,s,e.section)),o++});let{columns:l,colgroups:u}=ve(s).map(e=>{let t=Ai(e);return{colgroups:[nn(e.element,Oe(t))],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Gt(i,a),access:t,all:n,columns:l,colgroups:u}},Mi={fromTable:e=>ji(mr(e)),generate:ji,getAt:Di,findItem:Oi,filterItems:ki,justCells:e=>fe(e.all,e=>e.cells),justColumns:e=>Oe(e.columns),hasColumns:e=>ye(e.columns).length>0,getColumnAt:(e,t)=>E.from(e.columns[t])},Ni=(e,t=T)=>{let n=e.grid,r=ae(n.columns,b),i=ae(n.rows,b);return A(r,n=>Pi(()=>fe(i,t=>Mi.getAt(e,t,n).filter(e=>e.column===n).toArray()),e=>e.colspan===1&&t(e.element),()=>Mi.getAt(e,0,n)))},Pi=(e,t,n)=>{let r=e();return le(r,t).orThunk(()=>E.from(r[0]).orThunk(n)).map(e=>e.element)},Fi=e=>{let t=e.grid,n=ae(t.rows,b),r=ae(t.columns,b);return A(n,t=>Pi(()=>fe(r,n=>Mi.getAt(e,t,n).filter(e=>e.row===t).fold(y([]),e=>[e])),e=>e.rowspan===1,()=>Mi.getAt(e,t,0)))},Ii=(e,t)=>{if(t<0||t>=e.length-1)return E.none();let n=e[t].fold(()=>I(me(e.slice(0,t)),(e,t)=>e.map(e=>({value:e,delta:t+1}))),e=>E.some({value:e,delta:0})),r=e[t+1].fold(()=>I(e.slice(t+1),(e,t)=>e.map(e=>({value:e,delta:t+1}))),e=>E.some({value:e,delta:1}));return n.bind(e=>r.map(t=>{let n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))},Li=(e,t)=>n=>Ri(n)===`rtl`?t:e,Ri=e=>Gn(e,`direction`)===`rtl`?`rtl`:`ltr`,zi=ei(`height`,e=>{let t=e.dom;return fn(e)?t.getBoundingClientRect().height:t.offsetHeight}),Bi=e=>zi.get(e),Vi=e=>zi.getOuter(e),Hi=ai,Ui=(e,t)=>({left:e,top:t,translate:(n,r)=>Ui(e+n,t+r)}),Wi=Ui,Gi=e=>{let t=e.getBoundingClientRect();return Wi(t.left,t.top)},Ki=(e,t)=>e===void 0?t===void 0?0:t:e,qi=e=>{let t=e.dom.ownerDocument,n=t.body,r=t.defaultView,i=t.documentElement;if(n===e.dom)return Wi(n.offsetLeft,n.offsetTop);let a=Ki(r?.pageYOffset,i.scrollTop),o=Ki(r?.pageXOffset,i.scrollLeft),s=Ki(i.clientTop,n.clientTop),c=Ki(i.clientLeft,n.clientLeft);return Ji(e).translate(o-c,a-s)},Ji=e=>{let t=e.dom,n=t.ownerDocument.body;return n===t?Wi(n.offsetLeft,n.offsetTop):fn(e)?Gi(t):Wi(0,0)},Yi=(e,t)=>({row:e,y:t}),Xi=(e,t)=>({col:e,x:t}),Zi=e=>qi(e).left+ui(e),Qi=e=>qi(e).left,$i=(e,t)=>Xi(e,Qi(t)),ea=(e,t)=>Xi(e,Zi(t)),ta=e=>qi(e).top,na=(e,t)=>Yi(e,ta(t)),H=(e,t)=>Yi(e,ta(t)+Vi(t)),ra=(e,t,n)=>{if(n.length===0)return[];let r=A(n.slice(1),(t,n)=>t.map(t=>e(n,t))),i=n[n.length-1].map(e=>t(n.length-1,e));return r.concat([i])},ia=e=>-e,aa={delta:b,positions:e=>ra(na,H,e),edge:ta},oa=Li({delta:b,edge:Qi,positions:e=>ra($i,ea,e)},{delta:ia,edge:Zi,positions:e=>ra(ea,$i,e)}),U={delta:(e,t)=>oa(t).delta(e,t),positions:(e,t)=>oa(t).positions(e,t),edge:e=>oa(e).edge(e)},sa={unsupportedLength:[`em`,`ex`,`cap`,`ch`,`ic`,`rem`,`lh`,`rlh`,`vw`,`vh`,`vi`,`vb`,`vmin`,`vmax`,`cm`,`mm`,`Q`,`in`,`pc`,`pt`,`px`],fixed:[`px`,`pt`],relative:[`%`],empty:[``]},ca=(()=>{let e=`[0-9]+`,t=`[eE]`+(`[+-]?`+e),n=e=>`(?:${e})?`,r=`[+-]?(?:${[`Infinity`,e+`\\.`+n(e)+n(t),`\\.`+e+n(t),e+n(t)].join(`|`)})`;return RegExp(`^(${r})(.*)$`)})(),la=(e,t)=>ie(t,t=>ie(sa[t],t=>e===t)),ua=(e,t)=>E.from(ca.exec(e)).bind(e=>{let n=Number(e[1]),r=e[2];return la(r,t)?E.some({value:n,unit:r}):E.none()}),da=/(\d+(\.\d+)?)%/,fa=/(\d+(\.\d+)?)px|em/,pa=Ye(`col`),ma=(e,t,n)=>{let r=yt(e).getOrThunk(()=>mn(mt(e)));return t(e)/n(r)*100},ha=(e,t)=>{Un(e,`width`,t+`px`)},ga=(e,t)=>{Un(e,`width`,t+`%`)},W=(e,t)=>{Un(e,`height`,t+`px`)},_a=e=>Hi(e)+`px`,va=(e,t,n,r)=>{let i=lr(e).map(e=>{let r=n(e);return Math.floor(t/100*r)}).getOr(t);return r(e,i),i},ya=(e,t,n,r)=>{let i=parseFloat(e);return In(e,`%`)&&Be(t)!==`table`?va(t,i,n,r):i},ba=e=>{let t=_a(e);return t?ya(t,e,Bi,W):Bi(e)},xa=(e,t,n)=>n(e)/Zn(e,t),Sa=(e,t)=>qn(e,t).orThunk(()=>tt(e,t).map(e=>e+`px`)),Ca=e=>Sa(e,`width`),wa=e=>Sa(e,`height`),Ta=e=>ma(e,li,di),Ea=e=>pa(e)?li(e):fi(e),Da=e=>xa(e,`rowspan`,ba),Oa=e=>Ca(e).bind(e=>ua(e,[`fixed`,`relative`,`empty`])),G=(e,t,n)=>{Un(e,`width`,t+n)},ka=e=>li(e)+`px`,Aa=e=>ma(e,li,di)+`%`,ja=e=>Ca(e).exists(e=>da.test(e)),Ma=e=>Ca(e).exists(e=>fa.test(e)),Na=e=>Ca(e).isNone(),Pa=y(da),Fa=Ye(`col`),Ia=e=>Ca(e).getOrThunk(()=>Ea(e)+`px`),La=e=>wa(e).getOrThunk(()=>Da(e)+`px`),Ra=e=>A(Mi.justColumns(e),e=>E.from(e.element)),za=e=>{let t=$r().browser,n=t.isChromium()||t.isFirefox();return Fa(e)?n:!0},Ba=(e,t,n,r,i,a)=>e.filter(r).fold(()=>a(Ii(n,t)),e=>i(e)),Va=(e,t,n,r)=>{let i=Ni(e),a=Mi.hasColumns(e)?Ra(e):i,o=[E.some(U.edge(t))].concat(A(U.positions(i,t),e=>e.map(e=>e.x))),s=S(Qn);return A(a,(e,t)=>Ba(e,t,o,s,e=>za(e)?n(e):Ba(jn(i[t],b),t,o,s,e=>r(E.some(li(e))),r),r))},Ha=e=>e.map(e=>e+`px`).getOr(``),Ua=(e,t)=>Va(e,t,Ia,Ha),Wa=(e,t,n)=>Va(e,t,Ta,e=>e.fold(()=>n.minCellWidth(),e=>e/n.pixelWidth()*100)),Ga=(e,t,n)=>Va(e,t,Ea,e=>e.getOrThunk(n.minCellWidth)),Ka=(e,t,n,r,i)=>{let a=Fi(e),o=[E.some(n.edge(t))].concat(A(n.positions(a,t),e=>e.map(e=>e.y)));return A(a,(e,t)=>Ba(e,t,o,S($n),r,i))},qa=(e,t,n)=>Ka(e,t,n,Da,e=>e.getOrThunk(nr)),K=(e,t,n)=>Ka(e,t,n,La,Ha),Ja=(e,t)=>()=>fn(e)?t(e):parseFloat(qn(e,`width`).getOr(`0`)),Ya=e=>{let t=Ja(e,li),n=y(0);return{width:t,pixelWidth:t,getWidths:(t,n)=>Ga(t,e,n),getCellDelta:n,singleColumnWidth:y([0]),minCellWidth:n,setElementWidth:g,adjustTableWidth:g,isRelative:!0,label:`none`}},Xa=e=>{let t=Ja(e,e=>parseFloat(Aa(e))),n=Ja(e,li);return{width:t,pixelWidth:n,getWidths:(t,n)=>Wa(t,e,n),getCellDelta:e=>e/n()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>tr()/n()*100,setElementWidth:ga,adjustTableWidth:n=>{let r=t();ga(e,r+n/100*r)},isRelative:!0,label:`percent`}},Za=e=>{let t=Ja(e,li);return{width:t,pixelWidth:t,getWidths:(t,n)=>Ga(t,e,n),getCellDelta:b,singleColumnWidth:(e,t)=>[Math.max(tr(),e+t)-e],minCellWidth:tr,setElementWidth:ha,adjustTableWidth:n=>{ha(e,t()+n)},isRelative:!1,label:`pixel`}},Qa=(e,t)=>Pa().exec(t)===null?Za(e):Xa(e),$a={getTableSize:e=>Ca(e).fold(()=>Ya(e),t=>Qa(e,t)),pixelSize:Za,percentageSize:Xa,noneSize:Ya},eo=(e,t,n,r,i,a)=>({minRow:e,minCol:t,maxRow:n,maxCol:r,allCells:i,selectedCells:a}),to=(e,t)=>{let n=e.grid.columns,r=e.grid.rows,i=n,a=0,o=0,s=[],c=[];return xe(e.access,e=>{if(s.push(e),t(e)){c.push(e);let t=e.row,n=t+e.rowspan-1,s=e.column,l=s+e.colspan-1;t<r?r=t:n>a&&(a=n),s<i?i=s:l>o&&(o=l)}}),eo(r,i,a,o,s,c)},no=(e,t,n)=>{let r=e[n].element,i=R.fromTag(`td`);kt(i,R.fromTag(`br`)),(t?kt:Ot)(r,i)},ro=(e,t,n,r)=>{let i=ce(e,e=>e.section!==`colgroup`),a=t.grid.columns,o=t.grid.rows;for(let e=0;e<o;e++){let o=!1;for(let s=0;s<a;s++)e<n.minRow||e>n.maxRow||s<n.minCol||s>n.maxCol||(Mi.getAt(t,e,s).filter(r).isNone()?no(i,o,e):o=!0)}},io=(e,t,n,r)=>{xe(n.columns,e=>{(e.column<t.minCol||e.column>t.maxCol)&&Ft(e.element)}),j(ce(rr(e,`tr`),e=>e.dom.childElementCount===0),Ft),(t.minCol===t.maxCol||t.minRow===t.maxRow)&&j(rr(e,`th,td`),e=>{nt(e,`rowspan`),nt(e,`colspan`)}),nt(e,Ci),nt(e,`data-snooker-col-series`),$a.getTableSize(e).adjustTableWidth(r)},ao=(e,t,n,r)=>{if(r.minCol===0&&t.grid.columns===r.maxCol+1)return 0;let i=Ga(t,e,n),a=N(i,(e,t)=>e+t,0),o=N(i.slice(r.minCol,r.maxCol+1),(e,t)=>e+t,0)/a*n.pixelWidth()-n.pixelWidth();return n.getCellDelta(o)},oo=(e,t)=>{let n=e=>ct(e.element,t),r=zt(e),i=mr(r),a=$a.getTableSize(e),o=Mi.generate(i),s=to(o,n),c=`th:not(`+t+`),td:not(`+t+`)`;return j(ir(r,`th,td`,e=>ct(e,c)),Ft),ro(i,o,s,n),io(r,s,o,ao(e,Mi.fromTable(e),a,s)),r},so=((e,t)=>{let n=n=>{if(!e(n))throw Error(`Can only get `+t+` value of a `+t+` node`);return r(n).getOr(``)},r=t=>e(t)?E.from(t.dom.nodeValue):E.none();return{get:n,getOption:r,set:(n,r)=>{if(!e(n))throw Error(`Can only set raw `+t+` value of a `+t+` node`);n.dom.nodeValue=r}}})(Ke,`text`),co=e=>so.get(e),lo=e=>so.getOption(e),uo=(e,t)=>so.set(e,t),fo=e=>Be(e)===`img`?1:lo(e).fold(()=>Ct(e).length,e=>e.length),po=e=>lo(e).filter(e=>e.trim().length!==0||e.indexOf(`\xA0`)>-1).isSome(),mo=e=>We(e)&&et(e,`contenteditable`)===`false`,ho=[`img`,`br`],go=e=>po(e)||k(ho,Be(e))||mo(e),_o=e=>wn(e,go),vo=e=>yo(e,go),yo=(e,t)=>{let n=e=>{let r=Ct(e);for(let e=r.length-1;e>=0;e--){let i=r[e];if(t(i))return E.some(i);let a=n(i);if(a.isSome())return a}return E.none()};return n(e)},bo={scope:[`row`,`col`]},xo=e=>()=>{let t=R.fromTag(`td`,e.dom);return kt(t,R.fromTag(`br`,e.dom)),t},So=e=>()=>R.fromTag(`col`,e.dom),Co=e=>()=>R.fromTag(`colgroup`,e.dom),wo=e=>()=>R.fromTag(`tr`,e.dom),To=(e,t,n)=>{let r=Vt(e,t);return xe(n,(e,t)=>{e===null?nt(r,t):Ze(r,t,e)}),r},Eo=e=>e,Do=(e,t,n)=>_o(e).map(r=>M(vn(r,n.join(`,`),t=>dt(t,e)),(e,t)=>{let n=Rt(t);return kt(e,n),n},t)).getOr(t),Oo=(e,t)=>{xe(bo,(n,r)=>tt(e,r).filter(e=>k(n,e)).each(e=>Ze(t,r,e)))},ko=(e,t,n)=>{let r=(e,t)=>{Yn(e.element,t),Jn(t,`height`),e.colspan!==1&&Jn(t,`width`)};return{col:n=>{let i=R.fromTag(Be(n.element),t.dom);return r(n,i),e(n.element,i),i},colgroup:Co(t),row:wo(t),cell:i=>{let a=R.fromTag(Be(i.element),t.dom),o=n.getOr([`strong`,`em`,`b`,`i`,`span`,`font`,`h1`,`h2`,`h3`,`h4`,`h5`,`h6`,`p`,`div`]);return kt(o.length>0?Do(i.element,a,o):a,R.fromTag(`br`)),r(i,a),Oo(i.element,a),e(i.element,a),a},replace:To,colGap:So(t),gap:xo(t)}},Ao=e=>({col:So(e),colgroup:Co(e),row:wo(e),cell:xo(e),replace:Eo,colGap:So(e),gap:xo(e)}),jo=(e,t)=>{let n=(t||document).createElement(`div`);return n.innerHTML=e,Ct(R.fromDom(n))},Mo=e=>A(e,R.fromDom),No=e=>t=>t.options.get(e),Po=`100%`,Fo=e=>{let t=e.dom,n=t.getParent(e.selection.getStart(),t.isBlock)??e.getBody();return di(R.fromDom(n))+`px`},Io=(e,t)=>Jo(e)||!Xo(e)?t:qo(e)?{...t,width:Fo(e)}:{...t,width:Po},Lo=(e,t)=>Jo(e)||Xo(e)?t:qo(e)?{...t,width:Fo(e)}:{...t,width:Po},Ro=e=>{let t=e.options.register;t(`table_clone_elements`,{processor:`string[]`}),t(`table_use_colgroups`,{processor:`boolean`,default:!0}),t(`table_header_type`,{processor:e=>{let t=k([`section`,`cells`,`sectionCells`,`auto`],e);return t?{value:e,valid:t}:{valid:!1,message:`Must be one of: section, cells, sectionCells or auto.`}},default:`section`}),t(`table_sizing_mode`,{processor:`string`,default:`auto`}),t(`table_default_attributes`,{processor:`object`,default:{border:`1`}}),t(`table_default_styles`,{processor:`object`,default:{"border-collapse":`collapse`}}),t(`table_column_resizing`,{processor:e=>{let t=k([`preservetable`,`resizetable`],e);return t?{value:e,valid:t}:{valid:!1,message:`Must be preservetable, or resizetable.`}},default:`preservetable`}),t(`table_resize_bars`,{processor:`boolean`,default:!0}),t(`table_style_by_css`,{processor:`boolean`,default:!0}),t(`table_merge_content_on_paste`,{processor:`boolean`,default:!0})},zo=e=>E.from(e.options.get(`table_clone_elements`)),Bo=e=>k(e.options.get(`object_resizing`).split(`,`),`table`),Vo=No(`table_header_type`),Ho=No(`table_column_resizing`),Uo=e=>Ho(e)===`preservetable`,Wo=e=>Ho(e)===`resizetable`,Go=No(`table_sizing_mode`),Ko=e=>Go(e)===`relative`,qo=e=>Go(e)===`fixed`,Jo=e=>Go(e)===`responsive`,Yo=No(`table_resize_bars`),Xo=No(`table_style_by_css`),Zo=No(`table_merge_content_on_paste`),Qo=e=>{let t=e.options,n=t.get(`table_default_attributes`);return t.isSet(`table_default_attributes`)?n:Lo(e,n)},$o=e=>{let t=e.options,n=t.get(`table_default_styles`);return t.isSet(`table_default_styles`)?n:Io(e,n)},es=No(`table_use_colgroups`),ts=e=>On(e,`[contenteditable]`),ns=(e,t=!1)=>fn(e)?e.dom.isContentEditable:ts(e).fold(y(t),e=>rs(e)===`true`),rs=e=>e.dom.contentEditable,is=e=>R.fromDom(e.getBody()),as=e=>t=>dt(t,is(e)),os=e=>{nt(e,`data-mce-style`);let t=e=>nt(e,`data-mce-style`);j(sr(e),t),j(cr(e),t),j(ur(e),t)},ss=e=>R.fromDom(e.selection.getStart()),cs=e=>e.getBoundingClientRect().width,ls=e=>e.getBoundingClientRect().height,us=(e,t)=>{let n=e.dom.getStyle(t,`width`)||e.dom.getAttrib(t,`width`);return E.from(n).filter(Rn)},ds=e=>/^(\d+(\.\d+)?)%$/.test(e),fs=e=>/^(\d+(\.\d+)?)px$/.test(e),ps=e=>Sn(e,Ye(`table`)).exists(ns),ms=(e,t)=>{let n=t.column,r=t.column+t.colspan-1,i=t.row,a=t.row+t.rowspan-1;return n<=e.finishCol&&r>=e.startCol&&i<=e.finishRow&&a>=e.startRow},hs=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,gs=(e,t)=>{let n=!0,r=ee(hs,t);for(let i=t.startRow;i<=t.finishRow;i++)for(let a=t.startCol;a<=t.finishCol;a++)n&&=Mi.getAt(e,i,a).exists(r);return n?E.some(t):E.none()},_s=(e,t)=>en(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1)),vs=(e,t,n)=>{let r=Mi.findItem(e,t,dt),i=Mi.findItem(e,n,dt);return r.bind(e=>i.map(t=>_s(e,t)))},ys=(e,t,n)=>vs(e,t,n).bind(t=>gs(e,t)),bs=(e,t,n,r)=>Mi.findItem(e,t,dt).bind(t=>{let i=n>0?t.row+t.rowspan-1:t.row,a=r>0?t.column+t.colspan-1:t.column;return Mi.getAt(e,i+n,a+r).map(e=>e.element)}),xs=(e,t,n)=>vs(e,t,n).map(t=>A(Mi.filterItems(e,ee(ms,t)),e=>e.element)),Ss=(e,t)=>Mi.findItem(e,t,(e,t)=>ft(t,e)).map(e=>e.element),Cs=(e,t,n)=>lr(e).bind(r=>bs(Ds(r),e,t,n)),ws=(e,t,n)=>xs(Ds(e),t,n),Ts=(e,t,n,r,i)=>{let a=Ds(e),o=dt(e,n)?E.some(t):Ss(a,t),s=dt(e,i)?E.some(r):Ss(a,r);return o.bind(e=>s.bind(t=>xs(a,e,t)))},Es=(e,t,n)=>ys(Ds(e),t,n),Ds=Mi.fromTable;var Os=`body.p.div.article.aside.figcaption.figure.footer.header.nav.section.ol.ul.li.table.thead.tbody.tfoot.caption.tr.td.th.h1.h2.h3.h4.h5.h6.blockquote.pre.address`.split(`.`),ks=()=>({up:y({selector:Tn,closest:On,predicate:xn,all:bt}),down:y({selector:B,predicate:_n}),styles:y({get:Gn,getRaw:qn,set:Un,remove:Jn}),attrs:y({get:et,set:Ze,remove:nt,copyTo:(e,t)=>{Qe(t,rt(e))}}),insert:y({before:Et,after:Dt,afterAll:Mt,append:kt,appendAll:Nt,prepend:Ot,wrap:jt}),remove:y({unwrap:It,remove:Ft}),create:y({nu:R.fromTag,clone:e=>R.fromDom(e.dom.cloneNode(!1)),text:R.fromText}),query:y({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:xt,nextSibling:St}),property:y({children:Ct,name:Be,parent:vt,document:e=>ht(e).dom,isText:Ke,isComment:Ue,isElement:Ge,isSpecial:e=>k([`script`,`noscript`,`iframe`,`noframes`,`noembed`,`title`,`style`,`textarea`,`xmp`],Be(e)),getLanguage:e=>Ge(e)?tt(e,`lang`):E.none(),getText:co,setText:uo,isBoundary:e=>Ge(e)?Be(e)===`body`?!0:k(Os,Be(e)):!1,isEmptyTag:e=>Ge(e)?k([`br`,`img`,`hr`,`input`],Be(e)):!1,isNonEditable:e=>Ge(e)&&et(e,`contenteditable`)===`false`}),eq:dt,is:pt});let As=(e,t,n,r)=>{let i=n[0];return r(e,t,i,n.slice(1))},js=(e,t,n)=>n.length>0?As(e,t,n,q):E.none(),q=(e,t,n,r)=>M(r,(n,r)=>Ms(e,n,t(e,r)),t(e,n)),Ms=(e,t,n)=>t.bind(t=>n.filter(ee(e.eq,t))),Ns=(e,t)=>ee(e.eq,t),Ps=(e,t,n,r=w)=>{let i=[t].concat(e.up().all(t)),a=[n].concat(e.up().all(n)),o=e=>ue(e,r).fold(()=>e,t=>e.slice(0,t+1)),s=o(i),c=o(a);return{firstpath:s,secondpath:c,shared:le(s,t=>ie(c,Ns(e,t)))}},Fs=js,Is=Ps,Ls=ks(),Rs=(e,t)=>Fs(Ls,(t,n)=>e(n),t),zs=(e,t,n)=>Is(Ls,e,t,n),Bs=e=>Tn(e,`table`),Vs=(e,t,n)=>{let r=e=>t=>n!==void 0&&n(t)||dt(t,e);return dt(e,t)?E.some({boxes:E.some([e]),start:e,finish:t}):Bs(e).bind(i=>Bs(t).bind(a=>{if(dt(i,a))return E.some({boxes:ws(i,e,t),start:e,finish:t});if(ft(i,a)){let n=vn(t,`td,th`,r(i)),o=n.length>0?n[n.length-1]:t;return E.some({boxes:Ts(i,e,i,t,a),start:e,finish:o})}else if(ft(a,i)){let n=vn(e,`td,th`,r(a)),o=n.length>0?n[n.length-1]:e;return E.some({boxes:Ts(a,e,i,t,a),start:e,finish:o})}else return zs(e,t).shared.bind(o=>On(o,`table`,n).bind(n=>{let o=vn(t,`td,th`,r(n)),s=o.length>0?o[o.length-1]:t,c=vn(e,`td,th`,r(n)),l=c.length>0?c[c.length-1]:e;return E.some({boxes:Ts(n,e,i,t,a),start:l,finish:s})}))}))},Hs=(e,t)=>{let n=B(e,t);return n.length>0?E.some(n):E.none()},Us=(e,t)=>le(e,e=>ct(e,t)),Ws=(e,t,n)=>Dn(e,t).bind(t=>Dn(e,n).bind(e=>Rs(Bs,[t,e]).map(n=>({first:t,last:e,table:n})))),Gs=(e,t)=>Tn(e,`table`).bind(n=>Dn(n,t).bind(t=>Vs(t,e).bind(e=>e.boxes.map(t=>({boxes:t,start:e.start,finish:e.finish}))))),Ks=(e,t,n,r,i)=>Us(e,i).bind(e=>Cs(e,t,n).bind(e=>Gs(e,r))),qs=(e,t)=>Hs(e,t),Js=(e,t,n)=>Ws(e,t,n).bind(t=>{let n=t=>dt(e,t),r=`thead,tfoot,tbody,table`,i=Tn(t.first,r,n),a=Tn(t.last,r,n);return i.bind(e=>a.bind(n=>dt(e,n)?Es(t.table,t.first,t.last):E.none()))}),Ys=b,Xs=e=>{let t=(e,t)=>tt(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&pe(e,e=>t(e,`rowspan`)||t(e,`colspan`))?E.some(e):E.none()},Zs=(e,t,n)=>t.length<=1?E.none():Js(e,n.firstSelectedSelector,n.lastSelectedSelector).map(e=>({bounds:e,cells:t})),Qs=`data-mce-selected`;``+Qs,``+Qs;let $s=`data-mce-first-selected`;``+$s;let ec=`data-mce-last-selected`;``+ec;let tc={selected:Qs,selectedSelector:`td[data-mce-selected],th[data-mce-selected]`,firstSelected:$s,firstSelectedSelector:`td[data-mce-first-selected],th[data-mce-first-selected]`,lastSelected:ec,lastSelectedSelector:`td[data-mce-last-selected],th[data-mce-last-selected]`},nc=(e,t,n)=>({element:n,mergable:Zs(t,e,tc),unmergable:Xs(e),selection:Ys(e)}),J=(e,t,n)=>({element:e,clipboard:t,generators:n}),rc=(e,t,n,r)=>({selection:Ys(e),clipboard:n,generators:r}),ic=e=>lr(e).bind(e=>qs(e,tc.firstSelectedSelector)).fold(y(e),e=>e[0]),ac=e=>(t,n)=>{let r=Be(t);return On(r===`col`||r===`colgroup`?ic(t):t,e,n)},oc=ac(`th,td,caption`),sc=ac(`th,td`),cc=e=>Mo(e.model.table.getSelectedCells()),lc=e=>ce(cc(e),e=>ct(e,tc.selectedSelector)),uc=e=>lr(e[0]).map(e=>{let t=oo(e,`[data-mce-selected]`);return os(t),[t]}),dc=(e,t)=>A(t,t=>e.selection.serializer.serialize(t.dom,{})).join(``),fc=e=>A(e,e=>e.dom.innerText).join(``),pc=(e,t)=>{e.on(`BeforeGetContent`,t=>{let n=n=>{t.preventDefault(),uc(n).each(n=>{t.content=t.format===`text`?fc(n):dc(e,n)})};if(t.selection===!0){let t=lc(e);t.length>=1&&n(t)}}),e.on(`BeforeSetContent`,n=>{n.selection===!0&&n.paste===!0&&_e(cc(e)).each(r=>{lr(r).each(i=>{let a=ce(jo(n.content),e=>Be(e)!==`meta`),o=Ye(`table`);if(Zo(e)&&a.length===1&&o(a[0])){n.preventDefault();let o=Ao(R.fromDom(e.getDoc())),s=J(r,a[0],o);t.pasteCells(i,s).each(()=>{e.focus()})}})})})},mc=(e,t)=>({element:e,offset:t}),hc=(e,t,n)=>e.property().isText(t)&&e.property().getText(t).trim().length===0||e.property().isComment(t)?n(t).bind(t=>hc(e,t,n).orThunk(()=>E.some(t))):E.none(),gc=(e,t)=>e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length,_c=(e,t)=>{let n=hc(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(n))return mc(n,gc(e,n));let r=e.property().children(n);return r.length>0?_c(e,r[r.length-1]):mc(n,gc(e,n))},vc=_c,yc=ks(),bc=e=>vc(yc,e),xc=(e,t)=>{Qn(e)||Oa(e).each(n=>{let r=n.value/2;G(e,r,n.unit),G(t,r,n.unit)})},Sc=e=>A(e,y(0)),Cc=(e,t,n,r,i)=>i(e.slice(0,t)).concat(r).concat(i(e.slice(n))),wc=e=>(t,n,r,i)=>{if(e(r)){let e=Math.max(i,t[n]-Math.abs(r)),a=Math.abs(e-t[n]);return r>=0?a:-a}else return r},Tc=wc(e=>e<0),Ec=wc(T),Dc=()=>{let e=(e,t,n,r,i)=>{let a=Tc(e,t,r,i);return Cc(e,t,n+1,[a,0],Sc)},t=(e,t,n,r)=>{let i=(100+n)/100,a=Math.max(r,(e[t]+n)/i);return A(e,(e,n)=>(n===t?a:e/i)-e)},n=(n,r,i,a,o,s)=>s?t(n,r,a,o):e(n,r,i,a,o);return{resizeTable:(e,t)=>e(t),clampTableDelta:Tc,calcLeftEdgeDeltas:n,calcMiddleDeltas:(e,t,r,i,a,o,s)=>n(e,r,i,a,o,s),calcRightEdgeDeltas:(e,n,r,i,a,o)=>{if(o)return t(e,r,i,a);{let t=Tc(e,r,i,a);return Sc(e.slice(0,r)).concat([t])}},calcRedestributedWidths:(e,t,n,r)=>{if(r){let r=(t+n)/t,i=A(e,e=>e/r);return{delta:r*100-100,newSizes:i}}else return{delta:n,newSizes:e}}}},Oc=()=>{let e=(e,t,n,r,i)=>{let a=Ec(e,r>=0?n:t,r,i);return Cc(e,t,n+1,[a,-a],Sc)};return{resizeTable:(e,t,n)=>{n&&e(t)},clampTableDelta:(e,t,n,r,i)=>{if(i){if(n>=0)return n;{let t=N(e,(e,t)=>e+t-r,0);return Math.max(-t,n)}}else return Tc(e,t,n,r)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,n,r,i,a,o)=>e(t,r,i,a,o),calcRightEdgeDeltas:(e,t,n,r,i,a)=>a?Sc(e):A(e,y(r/e.length)),calcRedestributedWidths:(e,t,n,r)=>({delta:0,newSizes:e})}},kc=e=>Mi.fromTable(e).grid,Ac=Ye(`th`),jc=e=>pe(e,e=>Ac(e.element)),Mc=(e,t)=>e&&t?`sectionCells`:e?`section`:`cells`,Nc=e=>{let t=e.section===`thead`,n=kn(Pc(e.cells),`th`);return e.section===`tfoot`?{type:`footer`}:t||n?{type:`header`,subType:Mc(t,n)}:{type:`body`}},Pc=e=>{let t=ce(e,e=>Ac(e.element));return t.length===0?E.some(`td`):t.length===e.length?E.some(`th`):E.none()},Fc=e=>{let t=A(e,e=>Nc(e).type),n=k(t,`header`),r=k(t,`footer`);if(!n&&!r)return E.some(`body`);{let e=k(t,`body`);return n&&!e&&!r?E.some(`header`):!n&&!e&&r?E.some(`footer`):E.none()}},Ic=e=>I(e.all,e=>{let t=Nc(e);return t.type===`header`?E.from(t.subType):E.none()}),Lc=(e,t,n)=>Qt(n(e.element,t),!0,e.isLocked),Rc=(e,t)=>e.section===t?e:$t(e.element,e.cells,t,e.isNew),zc=()=>({transformRow:Rc,transformCell:(e,t,n)=>{let r=n(e.element,t);return Qt(Be(r)===`td`?r:Ht(r,`td`),e.isNew,e.isLocked)}}),Bc=()=>({transformRow:Rc,transformCell:Lc}),Vc=()=>({transformRow:(e,t)=>Rc(e,t===`thead`?`tbody`:t),transformCell:Lc}),Hc={getTableSectionType:(e,t)=>{switch(Ic(Mi.fromTable(e)).getOr(t)){case`section`:return zc();case`sectionCells`:return Bc();case`cells`:return Vc()}},section:zc,sectionCells:Bc,cells:Vc,fallback:()=>({transformRow:b,transformCell:Lc})},Uc=(e,t,n,r)=>{n===r?nt(e,t):Ze(e,t,n)},Wc=(e,t,n)=>{ve(yn(e,t)).fold(()=>Ot(e,n),e=>Dt(e,n))},Gc=(e,t)=>{let n=En(e,t).getOrThunk(()=>{let n=R.fromTag(t,mt(e).dom);return t===`thead`?Wc(e,`caption,colgroup`,n):t===`colgroup`?Wc(e,`caption`,n):kt(e,n),n});return Pt(n),n},Kc=(e,t)=>{let n=[],r=[],i=e=>A(e,e=>{e.isNew&&n.push(e.element);let t=e.element;return Pt(t),j(e.cells,e=>{e.isNew&&r.push(e.element),Uc(e.element,`colspan`,e.colspan,1),Uc(e.element,`rowspan`,e.rowspan,1),kt(t,e.element)}),t}),a=e=>fe(e,e=>A(e.cells,e=>(Uc(e.element,`span`,e.colspan,1),e.element))),o=(t,n)=>{Nt(Gc(e,n),(n===`colgroup`?a:i)(t))},s=t=>{En(e,t).each(Ft)},c=(e,t)=>{e.length>0?o(e,t):s(t)},l=[],u=[],d=[],f=[];return j(t,e=>{switch(e.section){case`thead`:l.push(e);break;case`tbody`:u.push(e);break;case`tfoot`:d.push(e);break;case`colgroup`:f.push(e);break}}),c(f,`colgroup`),c(l,`thead`),c(u,`tbody`),c(d,`tfoot`),{newRows:n,newCells:r}},qc=e=>A(e,e=>{let t=Rt(e.element);return j(e.cells,e=>{let n=zt(e.element);Uc(n,`colspan`,e.colspan,1),Uc(n,`rowspan`,e.rowspan,1),kt(t,n)}),t}),Jc=(e,t)=>A(e,e=>vi(e,t)),Yc=(e,t)=>e[t],Xc=(e,t)=>{if(e.length===0)return 0;let n=e[0];return ue(e,e=>!t(n.element,e.element)).getOr(e.length)},Zc=(e,t,n,r)=>{let i=Yc(e,t),a=i.section===`colgroup`;return{colspan:Xc(i.cells.slice(n),r),rowspan:a?1:Xc(Jc(e.slice(t),n),r)}},Qc=(e,t)=>{let n=A(e,e=>A(e.cells,w)),r=(e,t,r,i)=>{for(let a=e;a<e+r;a++)for(let e=t;e<t+i;e++)n[a][e]=!0};return A(e,(i,a)=>{let o=fe(i.cells,(i,o)=>{if(n[a][o]===!1){let n=Zc(e,a,o,t);return r(a,o,n.rowspan,n.colspan),[Jt(i.element,n.rowspan,n.colspan,i.isNew)]}else return[]});return Zt(i.element,o,i.section,i.isNew)})},$c=(e,t,n)=>{let r=[];j(e.colgroups,i=>{let a=[];for(let r=0;r<e.grid.columns;r++){let i=Mi.getColumnAt(e,r).map(e=>Qt(e.element,n,!1)).getOrThunk(()=>Qt(t.colGap(),!0,!1));a.push(i)}r.push($t(i.element,a,`colgroup`,n))});for(let i=0;i<e.grid.rows;i++){let a=[];for(let r=0;r<e.grid.columns;r++){let o=Mi.getAt(e,i,r).map(e=>Qt(e.element,n,e.isLocked)).getOrThunk(()=>Qt(t.gap(),!0,!1));a.push(o)}let o=e.all[i],s=$t(o.element,a,o.section,n);r.push(s)}return r},el=(e,t)=>$c(e,t,!1),tl=e=>Qc(e,dt),nl=(e,t)=>I(e.all,e=>le(e.cells,e=>dt(t,e.element))),rl=(e,t,n)=>{let r=An(A(t.selection,t=>or(t).bind(t=>nl(e,t)).filter(n)));return Mn(r.length>0,r)},il=(e,t,n,r,i)=>(a,o,s,c)=>{let l=Mi.fromTable(a),u=E.from(c?.section).getOrThunk(Hc.fallback);return t(l,o).map(t=>{let n=e(el(l,s),t,dt,i(s),u),r=Ti(n.grid);return{info:t,grid:tl(n.grid),cursor:n.cursor,lockedColumns:r}}).bind(e=>{let t=Kc(a,e.grid),i=E.from(c?.sizing).getOrThunk(()=>$a.getTableSize(a)),o=E.from(c?.resize).getOrThunk(Oc);return n(a,e.grid,e.info,{sizing:i,resize:o,section:u}),r(a),nt(a,Ci),e.lockedColumns.length>0&&Ze(a,Ci,e.lockedColumns.join(`,`)),E.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})},al=(e,t)=>or(t.element).bind(n=>nl(e,n).map(e=>({...e,generators:t.generators,clipboard:t.clipboard}))),ol=(e,t)=>rl(e,t,T).map(e=>({cells:e,generators:t.generators,clipboard:t.clipboard})),sl=(e,t)=>t.mergable,cl=(e,t)=>t.unmergable,ll=(e,t)=>rl(e,t,T),ul=(e,t)=>rl(e,t,e=>!e.isLocked),dl=(e,t)=>nl(e,t).exists(e=>!e.isLocked),fl=(e,t)=>pe(t,t=>dl(e,t)),pl=(e,t)=>sl(e,t).filter(t=>fl(e,t.cells)),ml=(e,t)=>cl(e,t).filter(t=>fl(e,t)),hl=(e,t,n,r)=>{let i=xi(e).rows;if(i.length===0)return e;for(let e=t.startRow;e<=t.finishRow;e++)for(let n=t.startCol;n<=t.finishCol;n++){let t=i[e],a=vi(t,n).isLocked;hi(t,n,Qt(r(),!1,a))}return e},gl=(e,t,n,r)=>{let i=xi(e).rows,a=!0;for(let e=0;e<i.length;e++)for(let o=0;o<bi(i[0]);o++){let s=i[e],c=vi(s,o),l=c.element,u=n(l,t);u&&!a?hi(s,o,Qt(r(),!0,c.isLocked)):u&&(a=!1)}return e},_l=(e,t)=>N(e,(e,n)=>ie(e,e=>t(e.element,n.element))?e:e.concat([n]),[]),vl=(e,t,n,r)=>(t>0&&t<e[0].cells.length&&j(e,e=>{let i=e.cells[t-1],a=0,o=r();for(;e.cells.length>t+a&&n(i.element,e.cells[t+a].element);)hi(e,t+a,Qt(o,!0,e.cells[t+a].isLocked)),a++}),e),yl=(e,t,n,r)=>{let i=xi(e).rows;if(t>0&&t<i.length){let e=i[t-1].cells;j(_l(e,n),e=>{let a=E.none();for(let o=t;o<i.length;o++)for(let t=0;t<bi(i[0]);t++){let s=i[o],c=vi(s,t);n(c.element,e.element)&&(a.isNone()&&(a=E.some(r())),a.each(e=>{hi(s,t,Qt(e,!0,c.isLocked))}))}})}return e},bl=e=>{let t=t=>t(e),n=y(e),r=()=>i,i={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:T,isError:w,map:t=>Sl.value(t(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:t=>{t(e)},toOptional:()=>E.some(e)};return i},xl=e=>{let t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:w,isError:T,map:t,mapError:t=>Sl.error(t(e)),bind:t,exists:w,forall:T,getOr:b,or:b,getOrThunk:te,orThunk:te,getOrDie:C(String(e)),each:g,toOptional:E.none};return n},Sl={value:bl,error:xl,fromOption:(e,t)=>e.fold(()=>xl(t),bl)},Cl=(e,t,n)=>{if(e.row>=t.length||e.column>bi(t[0]))return Sl.error(`invalid start address out of table bounds, row: `+e.row+`, column: `+e.column);let r=t.slice(e.row),i=r[0].cells.slice(e.column),a=bi(n[0]),o=n.length;return Sl.value({rowDelta:r.length-o,colDelta:i.length-a})},wl=(e,t)=>({rowDelta:0,colDelta:bi(e[0])-bi(t[0])}),Tl=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),El=(e,t,n,r)=>{let i=t.section===`colgroup`?n.col:n.cell;return ae(e,e=>Qt(i(),!0,r(e)))},Dl=(e,t,n,r)=>{let i=e[e.length-1];return e.concat(ae(t,()=>{let e=Si(i,i.section===`colgroup`?n.colgroup:n.row,b);return gi(e,El(e.cells.length,e,n,e=>Ae(r,e.toString())))}))},Ol=(e,t,n,r)=>A(e,e=>pi(e,r,El(t,e,n,w))),kl=(e,t,n)=>A(e,e=>N(n,(n,r)=>{let i=El(1,e,t,T)[0];return mi(n,r,i)},e)),Al=(e,t,n)=>{let r=t.colDelta<0?Ol:b,i=t.rowDelta<0?Dl:b,a=Ti(e),o=bi(e[0]),s=ie(a,e=>e===o-1),c=r(e,Math.abs(t.colDelta),n,s?o-1:o),l=Ti(c);return i(c,Math.abs(t.rowDelta),n,he(l,T))},jl=(e,t,n,r)=>{let i=ee(r,vi(e[t],n).element),a=e[t];return e.length>1&&bi(a)>1&&(n>0&&i(yi(a,n-1))||n<a.cells.length-1&&i(yi(a,n+1))||t>0&&i(yi(e[t-1],n))||t<e.length-1&&i(yi(e[t+1],n)))},Ml=(e,t,n,r,i,a)=>{let o=e.row,s=e.column,c=n.length,l=bi(n[0]),u=o+c,d=s+l+a.length,f=he(a,T);for(let e=o;e<u;e++){let a=0;for(let c=s;c<d;c++){if(f[c]){a++;continue}jl(t,e,c,i)&&gl(t,yi(t[e],c),i,r.cell);let l=c-s-a,u=vi(n[e-o],l),d=u.element,p=r.replace(d);hi(t[e],c,Qt(p,!0,u.isLocked))}}return t},Nl=(e,t,n)=>{let r=bi(t[0]);return{row:xi(t).cols.length+e.row,column:le(ae(r-e.column,t=>t+e.column),e=>pe(n,t=>t!==e)).getOr(r-1)}},Pl=(e,t,n)=>ce(n,n=>n>=e.column&&n<=bi(t[0])+e.column),Fl=(e,t,n,r,i)=>{let a=Ti(t),o=Nl(e,t,a),s=xi(n).rows,c=Pl(o,s,a);return Cl(o,t,s).map(e=>{let n=Al(t,{...e,colDelta:e.colDelta-c.length},r);return Ml(o,n,s,r,i,Pl(o,s,Ti(n)))})},Il=(e,t,n,r,i)=>{vl(t,e,i,r.cell);let a=Al(n,Tl(n,t),r);return A(Al(t,Tl(t,a),r),(t,n)=>pi(t,e,a[n].cells))},Ll=(e,t,n,r,i)=>{yl(t,e,i,r.cell);let a=Ti(t),o=wl(t,n),s=Al(t,{...o,colDelta:o.colDelta-a.length},r),{cols:c,rows:l}=xi(s),u=Ti(s),d=wl(n,t),f={...d,colDelta:d.colDelta+u.length},p=Al(kl(n,r,u),f,r);return[...c,...l.slice(0,e),...p,...l.slice(e,l.length)]},Rl=(e,t,n,r)=>Si(e,e=>r(e,n),t),zl=(e,t,n,r,i)=>{let{rows:a,cols:o}=xi(e),s=a.slice(0,t),c=a.slice(t),l=Rl(a[n],(e,n)=>t>0&&t<a.length&&r(yi(a[t-1],n),yi(a[t],n))?vi(a[t],n):Qt(i(e.element,r),!0,e.isLocked),r,i);return[...o,...s,l,...c]},Bl=(e,t,n,r,i,a,o)=>n===`colgroup`||!r?Qt(o(vi(e,i).element,a),!0,!1):vi(e,t),Vl=(e,t,n,r,i)=>A(e,e=>{let a=t>0&&t<bi(e)&&r(yi(e,t-1),yi(e,t));return mi(e,t,Bl(e,t,e.section,a,n,r,i))}),Hl=(e,t)=>fe(e,e=>{let n=e.cells,r=M(t,(e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e,n);return r.length>0?[$t(e.element,r,e.section,e.isNew)]:[]}),Ul=(e,t,n)=>{let{rows:r,cols:i}=xi(e);return[...i,...r.slice(0,t),...r.slice(n+1)]},Wl=(e,t,n,r)=>yi(e[t],n)!==void 0&&t>0&&r(yi(e[t-1],n),yi(e[t],n)),Gl=(e,t,n)=>t>0&&n(yi(e,t-1),yi(e,t)),Kl=(e,t,n,r)=>Wl(e,t,n,r)||Gl(e[t],n,r),ql=(e,t)=>pe(t,b)&&jc(e.cells)?T:(e,n,r)=>!(Be(e.element)===`th`&&t[r]),Jl=(e,t)=>pe(t,b)&&jc(e)?T:(e,n,r)=>!(Be(e.element)===`th`&&t[n]),Yl=(e,t,n,r)=>{let i=e=>e===`row`?$n(t):Qn(t),a=e=>i(e)?`${e}group`:e;return e?Ac(t)?a(n):null:r&&Ac(t)?a(n===`row`?`col`:`row`):null},Xl=(e,t)=>(n,r,i)=>E.some(Yl(e,n.element,`col`,t[i])),Zl=(e,t)=>(n,r)=>E.some(Yl(e,n.element,`row`,t[r])),Ql=(e,t,n)=>Qt(n(e.element,t),!0,e.isLocked),$l=(e,t,n,r,i,a,o)=>{let s=e=>ie(t,t=>n(e.element,t.element));return A(e,(e,t)=>_i(e,(e,c)=>{if(s(e)){let s=o(e,t,c)?i(e,n,r):e;return a(s,t,c).each(e=>{$e(s.element,{scope:E.from(e)})}),s}else return e}))},eu=(e,t,n)=>fe(e,(r,i)=>Kl(e,i,t,n)?[]:[vi(r,t)]),tu=(e,t,n)=>{let r=e[t];return fe(r.cells,(r,i)=>Kl(e,t,i,n)?[]:[r])},nu=(e,t,n,r,i)=>{let a=xi(e).rows,o=fe(t,e=>eu(a,e,r)),s=A(a,e=>jc(e.cells)),c=Jl(o,s);return $l(e,o,r,i,Ql,Zl(n,s),c)},ru=(e,t,n,r,i,a,o)=>{let{cols:s,rows:c}=xi(e),l=c[t[0]],u=fe(t,e=>tu(c,e,i)),d=A(l.cells,(e,t)=>jc(eu(c,t,i))),f=[...c];j(t,e=>{f[e]=o.transformRow(c[e],n)});let p=[...s,...f],m=ql(l,d),h=Xl(r,d);return $l(p,u,i,a,o.transformCell,h,m)},iu=(e,t,n,r)=>{let i=xi(e).rows;return $l(e,A(t,e=>vi(i[e.row],e.column)),n,r,Ql,E.none,T)},au={generate:e=>{if(!c(e))throw Error(`cases must be an array`);if(e.length===0)throw Error(`there must be at least one case`);let t=[],n={};return j(e,(r,i)=>{let a=ye(r);if(a.length!==1)throw Error(`one and only one name per case`);let o=a[0],s=r[o];if(n[o]!==void 0)throw Error(`duplicate key detected:`+o);if(o===`cata`)throw Error(`cannot have a case named cata (sorry)`);if(!c(s))throw Error(`case arguments must be an array`);t.push(o),n[o]=(...n)=>{let r=n.length;if(r!==s.length)throw Error(`Wrong number of arguments to case `+o+`. Expected `+s.length+` (`+s+`), got `+r);return{fold:(...t)=>{if(t.length!==e.length)throw Error(`Wrong number of arguments to fold. Expected `+e.length+`, got `+t.length);return t[i].apply(null,n)},match:e=>{let r=ye(e);if(t.length!==r.length)throw Error(`Wrong number of arguments to match. Expected: `+t.join(`,`)+`
Actual: `+r.join(`,`));if(!pe(t,e=>k(r,e)))throw Error(`Not all branches were specified when using match. Specified: `+r.join(`, `)+`
Required: `+t.join(`, `));return e[o].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:o,params:n})}}}}),n}},ou={...au.generate([{none:[]},{only:[`index`]},{left:[`index`,`next`]},{middle:[`prev`,`index`,`next`]},{right:[`prev`,`index`]}])},su=(e,t)=>e.length===0?ou.none():e.length===1?ou.only(0):t===0?ou.left(0,1):t===e.length-1?ou.right(t-1,t):t>0&&t<e.length-1?ou.middle(t-1,t,t+1):ou.none(),cu=(e,t,n,r,i)=>{let a=e.slice(0),o=su(e,t),s=y(A(a,y(0)));return o.fold(s,e=>r.singleColumnWidth(a[e],n),(e,t)=>i.calcLeftEdgeDeltas(a,e,t,n,r.minCellWidth(),r.isRelative),(e,t,o)=>i.calcMiddleDeltas(a,e,t,o,n,r.minCellWidth(),r.isRelative),(e,t)=>i.calcRightEdgeDeltas(a,e,t,n,r.minCellWidth(),r.isRelative))},lu=(e,t,n)=>{let r=0;for(let i=e;i<t;i++)r+=n[i]===void 0?0:n[i];return r},uu=(e,t)=>A(Mi.justCells(e),e=>{let n=lu(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}}),du=(e,t)=>A(Mi.justColumns(e),(e,n)=>({element:e.element,width:t[n],colspan:e.colspan})),fu=(e,t)=>A(Mi.justCells(e),e=>{let n=lu(e.row,e.row+e.rowspan,t);return{element:e.element,height:n,rowspan:e.rowspan}}),pu=(e,t)=>A(e.all,(e,n)=>({element:e.element,height:t[n]})),Y=e=>M(e,(e,t)=>e+t,0),mu=(e,t)=>Mi.hasColumns(e)?du(e,t):uu(e,t),hu=(e,t,n)=>{j(mu(e,t),e=>{n.setElementWidth(e.element,e.width)})},gu=(e,t,n,r,i)=>{let a=Mi.fromTable(e),o=i.getCellDelta(t),s=i.getWidths(a,i),c=n===a.grid.columns-1,l=r.clampTableDelta(s,n,o,i.minCellWidth(),c);hu(a,A(cu(s,n,l,i,r),(e,t)=>e+s[t]),i),r.resizeTable(i.adjustTableWidth,l,c)},_u=(e,t,n,r)=>{let i=Mi.fromTable(e),a=A(qa(i,e,r),(e,r)=>n===r?Math.max(t+e,nr()):e),o=fu(i,a);j(pu(i,a),e=>{W(e.element,e.height)}),j(o,e=>{W(e.element,e.height)}),W(e,Y(a))},vu=(e,t,n,r,i)=>{let a=Mi.generate(t),o=r.getWidths(a,r),s=r.pixelWidth(),{newSizes:c,delta:l}=i.calcRedestributedWidths(o,s,n.pixelDelta,r.isRelative);hu(a,c,r),r.adjustTableWidth(l)},yu=(e,t,n,r)=>{let i=Mi.generate(t);hu(i,r.getWidths(i,r),r)},bu=e=>N(e,(e,t)=>ie(e,e=>e.column===t.column)?e:e.concat([t]),[]).sort((e,t)=>e.column-t.column),xu=Ye(`col`),Su=Ye(`colgroup`),Cu=e=>Be(e)===`tr`||Su(e),wu=e=>({element:e,colspan:Xn(e,`colspan`,1),rowspan:Xn(e,`rowspan`,1)}),Tu=(e,t=wu)=>{let n=t=>xu(t.element)?e.col(t):e.cell(t),r=t=>Su(t.element)?e.colgroup(t):e.row(t),i=e=>{if(Cu(e))return r({element:e});{let r=e,i=n(t(r));return a=E.some({item:r,replacement:i}),i}},a=E.none();return{getOrInit:(e,t)=>a.fold(()=>i(e),n=>t(e,n.item)?n.replacement:i(e))}},Eu=e=>t=>{let n=[],r=(e,t)=>le(n,n=>t(n.item,e)),i=r=>{let i=e===`td`?{scope:null}:{},a=t.replace(r,e,i);return n.push({item:r,sub:a}),a};return{replaceOrInit:(e,t)=>{if(Cu(e)||xu(e))return e;{let n=e;return r(n,t).fold(()=>i(n),r=>t(e,r.item)?r.sub:i(n))}}}},Du=e=>tt(e,`scope`).map(e=>e.substr(0,3)),Ou={modification:Tu,transform:Eu,merging:e=>({unmerge:t=>{let n=Du(t);return n.each(e=>Ze(t,`scope`,e)),()=>{let r=e.cell({element:t,colspan:1,rowspan:1});return Jn(r,`width`),Jn(t,`width`),n.each(e=>Ze(r,`scope`,e)),r}},merge:e=>(Jn(e[0],`width`),(()=>{let t=An(A(e,Du));if(t.length===0)return E.none();{let e=t[0],n=[`row`,`col`];return ie(t,t=>t!==e&&k(n,t))?E.none():E.from(e)}})().fold(()=>nt(e[0],`scope`),t=>Ze(e[0],`scope`,t+`group`)),y(e[0]))})},ku=`body.p.div.article.aside.figcaption.figure.footer.header.nav.section.ol.ul.table.thead.tfoot.tbody.caption.tr.td.th.h1.h2.h3.h4.h5.h6.blockquote.pre.address`.split(`.`),Au=(e,t)=>k([`ol`,`ul`],e.property().name(t)),ju=(e,t)=>k(ku,e.property().name(t)),Mu=(e,t)=>k([`br`,`img`,`hr`,`input`],e.property().name(t)),Nu=ks(),Pu=e=>ju(Nu,e),Fu=e=>Au(Nu,e),Iu=e=>Mu(Nu,e),Lu=e=>{let t=Ye(`br`),n=e=>pe(e,e=>t(e)||Ke(e)&&co(e).trim().length===0),r=e=>Be(e)===`li`||xn(e,Fu).isSome(),i=e=>St(e).map(e=>Pu(e)?!0:Iu(e)?Be(e)!==`img`:!1).getOr(!1),a=e=>vo(e).bind(n=>{let a=i(n);return vt(n).map(i=>a===!0||r(i)||t(n)||Pu(i)&&!dt(e,i)?[]:[R.fromTag(`br`)])}).getOr([]),o=(()=>{let t=fe(e,e=>{let t=Ct(e);return n(t)?[]:t.concat(a(e))});return t.length===0?[R.fromTag(`br`)]:t})();Pt(e[0]),Nt(e[0],o)},Ru=e=>ns(e,!0),zu=e=>{sr(e).length===0&&Ft(e)},Bu=(e,t)=>({grid:e,cursor:t}),Vu=e=>I(e,e=>I(e.cells,e=>{let t=e.element;return Mn(Ru(t),t)})),Hu=(e,t,n)=>{let r=xi(e).rows;return E.from(r[t]?.cells[n]?.element).filter(Ru).orThunk(()=>Vu(r))},Uu=(e,t,n)=>Bu(e,Hu(e,t,n)),Wu=e=>N(e,(e,t)=>ie(e,e=>e.row===t.row)?e:e.concat([t]),[]).sort((e,t)=>e.row-t.row),Gu=(e,t,n,r)=>{let i=t[0].row,a=M(Wu(t),(e,t)=>({grid:zl(e.grid,i,t.row+e.delta,n,r.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid;return Uu(a,i,t[0].column)},Ku=(e,t,n,r)=>{let i=Wu(t),a=i[i.length-1],o=a.row+a.rowspan;return Uu(M(i,(e,t)=>zl(e,o,t.row,n,r.getOrInit),e),o,t[0].column)},qu=(e,t,n,r)=>{let i=t.details,a=bu(i),o=a[0].column,s=M(a,(e,t)=>({grid:Vl(e.grid,o,t.column+e.delta,n,r.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid;return Uu(s,i[0].row,o)},Ju=(e,t,n,r)=>{let i=t.details,a=i[i.length-1],o=a.column+a.colspan;return Uu(M(bu(i),(e,t)=>Vl(e,o,t.column,n,r.getOrInit),e),i[0].row,o)},Yu=(e,t,n,r)=>Uu(nu(e,A(bu(t),e=>e.column),!0,n,r.replaceOrInit),t[0].row,t[0].column),Xu=(e,t,n,r)=>Uu(iu(e,t,n,r.replaceOrInit),t[0].row,t[0].column),Zu=(e,t,n,r)=>Uu(nu(e,A(bu(t),e=>e.column),!1,n,r.replaceOrInit),t[0].row,t[0].column),Qu=(e,t,n,r)=>Uu(iu(e,t,n,r.replaceOrInit),t[0].row,t[0].column),$u=(e,t)=>(n,r,i,a,o)=>Uu(ru(n,A(Wu(r),e=>e.row),e,t,i,a.replaceOrInit,o),r[0].row,r[0].column),ed=$u(`thead`,!0),td=$u(`tbody`,!1),nd=$u(`tfoot`,!1),rd=(e,t,n,r)=>{let i=bu(t.details),a=Hl(e,A(i,e=>e.column)),o=a.length>0?a[0].cells.length-1:0;return Uu(a,i[0].row,Math.min(i[0].column,o))},id=(e,t,n,r)=>{let i=Wu(t),a=Ul(e,i[0].row,i[i.length-1].row),o=a.length>0?a.length-1:0;return Uu(a,Math.min(t[0].row,o),t[0].column)},ad=(e,t,n,r)=>{let i=t.cells;return Lu(i),Bu(hl(e,t.bounds,n,r.merge(i)),E.from(i[0]))},od=(e,t,n,r)=>Bu(M(t,(e,t)=>gl(e,t,n,r.unmerge(t)),e),E.from(t[0])),sd=(e,t,n,r)=>{let i=((e,t)=>$c(Mi.fromTable(e),t,!0))(t.clipboard,t.generators);return Fl(Kt(t.row,t.column),e,i,t.generators,n).fold(()=>Bu(e,E.some(t.element)),e=>Uu(e,t.row,t.column))},cd=(e,t,n)=>{let r=hr(e,n.section);return $c(Mi.generate(r),t,!0)},ld=(e,t,n,r)=>{let i=xi(e).rows,a=t.cells[0].column,o=i[t.cells[0].row];return Uu(Il(a,e,cd(t.clipboard,t.generators,o),t.generators,n),t.cells[0].row,t.cells[0].column)},ud=(e,t,n,r)=>{let i=xi(e).rows,a=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,o=i[t.cells[0].row];return Uu(Il(a,e,cd(t.clipboard,t.generators,o),t.generators,n),t.cells[0].row,t.cells[0].column)},dd=(e,t,n,r)=>{let i=xi(e).rows,a=t.cells[0].row,o=i[a];return Uu(Ll(a,e,cd(t.clipboard,t.generators,o),t.generators,n),t.cells[0].row,t.cells[0].column)},X=(e,t,n,r)=>{let i=xi(e).rows,a=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,o=i[t.cells[0].row];return Uu(Ll(a,e,cd(t.clipboard,t.generators,o),t.generators,n),t.cells[0].row,t.cells[0].column)},fd=(e,t)=>{let n=Mi.fromTable(e);return ll(n,t).bind(e=>{let t=e[e.length-1],r=e[0].column,i=t.column+t.colspan;return Pc(de(A(n.all,e=>ce(e.cells,e=>e.column>=r&&e.column<i))))}).getOr(``)},pd=(e,t)=>ll(Mi.fromTable(e),t).bind(Pc).getOr(``),md=(e,t)=>{let n=Mi.fromTable(e);return ll(n,t).bind(e=>{let t=e[e.length-1],r=e[0].row,i=t.row+t.rowspan;return Fc(n.all.slice(r,i))}).getOr(``)},hd=(e,t,n,r)=>yu(e,t,n,r.sizing),gd=(e,t,n,r)=>vu(e,t,n,r.sizing,r.resize),_d=(e,t)=>ie(t,e=>e.column===0&&e.isLocked),vd=(e,t)=>ie(t,t=>t.column+t.colspan>=e.grid.columns&&t.isLocked),yd=(e,t)=>{let n=Ni(e);return N(bu(t),(e,t)=>e+n[t.column].map(ui).getOr(0),0)},bd=e=>(t,n)=>ll(t,n).filter(n=>!(e?_d:vd)(t,n)).map(e=>({details:e,pixelDelta:yd(t,e)})),xd=(e,t)=>ul(e,t).map(t=>({details:t,pixelDelta:-yd(e,t)})),Sd=e=>(t,n)=>ol(t,n).filter(n=>!(e?_d:vd)(t,n.cells)),Z=Ou.transform(`th`),Cd=Ou.transform(`td`),wd=il(Gu,ll,g,g,Ou.modification),Td=il(Ku,ll,g,g,Ou.modification),Ed=il(qu,bd(!0),gd,g,Ou.modification),Dd=il(Ju,bd(!1),gd,g,Ou.modification),Od=il(rd,xd,gd,zu,Ou.modification),kd=il(id,ll,g,zu,Ou.modification),Ad=il(Yu,ul,g,g,Z),jd=il(Zu,ul,g,g,Cd),Md=il(ed,ul,g,g,Z),Nd=il(td,ul,g,g,Cd),Pd=il(nd,ul,g,g,Cd),Fd=il(Xu,ul,g,g,Z),Id=il(Qu,ul,g,g,Cd),Ld=il(ad,pl,hd,g,Ou.merging),Rd=il(od,ml,hd,g,Ou.merging),zd=il(sd,al,hd,g,Ou.modification),Bd=il(ld,Sd(!0),g,g,Ou.modification),Vd=il(ud,Sd(!1),g,g,Ou.modification),Hd=il(dd,ol,g,g,Ou.modification),Ud=il(X,ol,g,g,Ou.modification),Wd=fd,Gd=pd,Kd=md,qd=(e,t)=>e.dispatch(`NewRow`,{node:t}),Jd=(e,t)=>e.dispatch(`NewCell`,{node:t}),Yd=(e,t,n)=>{e.dispatch(`TableModified`,{...n,table:t})},Xd=(e,t,n,r,i)=>{e.dispatch(`TableSelectionChange`,{cells:t,start:n,finish:r,otherCells:i})},Zd=e=>{e.dispatch(`TableSelectionClear`)},Qd=(e,t,n,r,i)=>{e.dispatch(`ObjectResizeStart`,{target:t,width:n,height:r,origin:i})},$d=(e,t,n,r,i)=>{e.dispatch(`ObjectResized`,{target:t,width:n,height:r,origin:i})},ef={structure:!1,style:!0},tf={structure:!0,style:!1},nf={structure:!0,style:!0},rf=(e,t)=>Ko(e)?$a.percentageSize(t):qo(e)?$a.pixelSize(t):$a.getTableSize(t),af=(e,t,n)=>{let r=e=>Be(is(e))===`table`,i=t=>!r(e)||kc(t).rows>1,a=t=>!r(e)||kc(t).columns>1,o=zo(e),s=Wo(e)?g:xc,c=t=>{switch(Vo(e)){case`section`:return Hc.section();case`sectionCells`:return Hc.sectionCells();case`cells`:return Hc.cells();default:return Hc.getTableSectionType(t,`section`)}},l=(t,r)=>r.cursor.fold(()=>_e(sr(t)).filter(fn).map(r=>{n.clearSelectedCells(t.dom);let i=e.dom.createRng();return i.selectNode(r.dom),e.selection.setRng(i),Ze(r,`data-mce-selected`,`1`),i}),r=>{let i=bc(r),a=e.dom.createRng();return a.setStart(i.element.dom,i.offset),a.setEnd(i.element.dom,i.offset),e.selection.setRng(a),n.clearSelectedCells(t.dom),E.some(a)}),u=(n,r,i,a)=>(s,u,d=!1)=>{os(s);let f=ko(i,R.fromDom(e.getDoc()),o),p={sizing:rf(e,s),resize:Wo(e)?Dc():Oc(),section:c(s)};return r(s)?n(s,u,f,p).bind(n=>{t.refresh(s.dom),j(n.newRows,t=>{qd(e,t.dom)}),j(n.newCells,t=>{Jd(e,t.dom)});let r=l(s,n);return fn(s)&&(os(s),d||Yd(e,s.dom,a)),r.map(e=>({rng:e,effect:a}))}):E.none()};return{deleteRow:u(kd,i,g,tf),deleteColumn:u(Od,a,g,tf),insertRowsBefore:u(wd,T,g,tf),insertRowsAfter:u(Td,T,g,tf),insertColumnsBefore:u(Ed,T,s,tf),insertColumnsAfter:u(Dd,T,s,tf),mergeCells:u(Ld,T,g,tf),unmergeCells:u(Rd,T,g,tf),pasteColsBefore:u(Bd,T,g,tf),pasteColsAfter:u(Vd,T,g,tf),pasteRowsBefore:u(Hd,T,g,tf),pasteRowsAfter:u(Ud,T,g,tf),pasteCells:u(zd,T,g,nf),makeCellsHeader:u(Fd,T,g,tf),unmakeCellsHeader:u(Id,T,g,tf),makeColumnsHeader:u(Ad,T,g,tf),unmakeColumnsHeader:u(jd,T,g,tf),makeRowsHeader:u(Md,T,g,tf),makeRowsBody:u(Nd,T,g,tf),makeRowsFooter:u(Pd,T,g,tf),getTableRowType:Kd,getTableCellType:Gd,getTableColType:Wd}},of=(e,t,n)=>{let r=Xn(e,t,1);n===1||r<=1?nt(e,t):Ze(e,t,Math.min(n,r))},sf=(e,t)=>n=>{let r=n.column+n.colspan-1,i=n.column;return r>=e&&i<t},cf=(e,t,n)=>{if(Mi.hasColumns(e)){let r=A(ce(Mi.justColumns(e),sf(t,n)),e=>{let r=zt(e.element);return of(r,`span`,n-t),r}),i=R.fromTag(`colgroup`);return Nt(i,r),[i]}else return[]},lf=(e,t,n)=>A(e.all,e=>{let r=A(ce(e.cells,sf(t,n)),e=>{let r=zt(e.element);return of(r,`colspan`,n-t),r}),i=R.fromTag(`tr`);return Nt(i,r),i}),uf=(e,t)=>{let n=Mi.fromTable(e);return ul(n,t).map(e=>{let t=e[e.length-1],r=e[0].column,i=t.column+t.colspan,a=cf(n,r,i),o=lf(n,r,i);return[...a,...o]})},df=(e,t,n)=>{let r=Mi.fromTable(e);return ll(r,t).bind(e=>{let t=tl(fe(xi($c(r,n,!1)).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),e=>{let t=ce(e.cells,e=>!e.isLocked);return t.length>0?[{...e,cells:t}]:[]}));return Mn(t.length>0,t)}).map(e=>qc(e))},ff=au.generate([{invalid:[`raw`]},{pixels:[`value`]},{percent:[`value`]}]),pf=(e,t,n)=>{let r=n.substring(0,n.length-e.length),i=parseFloat(r);return r===i.toString()?t(i):ff.invalid(n)},mf=e=>In(e,`%`)?pf(`%`,ff.percent,e):In(e,`px`)?pf(`px`,ff.pixels,e):ff.invalid(e),hf={...ff,from:mf},gf=(e,t)=>A(e,e=>hf.from(e).fold(()=>e,e=>e/t*100+`%`,e=>e+`%`)),_f=(e,t,n)=>{let r=n/t;return A(e,e=>hf.from(e).fold(()=>e,e=>e*r+`px`,e=>e/100*n+`px`))},vf=(e,t)=>ae(t,e.fold(()=>y(``),e=>y(e/t+`px`),()=>y(100/t+`%`))),yf=(e,t,n)=>e.fold(()=>t,e=>_f(t,n,e),e=>gf(t,n)),bf=(e,t,n)=>{let r=hf.from(n);return wf(pe(e,e=>e===`0px`)?vf(r,e.length):yf(r,e,t))},xf=(e,t)=>e.length===0?t:M(e,(e,t)=>hf.from(t).fold(y(0),b,b)+e,0),Sf=(e,t)=>{let n=Math.floor(e);return{value:n+t,remainder:e-n}},Cf=(e,t)=>hf.from(e).fold(y(e),e=>e+t+`px`,e=>e+t+`%`),wf=e=>{if(e.length===0)return e;let t=M(e,(e,t)=>{let n=hf.from(t).fold(()=>({value:t,remainder:0}),e=>Sf(e,`px`),e=>({value:e+`%`,remainder:0}));return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}},{output:[],remainder:0}),n=t.output;return n.slice(0,n.length-1).concat([Cf(n[n.length-1],Math.round(t.remainder))])},Tf=hf.from,Ef=(e,t,n)=>{j(t,t=>{let r=xf(e.slice(t.column,t.colspan+t.column),tr());Un(t.element,`width`,r+n)})},Df=(e,t,n)=>{j(t,(t,r)=>{let i=xf([e[r]],tr());Un(t.element,`width`,i+n)})},Of=(e,t,n,r)=>{j(n,t=>{let n=xf(e.slice(t.row,t.rowspan+t.row),nr());Un(t.element,`height`,n+r)}),j(t,(t,n)=>{Un(t.element,`height`,e[n])})},kf=e=>Tf(e).fold(y(`px`),y(`px`),y(`%`)),Af=(e,t,n)=>{let r=Mi.fromTable(e),i=r.all,a=Mi.justCells(r),o=Mi.justColumns(r);t.each(t=>{let n=kf(t),i=li(e),s=bf(Ua(r,e),i,t);Mi.hasColumns(r)?Df(s,o,n):Ef(s,a,n),Un(e,`width`,t)}),n.each(t=>{let n=kf(t),o=Bi(e);Of(bf(K(r,e,aa),o,t),i,a,n),Un(e,`height`,t)})},jf=ja,Mf=Ma,Nf=Na,Pf=e=>{nt(e,`width`)},Ff=e=>{let t=Aa(e);Af(e,E.some(t),E.none()),Pf(e)},If=e=>{let t=ka(e);Af(e,E.some(t),E.none()),Pf(e)},Lf=e=>{Jn(e,`width`);let t=cr(e);j(t.length>0?t:sr(e),e=>{Jn(e,`width`),Pf(e)}),Pf(e)},Rf={styles:{"border-collapse":`collapse`,width:`100%`},attributes:{border:`1`},colGroups:!1},zf=()=>R.fromTag(`th`),Bf=()=>R.fromTag(`td`),Vf=()=>R.fromTag(`col`),Hf=(e,t,n,r)=>{let i=R.fromTag(`tr`);for(let a=0;a<e;a++){let e=r<t||a<n?zf():Bf();a<n&&Ze(e,`scope`,`row`),r<t&&Ze(e,`scope`,`col`),kt(e,R.fromTag(`br`)),kt(i,e)}return i},Uf=e=>{let t=R.fromTag(`colgroup`);return ae(e,()=>kt(t,Vf())),t},Wf=(e,t,n,r)=>ae(e,e=>Hf(t,n,r,e)),Gf=(e,t,n,r,i,a=Rf)=>{let o=R.fromTag(`table`),s=i!==`cells`;Wn(o,a.styles),Qe(o,a.attributes),a.colGroups&&kt(o,Uf(t));let c=Math.min(e,n);if(s&&n>0){let e=R.fromTag(`thead`);kt(o,e),Nt(e,Wf(n,t,i===`sectionCells`?c:0,r))}let l=R.fromTag(`tbody`);return kt(o,l),Nt(l,Wf(s?e-c:e,t,s?0:n,r)),o},Kf=e=>e.dom.innerHTML,qf=e=>{let t=R.fromTag(`div`);return kt(t,R.fromDom(e.dom.cloneNode(!0))),Kf(t)},Jf=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},Yf=(e,t)=>{Dn(t,`td,th`).each(ee(Jf,e))},Xf=(e,t)=>{j(B(t,`tr`),t=>{qd(e,t.dom),j(B(t,`th,td`),t=>{Jd(e,t.dom)})})},Zf=e=>o(e)&&e.indexOf(`%`)!==-1,Qf=(e,t,n,r,i)=>{let a=$o(e),o={styles:a,attributes:Qo(e),colGroups:es(e)};return e.undoManager.ignore(()=>{let a=Gf(n,t,i,r,Vo(e),o);Ze(a,`data-mce-id`,`__mce`);let s=qf(a);e.insertContent(s),e.addVisual()}),Dn(is(e),`table[data-mce-id="__mce"]`).map(t=>(qo(e)?If(t):Jo(e)?Lf(t):(Ko(e)||Zf(a.width))&&Ff(t),os(t),nt(t,`data-mce-id`),Xf(e,t),Yf(e,t),t.dom)).getOrNull()},$f=(e,t,n,r={})=>{let i=e=>h(e)&&e>0;if(i(t)&&i(n)){let i=r.headerRows||0;return Qf(e,n,t,r.headerColumns||0,i)}else return console.error(`Invalid values for mceInsertTable - rows and columns values are required to insert a table.`),null};var ep=tinymce.util.Tools.resolve(`tinymce.FakeClipboard`);let tp=`x-tinymce/dom-table-`,np=tp+`rows`,rp=tp+`columns`,ip=e=>{let t=ep.FakeClipboardItem(e);ep.write([t])},ap=e=>I(ep.read()??[],t=>E.from(t.getType(e))),op=e=>{ap(e).isSome()&&ep.clear()},sp=e=>{e.fold(lp,e=>ip({[np]:e}))},cp=()=>ap(np),lp=()=>op(np),up=e=>{e.fold(fp,e=>ip({[rp]:e}))},dp=()=>ap(rp),fp=()=>op(rp),pp=e=>oc(ss(e),as(e)).filter(ps),mp=e=>sc(ss(e),as(e)).filter(ps),hp=(e,t)=>{let n=as(e),r=()=>pp(e).each(t=>{lr(t,n).filter(S(n)).each(t=>{let n=R.fromText(``);if(Dt(t,n),Ft(t),e.dom.isEmpty(e.getBody()))e.setContent(``),e.selection.setCursorLocation();else{let t=e.dom.createRng();t.setStart(n.dom,0),t.setEnd(n.dom,0),e.selection.setRng(t),e.nodeChanged()}})}),i=t=>pp(e).each(r=>{Jo(e)||qo(e)||Ko(e)||lr(r,n).each(n=>{t===`relative`&&!jf(n)?Ff(n):t===`fixed`&&!Mf(n)?If(n):t===`responsive`&&!Nf(n)&&Lf(n),os(n),Yd(e,n.dom,tf)})}),a=e=>lr(e,n),c=t=>mp(e).bind(e=>a(e).map(n=>t(n,e))),l=(t,n)=>{c(t=>{e.formatter.toggle(`tableclass`,{value:n},t.dom),Yd(e,t.dom,ef)})},u=(t,n)=>{c(t=>{let r=cc(e),i=pe(r,t=>e.formatter.match(`tablecellclass`,{value:n},t.dom))?e.formatter.remove:e.formatter.apply;j(r,e=>i(`tablecellclass`,{value:n},e.dom)),Yd(e,t.dom,ef)})},d=()=>{pp(e).each(t=>{lr(t,n).each(n=>{En(n,`caption`).fold(()=>{let t=R.fromTag(`caption`);kt(t,R.fromText(`Caption`)),At(n,t,0),e.selection.setCursorLocation(t.dom,0)},r=>{Ye(`caption`)(t)&&z(`td`,n).each(t=>e.selection.setCursorLocation(t.dom,0)),Ft(r)}),Yd(e,n.dom,tf)})})},f=t=>{e.focus()},p=(t,n=!1)=>c((r,i)=>{t(r,nc(cc(e),r,i),n).each(f)}),m=()=>c((t,n)=>df(t,nc(cc(e),t,n),ko(g,R.fromDom(e.getDoc()),E.none()))),h=()=>c((t,n)=>uf(t,nc(cc(e),t,n))),_=(t,n)=>n().each(n=>{let r=A(n,e=>zt(e));c((n,i)=>{let a=Ao(R.fromDom(e.getDoc()));t(n,rc(cc(e),i,r,a)).each(f)})}),v=e=>(t,n)=>ke(n,`type`).each(t=>{p(e(t),n.no_events)});xe({mceTableSplitCells:()=>p(t.unmergeCells),mceTableMergeCells:()=>p(t.mergeCells),mceTableInsertRowBefore:()=>p(t.insertRowsBefore),mceTableInsertRowAfter:()=>p(t.insertRowsAfter),mceTableInsertColBefore:()=>p(t.insertColumnsBefore),mceTableInsertColAfter:()=>p(t.insertColumnsAfter),mceTableDeleteCol:()=>p(t.deleteColumn),mceTableDeleteRow:()=>p(t.deleteRow),mceTableCutCol:()=>h().each(e=>{up(e),p(t.deleteColumn)}),mceTableCutRow:()=>m().each(e=>{sp(e),p(t.deleteRow)}),mceTableCopyCol:()=>h().each(e=>up(e)),mceTableCopyRow:()=>m().each(e=>sp(e)),mceTablePasteColBefore:()=>_(t.pasteColsBefore,dp),mceTablePasteColAfter:()=>_(t.pasteColsAfter,dp),mceTablePasteRowBefore:()=>_(t.pasteRowsBefore,cp),mceTablePasteRowAfter:()=>_(t.pasteRowsAfter,cp),mceTableDelete:r,mceTableCellToggleClass:u,mceTableToggleClass:l,mceTableToggleCaption:d,mceTableSizingMode:(e,t)=>i(t),mceTableCellType:v(e=>e===`th`?t.makeCellsHeader:t.unmakeCellsHeader),mceTableColType:v(e=>e===`th`?t.makeColumnsHeader:t.unmakeColumnsHeader),mceTableRowType:v(e=>{switch(e){case`header`:return t.makeRowsHeader;case`footer`:return t.makeRowsFooter;default:return t.makeRowsBody}})},(t,n)=>e.addCommand(n,t)),e.addCommand(`mceInsertTable`,(t,n)=>{$f(e,n.rows,n.columns,n.options)}),e.addCommand(`mceTableApplyCellStyle`,(t,n)=>{let r=e=>`tablecell`+e.toLowerCase().replace(`-`,``);if(!s(n))return;let i=ce(cc(e),ps);if(i.length===0)return;let c=Ee(n,(t,n)=>e.formatter.has(r(n))&&o(t));Me(c)||(xe(c,(t,n)=>{let a=r(n);j(i,n=>{t===``?e.formatter.remove(a,{value:null},n.dom,!0):e.formatter.apply(a,{value:t},n.dom)})}),a(i[0]).each(t=>Yd(e,t.dom,ef)))})},gp=(e,t)=>{let n=as(e),r=t=>sc(ss(e)).bind(r=>lr(r,n).map(n=>t(n,nc(cc(e),n,r)))).getOr(``);xe({mceTableRowType:()=>r(t.getTableRowType),mceTableCellType:()=>r(t.getTableCellType),mceTableColType:()=>r(t.getTableColType)},(t,n)=>e.addQueryValueHandler(n,t))},_p=au.generate([{before:[`element`]},{on:[`element`,`offset`]},{after:[`element`]}]),vp={before:_p.before,on:_p.on,after:_p.after,cata:(e,t,n,r)=>e.fold(t,n,r),getStart:e=>e.fold(b,b,b)},yp={create:(e,t)=>({selection:e,kill:t})},bp=(e,t)=>{let n=e.document.createRange();return n.selectNode(t.dom),n},xp=(e,t)=>{let n=e.document.createRange();return Sp(n,t),n},Sp=(e,t)=>e.selectNodeContents(t.dom),Cp=(e,t)=>{t.fold(t=>{e.setStartBefore(t.dom)},(t,n)=>{e.setStart(t.dom,n)},t=>{e.setStartAfter(t.dom)})},wp=(e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,n)=>{e.setEnd(t.dom,n)},t=>{e.setEndAfter(t.dom)})},Tp=(e,t,n)=>{let r=e.document.createRange();return Cp(r,t),wp(r,n),r},Ep=(e,t,n,r,i)=>{let a=e.document.createRange();return a.setStart(t.dom,n),a.setEnd(r.dom,i),a},Dp=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Op=e=>{let t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?E.some(n).map(Dp):E.none()},kp=au.generate([{ltr:[`start`,`soffset`,`finish`,`foffset`]},{rtl:[`start`,`soffset`,`finish`,`foffset`]}]),Ap=(e,t,n)=>t(R.fromDom(n.startContainer),n.startOffset,R.fromDom(n.endContainer),n.endOffset),jp=(e,t)=>t.match({domRange:e=>({ltr:y(e),rtl:E.none}),relative:(t,n)=>({ltr:V(()=>Tp(e,t,n)),rtl:V(()=>E.some(Tp(e,n,t)))}),exact:(t,n,r,i)=>({ltr:V(()=>Ep(e,t,n,r,i)),rtl:V(()=>E.some(Ep(e,r,i,t,n)))})}),Mp=(e,t)=>{let n=t.ltr();return n.collapsed?t.rtl().filter(e=>e.collapsed===!1).map(e=>kp.rtl(R.fromDom(e.endContainer),e.endOffset,R.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>Ap(e,kp.ltr,n)):Ap(e,kp.ltr,n)},Np=(e,t)=>Mp(e,jp(e,t)),Pp=(e,t)=>Np(e,t).match({ltr:(t,n,r,i)=>{let a=e.document.createRange();return a.setStart(t.dom,n),a.setEnd(r.dom,i),a},rtl:(t,n,r,i)=>{let a=e.document.createRange();return a.setStart(r.dom,i),a.setEnd(t.dom,n),a}});kp.ltr,kp.rtl;let Fp={create:(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r})},Ip={create:(e,t,n,r)=>({start:vp.on(e,t),finish:vp.on(n,r)})},Lp=(e,t)=>{let n=Pp(e,t);return Fp.create(R.fromDom(n.startContainer),n.startOffset,R.fromDom(n.endContainer),n.endOffset)},Rp=Ip.create,zp=(e,t,n,r,i,a,o)=>dt(n,i)&&r===a?E.none():On(n,`td,th`,t).bind(n=>On(i,`td,th`,t).bind(r=>Bp(e,t,n,r,o))),Bp=(e,t,n,r,i)=>dt(n,r)?E.none():Vs(n,r,t).bind(t=>{let r=t.boxes.getOr([]);return r.length>1?(i(e,r,t.start,t.finish),E.some(yp.create(E.some(Rp(n,0,n,fo(n))),!0))):E.none()}),Vp=(e,t,n,r,i)=>Ks(r,e,t,i.firstSelectedSelector,i.lastSelectedSelector).map(e=>(i.clearBeforeUpdate(n),i.selectRange(n,e.boxes,e.start,e.finish),e.boxes)),Hp=(e,t)=>({item:e,mode:t}),Up=(e,t,n,r=Wp)=>e.property().parent(t).map(e=>Hp(e,r)),Wp=(e,t,n,r=Gp)=>n.sibling(e,t).map(e=>Hp(e,r)),Gp=(e,t,n,r=Gp)=>{let i=e.property().children(t);return n.first(i).map(e=>Hp(e,r))},Kp=[{current:Up,next:Wp,fallback:E.none()},{current:Wp,next:Gp,fallback:E.some(Up)},{current:Gp,next:Gp,fallback:E.some(Wp)}],qp=(e,t,n,r,i=Kp)=>le(i,e=>e.current===n).bind(n=>n.current(e,t,r,n.next).orThunk(()=>n.fallback.bind(n=>qp(e,t,n,r)))),Jp={left:()=>({sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?E.some(e[e.length-1]):E.none()}),right:()=>({sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?E.some(e[0]):E.none()})},Yp=(e,t,n,r,i,a)=>qp(e,t,r,i).bind(t=>a(t.item)?E.none():n(t.item)?E.some(t.item):Yp(e,t.item,n,t.mode,i,a)),Xp=(e,t,n,r)=>Yp(e,t,n,Wp,Jp.left(),r),Zp=(e,t,n,r)=>Yp(e,t,n,Wp,Jp.right(),r),Qp=e=>t=>e.property().children(t).length===0,$p=(e,t,n)=>tm(e,t,Qp(e),n),em=(e,t,n)=>nm(e,t,Qp(e),n),tm=Xp,nm=Zp,rm=ks(),im=(e,t)=>$p(rm,e,t),am=(e,t)=>em(rm,e,t),om=(e,t,n)=>tm(rm,e,t,n),sm=(e,t,n)=>nm(rm,e,t,n),cm=(e,t,n)=>xn(e,t,n).isSome(),lm=au.generate([{none:[`message`]},{success:[]},{failedUp:[`cell`]},{failedDown:[`cell`]}]),um=(e,t,n)=>{let r=e.getRect(t),i=e.getRect(n);return i.right>r.left&&i.left<r.right},dm=e=>On(e,`tr`),fm=(e,t,n,r,i,a,o)=>On(r,`td,th`,o).bind(n=>On(t,`td,th`,o).map(t=>dt(n,t)?dt(r,n)&&fo(n)===i?a(t):lm.none(`in same cell`):Rs(dm,[n,t]).fold(()=>um(e,t,n)?lm.success():a(t),e=>a(t)))).getOr(lm.none(`default`)),pm=(e,t,n,r,i)=>e.fold(t,n,r,i),mm={...lm,verify:fm,cata:pm},hm=(e,t,n,r)=>({parent:e,children:t,element:n,index:r}),gm=e=>vt(e).bind(t=>{let n=Ct(t);return _m(n,e).map(r=>hm(t,n,e,r))}),_m=(e,t)=>ue(e,ee(dt,t)),vm=Ye(`br`),ym=(e,t,n)=>t(e,n).bind(e=>Ke(e)&&co(e).trim().length===0?ym(e,t,n):E.some(e)),bm=(e,t,n)=>n.traverse(t).orThunk(()=>ym(t,n.gather,e)).map(n.relative),xm=(e,t)=>wt(e,t).filter(vm).orThunk(()=>wt(e,t-1).filter(vm)),Sm=(e,t,n,r)=>xm(t,n).bind(t=>r.traverse(t).fold(()=>ym(t,r.gather,e).map(r.relative),e=>gm(e).map(e=>vp.on(e.parent,e.index)))),Cm=(e,t,n,r)=>(vm(t)?bm(e,t,r):Sm(e,t,n,r)).map(e=>({start:e,finish:e})),wm=e=>mm.cata(e,e=>E.none(),()=>E.none(),e=>E.some(mc(e,0)),e=>E.some(mc(e,fo(e)))),Tm=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),Em=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),Dm=(e,t,n)=>({left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}),Om=e=>e.top,km=e=>e.bottom,Am=(e,t,n)=>n>=0&&n<fo(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):E.none(),jm=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),Mm=(e,t)=>E.some(e.getRect(t)),Nm=(e,t,n)=>Ge(t)?Mm(e,t).map(jm):Ke(t)?Am(e,t,n).map(jm):E.none(),Pm=(e,t)=>Ge(t)?Mm(e,t).map(jm):Ke(t)?e.getRangedRect(t,0,t,fo(t)).map(jm):E.none(),Fm=au.generate([{none:[]},{retry:[`caret`]}]),Im=(e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right,Lm=(e,t,n)=>Sn(t,Pu).fold(w,t=>Pm(e,t).exists(e=>Im(n,e))),Rm=(e,t,n,r,i)=>{let a=Tm(i,5);return Math.abs(n.bottom-r.bottom)<1||n.top>i.bottom?Fm.retry(a):n.top===i.bottom?Fm.retry(Tm(i,1)):Lm(e,t,i)?Fm.retry(Dm(a,5,0)):Fm.none()},zm={point:Om,adjuster:(e,t,n,r,i)=>{let a=Em(i,5);return Math.abs(n.top-r.top)<1||n.bottom<i.top?Fm.retry(a):n.bottom===i.top?Fm.retry(Em(i,1)):Lm(e,t,i)?Fm.retry(Dm(a,5,0)):Fm.none()},move:Em,gather:im},Bm={point:km,adjuster:Rm,move:Tm,gather:am},Vm=(e,t,n)=>e.elementFromPoint(t,n).filter(e=>Be(e)===`table`).isSome(),Hm=(e,t,n,r,i)=>Um(e,t,n,t.move(r,5),i),Um=(e,t,n,r,i)=>i===0?E.some(r):Vm(e,r.left,t.point(r))?Hm(e,t,n,r,i-1):e.situsFromPoint(r.left,t.point(r)).bind(a=>a.start.fold(E.none,a=>Pm(e,a).bind(o=>t.adjuster(e,a,o,n,r).fold(E.none,r=>Um(e,t,n,r,i-1))).orThunk(()=>E.some(r)),E.none)),Wm=(e,t,n)=>e.point(t)>n.getInnerHeight()?E.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?E.some(-e.point(t)):E.none(),Gm=(e,t,n)=>{let r=e.move(n,5),i=Um(t,e,n,r,100).getOr(r);return Wm(e,i,t).fold(()=>t.situsFromPoint(i.left,e.point(i)),n=>(t.scrollBy(0,n),t.situsFromPoint(i.left,e.point(i)-n)))},Km={tryUp:ee(Gm,zm),tryDown:ee(Gm,Bm),getJumpSize:y(5)},qm=(e,t,n)=>e.getSelection().bind(r=>Cm(t,r.finish,r.foffset,n).fold(()=>E.some(mc(r.finish,r.foffset)),i=>{let a=e.fromSitus(i);return wm(mm.verify(e,r.finish,r.foffset,a.finish,a.foffset,n.failure,t))})),Jm=(e,t,n,r,i,a)=>a===0?E.none():Zm(e,t,n,r,i).bind(o=>{let s=e.fromSitus(o),c=mm.verify(e,n,r,s.finish,s.foffset,i.failure,t);return mm.cata(c,()=>E.none(),()=>E.some(o),o=>dt(n,o)&&r===0?Ym(e,n,r,Em,i):Jm(e,t,o,0,i,a-1),o=>dt(n,o)&&r===fo(o)?Ym(e,n,r,Tm,i):Jm(e,t,o,fo(o),i,a-1))}),Ym=(e,t,n,r,i)=>Nm(e,t,n).bind(t=>Xm(e,i,r(t,Km.getJumpSize()))),Xm=(e,t,n)=>{let r=$r().browser;return r.isChromium()||r.isSafari()||r.isFirefox()?t.retry(e,n):E.none()},Zm=(e,t,n,r,i)=>Nm(e,n,r).bind(t=>Xm(e,i,t)),Qm=(e,t,n)=>qm(e,t,n).bind(r=>Jm(e,t,r.element,r.offset,n,20).map(e.fromSitus)),$m=(e,t)=>cm(e,e=>vt(e).exists(e=>dt(e,t))),eh=(e,t,n,r,i)=>On(r,`td,th`,t).bind(r=>On(r,`table`,t).bind(a=>$m(i,a)?Qm(e,t,n).bind(e=>On(e.finish,`td,th`,t).map(t=>({start:r,finish:t,range:e}))):E.none())),th=(e,t,n,r,i,a)=>a(r,t).orThunk(()=>eh(e,t,n,r,i).map(e=>{let t=e.range;return yp.create(E.some(Rp(t.start,t.soffset,t.finish,t.foffset)),!0)})),nh=(e,t)=>On(e,`tr`,t).bind(e=>On(e,`table`,t).bind(n=>dt(e,B(n,`tr`)[0])?om(n,e=>vo(e).isSome(),t).map(e=>{let t=fo(e);return yp.create(E.some(Rp(e,t,e,t)),!0)}):E.none())),rh=(e,t)=>On(e,`tr`,t).bind(e=>On(e,`table`,t).bind(n=>{let r=B(n,`tr`);return dt(e,r[r.length-1])?sm(n,e=>_o(e).isSome(),t).map(e=>yp.create(E.some(Rp(e,0,e,0)),!0)):E.none()})),ih=(e,t,n,r,i,a,o)=>eh(e,n,r,i,a).bind(e=>Bp(t,n,e.start,e.finish,o)),ah=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},oh=e=>{let t=ah(E.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(E.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(E.some(e))}}},sh=()=>{let e=oh(g),t=t=>e.get().each(t);return{...e,on:t}},ch=(e,t)=>On(e,`td,th`,t),lh=e=>yt(e).exists(ns),uh=(e,t,n,r)=>{let i=sh(),a=i.clear,o=a=>{i.on(i=>{r.clearBeforeUpdate(t),ch(a.target,n).each(o=>{Vs(i,o,n).each(n=>{let i=n.boxes.getOr([]);if(i.length===1){let n=i[0],o=rs(n)===`false`,s=kn(ts(a.target),n,dt);o&&s&&(r.selectRange(t,i,n,n),e.selectContents(n))}else i.length>1&&(r.selectRange(t,i,n.start,n.finish),e.selectContents(o))})})})};return{clearstate:a,mousedown:e=>{r.clear(t),ch(e.target,n).filter(lh).each(i.set)},mouseover:e=>{o(e)},mouseup:e=>{o(e),a()}}},dh={traverse:St,gather:am,relative:vp.before,retry:Km.tryDown,failure:mm.failedDown},Q={traverse:xt,gather:im,relative:vp.before,retry:Km.tryUp,failure:mm.failedUp},fh=e=>t=>t===e,ph=fh(38),mh=fh(40),hh=e=>e>=37&&e<=40,gh={isBackward:fh(37),isForward:fh(39)},_h={isBackward:fh(39),isForward:fh(37)},vh=e=>{let t=e===void 0?document:e.dom;return Wi(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},yh=(e,t,n)=>{let r=(n===void 0?document:n.dom).defaultView;r&&r.scrollBy(e,t)},bh=au.generate([{domRange:[`rng`]},{relative:[`startSitu`,`finishSitu`]},{exact:[`start`,`soffset`,`finish`,`foffset`]}]),xh=e=>bh.exact(e.start,e.soffset,e.finish,e.foffset),Sh=e=>e.match({domRange:e=>R.fromDom(e.startContainer),relative:(e,t)=>vp.getStart(e),exact:(e,t,n,r)=>e}),Ch={domRange:bh.domRange,relative:bh.relative,exact:bh.exact,exactFromRange:xh,getWin:e=>_t(Sh(e)),range:Fp.create},wh=document.caretPositionFromPoint?(e,t,n)=>{var r;return E.from((r=e.dom).caretPositionFromPoint?.call(r,t,n)).bind(t=>{if(t.offsetNode===null)return E.none();let n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),E.some(n)})}:document.caretRangeFromPoint?(e,t,n)=>{var r;return E.from((r=e.dom).caretRangeFromPoint?.call(r,t,n))}:E.none,Th=(e,t,n)=>wh(R.fromDom(e.document),t,n).map(e=>Fp.create(R.fromDom(e.startContainer),e.startOffset,R.fromDom(e.endContainer),e.endOffset)),Eh=(e,t)=>{let n=Be(e);return n===`input`?vp.after(e):k([`br`,`img`],n)?t===0?vp.before(e):vp.after(e):vp.on(e,t)},Dh=(e,t)=>{let n=e.fold(vp.before,Eh,vp.after),r=t.fold(vp.before,Eh,vp.after);return Ch.relative(n,r)},Oh=(e,t,n,r)=>{let i=Eh(e,t),a=Eh(n,r);return Ch.relative(i,a)},kh=(e,t,n,r)=>{let i=mt(e).dom.createRange();return i.setStart(e.dom,t),i.setEnd(n.dom,r),i},Ah=(e,t,n,r)=>{let i=kh(e,t,n,r),a=dt(e,n)&&t===r;return i.collapsed&&!a},jh=e=>E.from(e.getSelection()),Mh=(e,t)=>{jh(e).each(e=>{e.removeAllRanges(),e.addRange(t)})},Nh=(e,t,n,r,i)=>{Mh(e,Ep(e,t,n,r,i))},Ph=(e,t,n,r,i,a)=>{t.collapse(n.dom,r),t.extend(i.dom,a)},Fh=(e,t)=>Np(e,t).match({ltr:(t,n,r,i)=>{Nh(e,t,n,r,i)},rtl:(t,n,r,i)=>{jh(e).each(a=>{if(a.setBaseAndExtent)a.setBaseAndExtent(t.dom,n,r.dom,i);else if(a.extend)try{Ph(e,a,t,n,r,i)}catch{Nh(e,r,i,t,n)}else Nh(e,r,i,t,n)})}}),Ih=(e,t,n,r,i)=>{Fh(e,Oh(t,n,r,i))},Lh=(e,t,n)=>{Fh(e,Dh(t,n))},Rh=e=>{if(e.rangeCount>0){let t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return E.some(Fp.create(R.fromDom(t.startContainer),t.startOffset,R.fromDom(n.endContainer),n.endOffset))}else return E.none()},zh=e=>{if(e.anchorNode===null||e.focusNode===null)return Rh(e);{let t=R.fromDom(e.anchorNode),n=R.fromDom(e.focusNode);return Ah(t,e.anchorOffset,n,e.focusOffset)?E.some(Fp.create(t,e.anchorOffset,n,e.focusOffset)):Rh(e)}},Bh=(e,t,n=!0)=>{Mh(e,(n?xp:bp)(e,t))},Vh=e=>jh(e).filter(e=>e.rangeCount>0).bind(zh),Hh=e=>Vh(e).map(e=>Ch.exact(e.start,e.soffset,e.finish,e.foffset)),Uh=(e,t)=>Op(Pp(e,t)),Wh=(e,t,n)=>Th(e,t,n),Gh=e=>{jh(e).each(e=>e.removeAllRanges())},Kh=e=>({elementFromPoint:(t,n)=>R.fromPoint(R.fromDom(e.document),t,n),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(t,n,r,i)=>Uh(e,Ch.exact(t,n,r,i)),getSelection:()=>Hh(e).map(t=>Lp(e,t)),fromSitus:t=>Lp(e,Ch.relative(t.start,t.finish)),situsFromPoint:(t,n)=>Wh(e,t,n).map(e=>Ip.create(e.start,e.soffset,e.finish,e.foffset)),clearSelection:()=>{Gh(e)},collapseSelection:(t=!1)=>{Hh(e).each(n=>n.fold(e=>e.collapse(t),(n,r)=>{let i=t?n:r;Lh(e,i,i)},(n,r,i,a)=>{let o=t?n:i,s=t?r:a;Ih(e,o,s,o,s)}))},setSelection:t=>{Ih(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,n)=>{Lh(e,t,n)},selectNode:t=>{Bh(e,t,!1)},selectContents:t=>{Bh(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>vh(R.fromDom(e.document)).top,scrollBy:(t,n)=>{yh(t,n,R.fromDom(e.document))}}),qh=(e,t)=>({rows:e,cols:t}),Jh=(e,t,n,r)=>{let i=uh(Kh(e),t,n,r);return{clearstate:i.clearstate,mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},Yh=e=>Sn(e,We).exists(ns),Xh=(e,t)=>Yh(e)||Yh(t),Zh=(e,t,n,r)=>{let i=Kh(e),a=()=>(r.clear(t),E.none());return{keydown:(e,o,s,c,l,u)=>{let d=e.raw,f=d.which,p=d.shiftKey===!0;return Hs(t,r.selectedSelector).fold(()=>(hh(f)&&!p&&r.clearBeforeUpdate(t),hh(f)&&p&&!Xh(o,c)?E.none:mh(f)&&p?ee(ih,i,t,n,dh,c,o,r.selectRange):ph(f)&&p?ee(ih,i,t,n,Q,c,o,r.selectRange):mh(f)?ee(th,i,n,dh,c,o,rh):ph(f)?ee(th,i,n,Q,c,o,nh):E.none),e=>{let n=n=>()=>I(n,n=>Vp(n.rows,n.cols,t,e,r)).fold(()=>Ws(t,r.firstSelectedSelector,r.lastSelectedSelector).map(e=>{let n=mh(f)||u.isForward(f)?vp.after:vp.before;return i.setRelativeSelection(vp.on(e.first,0),n(e.table)),r.clear(t),yp.create(E.none(),!0)}),e=>E.some(yp.create(E.none(),!0)));return hh(f)&&p&&!Xh(o,c)?E.none:mh(f)&&p?n([qh(1,0)]):ph(f)&&p?n([qh(-1,0)]):u.isBackward(f)&&p?n([qh(0,-1),qh(-1,0)]):u.isForward(f)&&p?n([qh(0,1),qh(1,0)]):hh(f)&&!p?a:E.none})()},keyup:(e,i,a,o,s)=>Hs(t,r.selectedSelector).fold(()=>{let c=e.raw,l=c.which;return c.shiftKey===!0&&hh(l)&&Xh(i,o)?zp(t,n,i,a,o,s,r.selectRange):E.none()},E.none)}},Qh=(e,t,n,r)=>{let i=Kh(e);return(e,a)=>{r.clearBeforeUpdate(t),Vs(e,a,n).each(e=>{let n=e.boxes.getOr([]);r.selectRange(t,n,e.start,e.finish),i.selectContents(a),i.collapseSelection()})}},$h=(e,t)=>{let n=et(e,t);return n===void 0||n===``?[]:n.split(` `)},eg=(e,t,n)=>(Ze(e,t,$h(e,t).concat([n]).join(` `)),!0),tg=(e,t,n)=>{let r=ce($h(e,t),e=>e!==n);return r.length>0?Ze(e,t,r.join(` `)):nt(e,t),!1},ng=e=>e.dom.classList!==void 0,rg=e=>$h(e,`class`),ig=(e,t)=>eg(e,`class`,t),ag=(e,t)=>tg(e,`class`,t),og=(e,t)=>{ng(e)?e.dom.classList.add(t):ig(e,t)},sg=e=>{(ng(e)?e.dom.classList:rg(e)).length===0&&nt(e,`class`)},cg=(e,t)=>{ng(e)?e.dom.classList.remove(t):ag(e,t),sg(e)},lg=(e,t)=>ng(e)&&e.dom.classList.contains(t),ug=(e,t)=>{j(t,t=>{cg(e,t)})},dg=e=>t=>{og(t,e)},fg=e=>t=>{ug(t,e)},pg={byClass:e=>{let t=dg(e.selected),n=fg([e.selected,e.lastSelected,e.firstSelected]),r=t=>{j(B(t,e.selectedSelector),n)};return{clearBeforeUpdate:r,clear:r,selectRange:(n,i,a,o)=>{r(n),j(i,t),og(a,e.firstSelected),og(o,e.lastSelected)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},byAttr:(e,t,n)=>{let r=t=>{nt(t,e.selected),nt(t,e.firstSelected),nt(t,e.lastSelected)},i=t=>{Ze(t,e.selected,`1`)},a=e=>{o(e),n()},o=t=>{j(B(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`),r)};return{clearBeforeUpdate:o,clear:a,selectRange:(n,r,o,s)=>{a(n),j(r,i),Ze(o,e.firstSelected,`1`),Ze(s,e.lastSelected,`1`),t(r,o,s)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}}},mg=(e,t,n,r)=>{switch(e.tag){case`none`:return t();case`single`:return r(e.element);case`multiple`:return n(e.elements)}},hg=()=>({tag:`none`}),gg=e=>({tag:`multiple`,elements:e}),_g=e=>({tag:`single`,element:e}),vg=(e,t,n)=>({get:()=>qs(e(),n).fold(()=>t().fold(hg,_g),gg)}),yg=(e,t)=>fe(tl(e.slice(0,t[t.length-1].row+1)),e=>A(e.cells.slice(0,t[t.length-1].column+1),e=>e.element)),bg=(e,t)=>fe(tl(e.slice(t[0].row+t[0].rowspan-1,e.length)),e=>A(e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length),e=>e.element)),xg=(e,t,n)=>{let r=Mi.fromTable(e);return ll(r,t).map(e=>{let{rows:t}=xi($c(r,n,!1));return{upOrLeftCells:yg(t,e),downOrRightCells:bg(t,e)}})},Sg=(e,t,n,r,i,a,o)=>({target:e,x:t,y:n,stop:r,prevent:i,kill:a,raw:o}),Cg=e=>{let t=R.fromDom(un(e).getOr(e.target)),n=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=_(r,n);return Sg(t,e.clientX,e.clientY,n,r,i,e)},wg=(e,t)=>n=>{e(n)&&t(Cg(n))},Tg=(e,t,n,r,i)=>{let a=wg(n,r);return e.dom.addEventListener(t,a,i),{unbind:ee(Dg,e,t,a,i)}},Eg=(e,t,n,r)=>Tg(e,t,n,r,!1),Dg=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},Og=T,kg=(e,t,n)=>Eg(e,t,Og,n),Ag=Cg,jg=e=>!lg(R.fromDom(e.target),`ephox-snooker-resizer-bar`),Mg=(e,t)=>{let n=vg(()=>R.fromDom(e.getBody()),()=>sc(ss(e),as(e)),tc.selectedSelector),r=pg.byAttr(tc,(t,n,r)=>{lr(n).each(i=>{let a=zo(e),o=ko(g,R.fromDom(e.getDoc()),a);Xd(e,t,n,r,xg(i,{selection:cc(e)},o))})},()=>Zd(e));return e.on(`init`,n=>{let i=e.getWin(),a=is(e),o=as(e),s=()=>{let t=e.selection;Rs(lr,[R.fromDom(t.getStart()),R.fromDom(t.getEnd())]).fold(()=>r.clear(a),g)},c=Jh(i,a,o,r),l=Zh(i,a,o,r),u=Qh(i,a,o,r),d=e=>e.raw.shiftKey===!0;e.on(`TableSelectorChange`,e=>u(e.start,e.finish));let f=(t,n)=>{d(t)&&(n.kill&&t.kill(),n.selection.each(t=>{let n=Pp(i,Ch.relative(t.start,t.finish));e.selection.setRng(n)}))},p=t=>{let n=Ag(t);if(n.raw.shiftKey&&hh(n.raw.which)){let t=e.selection.getRng(),r=R.fromDom(t.startContainer),i=R.fromDom(t.endContainer);l.keyup(n,r,t.startOffset,i,t.endOffset).each(e=>{f(n,e)})}},m=n=>{let r=Ag(n);t.hide();let i=e.selection.getRng(),a=R.fromDom(i.startContainer),o=R.fromDom(i.endContainer),s=Li(gh,_h)(R.fromDom(e.selection.getStart()));l.keydown(r,a,i.startOffset,o,i.endOffset,s).each(e=>{f(r,e)}),t.show()},h=e=>e.button===0,_=e=>e.buttons===void 0?!0:(e.buttons&1)!=0,v=e=>{c.clearstate()},y=e=>{h(e)&&jg(e)&&c.mousedown(Ag(e))},b=e=>{_(e)&&jg(e)&&c.mouseover(Ag(e))},x=e=>{h(e)&&jg(e)&&c.mouseup(Ag(e))},ee=(()=>{let e=ah(R.fromDom(a)),t=ah(0);return{touchEnd:n=>{let r=R.fromDom(n.target);if(Ye(`td`)(r)||Ye(`th`)(r)){let i=e.get(),a=t.get();dt(i,r)&&n.timeStamp-a<300&&(n.preventDefault(),u(r,r))}e.set(r),t.set(n.timeStamp)}}})();e.on(`dragstart`,v),e.on(`mousedown`,y),e.on(`mouseover`,b),e.on(`mouseup`,x),e.on(`touchend`,ee.touchEnd),e.on(`keyup`,p),e.on(`keydown`,m),e.on(`NodeChange`,s)}),e.on(`PreInit`,()=>{e.serializer.addTempAttr(tc.firstSelected),e.serializer.addTempAttr(tc.lastSelected)}),{getSelectedCells:()=>mg(n.get(),y([]),e=>A(e,e=>e.dom),e=>[e.dom]),clearSelectedCells:e=>r.clear(R.fromDom(e))}},Ng=e=>{let t=[];return{bind:e=>{if(e===void 0)throw Error(`Event bind error: undefined handler`);t.push(e)},unbind:e=>{t=ce(t,t=>t!==e)},trigger:(...n)=>{let r={};j(e,(e,t)=>{r[e]=n[t]}),j(t,e=>{e(r)})}}},Pg=e=>({registry:Se(e,e=>({bind:e.bind,unbind:e.unbind})),trigger:Se(e,e=>e.trigger)}),Fg=(e,t)=>{let n=null,r=()=>{l(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...i)=>{r(),n=setTimeout(()=>{n=null,e.apply(null,i)},t)}}},Ig=e=>e.slice(0).sort(),Lg=(e,t)=>{throw Error(`All required keys (`+Ig(e).join(`, `)+`) were not specified. Specified keys were: `+Ig(t).join(`, `)+`.`)},Rg=e=>{throw Error(`Unsupported keys for object: `+Ig(e).join(`, `))},zg=(e,t)=>{if(!c(t))throw Error(`The `+e+` fields must be an array. Was: `+t+`.`);j(t,t=>{if(!o(t))throw Error(`The value `+t+` in the `+e+` fields was not a string.`)})},Bg=(e,t)=>{throw Error(`All values need to be of type: `+t+`. Keys (`+Ig(e).join(`, `)+`) were not.`)},Vg=e=>{let t=Ig(e);le(t,(e,n)=>n<t.length-1&&e===t[n+1]).each(e=>{throw Error(`The field: `+e+` occurs more than once in the combined fields: [`+t.join(`, `)+`].`)})},Hg=(e,t)=>Ug(e,t,{validate:m,label:`function`}),Ug=(e,t,n)=>{if(t.length===0)throw Error(`You must specify at least one required field.`);return zg(`required`,t),Vg(t),r=>{let i=ye(r);pe(t,e=>k(i,e))||Lg(t,i),e(t,i);let a=ce(t,e=>!n.validate(r[e],e));return a.length>0&&Bg(a,n.label),r}},Wg=(e,t)=>{let n=ce(t,t=>!k(e,t));n.length>0&&Rg(n)},Gg=e=>Hg(Wg,e),Kg=Gg([`compare`,`extract`,`mutate`,`sink`]),qg=Gg([`element`,`start`,`stop`,`destroy`]),Jg=Gg([`forceDrop`,`drop`,`move`,`delayDrop`]),Yg=()=>{let e=E.none(),t=()=>{e=E.none()},n=(t,n)=>{let r=e.map(e=>t.compare(e,n));return e=E.some(n),r},r=(e,t)=>{t.extract(e).each(e=>{n(t,e).each(e=>{i.trigger.move(e)})})},i=Pg({move:Ng([`info`])});return{onEvent:r,reset:t,events:i.registry}},Xg=()=>({onEvent:g,reset:g,events:Pg({move:Ng([`info`])}).registry}),Zg=()=>{let e=Xg(),t=Yg(),n=e;return{on:()=>{n.reset(),n=t},off:()=>{n.reset(),n=e},isOn:()=>n===t,onEvent:(e,t)=>{n.onEvent(e,t)},events:t.events}},Qg=(e,t,n)=>{let r=!1,i=Pg({start:Ng([]),stop:Ng([])}),a=Zg(),o=()=>{m.stop(),a.isOn()&&(a.off(),i.trigger.stop())},s=Fg(o,200),c=e=>{m.start(e),a.on(),i.trigger.start()},l=e=>{s.cancel(),a.onEvent(e,t)};a.events.move.bind(n=>{t.mutate(e,n.info)});let u=()=>{r=!0},d=()=>{r=!1},f=()=>r,p=e=>(...t)=>{r&&e.apply(null,t)},m=t.sink(Jg({forceDrop:o,drop:p(o),move:p(l),delayDrop:p(s.throttle)}),n);return{element:m.element,go:c,on:u,off:d,isActive:f,destroy:()=>{m.destroy()},events:i.registry}},$g=e=>{let t=e.replace(/\./g,`-`);return{resolve:e=>t+`-`+e}},e_=$g(`ephox-dragster`).resolve,t_=e=>{let t={layerClass:e_(`blocker`),...e},n=R.fromTag(`div`);return Ze(n,`role`,`presentation`),Wn(n,{position:`fixed`,left:`0px`,top:`0px`,width:`100%`,height:`100%`}),og(n,e_(`blocker`)),og(n,t.layerClass),{element:y(n),destroy:()=>{Ft(n)}}};var n_=Kg({compare:(e,t)=>Wi(t.left-e.left,t.top-e.top),extract:e=>E.some(Wi(e.x,e.y)),sink:(e,t)=>{let n=t_(t),r=kg(n.element(),`mousedown`,e.forceDrop),i=kg(n.element(),`mouseup`,e.drop),a=kg(n.element(),`mousemove`,e.move),o=kg(n.element(),`mouseout`,e.delayDrop);return qg({element:n.element,start:e=>{kt(e,n.element())},stop:()=>{Ft(n.element())},destroy:()=>{n.destroy(),i.unbind(),a.unbind(),o.unbind(),r.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});let r_=(e,t={})=>Qg(e,t.mode??n_,t),i_=$g(`ephox-snooker`).resolve,a_=()=>{let e=Pg({drag:Ng([`xDelta`,`yDelta`])});return{mutate:(t,n)=>{e.trigger.drag(t,n)},events:e.registry}},o_=()=>{let e=Pg({drag:Ng([`xDelta`,`yDelta`,`target`])}),t=E.none(),n=a_();return n.events.drag.bind(n=>{t.each(t=>{e.trigger.drag(n.xDelta,n.yDelta,t)})}),{assign:e=>{t=E.some(e)},get:()=>t,mutate:n.mutate,events:e.registry}},s_=(e,t,n,r,i)=>{let a=R.fromTag(`div`);return Wn(a,{position:`absolute`,left:t-r/2+`px`,top:n+`px`,height:i+`px`,width:r+`px`}),Qe(a,{"data-column":e,role:`presentation`}),a},$=(e,t,n,r,i)=>{let a=R.fromTag(`div`);return Wn(a,{position:`absolute`,left:t+`px`,top:n-i/2+`px`,height:i+`px`,width:r+`px`}),Qe(a,{"data-row":e,role:`presentation`}),a},c_=i_(`resizer-bar`),l_=i_(`resizer-rows`),u_=i_(`resizer-cols`),d_=(e,t)=>fe(e.all,(e,n)=>t(e.element)?[n]:[]),f_=(e,t)=>{let n=[];return ae(e.grid.columns,r=>{Mi.getColumnAt(e,r).map(e=>e.element).forall(t)&&n.push(r)}),ce(n,n=>pe(Mi.filterItems(e,e=>e.column===n),e=>t(e.element)))},p_=e=>{j(B(e.parent(),`.`+c_),Ft)},m_=(e,t,n)=>{let r=e.origin();j(t,t=>{t.each(t=>{let i=n(r,t);og(i,c_),kt(e.parent(),i)})})},h_=(e,t,n,r)=>{m_(e,t,(e,t)=>{let i=s_(t.col,t.x-e.left,n.top-e.top,7,r);return og(i,u_),i})},g_=(e,t,n,r)=>{m_(e,t,(e,t)=>{let i=$(t.row,n.left-e.left,t.y-e.top,r,7);return og(i,l_),i})},__=(e,t,n,r,i)=>{let a=qi(n),o=t.isResizable,s=r.length>0?aa.positions(r,n):[],c=s.length>0?d_(e,o):[];g_(t,ce(s,(e,t)=>ie(c,e=>t===e)),a,ui(n));let l=i.length>0?U.positions(i,n):[],u=l.length>0?f_(e,o):[];h_(t,ce(l,(e,t)=>ie(u,e=>t===e)),a,Vi(n))},v_=(e,t)=>{if(p_(e),e.isResizable(t)){let n=Mi.fromTable(t);__(n,e,t,Fi(n),Ni(n))}},y_=(e,t)=>{j(B(e.parent(),`.`+c_),t)},b_=e=>{y_(e,e=>{Un(e,`display`,`none`)})},x_=e=>{y_(e,e=>{Un(e,`display`,`block`)})},S_=e=>lg(e,l_),C_=e=>lg(e,u_),w_=i_(`resizer-bar-dragging`),T_=e=>{let t=o_(),n=r_(t,{}),r=E.none(),i=(e,t)=>E.from(et(e,t));t.events.drag.bind(e=>{i(e.target,`data-row`).each(t=>{let n=er(e.target,`top`);Un(e.target,`top`,n+e.yDelta+`px`)}),i(e.target,`data-column`).each(t=>{let n=er(e.target,`left`);Un(e.target,`left`,n+e.xDelta+`px`)})});let a=(e,t)=>er(e,t)-Xn(e,`data-initial-`+t,0);n.events.stop.bind(()=>{t.get().each(t=>{r.each(n=>{i(t,`data-row`).each(e=>{let r=a(t,`top`);nt(t,`data-initial-top`),p.trigger.adjustHeight(n,r,parseInt(e,10))}),i(t,`data-column`).each(e=>{let r=a(t,`left`);nt(t,`data-initial-left`),p.trigger.adjustWidth(n,r,parseInt(e,10))}),v_(e,n)})})});let o=(r,i)=>{p.trigger.startAdjust(),t.assign(r),Ze(r,`data-initial-`+i,er(r,i)),og(r,w_),Un(r,`opacity`,`0.2`),n.go(e.parent())},s=kg(e.parent(),`mousedown`,e=>{S_(e.target)&&o(e.target,`top`),C_(e.target)&&o(e.target,`left`)}),c=t=>dt(t,e.view()),l=e=>On(e,`table`,c).filter(ns),u=kg(e.view(),`mouseover`,t=>{l(t.target).fold(()=>{fn(t.target)&&p_(e)},t=>{n.isActive()&&(r=E.some(t),v_(e,t))})}),d=()=>{s.unbind(),u.unbind(),n.destroy(),p_(e)},f=t=>{v_(e,t)},p=Pg({adjustHeight:Ng([`table`,`delta`,`row`]),adjustWidth:Ng([`table`,`delta`,`column`]),startAdjust:Ng([])});return{destroy:d,refresh:f,on:n.on,off:n.off,hideBars:ee(b_,e),showBars:ee(x_,e),events:p.registry}},E_={create:(e,t,n)=>{let r=aa,i=U,a=T_(e),o=Pg({beforeResize:Ng([`table`,`type`]),afterResize:Ng([`table`,`type`]),startDrag:Ng([])});return a.events.adjustHeight.bind(e=>{let t=e.table;o.trigger.beforeResize(t,`row`),_u(t,r.delta(e.delta,t),e.row,r),o.trigger.afterResize(t,`row`)}),a.events.startAdjust.bind(e=>{o.trigger.startDrag()}),a.events.adjustWidth.bind(e=>{let r=e.table;o.trigger.beforeResize(r,`col`);let a=i.delta(e.delta,r),s=n(r);gu(r,a,e.column,t,s),o.trigger.afterResize(r,`col`)}),{on:a.on,off:a.off,refreshBars:a.refresh,hideBars:a.hideBars,showBars:a.showBars,destroy:a.destroy,events:o.registry}}},D_={only:(e,t)=>({parent:y(qe(e)?gt(e):e),view:y(e),origin:y(Wi(0,0)),isResizable:t}),detached:(e,t,n)=>({parent:y(t),view:y(e),origin:()=>qi(t),isResizable:n}),body:(e,t,n)=>({parent:y(t),view:y(e),origin:y(Wi(0,0)),isResizable:n})},O_=()=>{let e=R.fromTag(`div`);return Wn(e,{position:`static`,height:`0`,width:`0`,padding:`0`,margin:`0`,border:`0`}),kt(pn(),e),e},k_=(e,t)=>e.inline?D_.body(R.fromDom(e.getBody()),O_(),t):D_.only(R.fromDom(e.getDoc()),t),A_=(e,t)=>{e.inline&&Ft(t.parent())},j_=e=>p(e)&&e.nodeName===`TABLE`,M_=`bar-`,N_=e=>et(e,`data-mce-resize`)!==`false`,P_=e=>{let t=Mi.fromTable(e);Mi.hasColumns(t)||j(sr(e),e=>{Un(e,`width`,Gn(e,`width`)),nt(e,`width`)})},F_=e=>{let t=sh(),n=sh(),r=sh(),i,a,o=t=>rf(e,t),s=()=>Uo(e)?Oc():Dc(),c=e=>kc(e).columns,l=(t,n,r)=>{let l=In(n,`e`);if(a===``&&Ff(t),r!==i&&a!==``){Un(t,`width`,a);let n=s(),u=o(t),d=Uo(e)||l?c(t)-1:0;gu(t,r-i,d,n,u)}else ds(a)&&Un(t,`width`,r*parseFloat(a.replace(`%`,``))/i+`%`);fs(a)&&P_(t)},u=()=>{n.on(e=>{e.destroy()}),r.on(t=>{A_(e,t)})};return e.on(`init`,()=>{let i=k_(e,N_);if(r.set(i),Bo(e)&&Yo(e)){let r=s(),a=E_.create(i,r,o);a.on(),a.events.startDrag.bind(n=>{t.set(e.selection.getRng())}),a.events.beforeResize.bind(t=>{let n=t.table.dom;Qd(e,n,cs(n),ls(n),M_+t.type)}),a.events.afterResize.bind(n=>{let r=n.table,i=r.dom;os(r),t.on(t=>{e.selection.setRng(t),e.focus()}),$d(e,i,cs(i),ls(i),M_+n.type),e.undoManager.add()}),n.set(a)}}),e.on(`ObjectResizeStart`,t=>{let n=t.target;if(j_(n)){let r=R.fromDom(n);j(e.dom.select(`.mce-clonedresizable`),t=>{e.dom.addClass(t,`mce-`+Ho(e)+`-columns`)}),!Mf(r)&&qo(e)?If(r):!jf(r)&&Ko(e)&&Ff(r),Nf(r)&&Fn(t.origin,M_)&&Ff(r),i=t.width,a=Jo(e)?``:us(e,n).getOr(``)}}),e.on(`ObjectResized`,t=>{let n=t.target;if(j_(n)){let r=R.fromDom(n),i=t.origin;Fn(i,`corner-`)&&l(r,i,t.width),os(r),Yd(e,r.dom,ef)}}),e.on(`SwitchMode`,()=>{n.on(t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()})}),e.on(`dragstart dragend`,e=>{n.on(t=>{e.type===`dragstart`?(t.hideBars(),t.off()):(t.on(),t.showBars())})}),e.on(`remove`,()=>{u()}),{refresh:e=>{n.on(t=>t.refreshBars(R.fromDom(e)))},hide:()=>{n.on(e=>e.hideBars())},show:()=>{n.on(e=>e.showBars())}}},I_=e=>{Ro(e);let t=F_(e),n=Mg(e,t),r=af(e,t,n);return hp(e,r),gp(e,r),pc(e,r),{getSelectedCells:n.getSelectedCells,clearSelectedCells:n.clearSelectedCells}};e.add(`dom`,e=>({table:I_(e)}))})()}))(),o((()=>{(function(){"use strict";let e=Object.getPrototypeOf,t=(e,t,n)=>n(e,t.prototype)?!0:e.constructor?.name===t.name,n=e=>{let n=typeof e;return e===null?`null`:n===`object`&&Array.isArray(e)?`array`:n===`object`&&t(e,String,(e,t)=>t.isPrototypeOf(e))?`string`:n},r=e=>t=>n(t)===e,i=e=>t=>typeof t===e,a=e=>t=>e===t,o=(n,r)=>c(n)&&t(n,r,(t,n)=>e(t)===n),s=r(`string`),c=r(`object`),l=e=>o(e,Object),u=r(`array`),d=a(null),f=i(`boolean`),p=a(void 0),m=e=>e==null,h=e=>!m(e),g=i(`function`),_=i(`number`),v=(e,t)=>{if(u(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},y=()=>{},b=e=>()=>e(),x=(e,t)=>(...n)=>e(t.apply(null,n)),ee=(e,t)=>n=>e(t(n)),S=e=>()=>e,C=e=>e,te=(e,t)=>e===t;function w(e,...t){return(...n)=>{let r=t.concat(n);return e.apply(null,r)}}let T=e=>t=>!e(t),E=e=>()=>{throw Error(e)},ne=e=>e(),D=S(!1),re=S(!0);class O{constructor(e,t){this.tag=e,this.value=t}static some(e){return new O(!0,e)}static none(){return O.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?O.some(e(this.value)):O.none()}bind(e){return this.tag?e(this.value):O.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:O.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(e??`Called getOrDie on None`)}static from(e){return h(e)?O.some(e):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:`none()`}}O.singletonNone=new O(!1);let k=Array.prototype.slice,ie=Array.prototype.indexOf,ae=Array.prototype.push,A=(e,t)=>ie.call(e,t),j=(e,t)=>{let n=A(e,t);return n===-1?O.none():O.some(n)},oe=(e,t)=>A(e,t)>-1,se=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];if(t(r,n))return!0}return!1},ce=(e,t)=>{let n=[];for(let r=0;r<e;r++)n.push(t(r));return n},M=(e,t)=>{let n=[];for(let r=0;r<e.length;r+=t){let i=k.call(e,r,r+t);n.push(i)}return n},N=(e,t)=>{let n=e.length,r=Array(n);for(let i=0;i<n;i++){let n=e[i];r[i]=t(n,i)}return r},P=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];t(r,n)}},le=(e,t)=>{for(let n=e.length-1;n>=0;n--){let r=e[n];t(r,n)}},ue=(e,t)=>{let n=[],r=[];for(let i=0,a=e.length;i<a;i++){let a=e[i];(t(a,i)?n:r).push(a)}return{pass:n,fail:r}},de=(e,t)=>{let n=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];t(i,r)&&n.push(i)}return n},fe=(e,t,n)=>(le(e,(e,r)=>{n=t(n,e,r)}),n),pe=(e,t,n)=>(P(e,(e,r)=>{n=t(n,e,r)}),n),me=(e,t,n)=>{for(let r=0,i=e.length;r<i;r++){let i=e[r];if(t(i,r))return O.some(i);if(n(i,r))break}return O.none()},he=(e,t)=>me(e,t,D),ge=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];if(t(r,n))return O.some(n)}return O.none()},F=e=>{let t=[];for(let n=0,r=e.length;n<r;++n){if(!u(e[n]))throw Error(`Arr.flatten item `+n+` was not an array, input: `+e);ae.apply(t,e[n])}return t},_e=(e,t)=>F(N(e,t)),ve=(e,t)=>{for(let n=0,r=e.length;n<r;++n){let r=e[n];if(t(r,n)!==!0)return!1}return!0},I=e=>{let t=k.call(e,0);return t.reverse(),t},ye=(e,t)=>de(e,e=>!oe(t,e)),be=(e,t)=>{let n={};for(let r=0,i=e.length;r<i;r++){let i=e[r];n[String(i)]=t(i,r)}return n},xe=e=>[e],Se=(e,t)=>{let n=k.call(e,0);return n.sort(t),n},Ce=(e,t)=>t>=0&&t<e.length?O.some(e[t]):O.none(),we=e=>Ce(e,0),Te=e=>Ce(e,e.length-1),Ee=g(Array.from)?Array.from:e=>k.call(e),De=(e,t)=>{for(let n=0;n<e.length;n++){let r=t(e[n],n);if(r.isSome())return r}return O.none()},Oe=Object.keys,ke=Object.hasOwnProperty,Ae=(e,t)=>{let n=Oe(e);for(let r=0,i=n.length;r<i;r++){let i=n[r],a=e[i];t(a,i)}},je=(e,t)=>Me(e,(e,n)=>({k:n,v:t(e,n)})),Me=(e,t)=>{let n={};return Ae(e,(e,r)=>{let i=t(e,r);n[i.k]=i.v}),n},Ne=e=>(t,n)=>{e[n]=t},Pe=(e,t,n,r)=>{Ae(e,(e,i)=>{(t(e,i)?n:r)(e,i)})},Fe=(e,t)=>{let n={},r={};return Pe(e,t,Ne(n),Ne(r)),{t:n,f:r}},Ie=(e,t)=>{let n={};return Pe(e,t,Ne(n),y),n},Le=(e,t)=>{let n=[];return Ae(e,(e,r)=>{n.push(t(e,r))}),n},Re=(e,t)=>{let n=Oe(e);for(let r=0,i=n.length;r<i;r++){let i=n[r],a=e[i];if(t(a,i,e))return O.some(a)}return O.none()},ze=e=>Le(e,C),L=(e,t)=>Be(e,t)?O.from(e[t]):O.none(),Be=(e,t)=>ke.call(e,t),Ve=(e,t)=>Be(e,t)&&e[t]!==void 0&&e[t]!==null,He=(e,t,n=te)=>e.exists(e=>n(e,t)),Ue=(e,t,n=te)=>Ke(e,t,n).getOr(e.isNone()&&t.isNone()),We=e=>{let t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},Ge=e=>{let t=[];for(let n=0;n<e.length;n++){let r=e[n];if(r.isSome())t.push(r.getOrDie());else return O.none()}return O.some(t)},Ke=(e,t,n)=>e.isSome()&&t.isSome()?O.some(n(e.getOrDie(),t.getOrDie())):O.none(),qe=(e,t,n,r)=>e.isSome()&&t.isSome()&&n.isSome()?O.some(r(e.getOrDie(),t.getOrDie(),n.getOrDie())):O.none(),Je=(e,t)=>e==null?O.none():O.some(t(e)),Ye=(e,t)=>e?O.some(t):O.none(),Xe=(e,t)=>e+t,Ze=(e,t)=>e.substring(t),Qe=(e,t,n)=>t===``||e.length>=t.length&&e.substr(n,n+t.length)===t,$e=(e,t)=>nt(e,t)?Ze(e,t.length):e,et=(e,t)=>rt(e,t)?e:Xe(e,t),tt=(e,t,n=0,r)=>{let i=e.indexOf(t,n);return i===-1?!1:p(r)?!0:i+t.length<=r},nt=(e,t)=>Qe(e,t,0),rt=(e,t)=>Qe(e,t,e.length-t.length),it=(e=>t=>t.replace(e,``))(/^\s+|\s+$/g),at=e=>e.length>0,ot=e=>!at(e),st=e=>e.style!==void 0&&g(e.style.getPropertyValue),R=(e,t)=>{let n=(t||document).createElement(`div`);if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){let t=`HTML does not have a single root node`;throw console.error(t,e),Error(t)}return ut(n.childNodes[0])},ct=(e,t)=>ut((t||document).createElement(e)),lt=(e,t)=>ut((t||document).createTextNode(e)),ut=e=>{if(e==null)throw Error(`Node cannot be null or undefined`);return{dom:e}},z={fromHtml:R,fromTag:ct,fromText:lt,fromDom:ut,fromPoint:(e,t,n)=>O.from(e.dom.elementFromPoint(t,n)).map(ut)},dt=typeof window<`u`?window:Function(`return this;`)(),ft=(e,t)=>{let n=t??dt;for(let t=0;t<e.length&&n!=null;++t)n=n[e[t]];return n},pt=(e,t)=>ft(e.split(`.`),t),mt=(e,t)=>pt(e,t),ht=(e,t)=>{let n=mt(e,t);if(n==null)throw Error(e+` not available on this browser`);return n},gt=Object.getPrototypeOf,_t=e=>ht(`HTMLElement`,e),vt=e=>{let t=pt(`ownerDocument.defaultView`,e);return c(e)&&(_t(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(gt(e).constructor.name))},yt=e=>e.dom.nodeName.toLowerCase(),bt=e=>e.dom.nodeType,xt=e=>t=>bt(t)===e,St=e=>Ct(e)&&vt(e.dom),Ct=xt(1),wt=xt(3),Tt=xt(9),Et=xt(11),Dt=e=>t=>Ct(t)&&yt(t)===e,Ot=(e,t)=>{let n=e.dom;if(n.nodeType!==1)return!1;{let e=n;if(e.matches!==void 0)return e.matches(t);if(e.msMatchesSelector!==void 0)return e.msMatchesSelector(t);if(e.webkitMatchesSelector!==void 0)return e.webkitMatchesSelector(t);if(e.mozMatchesSelector!==void 0)return e.mozMatchesSelector(t);throw Error(`Browser lacks native selectors`)}},kt=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,At=(e,t)=>{let n=t===void 0?document:t.dom;return kt(n)?[]:N(n.querySelectorAll(e),z.fromDom)},jt=(e,t)=>{let n=t===void 0?document:t.dom;return kt(n)?O.none():O.from(n.querySelector(e)).map(z.fromDom)},Mt=(e,t)=>e.dom===t.dom,Nt=(e,t)=>{let n=e.dom,r=t.dom;return n===r?!1:n.contains(r)},Pt=e=>z.fromDom(e.dom.ownerDocument),Ft=e=>Tt(e)?e:Pt(e),It=e=>z.fromDom(Ft(e).dom.documentElement),Lt=e=>z.fromDom(Ft(e).dom.defaultView),Rt=e=>O.from(e.dom.parentNode).map(z.fromDom),zt=e=>Rt(e),Bt=e=>O.from(e.dom.parentElement).map(z.fromDom),Vt=(e,t)=>{let n=g(t)?t:D,r=e.dom,i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){let e=r.parentNode,t=z.fromDom(e);if(i.push(t),n(t)===!0)break;r=e}return i},Ht=e=>O.from(e.dom.offsetParent).map(z.fromDom),Ut=e=>O.from(e.dom.nextSibling).map(z.fromDom),Wt=e=>N(e.dom.childNodes,z.fromDom),Gt=(e,t)=>{let n=e.dom.childNodes;return O.from(n[t]).map(z.fromDom)},Kt=e=>Gt(e,0),qt=(e,t)=>({element:e,offset:t}),Jt=(e,t)=>{let n=Wt(e);return n.length>0&&t<n.length?qt(n[t],0):qt(e,t)},Yt=e=>Et(e)&&h(e.dom.host),Xt=g(Element.prototype.attachShadow)&&g(Node.prototype.getRootNode),Zt=S(Xt),Qt=Xt?e=>z.fromDom(e.dom.getRootNode()):Ft,$t=e=>Yt(e)?e:z.fromDom(Ft(e).dom.body),en=e=>tn(e).isSome(),tn=e=>{let t=Qt(e);return Yt(t)?O.some(t):O.none()},nn=e=>z.fromDom(e.dom.host),rn=e=>{if(Zt()&&h(e.target)){let t=z.fromDom(e.target);if(Ct(t)&&an(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return we(t)}}return O.from(e.target)},an=e=>h(e.dom.shadowRoot),on=e=>{let t=wt(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;let n=t.ownerDocument;return tn(z.fromDom(t)).fold(()=>n.body.contains(t),ee(on,nn))},sn=()=>cn(z.fromDom(document)),cn=e=>{let t=e.dom.body;if(t==null)throw Error(`Body is not available yet`);return z.fromDom(t)},ln=(e,t,n)=>{if(s(n)||f(n)||_(n))e.setAttribute(t,n+``);else throw console.error(`Invalid call to Attribute.set. Key `,t,`:: Value `,n,`:: Element `,e),Error(`Attribute value was not simple`)},un=(e,t,n)=>{ln(e.dom,t,n)},dn=(e,t)=>{let n=e.dom;Ae(t,(e,t)=>{ln(n,t,e)})},fn=(e,t)=>{let n=e.dom.getAttribute(t);return n===null?void 0:n},pn=(e,t)=>O.from(fn(e,t)),mn=(e,t)=>{let n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},hn=(e,t)=>{e.dom.removeAttribute(t)},gn=e=>pe(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),_n=(e,t,n)=>{if(!s(n))throw console.error(`Invalid call to CSS.set. Property `,t,`:: Value `,n,`:: Element `,e),Error(`CSS value must be a string: `+n);st(e)&&e.style.setProperty(t,n)},vn=(e,t)=>{st(e)&&e.style.removeProperty(t)},yn=(e,t,n)=>{let r=e.dom;_n(r,t,n)},B=(e,t)=>{let n=e.dom;Ae(t,(e,t)=>{_n(n,t,e)})},bn=(e,t)=>{let n=e.dom;Ae(t,(e,t)=>{e.fold(()=>{vn(n,t)},e=>{_n(n,t,e)})})},xn=(e,t)=>{let n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return r===``&&!on(e)?Sn(n,t):r},Sn=(e,t)=>st(e)?e.style.getPropertyValue(t):``,Cn=(e,t)=>{let n=e.dom,r=Sn(n,t);return O.from(r).filter(e=>e.length>0)},wn=e=>{let t={},n=e.dom;if(st(n))for(let e=0;e<n.style.length;e++){let r=n.style.item(e);t[r]=n.style[r]}return t},Tn=(e,t,n)=>{let r=z.fromTag(e);return yn(r,t,n),Cn(r,t).isSome()},En=(e,t)=>{let n=e.dom;vn(n,t),He(pn(e,`style`).map(it),``)&&hn(e,`style`)},Dn=e=>e.dom.offsetWidth,On=(e,t)=>{let n=(t,n)=>{if(!_(n)&&!n.match(/^[0-9]+$/))throw Error(e+`.set accepts only positive integer values. Value was `+n);let r=t.dom;st(r)&&(r.style[e]=n+`px`)},r=n=>{let r=t(n);if(r<=0||r===null){let t=xn(n,e);return parseFloat(t)||0}return r},i=r,a=(e,t)=>pe(t,(t,n)=>{let r=xn(e,n),i=r===void 0?0:parseInt(r,10);return isNaN(i)?t:t+i},0);return{set:n,get:r,getOuter:i,aggregate:a,max:(e,t,n)=>{let r=a(e,n);return t>r?t-r:0}}},kn=On(`height`,e=>{let t=e.dom;return on(e)?t.getBoundingClientRect().height:t.offsetHeight}),An=e=>kn.get(e),jn=e=>kn.getOuter(e),Mn=(e,t)=>{yn(e,`max-height`,kn.max(e,t,[`margin-top`,`border-top-width`,`padding-top`,`padding-bottom`,`border-bottom-width`,`margin-bottom`])+`px`)},Nn=(e,t)=>({left:e,top:t,translate:(n,r)=>Nn(e+n,t+r)}),Pn=Nn,Fn=e=>{let t=e.getBoundingClientRect();return Pn(t.left,t.top)},In=(e,t)=>e===void 0?t===void 0?0:t:e,Ln=e=>{let t=e.dom.ownerDocument,n=t.body,r=t.defaultView,i=t.documentElement;if(n===e.dom)return Pn(n.offsetLeft,n.offsetTop);let a=In(r?.pageYOffset,i.scrollTop),o=In(r?.pageXOffset,i.scrollLeft),s=In(i.clientTop,n.clientTop),c=In(i.clientLeft,n.clientLeft);return Rn(e).translate(o-c,a-s)},Rn=e=>{let t=e.dom,n=t.ownerDocument.body;return n===t?Pn(n.offsetLeft,n.offsetTop):on(e)?Fn(t):Pn(0,0)},zn=On(`width`,e=>e.dom.offsetWidth),Bn=(e,t)=>zn.set(e,t),Vn=e=>zn.get(e),Hn=e=>zn.getOuter(e),Un=(e,t)=>{yn(e,`max-width`,zn.max(e,t,[`margin-left`,`border-left-width`,`padding-left`,`padding-right`,`border-right-width`,`margin-right`])+`px`)},Wn=e=>{let t=!1,n;return(...r)=>(t||(t=!0,n=e.apply(null,r)),n)},Gn=(e,t,n,r)=>{let i=e.isiOS()&&/ipad/i.test(n)===!0,a=e.isiOS()&&!i,o=e.isiOS()||e.isAndroid(),s=o||r(`(pointer:coarse)`),c=i||!a&&o&&r(`(min-device-width:768px)`),l=a||o&&!c,u=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,d=!l&&!c&&!u;return{isiPad:S(i),isiPhone:S(a),isTablet:S(c),isPhone:S(l),isTouch:S(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:S(u),isDesktop:S(d)}},Kn=(e,t)=>{for(let n=0;n<e.length;n++){let r=e[n];if(r.test(t))return r}},qn=(e,t)=>{let n=Kn(e,t);if(!n)return{major:0,minor:0};let r=e=>Number(t.replace(n,`$`+e));return Xn(r(1),r(2))},Jn=(e,t)=>{let n=String(t).toLowerCase();return e.length===0?Yn():qn(e,n)},Yn=()=>Xn(0,0),Xn=(e,t)=>({major:e,minor:t}),Zn={nu:Xn,detect:Jn,unknown:Yn},Qn=(e,t)=>De(t.brands,t=>{let n=t.brand.toLowerCase();return he(e,e=>n===e.brand?.toLowerCase()).map(e=>({current:e.name,version:Zn.nu(parseInt(t.version,10),0)}))}),$n=(e,t)=>{let n=String(t).toLowerCase();return he(e,e=>e.search(n))},er=(e,t)=>$n(e,t).map(e=>{let n=Zn.detect(e.versionRegexes,t);return{current:e.name,version:n}}),tr=(e,t)=>$n(e,t).map(e=>{let n=Zn.detect(e.versionRegexes,t);return{current:e.name,version:n}}),nr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rr=e=>t=>tt(t,e),ir=[{name:`Edge`,versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>tt(e,`edge/`)&&tt(e,`chrome`)&&tt(e,`safari`)&&tt(e,`applewebkit`)},{name:`Chromium`,brand:`Chromium`,versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,nr],search:e=>tt(e,`chrome`)&&!tt(e,`chromeframe`)},{name:`IE`,versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>tt(e,`msie`)||tt(e,`trident`)},{name:`Opera`,versionRegexes:[nr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rr(`opera`)},{name:`Firefox`,versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rr(`firefox`)},{name:`Safari`,versionRegexes:[nr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(tt(e,`safari`)||tt(e,`mobile/`))&&tt(e,`applewebkit`)}],ar=[{name:`Windows`,search:rr(`win`),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:`iOS`,search:e=>tt(e,`iphone`)||tt(e,`ipad`),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:`Android`,search:rr(`android`),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:`macOS`,search:rr(`mac os x`),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:`Linux`,search:rr(`linux`),versionRegexes:[]},{name:`Solaris`,search:rr(`sunos`),versionRegexes:[]},{name:`FreeBSD`,search:rr(`freebsd`),versionRegexes:[]},{name:`ChromeOS`,search:rr(`cros`),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],or={browsers:S(ir),oses:S(ar)},sr=`Edge`,cr=`Chromium`,lr=`Opera`,ur=`Firefox`,dr=`Safari`,fr=()=>pr({current:void 0,version:Zn.unknown()}),pr=e=>{let t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isEdge:r(sr),isChromium:r(cr),isIE:r(`IE`),isOpera:r(lr),isFirefox:r(ur),isSafari:r(dr)}},mr={unknown:fr,nu:pr,edge:S(sr),chromium:S(cr),ie:S(`IE`),opera:S(lr),firefox:S(ur),safari:S(dr)},hr=`Windows`,V=`Android`,gr=`Linux`,_r=`macOS`,vr=`Solaris`,yr=`FreeBSD`,br=`ChromeOS`,xr=()=>Sr({current:void 0,version:Zn.unknown()}),Sr=e=>{let t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isWindows:r(hr),isiOS:r(`iOS`),isAndroid:r(V),isMacOS:r(_r),isLinux:r(gr),isSolaris:r(vr),isFreeBSD:r(yr),isChromeOS:r(br)}},Cr={unknown:xr,nu:Sr,windows:S(hr),ios:S(`iOS`),android:S(V),linux:S(gr),macos:S(_r),solaris:S(vr),freebsd:S(yr),chromeos:S(br)},wr={detect:(e,t,n)=>{let r=or.browsers(),i=or.oses(),a=t.bind(e=>Qn(r,e)).orThunk(()=>er(r,e)).fold(mr.unknown,mr.nu),o=tr(i,e).fold(Cr.unknown,Cr.nu);return{browser:a,os:o,deviceType:Gn(o,a,e,n)}}},Tr=e=>window.matchMedia(e).matches,Er=Wn(()=>wr.detect(navigator.userAgent,O.from(navigator.userAgentData),Tr)),Dr=()=>Er(),Or=(e,t,n,r,i,a,o)=>({target:e,x:t,y:n,stop:r,prevent:i,kill:a,raw:o}),kr=e=>{let t=z.fromDom(rn(e).getOr(e.target)),n=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=x(r,n);return Or(t,e.clientX,e.clientY,n,r,i,e)},Ar=(e,t)=>n=>{e(n)&&t(kr(n))},jr=(e,t,n,r,i)=>{let a=Ar(n,r);return e.dom.addEventListener(t,a,i),{unbind:w(Pr,e,t,a,i)}},Mr=(e,t,n,r)=>jr(e,t,n,r,!1),Nr=(e,t,n,r)=>jr(e,t,n,r,!0),Pr=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},Fr=(e,t)=>{Rt(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},Ir=(e,t)=>{Ut(e).fold(()=>{Rt(e).each(e=>{Rr(e,t)})},e=>{Fr(e,t)})},Lr=(e,t)=>{Kt(e).fold(()=>{Rr(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},Rr=(e,t)=>{e.dom.appendChild(t.dom)},zr=(e,t,n)=>{Gt(e,n).fold(()=>{Rr(e,t)},e=>{Fr(e,t)})},Br=(e,t)=>{P(t,t=>{Rr(e,t)})},Vr=e=>{e.dom.textContent=``,P(Wt(e),e=>{Hr(e)})},Hr=e=>{let t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Ur=e=>{let t=e===void 0?document:e.dom;return Pn(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},Wr=(e,t,n)=>{let r=(n===void 0?document:n.dom).defaultView;r&&r.scrollTo(e,t)},Gr=e=>{let t=e===void 0?window:e;return Dr().browser.isFirefox()?O.none():O.from(t.visualViewport)},Kr=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),qr=e=>{let t=e===void 0?window:e,n=t.document,r=Ur(z.fromDom(n));return Gr(t).fold(()=>{let e=t.document.documentElement,n=e.clientWidth,i=e.clientHeight;return Kr(r.left,r.top,n,i)},e=>Kr(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height))},Jr=()=>z.fromDom(document),Yr=(e,t)=>e.view(t).fold(S([]),t=>{let n=Yr(e,e.owner(t));return[t].concat(n)}),Xr=(e,t)=>{let n=Yr(t,t.owner(e));return O.some(n)};var Zr=Object.freeze({__proto__:null,view:e=>(e.dom===document?O.none():O.from(e.dom.defaultView?.frameElement)).map(z.fromDom),owner:e=>Pt(e)});let Qr=e=>{let t=Ur(Jr());return Xr(e,Zr).fold(w(Ln,e),n=>{let r=Rn(e),i=fe(n,(e,t)=>{let n=Rn(t);return{left:e.left+n.left,top:e.top+n.top}},{left:0,top:0});return Pn(i.left+r.left+t.left,i.top+r.top+t.top)})},$r=(e,t,n)=>({point:e,width:t,height:n}),ei=(e,t,n,r)=>({x:e,y:t,width:n,height:r}),ti=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),ni=e=>{let t=Ln(e),n=Hn(e),r=jn(e);return ti(t.left,t.top,n,r)},ri=e=>{let t=Qr(e),n=Hn(e),r=jn(e);return ti(t.left,t.top,n,r)},ii=(e,t)=>{let n=Math.max(e.x,t.x),r=Math.max(e.y,t.y),i=Math.min(e.right,t.right),a=Math.min(e.bottom,t.bottom);return ti(n,r,i-n,a-r)},ai=(e,t)=>pe(t,(e,t)=>ii(e,t),e),oi=()=>qr(window);var si=tinymce.util.Tools.resolve(`tinymce.ThemeManager`);let ci=e=>{let t=t=>t(e),n=S(e),r=()=>i,i={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:re,isError:D,map:t=>ui.value(t(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:t=>{t(e)},toOptional:()=>O.some(e)};return i},li=e=>{let t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:D,isError:re,map:t,mapError:t=>ui.error(t(e)),bind:t,exists:D,forall:re,getOr:C,or:C,getOrThunk:ne,orThunk:ne,getOrDie:E(String(e)),each:y,toOptional:O.none};return n},ui={value:ci,error:li,fromOption:(e,t)=>e.fold(()=>li(t),ci)};var di;(function(e){e[e.Error=0]=`Error`,e[e.Value=1]=`Value`})(di||={});let fi=(e,t,n)=>e.stype===di.Error?t(e.serror):n(e.svalue),pi=e=>{let t=[],n=[];return P(e,e=>{fi(e,e=>n.push(e),e=>t.push(e))}),{values:t,errors:n}},mi=(e,t)=>e.stype===di.Error?{stype:di.Error,serror:t(e.serror)}:e,hi=(e,t)=>e.stype===di.Value?{stype:di.Value,svalue:t(e.svalue)}:e,gi=(e,t)=>e.stype===di.Value?t(e.svalue):e,_i=(e,t)=>e.stype===di.Error?t(e.serror):e,vi=e=>({stype:di.Value,svalue:e}),yi=e=>({stype:di.Error,serror:e}),bi={fromResult:e=>e.fold(yi,vi),toResult:e=>fi(e,ui.error,ui.value),svalue:vi,partition:pi,serror:yi,bind:gi,bindError:_i,map:hi,mapError:mi,fold:fi},xi=(e,t,n,r)=>({tag:`field`,key:e,newKey:t,presence:n,prop:r}),Si=(e,t)=>({tag:`custom`,newKey:e,instantiator:t}),Ci=(e,t,n)=>{switch(e.tag){case`field`:return t(e.key,e.newKey,e.presence,e.prop);case`custom`:return n(e.newKey,e.instantiator)}},wi=(e,t)=>t,Ti=(e,t)=>l(e)&&l(t)?Di(e,t):t,Ei=e=>(...t)=>{if(t.length===0)throw Error(`Can't merge zero objects`);let n={};for(let r=0;r<t.length;r++){let i=t[r];for(let t in i)Be(i,t)&&(n[t]=e(n[t],i[t]))}return n},Di=Ei(Ti),Oi=Ei(wi),ki=()=>({tag:`required`,process:{}}),Ai=e=>({tag:`defaultedThunk`,process:e}),ji=e=>Ai(S(e)),Mi=()=>({tag:`option`,process:{}}),Ni=e=>({tag:`mergeWithThunk`,process:e}),Pi=e=>Ni(S(e)),Fi=(e,t)=>e.length>0?bi.svalue(Di(t,Oi.apply(void 0,e))):bi.svalue(t),Ii=e=>x(bi.serror,F)(e),Li={consolidateObj:(e,t)=>{let n=bi.partition(e);return n.errors.length>0?Ii(n.errors):Fi(n.values,t)},consolidateArr:e=>{let t=bi.partition(e);return t.errors.length>0?Ii(t.errors):bi.svalue(t.values)}},Ri=e=>c(e)&&Oe(e).length>100?` removed due to size`:JSON.stringify(e,null,2),zi=e=>N(e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:S(`... (only showing first ten failures)`)}]):e,e=>`Failed path: (`+e.path.join(` > `)+`)
`+e.getErrorInfo()),Bi=(e,t)=>bi.serror([{path:e,getErrorInfo:t}]),Vi=(e,t,n)=>Bi(e,()=>`Could not find valid *required* value for "`+t+`" in `+Ri(n)),Hi=(e,t)=>Bi(e,()=>`Choice schema did not contain choice key: "`+t+`"`),Ui=(e,t,n)=>Bi(e,()=>`The chosen schema: "`+n+`" did not exist in branches: `+Ri(t)),Wi=(e,t)=>Bi(e,()=>`There are unsupported fields: [`+t.join(`, `)+`] specified`),Gi=(e,t)=>Bi(e,S(t)),Ki=e=>({extract:(t,n)=>bi.bindError(e(n),e=>Gi(t,e)),toString:S(`val`)}),qi=Ki(bi.svalue),Ji=(e,t,n,r)=>L(t,n).fold(()=>Vi(e,n,t),r),Yi=(e,t,n,r)=>r(L(e,t).getOrThunk(()=>n(e))),Xi=(e,t,n)=>n(L(e,t)),Zi=(e,t,n,r)=>r(L(e,t).map(t=>t===!0?n(e):t)),Qi=(e,t,n,r,i)=>{let a=e=>i.extract(t.concat([r]),e),o=e=>e.fold(()=>bi.svalue(O.none()),e=>{let n=i.extract(t.concat([r]),e);return bi.map(n,O.some)});switch(e.tag){case`required`:return Ji(t,n,r,a);case`defaultedThunk`:return Yi(n,r,e.process,a);case`option`:return Xi(n,r,o);case`defaultedOptionThunk`:return Zi(n,r,e.process,o);case`mergeWithThunk`:return Yi(n,r,S({}),t=>a(Di(e.process(n),t)))}},$i=(e,t,n)=>{let r={},i=[];for(let a of n)Ci(a,(n,a,o,s)=>{let c=Qi(o,e,t,n,s);bi.fold(c,e=>{i.push(...e)},e=>{r[a]=e})},(e,n)=>{r[e]=n(t)});return i.length>0?bi.serror(i):bi.svalue(r)},ea=e=>({extract:(t,n)=>e().extract(t,n),toString:()=>e().toString()}),ta=e=>Oe(Ie(e,h)),na=e=>{let t=H(e),n=fe(e,(e,t)=>Ci(t,t=>Di(e,{[t]:!0}),S(e)),{});return{extract:(e,r)=>{let i=de(f(r)?[]:ta(r),e=>!Ve(n,e));return i.length===0?t.extract(e,r):Wi(e,i)},toString:t.toString}},H=e=>({extract:(t,n)=>$i(t,n,e),toString:()=>`obj{
`+N(e,e=>Ci(e,(e,t,n,r)=>e+` -> `+r.toString(),(e,t)=>`state(`+e+`)`)).join(`
`)+`}`}),ra=e=>({extract:(t,n)=>{let r=N(n,(n,r)=>e.extract(t.concat([`[`+r+`]`]),n));return Li.consolidateArr(r)},toString:()=>`array(`+e.toString()+`)`}),ia=(e,t)=>{let n=t===void 0?C:t;return{extract:(t,r)=>{let i=[];for(let a of e){let e=a.extract(t,r);if(e.stype===di.Value)return{stype:di.Value,svalue:n(e.svalue)};i.push(e)}return Li.consolidateArr(i)},toString:()=>`oneOf(`+N(e,e=>e.toString()).join(`, `)+`)`}},aa=(e,t)=>{let n=(t,n)=>ra(Ki(e)).extract(t,n);return{extract:(e,r)=>{let i=n(e,Oe(r));return bi.bind(i,n=>H(N(n,e=>xi(e,e,ki(),t))).extract(e,r))},toString:()=>`setOf(`+t.toString()+`)`}},oa=(e,t)=>{let n=Wn(t);return{extract:(e,t)=>n().extract(e,t),toString:()=>n().toString()}},U=x(ra,H),sa=S(qi),ca=(e,t)=>Ki(n=>{let r=typeof n;return e(n)?bi.svalue(n):bi.serror(`Expected type: ${t} but got: ${r}`)}),la=ca(_,`number`),ua=ca(s,`string`),da=ca(f,`boolean`),fa=ca(g,`function`),pa=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case`Boolean`:case`Number`:case`String`:case`Date`:case`RegExp`:case`Blob`:case`FileList`:case`ImageData`:case`ImageBitmap`:case`ArrayBuffer`:return!0;case`Array`:case`Object`:return Object.keys(e).every(t=>pa(e[t]));default:return!1}},ma=Ki(e=>pa(e)?bi.svalue(e):bi.serror(`Expected value to be acceptable for sending via postMessage`)),ha=(e,t,n,r)=>L(n,r).fold(()=>Ui(e,n,r),n=>n.extract(e.concat([`branch: `+r]),t)),ga=(e,t)=>({extract:(n,r)=>L(r,e).fold(()=>Hi(n,e),e=>ha(n,r,t,e)),toString:()=>`chooseOn(`+e+`). Possible values: `+Oe(t)}),W=()=>ra(qi),_a=e=>Ki(t=>e(t).fold(bi.serror,bi.svalue)),va=(e,t)=>aa(t=>bi.fromResult(e(t)),t),ya=(e,t,n)=>{let r=t.extract([e],n);return bi.mapError(r,e=>({input:n,errors:e}))},ba=(e,t,n)=>bi.toResult(ya(e,t,n)),xa=e=>e.fold(e=>{throw Error(Ca(e))},C),Sa=(e,t,n)=>xa(ba(e,t,n)),Ca=e=>`Errors: 
`+zi(e.errors).join(`
`)+`

Input object: `+Ri(e.input),wa=(e,t)=>ga(e,je(t,H)),Ta=(e,t)=>oa(e,t),Ea=xi,Da=Si,Oa=e=>_a(t=>oe(e,t)?ui.value(t):ui.error(`Unsupported value: "${t}", choose one of "${e.join(`, `)}".`)),G=e=>Ea(e,e,ki(),sa()),ka=(e,t)=>Ea(e,e,ki(),t),Aa=e=>ka(e,la),ja=e=>ka(e,ua),Ma=(e,t)=>Ea(e,e,ki(),Oa(t)),Na=e=>ka(e,da),Pa=e=>ka(e,fa),Fa=(e,t)=>Ea(e,e,Mi(),Ki(n=>bi.serror(`The field: `+e+` is forbidden. `+t))),Ia=(e,t)=>Ea(e,e,ki(),H(t)),La=(e,t)=>Ea(e,e,ki(),U(t)),Ra=(e,t)=>Ea(e,e,ki(),ra(t)),za=e=>Ea(e,e,Mi(),sa()),Ba=(e,t)=>Ea(e,e,Mi(),t),Va=e=>Ba(e,la),Ha=e=>Ba(e,ua),Ua=(e,t)=>Ba(e,Oa(t)),Wa=e=>Ba(e,fa),Ga=(e,t)=>Ba(e,ra(t)),Ka=(e,t)=>Ba(e,H(t)),qa=(e,t)=>Ba(e,na(t)),K=(e,t)=>Ea(e,e,ji(t),sa()),Ja=(e,t,n)=>Ea(e,e,ji(t),n),Ya=(e,t)=>Ja(e,t,la),Xa=(e,t)=>Ja(e,t,ua),Za=(e,t,n)=>Ja(e,t,Oa(n)),Qa=(e,t)=>Ja(e,t,da),$a=(e,t)=>Ja(e,t,fa),eo=(e,t)=>Ja(e,t,ma),to=(e,t,n)=>Ja(e,t,ra(n)),no=(e,t,n)=>Ja(e,t,H(n)),ro=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},io={generate:e=>{if(!u(e))throw Error(`cases must be an array`);if(e.length===0)throw Error(`there must be at least one case`);let t=[],n={};return P(e,(r,i)=>{let a=Oe(r);if(a.length!==1)throw Error(`one and only one name per case`);let o=a[0],s=r[o];if(n[o]!==void 0)throw Error(`duplicate key detected:`+o);if(o===`cata`)throw Error(`cannot have a case named cata (sorry)`);if(!u(s))throw Error(`case arguments must be an array`);t.push(o),n[o]=(...n)=>{let r=n.length;if(r!==s.length)throw Error(`Wrong number of arguments to case `+o+`. Expected `+s.length+` (`+s+`), got `+r);return{fold:(...t)=>{if(t.length!==e.length)throw Error(`Wrong number of arguments to fold. Expected `+e.length+`, got `+t.length);return t[i].apply(null,n)},match:e=>{let r=Oe(e);if(t.length!==r.length)throw Error(`Wrong number of arguments to match. Expected: `+t.join(`,`)+`
Actual: `+r.join(`,`));if(!ve(t,e=>oe(r,e)))throw Error(`Not all branches were specified when using match. Specified: `+r.join(`, `)+`
Required: `+t.join(`, `));return e[o].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:o,params:n})}}}}),n}};io.generate([{bothErrors:[`error1`,`error2`]},{firstError:[`error1`,`value2`]},{secondError:[`value1`,`error2`]},{bothValues:[`value1`,`value2`]}]);let ao=e=>{let t=[],n=[];return P(e,e=>{e.fold(e=>{t.push(e)},e=>{n.push(e)})}),{errors:t,values:n}},oo=(e,t)=>{let n={};return Ae(e,(e,r)=>{oe(t,r)||(n[r]=e)}),n},so=(e,t)=>({[e]:t}),co=e=>{let t={};return P(e,e=>{t[e.key]=e.value}),t},lo=(e,t)=>oo(e,t),uo=(e,t)=>so(e,t),fo=e=>co(e),po=(e,t)=>e.length===0?ui.value(t):ui.value(Di(t,Oi.apply(void 0,e))),mo=e=>ui.error(F(e)),ho=(e,t)=>{let n=ao(e);return n.errors.length>0?mo(n.errors):po(n.values,t)},go=e=>g(e)?e:D,_o=(e,t,n)=>{let r=e.dom,i=go(n);for(;r.parentNode;){r=r.parentNode;let e=z.fromDom(r),n=t(e);if(n.isSome())return n;if(i(e))break}return O.none()},vo=(e,t,n)=>{let r=t(e),i=go(n);return r.orThunk(()=>i(e)?O.none():_o(e,t,i))},yo=(e,t)=>Mt(e.element,t.event.target),bo={can:re,abort:D,run:y},xo=e=>{if(!Ve(e,`can`)&&!Ve(e,`abort`)&&!Ve(e,`run`))throw Error(`EventHandler defined by: `+JSON.stringify(e,null,2)+` does not have can, abort, or run!`);return{...bo,...e}},So=(e,t)=>(...n)=>pe(e,(e,r)=>e&&t(r).apply(void 0,n),!0),Co=(e,t)=>(...n)=>pe(e,(e,r)=>e||t(r).apply(void 0,n),!1),wo=e=>g(e)?{can:re,abort:D,run:e}:e,To=e=>({can:So(e,e=>e.can),abort:Co(e,e=>e.abort),run:(...t)=>{P(e,e=>{e.run.apply(void 0,t)})}}),Eo=S,Do=Eo(`touchstart`),Oo=Eo(`touchmove`),ko=Eo(`touchend`),Ao=Eo(`touchcancel`),jo=Eo(`mousedown`),Mo=Eo(`mousemove`),No=Eo(`mouseout`),Po=Eo(`mouseup`),Fo=Eo(`mouseover`),Io=Eo(`focusin`),Lo=Eo(`focusout`),Ro=Eo(`keydown`),zo=Eo(`keyup`),Bo=Eo(`input`),Vo=Eo(`change`),Ho=Eo(`click`),Uo=Eo(`transitioncancel`),Wo=Eo(`transitionend`),Go=Eo(`transitionstart`),Ko=Eo(`selectstart`),qo=e=>S(`alloy.`+e),Jo={tap:qo(`tap`)},Yo=qo(`focus`),Xo=qo(`blur.post`),Zo=qo(`paste.post`),Qo=qo(`receive`),$o=qo(`execute`),es=qo(`focus.item`),ts=Jo.tap,ns=qo(`longpress`),rs=qo(`sandbox.close`),is=qo(`typeahead.cancel`),as=qo(`system.init`),os=qo(`system.touchmove`),ss=qo(`system.touchend`),cs=qo(`system.scroll`),ls=qo(`system.resize`),us=qo(`system.attached`),ds=qo(`system.detached`),fs=qo(`system.dismissRequested`),ps=qo(`system.repositionRequested`),ms=qo(`focusmanager.shifted`),hs=qo(`slotcontainer.visibility`),gs=qo(`system.external.element.scroll`),_s=qo(`change.tab`),vs=qo(`dismiss.tab`),ys=qo(`highlight`),bs=qo(`dehighlight`),xs=(e,t)=>{Ts(e,e.element,t,{})},Ss=(e,t,n)=>{Ts(e,e.element,t,n)},Cs=e=>{xs(e,$o())},ws=(e,t,n)=>{Ts(e,t,n,{})},Ts=(e,t,n,r)=>{let i={target:t,...r};e.getSystem().triggerEvent(n,t,i)},Es=(e,t,n,r)=>{let i={...r,target:t};e.getSystem().triggerEvent(n,t,i)},Ds=(e,t,n,r)=>{e.getSystem().triggerEvent(n,t,r.event)},Os=e=>fo(e),ks=(e,t)=>({key:e,value:xo({abort:t})}),As=(e,t)=>({key:e,value:xo({can:t})}),js=e=>({key:e,value:xo({run:(e,t)=>{t.event.prevent()}})}),q=(e,t)=>({key:e,value:xo({run:t})}),Ms=(e,t,n)=>({key:e,value:xo({run:(e,r)=>{t.apply(void 0,[e,r].concat(n))}})}),Ns=e=>t=>q(e,t),Ps=e=>t=>({key:e,value:xo({run:(e,n)=>{yo(e,n)&&t(e,n)}})}),Fs=(e,t)=>q(e,(n,r)=>{n.getSystem().getByUid(t).each(t=>{Ds(t,t.element,e,r)})}),Is=(e,t,n)=>{let r=t.partUids[n];return Fs(e,r)},Ls=(e,t)=>q(e,(e,n)=>{let r=n.event;t(e,e.getSystem().getByDom(r.target).getOrThunk(()=>vo(r.target,t=>e.getSystem().getByDom(t).toOptional(),D).getOr(e)),n)}),Rs=e=>q(e,(e,t)=>{t.cut()}),zs=e=>q(e,(e,t)=>{t.stop()}),Bs=(e,t)=>Ps(e)(t),Vs=Ps(us()),Hs=Ps(ds()),Us=Ps(as()),Ws=Ns($o()),Gs=(e,t)=>{let n=(t||document).createElement(`div`);return n.innerHTML=e,Wt(z.fromDom(n))},Ks=e=>e.dom.innerHTML,qs=(e,t)=>{let n=Pt(e).dom,r=z.fromDom(n.createDocumentFragment());Br(r,Gs(t,n)),Vr(e),Rr(e,r)},Js=e=>{let t=z.fromTag(`div`);return Rr(t,z.fromDom(e.dom.cloneNode(!0))),Ks(t)},Ys=(e,t)=>z.fromDom(e.dom.cloneNode(t)),Xs=e=>Ys(e,!1),Zs=e=>Yt(e)?`#shadow-root`:Js(Xs(e)),Qs=e=>Zs(e),$s=(e,t,n)=>Mt(t,e.element)&&!Mt(t,n),ec=Os([As(Yo(),(e,t)=>{let n=t.event,r=n.originator,i=n.target;return $s(e,r,i)?(console.warn(Yo()+` did not get interpreted by the desired target. 
Originator: `+Qs(r)+`
Target: `+Qs(i)+`
Check the `+Yo()+` event handlers`),!1):!0})]);var tc=Object.freeze({__proto__:null,events:ec});let nc=0,J=e=>{let t=new Date().getTime(),n=Math.floor(Math.random()*1e9);return nc++,e+`_`+n+nc+String(t)},rc=S(`alloy-id-`),ic=S(`data-alloy-id`),ac=rc(),oc=ic(),sc=(e,t)=>{let n=J(ac+e);return cc(t,n),n},cc=(e,t)=>{Object.defineProperty(e.dom,oc,{value:t,writable:!0})},lc=e=>{let t=Ct(e)?e.dom[oc]:null;return O.from(t)},uc=e=>J(e),dc=C,fc=e=>{let t=t=>`The component must be in a context to execute: ${t}`+(e?`
`+Qs(e().element)+` is not in context.`:``),n=e=>()=>{throw Error(t(e))},r=e=>()=>{console.warn(t(e))};return{debugInfo:S(`fake`),triggerEvent:r(`triggerEvent`),triggerFocus:r(`triggerFocus`),triggerEscape:r(`triggerEscape`),broadcast:r(`broadcast`),broadcastOn:r(`broadcastOn`),broadcastEvent:r(`broadcastEvent`),build:n(`build`),buildOrPatch:n(`buildOrPatch`),addToWorld:n(`addToWorld`),removeFromWorld:n(`removeFromWorld`),addToGui:n(`addToGui`),removeFromGui:n(`removeFromGui`),getByUid:n(`getByUid`),getByDom:n(`getByDom`),isConnected:D}},pc=fc(),mc=(e,t,n)=>{let r=n.toString(),i=r.indexOf(`)`)+1,a=r.indexOf(`(`),o=r.substring(a+1,i-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:hc(o.slice(0,1).concat(o.slice(3)))}),e},hc=e=>N(e,e=>rt(e,`/*`)?e.substring(0,e.length-2):e),gc=(e,t)=>{let n=e.toString(),r=n.indexOf(`)`)+1,i=n.indexOf(`(`),a=n.substring(i+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:hc(a)}),e},_c=(e,t)=>{let n=t.toString(),r=n.indexOf(`)`)+1,i=n.indexOf(`(`),a=n.substring(i+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:`OVERRIDE`,parameters:hc(a.slice(1))}),e},vc=J(`alloy-premade`),yc=e=>(Object.defineProperty(e.element.dom,vc,{value:e.uid,writable:!0}),uo(vc,e)),bc=e=>Be(e.dom,vc),xc=e=>L(e,vc),Sc=e=>_c((t,...n)=>e(t.getApis(),t,...n),e),Cc={init:()=>wc({readState:S(`No State required`)})},wc=e=>e,Tc=(e,t)=>({list:t,data:je(ba(`component.behaviours`,H(N(t,e=>Ka(e.name(),[G(`config`),K(`state`,Cc)]))),e.behaviours).fold(t=>{throw Error(Ca(t)+`
Complete spec:
`+JSON.stringify(e,null,2))},C),e=>S(e.map(e=>({config:e.config,state:e.state.init(e.config)}))))}),Ec=e=>e.list,Dc=e=>e.data,Oc=(e,t)=>{let n={};return Ae(e,(e,r)=>{Ae(e,(e,i)=>{n[i]=L(n,i).getOr([]).concat([t(r,e)])})}),n},kc=e=>({classes:p(e.classes)?[]:e.classes,attributes:p(e.attributes)?{}:e.attributes,styles:p(e.styles)?{}:e.styles}),Ac=(e,t)=>({...e,attributes:{...e.attributes,...t.attributes},styles:{...e.styles,...t.styles},classes:e.classes.concat(t.classes)}),jc=(e,t,n,r)=>{let i={...t};P(n,t=>{i[t.name()]=t.exhibit(e,r)});let a=Oc(i,(e,t)=>({name:e,modification:t})),o=e=>fe(e,(e,t)=>({...t.modification,...e}),{});return kc({classes:fe(a.classes,(e,t)=>t.modification.concat(e),[]),attributes:o(a.attributes),styles:o(a.styles)})},Mc=(e,t,n,r)=>{try{let i=Se(n,(n,i)=>{let a=n[t],o=i[t],s=r.indexOf(a),c=r.indexOf(o);if(s===-1)throw Error(`The ordering for `+e+` does not have an entry for `+a+`.
Order specified: `+JSON.stringify(r,null,2));if(c===-1)throw Error(`The ordering for `+e+` does not have an entry for `+o+`.
Order specified: `+JSON.stringify(r,null,2));return s<c?-1:c<s?1:0});return ui.value(i)}catch(e){return ui.error([e])}},Nc=(e,t)=>({handler:e,purpose:t}),Pc=(e,t)=>({cHandler:e,purpose:t}),Fc=(e,t)=>Pc(w.apply(void 0,[e.handler].concat(t)),e.purpose),Ic=e=>e.cHandler,Lc=(e,t)=>({name:e,handler:t}),Rc=(e,t)=>{let n={};return P(e,e=>{n[e.name()]=e.handlers(t)}),n},zc=(e,t,n)=>Oc({...n,...Rc(t,e)},Lc),Bc=(e,t,n,r)=>Wc(zc(e,n,r),t),Vc=e=>{let t=wo(e);return(e,n,...r)=>{let i=[e,n].concat(r);t.abort.apply(void 0,i)?n.stop():t.can.apply(void 0,i)&&t.run.apply(void 0,i)}},Hc=(e,t)=>ui.error([`The event (`+e+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(N(t,e=>e.name),null,2)]),Uc=(e,t,n)=>{let r=t[n];return r?Mc(`Event: `+n,`name`,e,r).map(e=>To(N(e,e=>e.handler))):Hc(n,e)},Wc=(e,t)=>ho(Le(e,(e,n)=>(e.length===1?ui.value(e[0].handler):Uc(e,t,n)).map(r=>uo(n,Nc(Vc(r),e.length>1?de(t[n],t=>se(e,e=>e.name===t)).join(` > `):e[0].name)))),{}),Gc=`alloy.base.behaviour`,Kc=H([Ea(`dom`,`dom`,ki(),H([G(`tag`),K(`styles`,{}),K(`classes`,[]),K(`attributes`,{}),za(`value`),za(`innerHtml`)])),G(`components`),G(`uid`),K(`events`,{}),K(`apis`,{}),Ea(`eventOrder`,`eventOrder`,Pi({[$o()]:[`disabling`,Gc,`toggling`,`typeaheadevents`],[Yo()]:[Gc,`focusing`,`keying`],[as()]:[Gc,`disabling`,`toggling`,`representing`],[Bo()]:[Gc,`representing`,`streaming`,`invalidating`],[ds()]:[Gc,`representing`,`item-events`,`tooltipping`],[jo()]:[`focusing`,Gc,`item-type-events`],[Do()]:[`focusing`,Gc,`item-type-events`],[Fo()]:[`item-type-events`,`tooltipping`],[Qo()]:[`receiving`,`reflecting`,`tooltipping`]}),sa()),za(`domModification`)]),qc=e=>ba(`custom.definition`,Kc,e),Jc=e=>({...e.dom,uid:e.uid,domChildren:N(e.components,e=>e.element)}),Yc=e=>e.domModification.fold(()=>kc({}),kc),Xc=e=>e.events,Zc=(e,t)=>{let n=fn(e,t);return n===void 0||n===``?[]:n.split(` `)},Qc=(e,t,n)=>(un(e,t,Zc(e,t).concat([n]).join(` `)),!0),$c=(e,t,n)=>{let r=de(Zc(e,t),e=>e!==n);return r.length>0?un(e,t,r.join(` `)):hn(e,t),!1},el=e=>e.dom.classList!==void 0,tl=e=>Zc(e,`class`),nl=(e,t)=>Qc(e,`class`,t),rl=(e,t)=>$c(e,`class`,t),il=(e,t)=>{el(e)?e.dom.classList.add(t):nl(e,t)},al=e=>{(el(e)?e.dom.classList:tl(e)).length===0&&hn(e,`class`)},ol=(e,t)=>{el(e)?e.dom.classList.remove(t):rl(e,t),al(e)},sl=(e,t)=>el(e)&&e.dom.classList.contains(t),cl=(e,t)=>{P(t,t=>{il(e,t)})},ll=(e,t)=>{P(t,t=>{ol(e,t)})},ul=(e,t)=>ve(t,t=>sl(e,t)),dl=e=>{let t=e.dom.classList,n=Array(t.length);for(let e=0;e<t.length;e++){let r=t.item(e);r!==null&&(n[e]=r)}return n},fl=e=>el(e)?dl(e):tl(e),pl=e=>e.dom.value,ml=(e,t)=>{if(t===void 0)throw Error(`Value.set was undefined`);e.dom.value=t},hl=(e,t,n)=>Gt(e,t).map(e=>{if(n.exists(t=>!Mt(t,e))){let t=n.map(yt).getOr(`span`),r=z.fromTag(t);return Fr(e,r),r}else return e}),gl=(e,t,n)=>{n.fold(()=>Rr(e,t),e=>{Mt(e,t)||(Fr(e,t),Hr(e))})},_l=(e,t,n)=>{let r=N(t,n);return P(Wt(e).slice(r.length),Hr),r},vl=(e,t,n,r)=>{let i=Gt(e,t),a=r(n,i),o=hl(e,t,i);return gl(e,a.element,o),a},yl=(e,t,n)=>_l(e,t,(t,r)=>vl(e,r,t,n)),bl=(e,t)=>_l(e,t,(t,n)=>(gl(e,t,Gt(e,n)),t)),xl=(e,t)=>{let n=Oe(e);return{toRemove:ye(Oe(t),n),toSet:Fe(e,(e,n)=>!Be(t,n)||e!==t[n]).t}},Sl=(e,t)=>{let{class:n,style:r,...i}=gn(t),{toSet:a,toRemove:o}=xl(e.attributes,i),s=()=>{P(o,e=>hn(t,e)),dn(t,a)},c=wn(t),{toSet:l,toRemove:u}=xl(e.styles,c),d=()=>{P(u,e=>En(t,e)),B(t,l)},f=fl(t),p=ye(f,e.classes),m=ye(e.classes,f);return s(),cl(t,m),ll(t,p),d(),e.innerHtml.fold(()=>{let n=e.domChildren;bl(t,n)},e=>{qs(t,e)}),(()=>{let n=t,r=e.value.getOrUndefined();r!==pl(n)&&ml(n,r??``)})(),t},Cl=e=>{let t=z.fromTag(e.tag);dn(t,e.attributes),cl(t,e.classes),B(t,e.styles),e.innerHtml.each(e=>qs(t,e));let n=e.domChildren;return Br(t,n),e.value.each(e=>{ml(t,e)}),t},wl=(e,t)=>{try{let n=Sl(e,t);return O.some(n)}catch{return O.none()}},Tl=e=>e.innerHtml.isSome()&&e.domChildren.length>0,El=(e,t)=>{let n=t.filter(t=>yt(t)===e.tag&&!Tl(e)&&!bc(t)).bind(t=>wl(e,t)).getOrThunk(()=>Cl(e));return cc(n,e.uid),n},Dl=e=>{let t=L(e,`behaviours`).getOr({});return _e(Oe(t),e=>{let n=t[e];return h(n)?[n.me]:[]})},Ol=(e,t)=>Tc(e,t),kl=e=>Ol(e,Dl(e)),Al=(e,t,n)=>{let r=Jc(e),i=Yc(e),a={"alloy.base.modification":i};return Ac(r,t.length>0?jc(n,a,t,r):i)},jl=(e,t,n)=>{let r={"alloy.base.behaviour":Xc(e)};return Bc(n,e.eventOrder,t,r).getOrDie()},Ml=(e,t)=>{let n=()=>d,r=ro(pc),i=xa(qc(e)),a=kl(e),o=Ec(a),s=Dc(a),c=El(Al(i,o,s),t),l=jl(i,o,s),u=ro(i.components),d={uid:e.uid,getSystem:r.get,config:t=>{let n=s;return(g(n[t.name()])?n[t.name()]:()=>{throw Error(`Could not find `+t.name()+` in `+JSON.stringify(e,null,2))})()},hasConfigured:e=>g(s[e.name()]),spec:e,readState:e=>s[e]().map(e=>e.state.readState()).getOr(`not enabled`),getApis:()=>i.apis,connect:e=>{r.set(e)},disconnect:()=>{r.set(fc(n))},element:c,syncComponents:()=>{let e=_e(Wt(c),e=>r.get().getByDom(e).fold(()=>[],xe));u.set(e)},components:u.get,events:l};return d},Nl=(e,t)=>{let n=L(e,`components`).getOr([]);return t.fold(()=>N(n,Bl),e=>N(n,(t,n)=>zl(t,Gt(e,n))))},Pl=(e,t)=>{let{events:n,...r}=dc(e),i=Nl(r,t),a={...r,events:{...tc,...n},components:i};return ui.value(Ml(a,t))},Fl=e=>Il({element:z.fromText(e)}),Il=e=>{let t=Sa(`external.component`,na([G(`element`),za(`uid`)]),e),n=ro(fc()),r=e=>{n.set(e)},i=()=>{n.set(fc(()=>o))},a=t.uid.getOrThunk(()=>uc(`external`));cc(t.element,a);let o={uid:a,getSystem:n.get,config:O.none,hasConfigured:D,connect:r,disconnect:i,getApis:()=>({}),element:t.element,spec:e,readState:S(`No state`),syncComponents:y,components:S([]),events:{}};return yc(o)},Ll=uc,Rl=e=>Be(e,`uid`),zl=(e,t)=>xc(e).getOrThunk(()=>Pl(Rl(e)?e:{uid:Ll(``),...e},t).getOrDie()),Bl=e=>zl(e,O.none()),Vl=yc;var Hl=(e,t,n,r,i)=>e(n,r)?O.some(n):g(i)&&i(n)?O.none():t(n,r,i);let Ul=(e,t,n)=>{let r=e.dom,i=g(n)?n:D;for(;r.parentNode;){r=r.parentNode;let e=z.fromDom(r);if(t(e))return O.some(e);if(i(e))break}return O.none()},Wl=(e,t,n)=>Hl((e,t)=>t(e),Ul,e,t,n),Gl=(e,t)=>he(e.dom.childNodes,e=>t(z.fromDom(e))).map(z.fromDom),Kl=(e,t)=>{let n=e=>{for(let r=0;r<e.childNodes.length;r++){let i=z.fromDom(e.childNodes[r]);if(t(i))return O.some(i);let a=n(e.childNodes[r]);if(a.isSome())return a}return O.none()};return n(e.dom)},ql=(e,t,n)=>Wl(e,t,n).isSome(),Jl=(e,t,n)=>Ul(e,e=>Ot(e,t),n),Yl=(e,t)=>Gl(e,e=>Ot(e,t)),Xl=(e,t)=>jt(t,e),Zl=(e,t,n)=>Hl((e,t)=>Ot(e,t),Jl,e,t,n),Ql=`aria-controls`,$l=e=>Wl(e,e=>{if(!Ct(e))return!1;let t=fn(e,`id`);return t!==void 0&&t.indexOf(Ql)>-1}).bind(e=>{let t=fn(e,`id`);return Xl(Qt(e),`[${Ql}="${t}"]`)}),eu=()=>{let e=J(Ql);return{id:e,link:t=>{un(t,Ql,e)},unlink:e=>{hn(e,Ql)}}},tu=(e,t)=>$l(t).exists(t=>nu(e,t)),nu=(e,t)=>ql(t,t=>Mt(t,e.element),D)||tu(e,t),ru=`unknown`;var iu;(function(e){e[e.STOP=0]=`STOP`,e[e.NORMAL=1]=`NORMAL`,e[e.LOGGING=2]=`LOGGING`})(iu||={});let au=ro({}),ou=(e,t)=>{let n=[],r=new Date().getTime();return{logEventCut:(e,t,r)=>{n.push({outcome:`cut`,target:t,purpose:r})},logEventStopped:(e,t,r)=>{n.push({outcome:`stopped`,target:t,purpose:r})},logNoParent:(e,t,r)=>{n.push({outcome:`no-parent`,target:t,purpose:r})},logEventNoHandlers:(e,t)=>{n.push({outcome:`no-handlers-left`,target:t})},logEventResponse:(e,t,r)=>{n.push({outcome:`response`,purpose:r,target:t})},write:()=>{let i=new Date().getTime();oe([`mousemove`,`mouseover`,`mouseout`,as()],e)||console.log(e,{event:e,time:i-r,target:t.dom,sequence:N(n,e=>oe([`cut`,`stopped`,`response`],e.outcome)?`{`+e.purpose+`} `+e.outcome+` at (`+Qs(e.target)+`)`:e.outcome)})}}},su=(e,t,n)=>{switch(L(au.get(),e).orThunk(()=>De(Oe(au.get()),t=>e.indexOf(t)>-1?O.some(au.get()[t]):O.none())).getOr(iu.NORMAL)){case iu.NORMAL:return n(fu());case iu.LOGGING:{let r=ou(e,t),i=n(r);return r.write(),i}case iu.STOP:return!0}},cu=[`alloy/data/Fields`,`alloy/debugging/Debugging`],lu=()=>{let e=Error();return e.stack===void 0?ru:he(e.stack.split(`
`),e=>e.indexOf(`alloy`)>0&&!se(cu,t=>e.indexOf(t)>-1)).getOr(ru)},uu={logEventCut:y,logEventStopped:y,logNoParent:y,logEventNoHandlers:y,logEventResponse:y,write:y},du=(e,t,n)=>su(e,t,n),fu=S(uu),pu=S([G(`menu`),G(`selectedMenu`)]),Y=S([G(`item`),G(`selectedItem`)]);Y().concat(pu());let mu=S(H(Y())),hu=Ia(`initSize`,[G(`numColumns`),G(`numRows`)]),gu=()=>ka(`markers`,mu()),_u=()=>Ia(`markers`,[G(`backgroundMenu`)].concat(pu(),Y())),vu=e=>Ia(`markers`,N(e,G)),yu=(e,t,n)=>(lu(),Ea(t,t,n,_a(e=>ui.value((...t)=>e.apply(void 0,t))))),bu=e=>yu(`onHandler`,e,ji(y)),xu=e=>yu(`onKeyboardHandler`,e,ji(O.none)),Su=e=>yu(`onHandler`,e,ki()),Cu=e=>yu(`onKeyboardHandler`,e,ki()),wu=(e,t)=>Da(e,S(t)),Tu=e=>Da(e,C),Eu=S(hu),Du=(e,t,n,r,i,a,o,s=!1)=>({x:e,y:t,bubble:n,direction:r,placement:i,restriction:a,label:`${o}-${i}`,alwaysFit:s}),Ou=io.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),ku=(e,t,n,r,i,a,o,s,c)=>e.fold(t,n,r,i,a,o,s,c),Au=(e,t,n,r)=>e.fold(t,t,r,r,t,r,n,n),ju=(e,t,n,r)=>e.fold(t,r,t,r,n,n,t,r),Mu=Ou.southeast,Nu=Ou.southwest,Pu=Ou.northeast,Fu=Ou.northwest,Iu=Ou.south,Lu=Ou.north,Ru=Ou.east,zu=Ou.west,Bu=(e,t,n,r)=>{let i=e+t;return i>r?n:i<n?r:i},Vu=(e,t,n)=>Math.min(Math.max(e,t),n),Hu=(e,t)=>{switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}},Uu=(e,t)=>be([`left`,`right`,`top`,`bottom`],n=>L(t,n).map(t=>Hu(e,t))),Wu=(e,t,n)=>{let r=(r,i)=>t[r].map(t=>{let a=r===`top`||r===`bottom`,o=a?n.top:n.left,s=(r===`left`||r===`top`?Math.max:Math.min)(t,i)+o;return a?Vu(s,e.y,e.bottom):Vu(s,e.x,e.right)}).getOr(i),i=r(`left`,e.x),a=r(`top`,e.y),o=r(`right`,e.right),s=r(`bottom`,e.bottom);return ti(i,a,o-i,s-a)},Gu=`layout`,Ku=e=>e.x,qu=(e,t)=>e.x+e.width/2-t.width/2,Ju=(e,t)=>e.x+e.width-t.width,Yu=(e,t)=>e.y-t.height,Xu=e=>e.y+e.height,Zu=(e,t)=>e.y+e.height/2-t.height/2,Qu=e=>e.x+e.width,$u=(e,t)=>e.x-t.width,ed=(e,t,n)=>Du(Ku(e),Xu(e),n.southeast(),Mu(),`southeast`,Uu(e,{left:1,top:3}),Gu),td=(e,t,n)=>Du(Ju(e,t),Xu(e),n.southwest(),Nu(),`southwest`,Uu(e,{right:0,top:3}),Gu),nd=(e,t,n)=>Du(Ku(e),Yu(e,t),n.northeast(),Pu(),`northeast`,Uu(e,{left:1,bottom:2}),Gu),rd=(e,t,n)=>Du(Ju(e,t),Yu(e,t),n.northwest(),Fu(),`northwest`,Uu(e,{right:0,bottom:2}),Gu),id=(e,t,n)=>Du(qu(e,t),Yu(e,t),n.north(),Lu(),`north`,Uu(e,{bottom:2}),Gu),ad=(e,t,n)=>Du(qu(e,t),Xu(e),n.south(),Iu(),`south`,Uu(e,{top:3}),Gu),od=(e,t,n)=>Du(Qu(e),Zu(e,t),n.east(),Ru(),`east`,Uu(e,{left:0}),Gu),sd=(e,t,n)=>Du($u(e,t),Zu(e,t),n.west(),zu(),`west`,Uu(e,{right:1}),Gu),cd=()=>[ed,td,nd,rd,ad,id,od,sd],ld=()=>[td,ed,rd,nd,ad,id,od,sd],ud=()=>[nd,rd,ed,td,id,ad],dd=()=>[rd,nd,td,ed,id,ad],X=()=>[ed,td,nd,rd,ad,id],fd=()=>[td,ed,rd,nd,ad,id],pd=(e,t)=>t.universal?e:de(e,e=>oe(t.channels,e));var md=Object.freeze({__proto__:null,events:e=>Os([q(Qo(),(t,n)=>{let r=e.channels,i=Oe(r),a=n;P(pd(i,a),e=>{let n=r[e],i=n.schema,o=Sa(`channel[`+e+`] data
Receiver: `+Qs(t.element),i,a.data);n.onReceive(t,o)})})])}),hd=[ka(`channels`,va(ui.value,na([Su(`onReceive`),K(`schema`,sa())])))];let gd=(e,t,n)=>Ws(r=>{n(r,e,t)}),_d=(e,t,n)=>Us((r,i)=>{n(r,e,t)}),vd=(e,t,n,r,i,a)=>Sd(na(e),Ka(t,[qa(`config`,e)]),t,n,r,i,a),yd=(e,t,n,r,i,a)=>Sd(e,Ka(t,[Ba(`config`,e)]),t,n,r,i,a),bd=(e,t,n)=>mc((r,...i)=>{let a=[r].concat(i);return r.config({name:S(e)}).fold(()=>{throw Error(`We could not find any behaviour configuration for: `+e+`. Using API: `+n)},e=>{let n=Array.prototype.slice.call(a,1);return t.apply(void 0,[r,e.config,e.state].concat(n))})},n,t),xd=e=>({key:e,value:void 0}),Sd=(e,t,n,r,i,a,o)=>{let s=e=>Ve(e,n)?e[n]():O.none(),c=je(i,(e,t)=>bd(n,e,t)),l={...je(a,(e,t)=>gc(e,t)),...c,revoke:w(xd,n),config:t=>({key:n,value:{config:Sa(n+`-config`,e,t),me:l,configAsRaw:Wn(()=>Sa(n+`-config`,e,t)),initialConfig:t,state:o}}),schema:S(t),exhibit:(e,t)=>Ke(s(e),L(r,`exhibit`),(e,n)=>n(t,e.config,e.state)).getOrThunk(()=>kc({})),name:S(n),handlers:e=>s(e).map(e=>L(r,`events`).getOr(()=>({}))(e.config,e.state)).getOr({})};return l},Z=e=>fo(e),Cd=na([G(`fields`),G(`name`),K(`active`,{}),K(`apis`,{}),K(`state`,Cc),K(`extra`,{})]),wd=e=>{let t=Sa(`Creating behaviour: `+e.name,Cd,e);return vd(t.fields,t.name,t.active,t.apis,t.extra,t.state)},Td=na([G(`branchKey`),G(`branches`),G(`name`),K(`active`,{}),K(`apis`,{}),K(`state`,Cc),K(`extra`,{})]),Ed=e=>{let t=Sa(`Creating behaviour: `+e.name,Td,e);return yd(wa(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},Dd=S(void 0),Od=wd({fields:hd,name:`receiving`,active:md});var kd=Object.freeze({__proto__:null,exhibit:(e,t)=>kc({classes:[],styles:t.useFixed()?{}:{position:`relative`}})});let Ad=e=>e.dom.focus(),jd=e=>e.dom.blur(),Md=e=>{let t=Qt(e).dom;return e.dom===t.activeElement},Nd=(e=Jr())=>O.from(e.dom.activeElement).map(z.fromDom),Pd=e=>Nd(Qt(e)).filter(t=>e.dom.contains(t.dom)),Fd=(e,t)=>{let n=Qt(t),r=Nd(n).bind(e=>{let n=t=>Mt(e,t);return n(t)?O.some(t):Kl(t,n)}),i=e(t);return r.each(e=>{Nd(n).filter(t=>Mt(t,e)).fold(()=>{Ad(e)},y)}),i},Id=(e,t,n,r,i)=>{let a=e=>e+`px`;return{position:e,left:t.map(a),top:n.map(a),right:r.map(a),bottom:i.map(a)}},Ld=e=>({...e,position:O.some(e.position)}),Rd=(e,t)=>{bn(e,Ld(t))},zd=io.generate([{none:[]},{relative:[`x`,`y`,`width`,`height`]},{fixed:[`x`,`y`,`width`,`height`]}]),Bd=(e,t,n,r,i,a)=>{let o=t.rect,s=o.x-n,c=o.y-r,l=o.width,u=o.height,d=i-(s+l),f=a-(c+u),p=O.some(s),m=O.some(c),h=O.some(d),g=O.some(f),_=O.none();return ku(t.direction,()=>Id(e,p,m,_,_),()=>Id(e,_,m,h,_),()=>Id(e,p,_,_,g),()=>Id(e,_,_,h,g),()=>Id(e,p,m,_,_),()=>Id(e,p,_,_,g),()=>Id(e,p,m,_,_),()=>Id(e,_,m,h,_))},Vd=(e,t)=>e.fold(()=>{let e=t.rect;return Id(`absolute`,O.some(e.x),O.some(e.y),O.none(),O.none())},(e,n,r,i)=>Bd(`absolute`,t,e,n,r,i),(e,n,r,i)=>Bd(`fixed`,t,e,n,r,i)),Hd=(e,t)=>{let n=w(Qr,t),r=e.fold(n,n,()=>{let e=Ur();return Qr(t).translate(-e.left,-e.top)}),i=Hn(t),a=jn(t);return ti(r.left,r.top,i,a)},Ud=(e,t)=>t.fold(()=>e.fold(oi,oi,ti),t=>e.fold(S(t),S(t),()=>{let n=Wd(e,t.x,t.y);return ti(n.left,n.top,t.width,t.height)})),Wd=(e,t,n)=>{let r=Pn(t,n);return e.fold(S(r),S(r),()=>{let e=Ur();return r.translate(-e.left,-e.top)})},Gd=(e,t,n,r)=>e.fold(t,n,r);zd.none;let Kd=zd.relative,qd=zd.fixed,Jd=(e,t)=>({anchorBox:e,origin:t}),Yd=(e,t)=>Jd(e,t),Xd=`data-alloy-placement`,Zd=(e,t)=>{un(e,Xd,t)},Qd=e=>pn(e,Xd),$d=e=>hn(e,Xd),ef=io.generate([{fit:[`reposition`]},{nofit:[`reposition`,`visibleW`,`visibleH`,`isVisible`]}]),tf=(e,t)=>{let{x:n,y:r,right:i,bottom:a}=t,{x:o,y:s,right:c,bottom:l,width:u,height:d}=e;return{originInBounds:o>=n&&o<=i&&s>=r&&s<=a,sizeInBounds:c<=i&&c>=n&&l<=a&&l>=r,visibleW:Math.min(u,o>=n?i-o:c-n),visibleH:Math.min(d,s>=r?a-s:l-r)}},nf=(e,t)=>{let{x:n,y:r,right:i,bottom:a}=t,{x:o,y:s,width:c,height:l}=e,u=Math.max(n,i-c),d=Math.max(r,a-l),f=Vu(o,n,u),p=Vu(s,r,d);return ti(f,p,Math.min(f+c,i)-f,Math.min(p+l,a)-p)},rf=(e,t,n)=>{let r=S(t.bottom-n.y),i=S(n.bottom-t.y),a=Au(e,i,i,r),o=S(t.right-n.x),s=S(n.right-t.x);return{maxWidth:ju(e,s,s,o),maxHeight:a}},af=(e,t,n,r)=>{let i=e.bubble,a=i.offset,o=Wu(r,e.restriction,a),s=e.x+a.left,c=e.y+a.top,l=ti(s,c,t,n),{originInBounds:u,sizeInBounds:d,visibleW:f,visibleH:p}=tf(l,o),m=u&&d,h=m?l:nf(l,o),g=h.width>0&&h.height>0,{maxWidth:_,maxHeight:v}=rf(e.direction,h,r),y={rect:h,maxHeight:v,maxWidth:_,direction:e.direction,placement:e.placement,classes:{on:i.classesOn,off:i.classesOff},layout:e.label,testY:c};return m||e.alwaysFit?ef.fit(y):ef.nofit(y,f,p,g)},of=(e,t,n,r,i,a)=>{let o=r.width,s=r.height,c=(t,c,l,u,d)=>{let f=af(t(n,r,i,e,a),o,s,a);return f.fold(S(f),(e,t,n,r)=>(d===r?n>u||t>l:!d&&r)?f:ef.nofit(c,l,u,d))};return pe(t,(e,t)=>{let n=w(c,t);return e.fold(S(e),n)},ef.nofit({rect:n,maxHeight:r.height,maxWidth:r.width,direction:Mu(),placement:`southeast`,classes:{on:[],off:[]},layout:`none`,testY:n.y},-1,-1,!1)).fold(C,C)},sf=e=>{let t=ro(O.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(O.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(O.some(e))}}},cf=()=>sf(e=>e.destroy()),lf=()=>sf(e=>e.unbind()),uf=()=>{let e=sf(y),t=t=>e.get().each(t);return{...e,on:t}},df=re,ff=(e,t,n)=>Mr(e,t,df,n),pf=(e,t,n)=>Nr(e,t,df,n),mf=kr,hf=[`top`,`bottom`,`right`,`left`],gf=`data-alloy-transition-timer`,_f=(e,t)=>ul(e,t.classes),vf=(e,t,n)=>n.exists(n=>{let r=e.mode;return r===`all`?!0:n[r]!==t[r]}),yf=(e,t)=>{let n=e=>parseFloat(e).toFixed(3);return Re(t,(t,r)=>!Ue(e[r].map(n),t.map(n))).isSome()},bf=e=>{let t=t=>de(xn(e,t).split(/\s*,\s*/),at),n=e=>{if(s(e)&&/^[\d.]+/.test(e)){let t=parseFloat(e);return rt(e,`ms`)?t:t*1e3}else return 0},r=t(`transition-delay`);return pe(t(`transition-duration`),(e,t,i)=>{let a=n(r[i])+n(t);return Math.max(e,a)},0)},xf=(e,t)=>{let n=lf(),r=lf(),i,a=t=>{let n=t.raw.pseudoElement??``;return Mt(t.target,e)&&ot(n)&&oe(hf,t.raw.propertyName)},o=o=>{if(m(o)||a(o)){n.clear(),r.clear();let a=o?.raw.type;(m(a)||a===Wo())&&(clearTimeout(i),hn(e,gf),ll(e,t.classes))}},s=ff(e,Go(),t=>{a(t)&&(s.unbind(),n.set(ff(e,Wo(),o)),r.set(ff(e,Uo(),o)))}),c=bf(e);requestAnimationFrame(()=>{i=setTimeout(o,c+17),un(e,gf,i)})},Sf=(e,t)=>{cl(e,t.classes),pn(e,gf).each(t=>{clearTimeout(parseInt(t,10)),hn(e,gf)}),xf(e,t)},Cf=(e,t,n,r,i,a)=>{let o=vf(r,i,a);if(o||_f(e,r)){yn(e,`position`,n.position);let a=Hd(t,e),s=Vd(t,{...i,rect:a}),c=be(hf,e=>s[e]);yf(n,c)&&(bn(e,c),o&&Sf(e,r),Dn(e))}else ll(e,r.classes)},wf=e=>({width:Hn(e),height:jn(e)}),Tf=(e,t,n,r)=>{En(t,`max-height`),En(t,`max-width`);let i=wf(t);return of(t,r.preference,e,i,n,r.bounds)},Ef=(e,t)=>{let n=t.classes;ll(e,n.off),cl(e,n.on)},Df=(e,t,n)=>{let r=n.maxHeightFunction;r(e,t.maxHeight)},Of=(e,t,n)=>{let r=n.maxWidthFunction;r(e,t.maxWidth)},kf=(e,t,n)=>{let r=Vd(n.origin,t);n.transition.each(i=>{Cf(e,n.origin,r,i,t,n.lastPlacement)}),Rd(e,r)},Af=(e,t)=>{Zd(e,t.placement)},jf=(e,t)=>{Mn(e,Math.floor(t))},Mf=S((e,t)=>{jf(e,t),B(e,{"overflow-x":`hidden`,"overflow-y":`auto`})}),Nf=S((e,t)=>{jf(e,t)}),Pf=(e,t,n)=>e[t]===void 0?n:e[t],Ff=(e,t,n,r,i,a,o,s)=>{let c=Pf(o,`maxHeightFunction`,Mf()),l=Pf(o,`maxWidthFunction`,y),u=e.anchorBox,d=e.origin;return If(u,t,n,{bounds:Ud(d,a),origin:d,preference:r,maxHeightFunction:c,maxWidthFunction:l,lastPlacement:i,transition:s})},If=(e,t,n,r)=>{let i=Tf(e,t,n,r);return kf(t,i,r),Af(t,i),Ef(t,i),Df(t,i,r),Of(t,i,r),{layout:i.layout,placement:i.placement}},Lf=[`valignCentre`,`alignLeft`,`alignRight`,`alignCentre`,`top`,`bottom`,`left`,`right`,`inset`],Rf=(e,t,n,r=1)=>{let i=e*r,a=t*r,o=e=>L(n,e).getOr([]),s=(e,t,n)=>{let r=ye(Lf,n);return{offset:Pn(e,t),classesOn:_e(n,o),classesOff:_e(r,o)}};return{southeast:()=>s(-e,t,[`top`,`alignLeft`]),southwest:()=>s(e,t,[`top`,`alignRight`]),south:()=>s(-e/2,t,[`top`,`alignCentre`]),northeast:()=>s(-e,-t,[`bottom`,`alignLeft`]),northwest:()=>s(e,-t,[`bottom`,`alignRight`]),north:()=>s(-e/2,-t,[`bottom`,`alignCentre`]),east:()=>s(e,-t/2,[`valignCentre`,`left`]),west:()=>s(-e,-t/2,[`valignCentre`,`right`]),insetNortheast:()=>s(i,a,[`top`,`alignLeft`,`inset`]),insetNorthwest:()=>s(-i,a,[`top`,`alignRight`,`inset`]),insetNorth:()=>s(-i/2,a,[`top`,`alignCentre`,`inset`]),insetSoutheast:()=>s(i,-a,[`bottom`,`alignLeft`,`inset`]),insetSouthwest:()=>s(-i,-a,[`bottom`,`alignRight`,`inset`]),insetSouth:()=>s(-i/2,-a,[`bottom`,`alignCentre`,`inset`]),insetEast:()=>s(-i,-a/2,[`valignCentre`,`right`,`inset`]),insetWest:()=>s(i,-a/2,[`valignCentre`,`left`,`inset`])}},zf=()=>Rf(0,0,{}),Bf=C,Vf=(e,t)=>n=>Hf(n)===`rtl`?t:e,Hf=e=>xn(e,`direction`)===`rtl`?`rtl`:`ltr`;var Uf;(function(e){e.TopToBottom=`toptobottom`,e.BottomToTop=`bottomtotop`})(Uf||={});let Wf=`data-alloy-vertical-dir`,Gf=e=>ql(e,e=>Ct(e)&&fn(e,`data-alloy-vertical-dir`)===Uf.BottomToTop),Kf=()=>Ka(`layouts`,[G(`onLtr`),G(`onRtl`),za(`onBottomLtr`),za(`onBottomRtl`)]),qf=(e,t,n,r,i,a,o)=>{let s=o.map(Gf).getOr(!1),c=t.layouts.map(t=>t.onLtr(e)),l=t.layouts.map(t=>t.onRtl(e));return Vf(s?t.layouts.bind(t=>t.onBottomLtr.map(t=>t(e))).or(c).getOr(i):c.getOr(n),s?t.layouts.bind(t=>t.onBottomRtl.map(t=>t(e))).or(l).getOr(a):l.getOr(r))(e)};var Jf=[G(`hotspot`),za(`bubble`),K(`overrides`,{}),Kf(),wu(`placement`,(e,t,n)=>{let r=t.hotspot,i=Hd(n,r.element),a=qf(e.element,t,X(),fd(),ud(),dd(),O.some(t.hotspot.element));return O.some(Bf({anchorBox:i,bubble:t.bubble.getOr(zf()),overrides:t.overrides,layouts:a}))})],Yf=[G(`x`),G(`y`),K(`height`,0),K(`width`,0),K(`bubble`,zf()),K(`overrides`,{}),Kf(),wu(`placement`,(e,t,n)=>{let r=Wd(n,t.x,t.y),i=ti(r.left,r.top,t.width,t.height),a=qf(e.element,t,cd(),ld(),cd(),ld(),O.none());return O.some(Bf({anchorBox:i,bubble:t.bubble,overrides:t.overrides,layouts:a}))})];let Xf=io.generate([{screen:[`point`]},{absolute:[`point`,`scrollLeft`,`scrollTop`]}]),Zf=e=>e.fold(C,(e,t,n)=>e.translate(-t,-n)),Qf=e=>e.fold(C,C),$f=e=>pe(e,(e,t)=>e.translate(t.left,t.top),Pn(0,0)),ep=e=>$f(N(e,Zf)),tp=e=>$f(N(e,Qf)),np=Xf.screen,rp=Xf.absolute,ip=(e,t,n)=>{let r=Lt(n.root).dom;return O.from(r.frameElement).map(z.fromDom).filter(t=>Mt(Pt(t),Pt(e.element))).map(Ln)},ap=(e,t,n)=>{let r=Ur(Pt(e.element));return rp(ip(e,t,n).getOr(r),r.left,r.top)},op=(e,t,n,r)=>{let i=np(Pn(e,t));return O.some($r(i,n,r))},sp=(e,t,n,r,i)=>e.map(e=>{let a=[t,e.point],o=Gd(r,()=>tp(a),()=>tp(a),()=>ep(a)),s=ei(o.left,o.top,e.width,e.height),c=n.showAbove?ud():X(),l=n.showAbove?dd():fd(),u=qf(i,n,c,l,c,l,O.none());return Bf({anchorBox:s,bubble:n.bubble.getOr(zf()),overrides:n.overrides,layouts:u})});var cp=[G(`node`),G(`root`),za(`bubble`),Kf(),K(`overrides`,{}),K(`showAbove`,!1),wu(`placement`,(e,t,n)=>{let r=ap(e,n,t);return t.node.filter(on).bind(i=>{let a=i.dom.getBoundingClientRect();return sp(op(a.left,a.top,a.width,a.height),r,t,n,t.node.getOr(e.element))})})];let lp={create:(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r})},up=io.generate([{before:[`element`]},{on:[`element`,`offset`]},{after:[`element`]}]),dp={before:up.before,on:up.on,after:up.after,cata:(e,t,n,r)=>e.fold(t,n,r),getStart:e=>e.fold(C,C,C)},fp=io.generate([{domRange:[`rng`]},{relative:[`startSitu`,`finishSitu`]},{exact:[`start`,`soffset`,`finish`,`foffset`]}]),pp=e=>fp.exact(e.start,e.soffset,e.finish,e.foffset),mp=e=>e.match({domRange:e=>z.fromDom(e.startContainer),relative:(e,t)=>dp.getStart(e),exact:(e,t,n,r)=>e}),hp={domRange:fp.domRange,relative:fp.relative,exact:fp.exact,exactFromRange:pp,getWin:e=>Lt(mp(e)),range:lp.create},gp=(e,t)=>{t.fold(t=>{e.setStartBefore(t.dom)},(t,n)=>{e.setStart(t.dom,n)},t=>{e.setStartAfter(t.dom)})},_p=(e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,n)=>{e.setEnd(t.dom,n)},t=>{e.setEndAfter(t.dom)})},vp=(e,t,n)=>{let r=e.document.createRange();return gp(r,t),_p(r,n),r},yp=(e,t,n,r,i)=>{let a=e.document.createRange();return a.setStart(t.dom,n),a.setEnd(r.dom,i),a},bp=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),xp=e=>{let t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?O.some(n).map(bp):O.none()},Sp=e=>{let t=e.getBoundingClientRect();return t.width>0||t.height>0?O.some(t).map(bp):O.none()},Cp=io.generate([{ltr:[`start`,`soffset`,`finish`,`foffset`]},{rtl:[`start`,`soffset`,`finish`,`foffset`]}]),wp=(e,t,n)=>t(z.fromDom(n.startContainer),n.startOffset,z.fromDom(n.endContainer),n.endOffset),Tp=(e,t)=>t.match({domRange:e=>({ltr:S(e),rtl:O.none}),relative:(t,n)=>({ltr:Wn(()=>vp(e,t,n)),rtl:Wn(()=>O.some(vp(e,n,t)))}),exact:(t,n,r,i)=>({ltr:Wn(()=>yp(e,t,n,r,i)),rtl:Wn(()=>O.some(yp(e,r,i,t,n)))})}),Ep=(e,t)=>{let n=t.ltr();return n.collapsed?t.rtl().filter(e=>e.collapsed===!1).map(e=>Cp.rtl(z.fromDom(e.endContainer),e.endOffset,z.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>wp(e,Cp.ltr,n)):wp(e,Cp.ltr,n)},Dp=(e,t)=>Ep(e,Tp(e,t)),Op=(e,t)=>Dp(e,t).match({ltr:(t,n,r,i)=>{let a=e.document.createRange();return a.setStart(t.dom,n),a.setEnd(r.dom,i),a},rtl:(t,n,r,i)=>{let a=e.document.createRange();return a.setStart(r.dom,i),a.setEnd(t.dom,n),a}});Cp.ltr,Cp.rtl;let kp=(e,t,n)=>de(Vt(e,n),t),Ap=(e,t)=>At(t,e),jp=(e,t,n,r)=>{let i=Pt(e).dom.createRange();return i.setStart(e.dom,t),i.setEnd(n.dom,r),i},Mp=(e,t,n,r)=>{let i=jp(e,t,n,r),a=Mt(e,n)&&t===r;return i.collapsed&&!a},Np=e=>O.from(e.getSelection()),Pp=e=>{if(e.rangeCount>0){let t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return O.some(lp.create(z.fromDom(t.startContainer),t.startOffset,z.fromDom(n.endContainer),n.endOffset))}else return O.none()},Fp=e=>{if(e.anchorNode===null||e.focusNode===null)return Pp(e);{let t=z.fromDom(e.anchorNode),n=z.fromDom(e.focusNode);return Mp(t,e.anchorOffset,n,e.focusOffset)?O.some(lp.create(t,e.anchorOffset,n,e.focusOffset)):Pp(e)}},Ip=e=>Np(e).filter(e=>e.rangeCount>0).bind(Fp),Lp=(e,t)=>xp(Op(e,t)),Rp=(e,t)=>Sp(Op(e,t)),zp=((e,t)=>{let n=n=>{if(!e(n))throw Error(`Can only get `+t+` value of a `+t+` node`);return r(n).getOr(``)},r=t=>e(t)?O.from(t.dom.nodeValue):O.none();return{get:n,getOption:r,set:(n,r)=>{if(!e(n))throw Error(`Can only set raw `+t+` value of a `+t+` node`);n.dom.nodeValue=r}}})(wt,`text`),Bp=e=>zp.get(e),Vp=(e,t)=>({element:e,offset:t}),Hp=(e,t)=>{let n=Wt(e);if(n.length===0)return Vp(e,t);if(t<n.length)return Vp(n[t],0);{let e=n[n.length-1];return Vp(e,wt(e)?Bp(e).length:Wt(e).length)}},Up=(e,t)=>wt(e)?Vp(e,t):Hp(e,t),Wp=e=>e.foffset!==void 0,Gp=(e,t)=>t.getSelection.getOrThunk(()=>()=>Ip(e))().map(e=>{if(Wp(e)){let t=Up(e.start,e.soffset),n=Up(e.finish,e.foffset);return hp.range(t.element,t.offset,n.element,n.offset)}else return e});var Kp=[za(`getSelection`),G(`root`),za(`bubble`),Kf(),K(`overrides`,{}),K(`showAbove`,!1),wu(`placement`,(e,t,n)=>{let r=Lt(t.root).dom,i=ap(e,n,t);return sp(Gp(r,t).bind(e=>{if(Wp(e))return Rp(r,hp.exactFromRange(e)).orThunk(()=>{let t=z.fromText(`﻿`);Fr(e.start,t);let n=Lp(r,hp.exact(t,0,t,1));return Hr(t),n}).bind(e=>op(e.left,e.top,e.width,e.height));{let t=je(e,e=>e.dom.getBoundingClientRect()),n={left:Math.min(t.firstCell.left,t.lastCell.left),right:Math.max(t.firstCell.right,t.lastCell.right),top:Math.min(t.firstCell.top,t.lastCell.top),bottom:Math.max(t.firstCell.bottom,t.lastCell.bottom)};return op(n.left,n.top,n.right-n.left,n.bottom-n.top)}}),i,t,n,Gp(r,t).bind(e=>Wp(e)?Ct(e.start)?O.some(e.start):Bt(e.start):O.some(e.firstCell)).getOr(e.element))})];let qp=`link-layout`,Jp=e=>e.x+e.width,Yp=(e,t)=>e.x-t.width,Xp=(e,t)=>e.y-t.height+e.height,Zp=e=>e.y,Qp=(e,t,n)=>Du(Jp(e),Zp(e),n.southeast(),Mu(),`southeast`,Uu(e,{left:0,top:2}),qp),$p=(e,t,n)=>Du(Yp(e,t),Zp(e),n.southwest(),Nu(),`southwest`,Uu(e,{right:1,top:2}),qp),em=(e,t,n)=>Du(Jp(e),Xp(e,t),n.northeast(),Pu(),`northeast`,Uu(e,{left:0,bottom:3}),qp),tm=(e,t,n)=>Du(Yp(e,t),Xp(e,t),n.northwest(),Fu(),`northwest`,Uu(e,{right:1,bottom:3}),qp),nm=()=>[Qp,$p,em,tm],rm=()=>[$p,Qp,tm,em];var im=wa(`type`,{selection:Kp,node:cp,hotspot:Jf,submenu:[G(`item`),Kf(),K(`overrides`,{}),wu(`placement`,(e,t,n)=>{let r=Hd(n,t.item.element),i=qf(e.element,t,nm(),rm(),nm(),rm(),O.none());return O.some(Bf({anchorBox:r,bubble:zf(),overrides:t.overrides,layouts:i}))})],makeshift:Yf});let am=[Ra(`classes`,ua),Za(`mode`,`all`,[`all`,`layout`,`placement`])],om=[K(`useFixed`,D),za(`getBounds`)],sm=[ka(`anchor`,im),Ka(`transition`,am)],cm=()=>{let e=document.documentElement;return qd(0,0,e.clientWidth,e.clientHeight)},lm=e=>{let t=Ln(e.element),n=e.element.dom.getBoundingClientRect();return Kd(t.left,t.top,n.width,n.height)},um=(e,t,n,r,i,a)=>Ff(Yd(t.anchorBox,e),r.element,t.bubble,t.layouts,i,n,t.overrides,a),dm=(e,t,n,r,i)=>{fm(e,t,n,r,i,O.none())},fm=(e,t,n,r,i,a)=>{let o=Sa(`placement.info`,H(sm),i),s=o.anchor,c=r.element,l=n.get(r.uid);Fd(()=>{yn(c,`position`,`fixed`);let i=Cn(c,`visibility`);yn(c,`visibility`,`hidden`);let u=t.useFixed()?cm():lm(e);s.placement(e,s,u).each(e=>{let i=um(u,e,a.orThunk(()=>t.getBounds.map(ne)),r,l,o.transition);n.set(r.uid,i)}),i.fold(()=>{En(c,`visibility`)},e=>{yn(c,`visibility`,e)}),Cn(c,`left`).isNone()&&Cn(c,`top`).isNone()&&Cn(c,`right`).isNone()&&Cn(c,`bottom`).isNone()&&He(Cn(c,`position`),`fixed`)&&En(c,`position`)},c)},pm=wd({fields:om,name:`positioning`,active:kd,apis:Object.freeze({__proto__:null,position:dm,positionWithinBounds:fm,getMode:(e,t,n)=>t.useFixed()?`fixed`:`absolute`,reset:(e,t,n,r)=>{let i=r.element;P([`position`,`left`,`right`,`top`,`bottom`],e=>En(i,e)),$d(i),n.clear(r.uid)}}),state:Object.freeze({__proto__:null,init:()=>{let e={};return wc({readState:()=>e,clear:t=>{h(t)?delete e[t]:e={}},set:(t,n)=>{e[t]=n},get:t=>L(e,t)})}})}),mm=e=>e.getSystem().isConnected(),hm=e=>{xs(e,ds()),P(e.components(),hm)},gm=e=>{P(e.components(),gm),xs(e,us())},_m=(e,t)=>{e.getSystem().addToWorld(t),on(e.element)&&gm(t)},vm=e=>{hm(e),e.getSystem().removeFromWorld(e)},ym=(e,t)=>{Rr(e.element,t.element)},bm=e=>{P(e.components(),e=>Hr(e.element)),Vr(e.element),e.syncComponents()},xm=(e,t,n)=>{let r=e.components();bm(e);let i=n(t);P(ye(r,i),t=>{hm(t),e.getSystem().removeFromWorld(t)}),P(i,t=>{mm(t)?ym(e,t):(e.getSystem().addToWorld(t),ym(e,t),on(e.element)&&gm(t))}),e.syncComponents()},Sm=(e,t,n)=>{let r=e.components(),i=_e(t,e=>xc(e).toArray());P(r,e=>{oe(i,e)||vm(e)});let a=n(t);P(ye(r,a),e=>{mm(e)&&vm(e)}),P(a,t=>{mm(t)||_m(e,t)}),e.syncComponents()},Cm=(e,t)=>{wm(e,t,Rr)},wm=(e,t,n)=>{e.getSystem().addToWorld(t),n(e.element,t.element),on(e.element)&&gm(t),e.syncComponents()},Tm=e=>{hm(e),Hr(e.element),e.getSystem().removeFromWorld(e)},Em=e=>{let t=Rt(e.element).bind(t=>e.getSystem().getByDom(t).toOptional());Tm(e),t.each(e=>{e.syncComponents()})},Dm=e=>{P(e.components(),Tm),Vr(e.element),e.syncComponents()},Om=(e,t)=>{Am(e,t,Rr)},km=(e,t)=>{Am(e,t,Ir)},Am=(e,t,n)=>{n(e,t.element),P(Wt(t.element),e=>{t.getByDom(e).each(gm)})},jm=e=>{P(Wt(e.element),t=>{e.getByDom(t).each(hm)}),Hr(e.element)},Mm=(e,t,n,r)=>{n.get().each(t=>{Dm(e)}),Cm(t.getAttachPoint(e),e);let i=e.getSystem().build(r);return Cm(e,i),n.set(i),i},Nm=(e,t,n,r)=>{let i=Mm(e,t,n,r);return t.onOpen(e,i),i},Pm=(e,t,n,r)=>n.get().map(()=>Mm(e,t,n,r)),Fm=(e,t,n,r,i)=>{Hm(e,t),Nm(e,t,n,r),i(),Wm(e,t)},Im=(e,t,n)=>{n.get().each(r=>{Dm(e),Em(e),t.onClose(e,r),n.clear()})},Lm=(e,t,n)=>n.isOpen(),Rm=(e,t,n,r)=>Lm(e,t,n)&&n.get().exists(n=>t.isPartOf(e,n,r)),zm=(e,t,n)=>n.get(),Bm=(e,t,n,r)=>{Cn(e.element,t).fold(()=>{hn(e.element,n)},t=>{un(e.element,n,t)}),yn(e.element,t,r)},Vm=(e,t,n)=>{pn(e.element,n).fold(()=>En(e.element,t),n=>yn(e.element,t,n))},Hm=(e,t,n)=>{let r=t.getAttachPoint(e);yn(e.element,`position`,pm.getMode(r)),Bm(e,`visibility`,t.cloakVisibilityAttr,`hidden`)},Um=e=>se([`top`,`left`,`right`,`bottom`],t=>Cn(e,t).isSome()),Wm=(e,t,n)=>{Um(e.element)||En(e.element,`position`),Vm(e,`visibility`,t.cloakVisibilityAttr)};var Gm=Object.freeze({__proto__:null,cloak:Hm,decloak:Wm,open:Nm,openWhileCloaked:Fm,close:Im,isOpen:Lm,isPartOf:Rm,getState:zm,setContent:Pm}),Km=Object.freeze({__proto__:null,events:(e,t)=>Os([q(rs(),(n,r)=>{Im(n,e,t)})])});let qm=wd({fields:[bu(`onOpen`),bu(`onClose`),G(`isPartOf`),G(`getAttachPoint`),K(`cloakVisibilityAttr`,`data-precloak-visibility`)],name:`sandboxing`,active:Km,apis:Gm,state:Object.freeze({__proto__:null,init:()=>{let e=uf();return wc({readState:S(`not-implemented`),isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}})}),Jm=S(`dismiss.popups`),Ym=S(`reposition.popups`),Xm=S(`mouse.released`),Zm=na([K(`isExtraPart`,D),Ka(`fireEventInstead`,[K(`event`,fs())])]),Qm=e=>{let t=Sa(`Dismissal`,Zm,e);return{[Jm()]:{schema:na([G(`target`)]),onReceive:(e,n)=>{qm.isOpen(e)&&(qm.isPartOf(e,n.target)||t.isExtraPart(e,n.target)||t.fireEventInstead.fold(()=>qm.close(e),t=>xs(e,t.event)))}}}},$m=na([Ka(`fireEventInstead`,[K(`event`,ps())]),Pa(`doReposition`)]),eh=e=>{let t=Sa(`Reposition`,$m,e);return{[Ym()]:{onReceive:e=>{qm.isOpen(e)&&t.fireEventInstead.fold(()=>t.doReposition(e),t=>xs(e,t.event))}}}},th=(e,t,n)=>{t.store.manager.onLoad(e,t,n)},nh=(e,t,n)=>{t.store.manager.onUnload(e,t,n)};var rh=Object.freeze({__proto__:null,onLoad:th,onUnload:nh,setValue:(e,t,n,r)=>{t.store.manager.setValue(e,t,n,r)},getValue:(e,t,n)=>t.store.manager.getValue(e,t,n),getState:(e,t,n)=>n}),ih=Object.freeze({__proto__:null,events:(e,t)=>Os(e.resetOnDom?[Vs((n,r)=>{th(n,e,t)}),Hs((n,r)=>{nh(n,e,t)})]:[_d(e,t,th)])});let ah=()=>{let e=ro(null);return wc({set:e.set,get:e.get,isNotSet:()=>e.get()===null,clear:()=>{e.set(null)},readState:()=>({mode:`memory`,value:e.get()})})},oh=()=>wc({readState:y}),sh=()=>{let e=ro({}),t=ro({});return wc({readState:()=>({mode:`dataset`,dataByValue:e.get(),dataByText:t.get()}),lookup:n=>L(e.get(),n).orThunk(()=>L(t.get(),n)),update:n=>{let r=e.get(),i=t.get(),a={},o={};P(n,e=>{a[e.value]=e,L(e,`meta`).each(t=>{L(t,`text`).each(t=>{o[t]=e})})}),e.set({...r,...a}),t.set({...i,...o})},clear:()=>{e.set({}),t.set({})}})};var ch=Object.freeze({__proto__:null,memory:ah,dataset:sh,manual:oh,init:e=>e.store.manager.state(e)});let lh=(e,t,n,r)=>{let i=t.store;n.update([r]),i.setValue(e,r),t.onSetValue(e,r)};var uh=[za(`initialValue`),G(`getFallbackEntry`),G(`getDataKey`),G(`setValue`),wu(`manager`,{setValue:lh,getValue:(e,t,n)=>{let r=t.store,i=r.getDataKey(e);return n.lookup(i).getOrThunk(()=>r.getFallbackEntry(i))},onLoad:(e,t,n)=>{t.store.initialValue.each(r=>{lh(e,t,n,r)})},onUnload:(e,t,n)=>{n.clear()},state:sh})],dh=[G(`getValue`),K(`setValue`,y),za(`initialValue`),wu(`manager`,{setValue:(e,t,n,r)=>{t.store.setValue(e,r),t.onSetValue(e,r)},getValue:(e,t,n)=>t.store.getValue(e),onLoad:(e,t,n)=>{t.store.initialValue.each(n=>{t.store.setValue(e,n)})},onUnload:y,state:Cc.init})];let Q=wd({fields:[Ja(`store`,{mode:`memory`},wa(`mode`,{memory:[za(`initialValue`),wu(`manager`,{setValue:(e,t,n,r)=>{n.set(r),t.onSetValue(e,r)},getValue:(e,t,n)=>n.get(),onLoad:(e,t,n)=>{t.store.initialValue.each(e=>{n.isNotSet()&&n.set(e)})},onUnload:(e,t,n)=>{n.clear()},state:ah})],manual:dh,dataset:uh})),bu(`onSetValue`),K(`resetOnDom`,!1)],name:`representing`,active:ih,apis:rh,extra:{setValueFrom:(e,t)=>{let n=Q.getValue(t);Q.setValue(e,n)}},state:ch}),fh=(e,t)=>no(e,{},N(t,t=>Fa(t.name(),`Cannot configure `+t.name()+` for `+e)).concat([Da(`dump`,C)])),ph=e=>e.dump,mh=(e,t)=>({...Z(t),...e.dump}),hh={field:fh,augment:mh,get:ph},gh=`placeholder`,_h=io.generate([{single:[`required`,`valueThunk`]},{multiple:[`required`,`valueThunks`]}]),vh=e=>Be(e,`uiType`),yh=(e,t,n,r)=>e.exists(e=>e!==n.owner)?_h.single(!0,S(n)):L(r,n.name).fold(()=>{throw Error(`Unknown placeholder component: `+n.name+`
Known: [`+Oe(r)+`]
Namespace: `+e.getOr(`none`)+`
Spec: `+JSON.stringify(n,null,2))},e=>e.replace()),bh=(e,t,n,r)=>vh(n)&&n.uiType===gh?yh(e,t,n,r):_h.single(!1,S(n)),xh=(e,t,n,r)=>bh(e,t,n,r).fold((i,a)=>{let o=vh(n)?a(t,n.config,n.validated):a(t),s=_e(L(o,`components`).getOr([]),n=>xh(e,t,n,r));return[{...o,components:s}]},(e,r)=>{if(vh(n)){let e=r(t,n.config,n.validated);return n.validated.preprocess.getOr(C)(e)}else return r(t)}),Sh=(e,t,n,r)=>_e(n,n=>xh(e,t,n,r)),Ch=(e,t)=>{let n=!1;return{name:S(e),required:()=>t.fold((e,t)=>e,(e,t)=>e),used:()=>n,replace:()=>{if(n)throw Error(`Trying to use the same placeholder more than once: `+e);return n=!0,t}}},wh=(e,t,n,r)=>{let i=je(r,(e,t)=>Ch(t,e)),a=Sh(e,t,n,i);return Ae(i,n=>{if(n.used()===!1&&n.required())throw Error(`Placeholder: `+n.name()+` was not found in components list
Namespace: `+e.getOr(`none`)+`
Components: `+JSON.stringify(t.components,null,2))}),a},Th=_h.single,Eh=_h.multiple,Dh=S(gh),Oh=io.generate([{required:[`data`]},{external:[`data`]},{optional:[`data`]},{group:[`data`]}]),kh=K(`factory`,{sketch:C}),Ah=K(`schema`,[]),jh=G(`name`),Mh=Ea(`pname`,`pname`,Ai(e=>`<alloy.`+J(e.name)+`>`),sa()),Nh=Da(`schema`,()=>[za(`preprocess`)]),Ph=K(`defaults`,S({})),Fh=K(`overrides`,S({})),Ih=H([kh,Ah,jh,Mh,Ph,Fh]),Lh=H([kh,Ah,jh,Ph,Fh]),Rh=H([kh,Ah,jh,Mh,Ph,Fh]),zh=H([kh,Nh,jh,G(`unit`),Mh,Ph,Fh]),Bh=e=>e.fold(O.some,O.none,O.some,O.some),Vh=e=>{let t=e=>e.name;return e.fold(t,t,t,t)},Hh=e=>e.fold(C,C,C,C),Uh=(e,t)=>n=>e(Sa(`Converting part type`,t,n)),Wh=Uh(Oh.required,Ih),Gh=Uh(Oh.external,Lh),Kh=Uh(Oh.optional,Rh),qh=Uh(Oh.group,zh),Jh=S(`entirety`);var Yh=Object.freeze({__proto__:null,required:Wh,external:Gh,optional:Kh,group:qh,asNamedPart:Bh,name:Vh,asCommon:Hh,original:Jh});let Xh=(e,t,n,r)=>Di(t.defaults(e,n,r),n,{uid:e.partUids[t.name]},t.overrides(e,n,r)),Zh=(e,t,n)=>{let r={},i={};return P(n,e=>{e.fold(e=>{r[e.pname]=Th(!0,(t,n,r)=>e.factory.sketch(Xh(t,e,n,r)))},e=>{let n=t.parts[e.name];i[e.name]=S(e.factory.sketch(Xh(t,e,n[Jh()]),n))},e=>{r[e.pname]=Th(!1,(t,n,r)=>e.factory.sketch(Xh(t,e,n,r)))},e=>{r[e.pname]=Eh(!0,(t,n,r)=>{let i=t[e.name];return N(i,n=>e.factory.sketch(Di(e.defaults(t,n,r),n,e.overrides(t,n))))})})}),{internals:S(r),externals:S(i)}},Qh=(e,t)=>{let n={};return P(t,t=>{Bh(t).each(t=>{let r=$h(e,t.pname);n[t.name]=n=>{let i=Sa(`Part: `+t.name+` in `+e,H(t.schema),n);return{...r,config:n,validated:i}}})}),n},$h=(e,t)=>({uiType:Dh(),owner:e,name:t}),eg=(e,t,n)=>({uiType:Dh(),owner:e,name:t,config:n,validated:{}}),tg=e=>_e(e,e=>e.fold(O.none,O.some,O.none,O.none).map(e=>Ia(e.name,e.schema.concat([Tu(Jh())]))).toArray()),ng=e=>N(e,Vh),rg=(e,t,n)=>Zh(e,t,n),ig=(e,t,n)=>wh(O.some(e),t,t.components,n),ag=(e,t,n)=>{let r=t.partUids[n];return e.getSystem().getByUid(r).toOptional()},og=(e,t,n)=>ag(e,t,n).getOrDie(`Could not find part: `+n),sg=(e,t,n)=>{let r={},i=t.partUids,a=e.getSystem();return P(n,e=>{r[e]=S(a.getByUid(i[e]))}),r},cg=(e,t)=>{let n=e.getSystem();return je(t.partUids,(e,t)=>S(n.getByUid(e)))},lg=e=>Oe(e.partUids),ug=(e,t,n)=>{let r={},i=t.partUids,a=e.getSystem();return P(n,e=>{r[e]=S(a.getByUid(i[e]).getOrDie())}),r},dg=(e,t)=>fo(N(ng(t),t=>({key:t,value:e+`-`+t}))),fg=e=>Ea(`partUids`,`partUids`,Ni(t=>dg(t.uid,e)),sa());var pg=Object.freeze({__proto__:null,generate:Qh,generateOne:eg,schemas:tg,names:ng,substitutes:rg,components:ig,defaultUids:dg,defaultUidsSchema:fg,getAllParts:cg,getAllPartNames:lg,getPart:ag,getPartOrDie:og,getParts:sg,getPartsOrDie:ug});let mg=(e,t)=>(e.length>0?[Ia(`parts`,e)]:[]).concat([G(`uid`),K(`dom`,{}),K(`components`,[]),Tu(`originalSpec`),K(`debug.sketcher`,{})]).concat(t),hg=(e,t,n,r,i)=>{let a=mg(r,i);return Sa(e+` [SpecSchema]`,na(a.concat(t)),n)},gg=(e,t,n,r)=>{let i=yg(r);return n(hg(e,t,i,[],[]),i)},_g=(e,t,n,r,i)=>{let a=yg(i),o=hg(e,t,a,tg(n),[fg(n)]),s=rg(e,o,n);return r(o,ig(e,o,s.internals()),a,s.externals())},vg=e=>Be(e,`uid`),yg=e=>vg(e)?e:{...e,uid:uc(`uid`)},bg=e=>e.uid!==void 0,xg=na([G(`name`),G(`factory`),G(`configFields`),K(`apis`,{}),K(`extraApis`,{})]),Sg=na([G(`name`),G(`factory`),G(`configFields`),G(`partFields`),K(`apis`,{}),K(`extraApis`,{})]),Cg=e=>{let t=Sa(`Sketcher for `+e.name,xg,e),n=e=>gg(t.name,t.configFields,t.factory,e),r=je(t.apis,Sc),i=je(t.extraApis,(e,t)=>gc(e,t));return{name:t.name,configFields:t.configFields,sketch:n,...r,...i}},wg=e=>{let t=Sa(`Sketcher for `+e.name,Sg,e),n=e=>_g(t.name,t.configFields,t.partFields,t.factory,e),r=Qh(t.name,t.partFields),i=je(t.apis,Sc),a=je(t.extraApis,(e,t)=>gc(e,t));return{name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:n,parts:r,...i,...a}},Tg=e=>Dt(`input`)(e)&&fn(e,`type`)!==`radio`||Dt(`textarea`)(e);var Eg=Object.freeze({__proto__:null,getCurrent:(e,t,n)=>t.find(e)});let Dg=wd({fields:[G(`find`)],name:`composing`,apis:Eg}),Og=[`input`,`button`,`textarea`,`select`],kg=(e,t,n)=>{(t.disabled()?Lg:Rg)(e,t)},Ag=(e,t)=>t.useNative===!0&&oe(Og,yt(e.element)),jg=e=>mn(e.element,`disabled`),Mg=e=>{un(e.element,`disabled`,`disabled`)},Ng=e=>{hn(e.element,`disabled`)},Pg=e=>fn(e.element,`aria-disabled`)===`true`,Fg=e=>{un(e.element,`aria-disabled`,`true`)},Ig=e=>{un(e.element,`aria-disabled`,`false`)},Lg=(e,t,n)=>{t.disableClass.each(t=>{il(e.element,t)}),(Ag(e,t)?Mg:Fg)(e),t.onDisabled(e)},Rg=(e,t,n)=>{t.disableClass.each(t=>{ol(e.element,t)}),(Ag(e,t)?Ng:Ig)(e),t.onEnabled(e)},zg=(e,t)=>Ag(e,t)?jg(e):Pg(e);var Bg=Object.freeze({__proto__:null,enable:Rg,disable:Lg,isDisabled:zg,onLoad:kg,set:(e,t,n,r)=>{(r?Lg:Rg)(e,t)}}),Vg=Object.freeze({__proto__:null,exhibit:(e,t)=>kc({classes:t.disabled()?t.disableClass.toArray():[]}),events:(e,t)=>Os([ks($o(),(t,n)=>zg(t,e)),_d(e,t,kg)])});let Hg=wd({fields:[$a(`disabled`,D),K(`useNative`,!0),za(`disableClass`),bu(`onDisabled`),bu(`onEnabled`)],name:`disabling`,active:Vg,apis:Bg}),Ug=(e,t,n,r)=>{P(Ap(e.element,`.`+t.highlightClass),n=>{se(r,e=>Mt(e.element,n))||(ol(n,t.highlightClass),e.getSystem().getByDom(n).each(n=>{t.onDehighlight(e,n),xs(n,bs())}))})},Wg=(e,t,n)=>Ug(e,t,n,[]),Gg=(e,t,n,r)=>{Zg(e,t,n,r)&&(ol(r.element,t.highlightClass),t.onDehighlight(e,r),xs(r,bs()))},Kg=(e,t,n,r)=>{Ug(e,t,n,[r]),Zg(e,t,n,r)||(il(r.element,t.highlightClass),t.onHighlight(e,r),xs(r,ys()))},qg=(e,t,n)=>{e_(e,t).each(r=>{Kg(e,t,n,r)})},Jg=(e,t,n)=>{t_(e,t).each(r=>{Kg(e,t,n,r)})},Yg=(e,t,n,r)=>{$g(e,t,n,r).fold(e=>{throw e},r=>{Kg(e,t,n,r)})},Xg=(e,t,n,r)=>{he(a_(e,t),r).each(r=>{Kg(e,t,n,r)})},Zg=(e,t,n,r)=>sl(r.element,t.highlightClass),Qg=(e,t,n)=>Xl(e.element,`.`+t.highlightClass).bind(t=>e.getSystem().getByDom(t).toOptional()),$g=(e,t,n,r)=>{let i=Ap(e.element,`.`+t.itemClass);return O.from(i[r]).fold(()=>ui.error(Error(`No element found with index `+r)),e.getSystem().getByDom)},e_=(e,t,n)=>Xl(e.element,`.`+t.itemClass).bind(t=>e.getSystem().getByDom(t).toOptional()),t_=(e,t,n)=>{let r=Ap(e.element,`.`+t.itemClass);return(r.length>0?O.some(r[r.length-1]):O.none()).bind(t=>e.getSystem().getByDom(t).toOptional())},n_=(e,t,n,r)=>{let i=Ap(e.element,`.`+t.itemClass);return ge(i,e=>sl(e,t.highlightClass)).bind(t=>{let n=Bu(t,r,0,i.length-1);return e.getSystem().getByDom(i[n]).toOptional()})},r_=(e,t,n)=>n_(e,t,n,-1),i_=(e,t,n)=>n_(e,t,n,1),a_=(e,t,n)=>We(N(Ap(e.element,`.`+t.itemClass),t=>e.getSystem().getByDom(t).toOptional()));var o_=Object.freeze({__proto__:null,dehighlightAll:Wg,dehighlight:Gg,highlight:Kg,highlightFirst:qg,highlightLast:Jg,highlightAt:Yg,highlightBy:Xg,isHighlighted:Zg,getHighlighted:Qg,getFirst:e_,getLast:t_,getPrevious:r_,getNext:i_,getCandidates:a_});let s_=wd({fields:[G(`highlightClass`),G(`itemClass`),bu(`onHighlight`),bu(`onDehighlight`)],name:`highlighting`,apis:o_}),$=[8],c_=[9],l_=[13],u_=[27],d_=[32],f_=[37],p_=[38],m_=[39],h_=[40],g_=(e,t,n)=>{let r=I(e.slice(0,t)),i=I(e.slice(t+1));return he(r.concat(i),n)},__=(e,t,n)=>he(I(e.slice(0,t)),n),v_=(e,t,n)=>{let r=e.slice(0,t);return he(e.slice(t+1).concat(r),n)},y_=(e,t,n)=>he(e.slice(t+1),n),b_=e=>t=>{let n=t.raw;return oe(e,n.which)},x_=e=>t=>ve(e,e=>e(t)),S_=e=>e.raw.shiftKey===!0,C_=e=>e.raw.ctrlKey===!0,w_=T(S_),T_=(e,t)=>({matches:e,classification:t}),E_=(e,t)=>he(e,e=>e.matches(t)).map(e=>e.classification),D_=(e,t,n)=>{t.exists(e=>n.exists(t=>Mt(t,e)))||Ss(e,ms(),{prevFocus:t,newFocus:n})},O_=()=>{let e=e=>Pd(e.element);return{get:e,set:(t,n)=>{let r=e(t);t.getSystem().triggerFocus(n,t.element),D_(t,r,e(t))}}},k_=()=>{let e=e=>s_.getHighlighted(e).map(e=>e.element);return{get:e,set:(t,n)=>{let r=e(t);t.getSystem().getByDom(n).fold(y,e=>{s_.highlight(t,e)}),D_(t,r,e(t))}}};var A_;(function(e){e.OnFocusMode=`onFocus`,e.OnEnterOrSpaceMode=`onEnterOrSpace`,e.OnApiMode=`onApi`})(A_||={});let j_=(e,t,n,r,i)=>{let a=()=>e.concat([K(`focusManager`,O_()),Ja(`focusInside`,`onFocus`,_a(e=>oe([`onFocus`,`onEnterOrSpace`,`onApi`],e)?ui.value(e):ui.error(`Invalid value for focusInside`))),wu(`handler`,s),wu(`state`,t),wu(`sendFocusIn`,i)]),o=(e,t,n,r,i)=>E_(n(e,t,r,i),t.event).bind(n=>n(e,t,r,i)),s={schema:a,processKey:o,toEvents:(e,t)=>{let a=e.focusInside===A_.OnFocusMode?i(e).map(n=>q(Yo(),(r,i)=>{n(r,e,t),i.stop()})):O.none(),s=(n,r)=>{let a=b_(d_.concat(l_))(r.event);e.focusInside===A_.OnEnterOrSpaceMode&&a&&yo(n,r)&&i(e).each(i=>{i(n,e,t),r.stop()})},c=[q(Ro(),(r,i)=>{o(r,i,n,e,t).fold(()=>{s(r,i)},e=>{i.stop()})}),q(zo(),(n,i)=>{o(n,i,r,e,t).each(e=>{i.stop()})})];return Os(a.toArray().concat(c))}};return s},M_=e=>{let t=[za(`onEscape`),za(`onEnter`),K(`selector`,`[data-alloy-tabstop="true"]:not(:disabled)`),K(`firstTabstop`,0),K(`useTabstopAt`,re),za(`visibilitySelector`),e],n=(e,t)=>An(e.visibilitySelector.bind(e=>Zl(t,e)).getOr(t))>0,r=(e,t)=>{let r=de(Ap(e.element,t.selector),e=>n(t,e));return O.from(r[t.firstTabstop])},i=(e,t)=>t.focusManager.get(e).bind(e=>Zl(e,t.selector)),a=(e,t)=>n(e,t)&&e.useTabstopAt(t),o=(e,t,n)=>{r(e,t).each(n=>{t.focusManager.set(e,n)})},s=(e,t,n,r,i)=>i(t,n,e=>a(r,e)).fold(()=>r.cyclic?O.some(!0):O.none(),t=>(r.focusManager.set(e,t),O.some(!0))),c=(e,t,n,r)=>{let a=Ap(e.element,n.selector);return i(e,n).bind(t=>ge(a,w(Mt,t)).bind(t=>s(e,a,t,n,r)))},l=(e,t,n)=>c(e,t,n,n.cyclic?g_:__),u=(e,t,n)=>c(e,t,n,n.cyclic?v_:y_),d=e=>zt(e).bind(Kt).exists(t=>Mt(t,e)),f=(e,t,n)=>i(e,n).filter(e=>!n.useTabstopAt(e)).bind(r=>(d(r)?l:u)(e,t,n)),p=(e,t,n)=>n.onEnter.bind(n=>n(e,t)),m=(e,t,n)=>n.onEscape.bind(n=>n(e,t)),h=S([T_(x_([S_,b_(c_)]),l),T_(b_(c_),u),T_(x_([w_,b_(l_)]),p)]),g=S([T_(b_(u_),m),T_(b_(c_),f)]);return j_(t,Cc.init,h,g,()=>O.some(o))};var N_=M_(Da(`cyclic`,D)),P_=M_(Da(`cyclic`,re));let F_=(e,t,n)=>(ws(e,n,$o()),O.some(!0)),I_=(e,t,n)=>Tg(n)&&b_(d_)(t.event)?O.none():F_(e,t,n),L_=(e,t)=>O.some(!0),R_=[K(`execute`,I_),K(`useSpace`,!1),K(`useEnter`,!0),K(`useControlEnter`,!1),K(`useDown`,!1)],z_=(e,t,n)=>n.execute(e,t,e.element);var B_=j_(R_,Cc.init,(e,t,n,r)=>{let i=n.useSpace&&!Tg(e.element)?d_:[],a=n.useEnter?l_:[],o=n.useDown?h_:[];return[T_(b_(i.concat(a).concat(o)),z_)].concat(n.useControlEnter?[T_(x_([C_,b_(l_)]),z_)]:[])},(e,t,n,r)=>n.useSpace&&!Tg(e.element)?[T_(b_(d_),L_)]:[],()=>O.none());let V_=()=>{let e=uf();return wc({readState:()=>e.get().map(e=>({numRows:String(e.numRows),numColumns:String(e.numColumns)})).getOr({numRows:`?`,numColumns:`?`}),setGridSize:(t,n)=>{e.set({numRows:t,numColumns:n})},getNumRows:()=>e.get().map(e=>e.numRows),getNumColumns:()=>e.get().map(e=>e.numColumns)})};var H_=Object.freeze({__proto__:null,flatgrid:V_,init:e=>e.state(e)});let U_=e=>(t,n,r,i)=>q_(e(t.element),t,n,r,i),W_=(e,t)=>U_(Vf(e,t)),G_=(e,t)=>U_(Vf(t,e)),K_=e=>(t,n,r,i)=>q_(e,t,n,r,i),q_=(e,t,n,r,i)=>r.focusManager.get(t).bind(n=>e(t.element,n,r,i)).map(e=>(r.focusManager.set(t,e),!0)),J_=K_,Y_=K_,X_=K_,Z_=e=>e.offsetWidth<=0&&e.offsetHeight<=0,Q_=e=>!Z_(e.dom),$_=(e,t)=>ge(e,t).map(t=>({index:t,candidates:e})),ev=(e,t,n)=>$_(de(Ap(e,n),Q_),e=>Mt(e,t)),tv=(e,t)=>ge(e,e=>Mt(t,e)),nv=(e,t,n,r)=>r(Math.floor(t/n),t%n).bind(t=>{let r=t.row*n+t.column;return r>=0&&r<e.length?O.some(e[r]):O.none()}),rv=(e,t,n,r,i)=>nv(e,t,r,(t,a)=>{let o=Bu(a,i,0,(t===n-1?e.length-t*r:r)-1);return O.some({row:t,column:o})}),iv=(e,t,n,r,i)=>nv(e,t,r,(t,a)=>{let o=Bu(t,i,0,n-1),s=Vu(a,0,(o===n-1?e.length-o*r:r)-1);return O.some({row:o,column:s})}),av=(e,t,n,r)=>rv(e,t,n,r,1),ov=(e,t,n,r)=>rv(e,t,n,r,-1),sv=(e,t,n,r)=>iv(e,t,n,r,-1),cv=(e,t,n,r)=>iv(e,t,n,r,1),lv=[G(`selector`),K(`execute`,I_),xu(`onEscape`),K(`captureTab`,!1),Eu()],uv=(e,t,n)=>{Xl(e.element,t.selector).each(n=>{t.focusManager.set(e,n)})},dv=(e,t)=>t.focusManager.get(e).bind(e=>Zl(e,t.selector)),fv=(e,t,n,r)=>dv(e,n).bind(r=>n.execute(e,t,r)),pv=e=>(t,n,r,i)=>ev(t,n,r.selector).bind(t=>e(t.candidates,t.index,i.getNumRows().getOr(r.initSize.numRows),i.getNumColumns().getOr(r.initSize.numColumns))),mv=(e,t,n)=>n.captureTab?O.some(!0):O.none(),hv=(e,t,n)=>n.onEscape(e,t),gv=pv(ov),_v=pv(av),vv=pv(sv),yv=pv(cv);var bv=j_(lv,V_,S([T_(b_(f_),W_(gv,_v)),T_(b_(m_),G_(gv,_v)),T_(b_(p_),J_(vv)),T_(b_(h_),Y_(yv)),T_(x_([S_,b_(c_)]),mv),T_(x_([w_,b_(c_)]),mv),T_(b_(d_.concat(l_)),fv)]),S([T_(b_(u_),hv),T_(b_(d_),L_)]),()=>O.some(uv));let xv=(e,t,n,r,i)=>{let a=e=>yt(e)===`button`&&fn(e,`disabled`)===`disabled`,o=(e,t,n)=>i(e,t,r,0,n.length-1,n[t],t=>a(n[t])?o(e,t,n):O.from(n[t]));return ev(e,n,t).bind(e=>{let t=e.index,n=e.candidates;return o(t,t,n)})},Sv=(e,t,n,r)=>xv(e,t,n,r,(e,t,n,r,i,a,o)=>{let s=Vu(t+n,r,i);return s===e?O.from(a):o(s)}),Cv=(e,t,n,r)=>xv(e,t,n,r,(e,t,n,r,i,a,o)=>{let s=Bu(t,n,r,i);return s===e?O.none():o(s)}),wv=[G(`selector`),K(`getInitial`,O.none),K(`execute`,I_),xu(`onEscape`),K(`executeOnMove`,!1),K(`allowVertical`,!0),K(`allowHorizontal`,!0),K(`cycles`,!0)],Tv=(e,t)=>t.focusManager.get(e).bind(e=>Zl(e,t.selector)),Ev=(e,t,n)=>Tv(e,n).bind(r=>n.execute(e,t,r)),Dv=(e,t,n)=>{t.getInitial(e).orThunk(()=>Xl(e.element,t.selector)).each(n=>{t.focusManager.set(e,n)})},Ov=(e,t,n)=>(n.cycles?Cv:Sv)(e,n.selector,t,-1),kv=(e,t,n)=>(n.cycles?Cv:Sv)(e,n.selector,t,1),Av=e=>(t,n,r,i)=>e(t,n,r,i).bind(()=>r.executeOnMove?Ev(t,n,r):O.some(!0)),jv=(e,t,n)=>n.onEscape(e,t),Mv=(e,t,n,r)=>{let i=[...n.allowHorizontal?f_:[]].concat(n.allowVertical?p_:[]),a=[...n.allowHorizontal?m_:[]].concat(n.allowVertical?h_:[]);return[T_(b_(i),Av(W_(Ov,kv))),T_(b_(a),Av(G_(Ov,kv))),T_(b_(l_),Ev),T_(b_(d_),Ev)]},Nv=S([T_(b_(d_),L_),T_(b_(u_),jv)]);var Pv=j_(wv,Cc.init,Mv,Nv,()=>O.some(Dv));let Fv=(e,t,n)=>O.from(e[t]).bind(e=>O.from(e[n]).map(e=>({rowIndex:t,columnIndex:n,cell:e}))),Iv=(e,t,n,r)=>{let i=e[t].length;return Fv(e,t,Bu(n,r,0,i-1))},Lv=(e,t,n,r)=>{let i=Bu(n,r,0,e.length-1),a=e[i].length;return Fv(e,i,Vu(t,0,a-1))},Rv=(e,t,n,r)=>{let i=e[t].length;return Fv(e,t,Vu(n+r,0,i-1))},zv=(e,t,n,r)=>{let i=Vu(n+r,0,e.length-1),a=e[i].length;return Fv(e,i,Vu(t,0,a-1))},Bv=(e,t,n)=>Iv(e,t,n,1),Vv=(e,t,n)=>Iv(e,t,n,-1),Hv=(e,t,n)=>Lv(e,n,t,-1),Uv=(e,t,n)=>Lv(e,n,t,1),Wv=(e,t,n)=>Rv(e,t,n,-1),Gv=(e,t,n)=>Rv(e,t,n,1),Kv=(e,t,n)=>zv(e,n,t,-1),qv=(e,t,n)=>zv(e,n,t,1),Jv=[Ia(`selectors`,[G(`row`),G(`cell`)]),K(`cycles`,!0),K(`previousSelector`,O.none),K(`execute`,I_)],Yv=(e,t,n)=>{t.previousSelector(e).orThunk(()=>{let n=t.selectors;return Xl(e.element,n.cell)}).each(n=>{t.focusManager.set(e,n)})},Xv=(e,t,n)=>Pd(e.element).bind(r=>n.execute(e,t,r)),Zv=(e,t)=>N(e,e=>Ap(e,t.selectors.cell)),Qv=(e,t)=>(n,r,i)=>{let a=i.cycles?e:t;return Zl(r,i.selectors.row).bind(e=>tv(Ap(e,i.selectors.cell),r).bind(t=>{let r=Ap(n,i.selectors.row);return tv(r,e).bind(e=>a(Zv(r,i),e,t).map(e=>e.cell))}))},$v=Qv(Vv,Wv),ey=Qv(Bv,Gv),ty=Qv(Hv,Kv),ny=Qv(Uv,qv),ry=S([T_(b_(f_),W_($v,ey)),T_(b_(m_),G_($v,ey)),T_(b_(p_),J_(ty)),T_(b_(h_),Y_(ny)),T_(b_(d_.concat(l_)),Xv)]),iy=S([T_(b_(d_),L_)]);var ay=j_(Jv,Cc.init,ry,iy,()=>O.some(Yv));let oy=[G(`selector`),K(`execute`,I_),K(`moveOnTab`,!1)],sy=(e,t,n)=>n.focusManager.get(e).bind(r=>n.execute(e,t,r)),cy=(e,t,n)=>{Xl(e.element,t.selector).each(n=>{t.focusManager.set(e,n)})},ly=(e,t,n)=>Cv(e,n.selector,t,-1),uy=(e,t,n)=>Cv(e,n.selector,t,1),dy=S([T_(b_(p_),X_(ly)),T_(b_(h_),X_(uy)),T_(x_([S_,b_(c_)]),(e,t,n,r)=>n.moveOnTab?X_(ly)(e,t,n,r):O.none()),T_(x_([w_,b_(c_)]),(e,t,n,r)=>n.moveOnTab?X_(uy)(e,t,n,r):O.none()),T_(b_(l_),sy),T_(b_(d_),sy)]),fy=S([T_(b_(d_),L_)]);var py=j_(oy,Cc.init,dy,fy,()=>O.some(cy)),my=j_([xu(`onSpace`),xu(`onEnter`),xu(`onShiftEnter`),xu(`onLeft`),xu(`onRight`),xu(`onTab`),xu(`onShiftTab`),xu(`onUp`),xu(`onDown`),xu(`onEscape`),K(`stopSpaceKeyup`,!1),za(`focusIn`)],Cc.init,(e,t,n)=>[T_(b_(d_),n.onSpace),T_(x_([w_,b_(l_)]),n.onEnter),T_(x_([S_,b_(l_)]),n.onShiftEnter),T_(x_([S_,b_(c_)]),n.onShiftTab),T_(x_([w_,b_(c_)]),n.onTab),T_(b_(p_),n.onUp),T_(b_(h_),n.onDown),T_(b_(f_),n.onLeft),T_(b_(m_),n.onRight),T_(b_(d_),n.onSpace)],(e,t,n)=>[...n.stopSpaceKeyup?[T_(b_(d_),L_)]:[],T_(b_(u_),n.onEscape)],e=>e.focusIn);let hy=N_.schema(),gy=P_.schema(),_y=Pv.schema(),vy=bv.schema(),yy=ay.schema(),by=B_.schema(),xy=py.schema(),Sy=my.schema();var Cy=Object.freeze({__proto__:null,acyclic:hy,cyclic:gy,flow:_y,flatgrid:vy,matrix:yy,execution:by,menu:xy,special:Sy});let wy=e=>Ve(e,`setGridSize`),Ty=Ed({branchKey:`mode`,branches:Cy,name:`keying`,active:{events:(e,t)=>e.handler.toEvents(e,t)},apis:{focusIn:(e,t,n)=>{t.sendFocusIn(t).fold(()=>{e.getSystem().triggerFocus(e.element,e.element)},r=>{r(e,t,n)})},setGridSize:(e,t,n,r,i)=>{wy(n)?n.setGridSize(r,i):console.error(`Layout does not support setGridSize`)}},state:H_}),Ey=(e,t)=>{Fd(()=>{xm(e,t,()=>N(t,e.getSystem().build))},e.element)},Dy=(e,t)=>{Fd(()=>{Sm(e,t,()=>yl(e.element,t,e.getSystem().buildOrPatch))},e.element)},Oy=(e,t,n,r)=>{vm(t),_m(e,vl(e.element,n,r,e.getSystem().buildOrPatch)),e.syncComponents()},ky=(e,t,n)=>{wm(e,e.getSystem().build(n),t)},Ay=(e,t,n,r)=>{Em(t),ky(e,(e,t)=>zr(e,t,n),r)},jy=(e,t,n,r)=>(t.reuseDom?Dy:Ey)(e,r),My=(e,t,n,r)=>{ky(e,Rr,r)},Ny=(e,t,n,r)=>{ky(e,Lr,r)},Py=(e,t,n,r)=>{he(Fy(e),e=>Mt(r.element,e.element)).each(Em)},Fy=(e,t)=>e.components(),Iy=(e,t,n,r,i)=>{let a=Fy(e);return O.from(a[r]).map(n=>(i.fold(()=>Em(n),i=>{(t.reuseDom?Oy:Ay)(e,n,r,i)}),n))};var Ly=Object.freeze({__proto__:null,append:My,prepend:Ny,remove:Py,replaceAt:Iy,replaceBy:(e,t,n,r,i)=>ge(Fy(e),r).bind(r=>Iy(e,t,n,r,i)),set:jy,contents:Fy});let Ry=wd({fields:[Qa(`reuseDom`,!0)],name:`replacing`,apis:Ly}),zy=(e,t)=>{let n=Os(t);return wd({fields:[G(`enabled`)],name:e,active:{events:S(n)}})},By=(e,t)=>({key:e,value:{config:{},me:zy(e,t),configAsRaw:S({}),initialConfig:{},state:Cc}}),Vy=(e,t)=>{t.ignore||(Ad(e.element),t.onFocus(e))};var Hy=Object.freeze({__proto__:null,focus:Vy,blur:(e,t)=>{t.ignore||jd(e.element)},isFocused:e=>Md(e.element)}),Uy=Object.freeze({__proto__:null,exhibit:(e,t)=>kc(t.ignore?{}:{attributes:{tabindex:`-1`}}),events:e=>Os([q(Yo(),(t,n)=>{Vy(t,e),n.stop()})].concat(e.stopMousedown?[q(jo(),(e,t)=>{t.event.prevent()})]:[]))});let Wy=wd({fields:[bu(`onFocus`),K(`stopMousedown`,!1),K(`ignore`,!1)],name:`focusing`,active:Uy,apis:Hy}),Gy=e=>({init:()=>{let t=ro(e);return{get:()=>t.get(),set:e=>t.set(e),clear:()=>t.set(e),readState:()=>t.get()}}}),Ky=(e,t,n)=>{let r=t.aria;r.update(e,r,n.get())},qy=(e,t,n)=>{t.toggleClass.each(t=>{n.get()?il(e.element,t):ol(e.element,t)})},Jy=(e,t,n,r)=>{let i=n.get();n.set(r),qy(e,t,n),Ky(e,t,n),i!==r&&t.onToggled(e,r)},Yy=(e,t,n)=>{Jy(e,t,n,!n.get())},Xy=(e,t,n)=>{Jy(e,t,n,!0)},Zy=(e,t,n)=>{Jy(e,t,n,!1)},Qy=(e,t,n)=>n.get(),$y=(e,t,n)=>{Jy(e,t,n,t.selected)};var eb=Object.freeze({__proto__:null,onLoad:$y,toggle:Yy,isOn:Qy,on:Xy,off:Zy,set:Jy}),tb=Object.freeze({__proto__:null,exhibit:()=>kc({}),events:(e,t)=>{let n=gd(e,t,Yy),r=_d(e,t,$y);return Os(F([e.toggleOnExecute?[n]:[],[r]]))}});let nb=(e,t,n)=>{un(e.element,`aria-pressed`,n),t.syncWithExpanded&&ab(e,t,n)},rb=(e,t,n)=>{un(e.element,`aria-selected`,n)},ib=(e,t,n)=>{un(e.element,`aria-checked`,n)},ab=(e,t,n)=>{un(e.element,`aria-expanded`,n)},ob=wd({fields:[K(`selected`,!1),za(`toggleClass`),K(`toggleOnExecute`,!0),bu(`onToggled`),Ja(`aria`,{mode:`none`},wa(`mode`,{pressed:[K(`syncWithExpanded`,!1),wu(`update`,nb)],checked:[wu(`update`,ib)],expanded:[wu(`update`,ab)],selected:[wu(`update`,rb)],none:[wu(`update`,y)]}))],name:`toggling`,active:tb,apis:eb,state:Gy(!1)}),sb=()=>{let e=(e,t)=>{t.stop(),Cs(e)};return[q(Ho(),e),q(ts(),e),Rs(Do()),Rs(jo())]},cb=e=>Os(F([e.map(e=>Ws((t,n)=>{e(t),n.stop()})).toArray(),sb()])),lb=`alloy.item-hover`,ub=`alloy.item-focus`,db=`alloy.item-toggled`,fb=e=>{(Pd(e.element).isNone()||Wy.isFocused(e))&&(Wy.isFocused(e)||Wy.focus(e),Ss(e,lb,{item:e}))},pb=e=>{Ss(e,ub,{item:e})},mb=(e,t)=>{Ss(e,db,{item:e,state:t})},hb=S(lb),gb=S(ub),_b=S(db),vb=e=>e.toggling.map(e=>e.exclusive?`menuitemradio`:`menuitemcheckbox`).getOr(`menuitem`),yb=e=>({aria:{mode:`checked`},...Ie(e,(e,t)=>t!==`exclusive`),onToggled:(t,n)=>{g(e.onToggled)&&e.onToggled(t,n),mb(t,n)}}),bb=[G(`data`),G(`components`),G(`dom`),K(`hasSubmenu`,!1),za(`toggling`),hh.field(`itemBehaviours`,[ob,Wy,Ty,Q]),K(`ignoreFocus`,!1),K(`domModification`,{}),wu(`builder`,e=>({dom:e.dom,domModification:{...e.domModification,attributes:{role:vb(e),...e.domModification.attributes,"aria-haspopup":e.hasSubmenu,...e.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:hh.augment(e.itemBehaviours,[e.toggling.fold(ob.revoke,e=>ob.config(yb(e))),Wy.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:e=>{pb(e)}}),Ty.config({mode:`execution`}),Q.config({store:{mode:`memory`,initialValue:e.data}}),By(`item-type-events`,[...sb(),q(Fo(),fb),q(es(),Wy.focus)])]),components:e.components,eventOrder:e.eventOrder})),K(`eventOrder`,{})],xb=[G(`dom`),G(`components`),wu(`builder`,e=>({dom:e.dom,components:e.components,events:Os([zs(es())])}))],Sb=S(`item-widget`),Cb=S([Wh({name:`widget`,overrides:e=>({behaviours:Z([Q.config({store:{mode:`manual`,getValue:t=>e.data,setValue:y}})])})})]),wb=wa(`type`,{widget:[G(`uid`),G(`data`),G(`components`),G(`dom`),K(`autofocus`,!1),K(`ignoreFocus`,!1),hh.field(`widgetBehaviours`,[Q,Wy,Ty]),K(`domModification`,{}),fg(Cb()),wu(`builder`,e=>{let t=rg(Sb(),e,Cb()),n=ig(Sb(),e,t.internals()),r=t=>ag(t,e,`widget`).map(e=>(Ty.focusIn(e),e)),i=(t,n)=>(Tg(n.event.target)||e.autofocus&&n.setSource(t.element),O.none());return{dom:e.dom,components:n,domModification:e.domModification,events:Os([Ws((e,t)=>{r(e).each(e=>{t.stop()})}),q(Fo(),fb),q(es(),(t,n)=>{e.autofocus?r(t):Wy.focus(t)})]),behaviours:hh.augment(e.widgetBehaviours,[Q.config({store:{mode:`memory`,initialValue:e.data}}),Wy.config({ignore:e.ignoreFocus,onFocus:e=>{pb(e)}}),Ty.config({mode:`special`,focusIn:e.autofocus?e=>{r(e)}:Dd(),onLeft:i,onRight:i,onEscape:(t,n)=>!Wy.isFocused(t)&&!e.autofocus?(Wy.focus(t),O.some(!0)):(e.autofocus&&n.setSource(t.element),O.none())})])}})],item:bb,separator:xb}),Tb=(e,t)=>({mode:`flatgrid`,selector:`.`+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}),Eb=(e,t)=>({mode:`matrix`,selectors:{row:t.rowSelector,cell:`.`+e.markers.item},previousSelector:t.previousSelector,focusManager:e.focusManager}),Db=(e,t)=>({mode:`menu`,selector:`.`+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}),Ob=S([qh({factory:{sketch:e=>{let t=Sa(`menu.spec item`,wb,e);return t.builder(t)}},name:`items`,unit:`item`,defaults:(e,t)=>Be(t,`uid`)?t:{...t,uid:uc(`item`)},overrides:(e,t)=>({type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),kb=S([G(`value`),G(`items`),G(`dom`),G(`components`),K(`eventOrder`,{}),fh(`menuBehaviours`,[s_,Q,Dg,Ty]),Ja(`movement`,{mode:`menu`,moveOnTab:!0},wa(`mode`,{grid:[Eu(),wu(`config`,Tb)],matrix:[wu(`config`,Eb),G(`rowSelector`),K(`previousSelector`,O.none)],menu:[K(`moveOnTab`,!0),wu(`config`,Db)]})),gu(),K(`fakeFocus`,!1),K(`focusManager`,O_()),bu(`onHighlight`),bu(`onDehighlight`)]),Ab=S(`alloy.menu-focus`),jb=(e,t)=>{P(Ap(e.element,`[role="menuitemradio"][aria-checked="true"]`),n=>{Mt(n,t.element)||e.getSystem().getByDom(n).each(e=>{ob.off(e)})})},Mb=wg({name:`Menu`,configFields:kb(),partFields:Ob(),factory:(e,t,n,r)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:mh(e.menuBehaviours,[s_.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight,onDehighlight:e.onDehighlight}),Q.config({store:{mode:`memory`,initialValue:e.value}}),Dg.config({find:O.some}),Ty.config(e.movement.config(e,e.movement))]),events:Os([q(gb(),(e,t)=>{let n=t.event;e.getSystem().getByDom(n.target).each(n=>{s_.highlight(e,n),t.stop(),Ss(e,Ab(),{menu:e,item:n})})}),q(hb(),(e,t)=>{let n=t.event.item;s_.highlight(e,n)}),q(_b(),(e,t)=>{let{item:n,state:r}=t.event;r&&fn(n.element,`role`)===`menuitemradio`&&jb(e,n)})]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:`menu`}}})}),Nb=e=>Me(e,(e,t)=>({k:e,v:t})),Pb=(e,t,n,r)=>L(n,r).bind(r=>L(e,r).bind(r=>{let i=Pb(e,t,n,r);return O.some([r].concat(i))})).getOr([]),Fb=(e,t)=>{let n={};Ae(e,(e,t)=>{P(e,e=>{n[e]=t})});let r=t,i=Nb(t),a=je(i,(e,t)=>[t].concat(Pb(n,r,i,t)));return je(n,e=>L(a,e).getOr([e]))},Ib=()=>{let e=ro({}),t=ro({}),n=ro({}),r=uf(),i=ro({}),a=()=>{e.set({}),t.set({}),n.set({}),r.clear()},o=()=>r.get().isNone(),s=(e,n)=>{t.set({...t.get(),[e]:{type:`prepared`,menu:n}})},c=(a,o,s,c)=>{r.set(a),e.set(s),t.set(o),i.set(c);let l=Fb(c,s);n.set(l)},l=t=>Re(e.get(),(e,n)=>e===t),u=(e,t,n)=>h(e).bind(r=>l(e).bind(e=>t(e).map(e=>({triggeredMenu:r,triggeringItem:e,triggeringPath:n})))),d=(e,t)=>{let i=de(_(e).toArray(),e=>h(e).isSome());return L(n.get(),e).bind(e=>{let n=I(i.concat(e));return Ge(_e(n,(e,i)=>u(e,t,n.slice(0,i+1)).fold(()=>He(r.get(),e)?[]:[O.none()],e=>[O.some(e)])))})},f=t=>L(e.get(),t).map(e=>{let r=L(n.get(),t).getOr([]);return[e].concat(r)}),p=e=>L(n.get(),e).bind(e=>e.length>1?O.some(e.slice(1)):O.none()),m=e=>L(n.get(),e),h=e=>g(e).bind(Lb),g=e=>L(t.get(),e),_=t=>L(e.get(),t);return{setMenuBuilt:s,setContents:c,expand:f,refresh:m,collapse:p,lookupMenu:g,lookupItem:_,otherMenus:e=>ye(Oe(i.get()),e),getPrimary:()=>r.get().bind(h),getMenus:()=>t.get(),clear:a,isClear:o,getTriggeringPath:d}},Lb=e=>e.type===`prepared`?O.some(e.menu):O.none(),Rb={init:Ib,extractPreparedMenu:Lb},zb=J(`tiered-menu-item-highlight`),Bb=J(`tiered-menu-item-dehighlight`);var Vb;(function(e){e[e.HighlightMenuAndItem=0]=`HighlightMenuAndItem`,e[e.HighlightJustMenu=1]=`HighlightJustMenu`,e[e.HighlightNone=2]=`HighlightNone`})(Vb||={});let Hb=(e,t)=>{let n=uf(),r=(t,n,r)=>je(r,(r,i)=>{let a=()=>Mb.sketch({...r,value:i,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:(e,t)=>{Ss(e,zb,{menuComp:e,itemComp:t})},onDehighlight:(e,t)=>{Ss(e,Bb,{menuComp:e,itemComp:t})},focusManager:e.fakeFocus?k_():O_()});return i===n?{type:`prepared`,menu:t.getSystem().build(a())}:{type:`notbuilt`,nbMenu:a}}),i=Rb.init(),a=t=>{let n=r(t,e.data.primary,e.data.menus),a=c();return i.setContents(e.data.primary,n,e.data.expansions,a),i.getPrimary()},o=e=>Q.getValue(e).value,s=(e,t,n)=>De(t,e=>e.getSystem().isConnected()?he(s_.getCandidates(e),e=>o(e)===n):O.none()),c=t=>je(e.data.menus,(e,t)=>_e(e.items,e=>e.type===`separator`?[]:[e.data.value])),l=s_.highlight,u=(t,n)=>{l(t,n),s_.getHighlighted(n).orThunk(()=>s_.getFirst(n)).each(r=>{e.fakeFocus?s_.highlight(n,r):ws(t,r.element,es())})},d=(e,t)=>We(N(t,t=>e.lookupMenu(t).bind(e=>e.type===`prepared`?O.some(e.menu):O.none()))),f=(t,n,r)=>{P(d(n,n.otherMenus(r)),n=>{ll(n.element,[e.markers.backgroundMenu]),e.stayInDom||Ry.remove(t,n)})},p=t=>n.get().getOrThunk(()=>{let r={};return P(de(Ap(t.element,`.${e.markers.item}`),e=>fn(e,`aria-haspopup`)===`true`),e=>{t.getSystem().getByDom(e).each(e=>{let t=o(e);r[t]=e})}),n.set(r),r}),m=(e,t)=>{Ae(p(e),(e,n)=>{let r=oe(t,n);un(e.element,`aria-expanded`,r)})},h=(t,n,r)=>O.from(r[0]).bind(i=>n.lookupMenu(i).bind(i=>{if(i.type===`notbuilt`)return O.none();{let a=i.menu;return P(d(n,r.slice(1)),t=>{il(t.element,e.markers.backgroundMenu)}),on(a.element)||Ry.append(t,Vl(a)),ll(a.element,[e.markers.backgroundMenu]),u(t,a),f(t,n,r),O.some(a)}})),g;(function(e){e[e.HighlightSubmenu=0]=`HighlightSubmenu`,e[e.HighlightParent=1]=`HighlightParent`})(g||={});let _=(e,t,n)=>{if(n.type===`notbuilt`){let r=e.getSystem().build(n.nbMenu());return i.setMenuBuilt(t,r),r}else return n.menu},v=(t,n,r=g.HighlightSubmenu)=>{if(n.hasConfigured(Hg)&&Hg.isDisabled(n))return O.some(n);{let a=o(n);return i.expand(a).bind(a=>(m(t,a),O.from(a[0]).bind(o=>i.lookupMenu(o).bind(s=>{let c=_(t,o,s);return on(c.element)||Ry.append(t,Vl(c)),e.onOpenSubmenu(t,n,c,I(a)),r===g.HighlightSubmenu?(s_.highlightFirst(c),h(t,i,a)):(s_.dehighlightAll(c),O.some(n))}))))}},b=(t,n)=>{let r=o(n);return i.collapse(r).bind(r=>(m(t,r),h(t,i,r).map(r=>(e.onCollapseMenu(t,n,r),r))))},x=(e,t)=>{let n=o(t);return i.refresh(n).bind(t=>(m(e,t),h(e,i,t)))},ee=(e,t)=>Tg(t.element)?O.none():v(e,t,g.HighlightSubmenu),S=(e,t)=>Tg(t.element)?O.none():b(e,t),C=(t,n)=>b(t,n).orThunk(()=>e.onEscape(t,n).map(()=>t)),te=t=>(n,r)=>Zl(r.getSource(),`.${e.markers.item}`).bind(e=>n.getSystem().getByDom(e).toOptional().bind(e=>t(n,e).map(re))),w=Os([q(Ab(),(e,t)=>{let n=t.event.item;i.lookupItem(o(n)).each(()=>{let n=t.event.menu;s_.highlight(e,n);let r=o(t.event.item);i.refresh(r).each(t=>f(e,i,t))})}),Ws((t,n)=>{let r=n.event.target;t.getSystem().getByDom(r).each(n=>{o(n).indexOf(`collapse-item`)===0&&b(t,n),v(t,n,g.HighlightSubmenu).fold(()=>{e.onExecute(t,n)},y)})}),Vs((t,n)=>{a(t).each(n=>{Ry.append(t,Vl(n)),e.onOpenMenu(t,n),e.highlightOnOpen===Vb.HighlightMenuAndItem?u(t,n):e.highlightOnOpen===Vb.HighlightJustMenu&&l(t,n)})}),q(zb,(t,n)=>{e.onHighlightItem(t,n.event.menuComp,n.event.itemComp)}),q(Bb,(t,n)=>{e.onDehighlightItem(t,n.event.menuComp,n.event.itemComp)}),...e.navigateOnHover?[q(hb(),(t,n)=>{let r=n.event.item;x(t,r),v(t,r,g.HighlightParent),e.onHover(t,r)})]:[]]),T=e=>s_.getHighlighted(e).bind(s_.getHighlighted),E=e=>{T(e).each(t=>{b(e,t)})},ne=e=>{i.getPrimary().each(t=>{u(e,t)})},D=e=>O.from(e.components()[0]).filter(e=>fn(e.element,`role`)===`menu`),k={collapseMenu:E,highlightPrimary:ne,repositionMenus:t=>{i.getPrimary().bind(e=>T(t).bind(e=>{let n=o(e),r=We(N(ze(i.getMenus()),Rb.extractPreparedMenu));return i.getTriggeringPath(n,e=>s(t,r,e))}).map(t=>({primary:e,triggeringPath:t}))).fold(()=>{D(t).each(n=>{e.onRepositionMenu(t,n,[])})},({primary:n,triggeringPath:r})=>{e.onRepositionMenu(t,n,r)})}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:mh(e.tmenuBehaviours,[Ty.config({mode:`special`,onRight:te(ee),onLeft:te(S),onEscape:te(C),focusIn:(e,t)=>{i.getPrimary().each(t=>{ws(e,t.element,es())})}}),s_.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),Dg.config({find:e=>s_.getHighlighted(e)}),Ry.config({})]),eventOrder:e.eventOrder,apis:k,events:w}},Ub=S(`collapse-item`),Wb=Cg({name:`TieredMenu`,configFields:[Cu(`onExecute`),Cu(`onEscape`),Su(`onOpenMenu`),Su(`onOpenSubmenu`),bu(`onRepositionMenu`),bu(`onCollapseMenu`),K(`highlightOnOpen`,Vb.HighlightMenuAndItem),Ia(`data`,[G(`primary`),G(`menus`),G(`expansions`)]),K(`fakeFocus`,!1),bu(`onHighlightItem`),bu(`onDehighlightItem`),bu(`onHover`),_u(),G(`dom`),K(`navigateOnHover`,!0),K(`stayInDom`,!1),fh(`tmenuBehaviours`,[Ty,s_,Dg,Ry]),K(`eventOrder`,{})],apis:{collapseMenu:(e,t)=>{e.collapseMenu(t)},highlightPrimary:(e,t)=>{e.highlightPrimary(t)},repositionMenus:(e,t)=>{e.repositionMenus(t)}},factory:Hb,extraApis:{tieredData:(e,t,n)=>({primary:e,menus:t,expansions:n}),singleData:(e,t)=>({primary:e,menus:uo(e,t),expansions:{}}),collapseItem:e=>({value:J(Ub()),meta:{text:e}})}}),Gb=(e,t,n,r,i)=>{let a=()=>e.lazySink(t),o=r.type===`horizontal`?{layouts:{onLtr:()=>X(),onRtl:()=>fd()}}:{},s=e=>e.length===2,c=e=>s(e)?o:{};return Wb.sketch({dom:{tag:`div`},data:r.data,markers:r.menu.markers,highlightOnOpen:r.menu.highlightOnOpen,fakeFocus:r.menu.fakeFocus,onEscape:()=>(qm.close(t),e.onEscape.map(e=>e(t)),O.some(!0)),onExecute:()=>O.some(!0),onOpenMenu:(e,t)=>{pm.positionWithinBounds(a().getOrDie(),t,n,i())},onOpenSubmenu:(e,t,n,r)=>{let i=a().getOrDie();pm.position(i,n,{anchor:{type:`submenu`,item:t,...c(r)}})},onRepositionMenu:(e,t,r)=>{let o=a().getOrDie();pm.positionWithinBounds(o,t,n,i()),P(r,e=>{let t=c(e.triggeringPath);pm.position(o,e.triggeredMenu,{anchor:{type:`submenu`,item:e.triggeringItem,...t}})})}})},Kb=Cg({name:`InlineView`,configFields:[G(`lazySink`),bu(`onShow`),bu(`onHide`),Wa(`onEscape`),fh(`inlineBehaviours`,[qm,Q,Od]),Ka(`fireDismissalEventInstead`,[K(`event`,fs())]),Ka(`fireRepositionEventInstead`,[K(`event`,ps())]),K(`getRelated`,O.none),K(`isExtraPart`,D),K(`eventOrder`,O.none)],factory:(e,t)=>{let n=(t,n)=>e.getRelated(t).exists(e=>nu(e,n)),r=(e,t)=>{qm.setContent(e,t)},i=(e,t,n)=>{let r=O.none;a(e,t,n,r)},a=(t,n,r,i)=>{let a=e.lazySink(t).getOrDie();qm.openWhileCloaked(t,n,()=>pm.positionWithinBounds(a,t,r,i())),Q.setValue(t,O.some({mode:`position`,config:r,getBounds:i}))},o=(e,t,n)=>{s(e,t,n,O.none)},s=(t,n,r,i)=>{let a=Gb(e,t,n,r,i);qm.open(t,a),Q.setValue(t,O.some({mode:`menu`,menu:a}))},c=e=>{qm.isOpen(e)&&(Q.setValue(e,O.none()),qm.close(e))},l=e=>qm.getState(e),u=t=>{qm.isOpen(t)&&Q.getValue(t).each(n=>{switch(n.mode){case`menu`:qm.getState(t).each(Wb.repositionMenus);break;case`position`:let r=e.lazySink(t).getOrDie();pm.positionWithinBounds(r,t,n.config,n.getBounds());break}})},d={setContent:r,showAt:i,showWithinBounds:a,showMenuAt:o,showMenuWithinBounds:s,hide:c,getContent:l,reposition:u,isOpen:qm.isOpen};return{uid:e.uid,dom:e.dom,behaviours:mh(e.inlineBehaviours,[qm.config({isPartOf:(e,t,r)=>nu(t,r)||n(e,r),getAttachPoint:t=>e.lazySink(t).getOrDie(),onOpen:t=>{e.onShow(t)},onClose:t=>{e.onHide(t)}}),Q.config({store:{mode:`memory`,initialValue:O.none()}}),Od.config({channels:{...Qm({isExtraPart:t.isExtraPart,...e.fireDismissalEventInstead.map(e=>({fireEventInstead:{event:e.event}})).getOr({})}),...eh({...e.fireRepositionEventInstead.map(e=>({fireEventInstead:{event:e.event}})).getOr({}),doReposition:u})}})]),eventOrder:e.eventOrder,apis:d}},apis:{showAt:(e,t,n,r)=>{e.showAt(t,n,r)},showWithinBounds:(e,t,n,r,i)=>{e.showWithinBounds(t,n,r,i)},showMenuAt:(e,t,n,r)=>{e.showMenuAt(t,n,r)},showMenuWithinBounds:(e,t,n,r,i)=>{e.showMenuWithinBounds(t,n,r,i)},hide:(e,t)=>{e.hide(t)},isOpen:(e,t)=>e.isOpen(t),getContent:(e,t)=>e.getContent(t),setContent:(e,t,n)=>{e.setContent(t,n)},reposition:(e,t)=>{e.reposition(t)}}});var qb=tinymce.util.Tools.resolve(`tinymce.util.Delay`);let Jb=Cg({name:`Button`,factory:e=>{let t=cb(e.action),n=e.dom.tag,r=t=>L(e.dom,`attributes`).bind(e=>L(e,t));return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:hh.augment(e.buttonBehaviours,[Wy.config({}),Ty.config({mode:`execution`,useSpace:!0,useEnter:!0})]),domModification:{attributes:n===`button`?{type:r(`type`).getOr(`button`),...r(`role`).map(e=>({role:e})).getOr({})}:{role:e.role.getOr(r(`role`).getOr(`button`))}},eventOrder:e.eventOrder}},configFields:[K(`uid`,void 0),G(`dom`),K(`components`,[]),hh.field(`buttonBehaviours`,[Wy,Ty]),za(`action`),za(`role`),K(`eventOrder`,{})]}),Yb=e=>{let t=bg(e)&&Ve(e,`uid`)?e.uid:uc(`memento`);return{get:e=>e.getSystem().getByUid(t).getOrDie(),getOpt:e=>e.getSystem().getByUid(t).toOptional(),asSpec:()=>({...e,uid:t})}};var Xb=tinymce.util.Tools.resolve(`tinymce.util.I18n`);let Zb={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},Qb=`temporary-placeholder`,$b=e=>()=>L(e,Qb).getOr(`!not found!`),ex=(e,t)=>{let n=e.toLowerCase();if(Xb.isRtl()){let e=et(n,`-rtl`);return Be(t,e)?e:n}else return n},tx=(e,t)=>L(t,ex(e,t)),nx=(e,t)=>{let n=t();return tx(e,n).getOrThunk($b(n))},rx=(e,t,n)=>{let r=t();return tx(e,r).or(n).getOrThunk($b(r))},ix=e=>Xb.isRtl()?Be(Zb,e):!1,ax=()=>By(`add-focusable`,[Vs(e=>{Yl(e.element,`svg`).each(e=>un(e,`focusable`,`false`))})]),ox=(e,t,n,r)=>{let i=ix(t)?[`tox-icon--flip`]:[],a=L(n,ex(t,n)).or(r).getOrThunk($b(n));return{dom:{tag:e.tag,attributes:e.attributes??{},classes:e.classes.concat(i),innerHtml:a},behaviours:Z([...e.behaviours??[],ax()])}},sx=(e,t,n,r=O.none())=>ox(t,e,n(),r),cx=(e,t,n)=>{let r=n();return ox(t,he(e,e=>Be(r,ex(e,r))).getOr(Qb),r,O.none())},lx={success:`checkmark`,error:`warning`,err:`error`,warning:`warning`,warn:`warning`,info:`info`},ux=Cg({name:`Notification`,factory:e=>{let t=Yb({dom:{tag:`p`,innerHtml:e.translationProvider(e.text)},behaviours:Z([Ry.config({})])}),n=e=>({dom:{tag:`div`,classes:[`tox-bar`],styles:{width:`${e}%`}}}),r=e=>({dom:{tag:`div`,classes:[`tox-text`],innerHtml:`${e}%`}}),i=Yb({dom:{tag:`div`,classes:e.progress?[`tox-progress-bar`,`tox-progress-indicator`]:[`tox-progress-bar`]},components:[{dom:{tag:`div`,classes:[`tox-bar-container`]},components:[n(0)]},r(0)],behaviours:Z([Ry.config({})])}),a={updateProgress:(e,t)=>{e.getSystem().isConnected()&&i.getOpt(e).each(e=>{Ry.set(e,[{dom:{tag:`div`,classes:[`tox-bar-container`]},components:[n(t)]},r(t)])})},updateText:(e,n)=>{if(e.getSystem().isConnected()){let r=t.get(e);Ry.set(r,[Fl(n)])}}},o=F([e.icon.toArray(),e.level.toArray(),e.level.bind(e=>O.from(lx[e])).toArray()]),s=Yb(Jb.sketch({dom:{tag:`button`,classes:[`tox-notification__dismiss`,`tox-button`,`tox-button--naked`,`tox-button--icon`]},components:[sx(`close`,{tag:`span`,classes:[`tox-icon`],attributes:{"aria-label":e.translationProvider(`Close`)}},e.iconProvider)],action:t=>{e.onAction(t)}})),c=[cx(o,{tag:`div`,classes:[`tox-notification__icon`]},e.iconProvider),{dom:{tag:`div`,classes:[`tox-notification__body`]},components:[t.asSpec()],behaviours:Z([Ry.config({})])}];return{uid:e.uid,dom:{tag:`div`,attributes:{role:`alert`},classes:e.level.map(e=>[`tox-notification`,`tox-notification--in`,`tox-notification--${e}`]).getOr([`tox-notification`,`tox-notification--in`])},behaviours:Z([Wy.config({}),By(`notification-events`,[q(Io(),e=>{s.getOpt(e).each(Wy.focus)})])]),components:c.concat(e.progress?[i.asSpec()]:[]).concat(e.closeButton?[s.asSpec()]:[]),apis:a}},configFields:[za(`level`),G(`progress`),za(`icon`),G(`onAction`),G(`text`),G(`iconProvider`),G(`translationProvider`),Qa(`closeButton`,!0)],apis:{updateProgress:(e,t,n)=>{e.updateProgress(t,n)},updateText:(e,t,n)=>{e.updateText(t,n)}}});var dx=(e,t,n)=>{let r=t.backstage.shared,i=()=>{let t=ni(z.fromDom(e.getContentAreaContainer())),n=oi(),r=Vu(n.x,t.x,t.right),i=Vu(n.y,t.y,t.bottom),a=Math.max(t.right,n.right),o=Math.max(t.bottom,n.bottom);return O.some(ti(r,i,a-r,o-i))};return{open:(t,a)=>{let o=()=>{a(),Kb.hide(c)},s=Bl(ux.sketch({text:t.text,level:oe([`success`,`error`,`warning`,`warn`,`info`],t.type)?t.type:void 0,progress:t.progressBar===!0,icon:t.icon,closeButton:t.closeButton,onAction:o,iconProvider:r.providers.icons,translationProvider:r.providers.translate})),c=Bl(Kb.sketch({dom:{tag:`div`,classes:[`tox-notifications-container`]},lazySink:r.getSink,fireDismissalEventInstead:{},...r.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));n.add(c),_(t.timeout)&&t.timeout>0&&qb.setEditorTimeout(e,()=>{o()},t.timeout);let l={close:o,reposition:()=>{let t=Vl(s),n={maxHeightFunction:Nf()},a=e.notificationManager.getNotifications();if(a[0]===l){let e={...r.anchors.banner(),overrides:n};Kb.showWithinBounds(c,t,{anchor:e},i)}else j(a,l).each(e=>{let r=a[e-1].getEl(),o={type:`node`,root:sn(),node:O.some(z.fromDom(r)),overrides:n,layouts:{onRtl:()=>[ad],onLtr:()=>[ad]}};Kb.showWithinBounds(c,t,{anchor:o},i)})},text:e=>{ux.updateText(s,e)},settings:t,getEl:()=>s.element.dom,progressBar:{value:e=>{ux.updateProgress(s,e)}}};return l},close:e=>{e.close()},getArgs:e=>e.settings}},fx=tinymce.util.Tools.resolve(`tinymce.dom.DOMUtils`),px=tinymce.util.Tools.resolve(`tinymce.EditorManager`),mx=tinymce.util.Tools.resolve(`tinymce.Env`),hx;(function(e){e.default=`wrap`,e.floating=`floating`,e.sliding=`sliding`,e.scrolling=`scrolling`})(hx||={});var gx;(function(e){e.auto=`auto`,e.top=`top`,e.bottom=`bottom`})(gx||={});let _x=e=>t=>t.options.get(e),vx=e=>t=>O.from(e(t)),yx=e=>{let t=mx.deviceType.isPhone(),n=mx.deviceType.isTablet()||t,r=e.options.register,i=e=>s(e)||e===!1,a=e=>s(e)||_(e);r(`skin`,{processor:e=>s(e)||e===!1,default:`oxide`}),r(`skin_url`,{processor:`string`}),r(`height`,{processor:a,default:Math.max(e.getElement().offsetHeight,400)}),r(`width`,{processor:a,default:fx.DOM.getStyle(e.getElement(),`width`)}),r(`min_height`,{processor:`number`,default:100}),r(`min_width`,{processor:`number`}),r(`max_height`,{processor:`number`}),r(`max_width`,{processor:`number`}),r(`style_formats`,{processor:`object[]`}),r(`style_formats_merge`,{processor:`boolean`,default:!1}),r(`style_formats_autohide`,{processor:`boolean`,default:!1}),r(`line_height_formats`,{processor:`string`,default:`1 1.1 1.2 1.3 1.4 1.5 2`}),r(`font_family_formats`,{processor:`string`,default:`Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats`}),r(`font_size_formats`,{processor:`string`,default:`8pt 10pt 12pt 14pt 18pt 24pt 36pt`}),r(`font_size_input_default_unit`,{processor:`string`,default:`pt`}),r(`block_formats`,{processor:`string`,default:`Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre`}),r(`content_langs`,{processor:`object[]`}),r(`removed_menuitems`,{processor:`string`,default:``}),r(`menubar`,{processor:e=>s(e)||f(e),default:!t}),r(`menu`,{processor:`object`,default:{}}),r(`toolbar`,{processor:e=>f(e)||s(e)||u(e)?{value:e,valid:!0}:{valid:!1,message:`Must be a boolean, string or array.`},default:!0}),ce(9,e=>{r(`toolbar`+(e+1),{processor:`string`})}),r(`toolbar_mode`,{processor:`string`,default:n?`scrolling`:`floating`}),r(`toolbar_groups`,{processor:`object`,default:{}}),r(`toolbar_location`,{processor:`string`,default:gx.auto}),r(`toolbar_persist`,{processor:`boolean`,default:!1}),r(`toolbar_sticky`,{processor:`boolean`,default:e.inline}),r(`toolbar_sticky_offset`,{processor:`number`,default:0}),r(`fixed_toolbar_container`,{processor:`string`,default:``}),r(`fixed_toolbar_container_target`,{processor:`object`}),r(`ui_mode`,{processor:`string`,default:`combined`}),r(`file_picker_callback`,{processor:`function`}),r(`file_picker_validator_handler`,{processor:`function`}),r(`file_picker_types`,{processor:`string`}),r(`typeahead_urls`,{processor:`boolean`,default:!0}),r(`anchor_top`,{processor:i,default:`#top`}),r(`anchor_bottom`,{processor:i,default:`#bottom`}),r(`draggable_modal`,{processor:`boolean`,default:!1}),r(`statusbar`,{processor:`boolean`,default:!0}),r(`elementpath`,{processor:`boolean`,default:!0}),r(`branding`,{processor:`boolean`,default:!0}),r(`promotion`,{processor:`boolean`,default:!0}),r(`resize`,{processor:e=>e===`both`||f(e),default:!mx.deviceType.isTouch()}),r(`sidebar_show`,{processor:`string`}),r(`help_accessibility`,{processor:`boolean`,default:e.hasPlugin(`help`)})},bx=_x(`readonly`),xx=_x(`height`),Sx=_x(`width`),Cx=vx(_x(`min_width`)),wx=vx(_x(`min_height`)),Tx=vx(_x(`max_width`)),Ex=vx(_x(`max_height`)),Dx=vx(_x(`style_formats`)),Ox=_x(`style_formats_merge`),kx=_x(`style_formats_autohide`),Ax=_x(`content_langs`),jx=_x(`removed_menuitems`),Mx=_x(`toolbar_mode`),Nx=_x(`toolbar_groups`),Px=_x(`toolbar_location`),Fx=_x(`fixed_toolbar_container`),Ix=_x(`fixed_toolbar_container_target`),Lx=_x(`toolbar_persist`),Rx=_x(`toolbar_sticky_offset`),zx=_x(`menubar`),Bx=_x(`toolbar`),Vx=_x(`file_picker_callback`),Hx=_x(`file_picker_validator_handler`),Ux=_x(`font_size_input_default_unit`),Wx=_x(`file_picker_types`),Gx=_x(`typeahead_urls`),Kx=_x(`anchor_top`),qx=_x(`anchor_bottom`),Jx=_x(`draggable_modal`),Yx=_x(`statusbar`),Xx=_x(`elementpath`),Zx=_x(`branding`),Qx=_x(`resize`),$x=_x(`paste_as_text`),eS=_x(`sidebar_show`),tS=_x(`promotion`),nS=_x(`help_accessibility`),rS=e=>e.options.get(`skin`)===!1,iS=e=>e.options.get(`menubar`)!==!1,aS=e=>{let t=e.options.get(`skin_url`);if(rS(e))return t;if(t)return e.documentBaseURI.toAbsolute(t);{let t=e.options.get(`skin`);return px.baseURL+`/skins/ui/`+t}},oS=e=>e.options.get(`line_height_formats`).split(` `),sS=e=>{let t=Bx(e),n=s(t),r=u(t)&&t.length>0;return!lS(e)&&(r||n||t===!0)},cS=e=>{let t=de(ce(9,t=>e.options.get(`toolbar`+(t+1))),s);return Ye(t.length>0,t)},lS=e=>cS(e).fold(()=>{let t=Bx(e);return v(t,s)&&t.length>0},re),uS=e=>Px(e)===gx.bottom,dS=e=>{if(!e.inline)return O.none();let t=Fx(e)??``;if(t.length>0)return Xl(sn(),t);let n=Ix(e);return h(n)?O.some(z.fromDom(n)):O.none()},fS=e=>e.inline&&dS(e).isSome(),pS=e=>dS(e).getOrThunk(()=>$t(Qt(z.fromDom(e.getElement())))),mS=e=>e.inline&&!iS(e)&&!sS(e)&&!lS(e),hS=e=>(e.options.get(`toolbar_sticky`)||e.inline)&&!fS(e)&&!mS(e),gS=e=>!fS(e)&&e.options.get(`ui_mode`)===`split`,_S=e=>je(e.options.get(`menu`),e=>({...e,items:e.items}));var vS=Object.freeze({__proto__:null,get ToolbarMode(){return hx},get ToolbarLocation(){return gx},register:yx,getSkinUrl:aS,isReadOnly:bx,isSkinDisabled:rS,getHeightOption:xx,getWidthOption:Sx,getMinWidthOption:Cx,getMinHeightOption:wx,getMaxWidthOption:Tx,getMaxHeightOption:Ex,getUserStyleFormats:Dx,shouldMergeStyleFormats:Ox,shouldAutoHideStyleFormats:kx,getLineHeightFormats:oS,getContentLanguages:Ax,getRemovedMenuItems:jx,isMenubarEnabled:iS,isMultipleToolbars:lS,isToolbarEnabled:sS,isToolbarPersist:Lx,getMultipleToolbarsOption:cS,getUiContainer:pS,useFixedContainer:fS,isSplitUiMode:gS,getToolbarMode:Mx,isDraggableModal:Jx,isDistractionFree:mS,isStickyToolbar:hS,getStickyToolbarOffset:Rx,getToolbarLocation:Px,isToolbarLocationBottom:uS,getToolbarGroups:Nx,getMenus:_S,getMenubar:zx,getToolbar:Bx,getFilePickerCallback:Vx,getFilePickerTypes:Wx,useTypeaheadUrls:Gx,getAnchorTop:Kx,getAnchorBottom:qx,getFilePickerValidatorHandler:Hx,getFontSizeInputDefaultUnit:Ux,useStatusBar:Yx,useElementPath:Xx,promotionEnabled:tS,useBranding:Zx,getResize:Qx,getPasteAsText:$x,getSidebarShow:eS,useHelpAccessibility:nS});let yS=`[data-mce-autocompleter]`,bS=e=>Zl(e,yS),xS=e=>Xl(e,yS),SS={setup:(e,t)=>{let n=(e,t)=>{Ss(e,Ro(),{raw:t})},r=()=>e.getMenu().bind(s_.getHighlighted);t.on(`keydown`,t=>{let i=t.which;e.isActive()&&(e.isMenuOpen()?i===13?(r().each(Cs),t.preventDefault()):i===40?(r().fold(()=>{e.getMenu().each(s_.highlightFirst)},e=>{n(e,t)}),t.preventDefault(),t.stopImmediatePropagation()):(i===37||i===38||i===39)&&r().each(e=>{n(e,t),t.preventDefault(),t.stopImmediatePropagation()}):(i===13||i===38||i===40)&&e.cancelIfNecessary())}),t.on(`NodeChange`,t=>{e.isActive()&&!e.isProcessingAction()&&bS(z.fromDom(t.element)).isNone()&&e.cancelIfNecessary()})}};var CS;(function(e){e[e.CLOSE_ON_EXECUTE=0]=`CLOSE_ON_EXECUTE`,e[e.BUBBLE_TO_SANDBOX=1]=`BUBBLE_TO_SANDBOX`})(CS||={});var wS=CS;let TS=`tox-menu-nav__js`,ES=`tox-collection__item`,DS=`tox-swatch`,OS={normal:TS,color:DS},kS=`tox-collection__item--enabled`,AS=`tox-collection__item-icon`,jS=`tox-collection__item-label`,MS=`tox-collection__item-caret`,NS=`tox-collection__item--active`,PS=`tox-collection__item-container`,FS=`tox-collection__item-container--row`,IS=e=>L(OS,e).getOr(TS),LS=e=>e===`color`?`tox-swatches`:`tox-menu`,RS=e=>({backgroundMenu:`tox-background-menu`,selectedMenu:`tox-selected-menu`,selectedItem:`tox-collection__item--active`,hasIcons:`tox-menu--has-icons`,menu:LS(e),tieredMenu:`tox-tiered-menu`}),zS=e=>{let t=RS(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:IS(e)}},BS=(e,t,n)=>{let r=RS(n);return{tag:`div`,classes:F([[r.menu,`tox-menu-${t}-column`],e?[r.hasIcons]:[]])}},VS=[Mb.parts.items({})],HS=(e,t,n)=>({dom:{tag:`div`,classes:F([[RS(n).tieredMenu]])},markers:zS(n)}),US=S([za(`data`),K(`inputAttributes`,{}),K(`inputStyles`,{}),K(`tag`,`input`),K(`inputClasses`,[]),bu(`onSetValue`),K(`styles`,{}),K(`eventOrder`,{}),fh(`inputBehaviours`,[Q,Wy]),K(`selectOnFocus`,!0)]),WS=e=>Z([Wy.config({onFocus:e.selectOnFocus?e=>{let t=e.element,n=pl(t);t.dom.setSelectionRange(0,n.length)}:y})]),GS=e=>({...WS(e),...mh(e.inputBehaviours,[Q.config({store:{mode:`manual`,...e.data.map(e=>({initialValue:e})).getOr({}),getValue:e=>pl(e.element),setValue:(e,t)=>{pl(e.element)!==t&&ml(e.element,t)}},onSetValue:e.onSetValue})])}),KS=e=>({tag:e.tag,attributes:{type:`text`,...e.inputAttributes},styles:e.inputStyles,classes:e.inputClasses}),qS=Cg({name:`Input`,configFields:US(),factory:(e,t)=>({uid:e.uid,dom:KS(e),components:[],behaviours:GS(e),eventOrder:e.eventOrder})}),JS=J(`refetch-trigger-event`),YS=J(`redirect-menu-item-interaction`),XS=`tox-menu__searcher`,ZS=e=>Xl(e.element,`.${XS}`).bind(t=>e.getSystem().getByDom(t).toOptional()),QS=ZS,$S=(e,t)=>{Q.setValue(e,t.fetchPattern),e.element.dom.selectionStart=t.selectionStart,e.element.dom.selectionEnd=t.selectionEnd},eC=e=>({fetchPattern:Q.getValue(e),selectionStart:e.element.dom.selectionStart,selectionEnd:e.element.dom.selectionEnd}),tC=(e,t)=>{pn(t.element,`id`).each(t=>un(e.element,`aria-activedescendant`,t))},nC=e=>{let t=(e,t)=>(t.cut(),O.none()),n=(e,t)=>(Ss(e,YS,{interactionEvent:t.event,eventType:t.event.raw.type}),O.some(!0)),r=`searcher-events`;return{dom:{tag:`div`,classes:[ES]},components:[qS.sketch({inputClasses:[XS,`tox-textfield`],inputAttributes:{...e.placeholder.map(t=>({placeholder:e.i18n(t)})).getOr({}),type:`search`,"aria-autocomplete":`list`},inputBehaviours:Z([By(r,[q(Bo(),e=>{xs(e,JS)}),q(Ro(),(e,t)=>{t.event.raw.key===`Escape`&&t.stop()})]),Ty.config({mode:`special`,onLeft:t,onRight:t,onSpace:t,onEnter:n,onEscape:n,onUp:n,onDown:n})]),eventOrder:{keydown:[r,Ty.name()]}})]}},rC=`tox-collection--results__js`,iC=e=>e.dom?{...e,dom:{...e.dom,attributes:{...e.dom.attributes??{},id:J(`aria-item-search-result-id`),"aria-selected":`false`}}}:e,aC=(e,t)=>n=>N(M(n,t),t=>({dom:e,components:t})),oC=e=>({dom:{tag:`div`,classes:[`tox-menu`,`tox-swatches-menu`]},components:[{dom:{tag:`div`,classes:[`tox-swatches`]},components:[Mb.parts.items({preprocess:e===`auto`?C:aC({tag:`div`,classes:[`tox-swatches__row`]},e)})]}]}),sC=e=>({dom:{tag:`div`,classes:[`tox-menu`,`tox-collection`,`tox-collection--toolbar`,`tox-collection--toolbar-lg`]},components:[Mb.parts.items({preprocess:aC({tag:`div`,classes:[`tox-collection__group`]},e)})]}),cC=(e,t)=>{let n=[],r=[];return P(e,(e,i)=>{t(e,i)?(r.length>0&&n.push(r),r=[],(Be(e.dom,`innerHtml`)||e.components&&e.components.length>0)&&r.push(e)):r.push(e)}),r.length>0&&n.push(r),N(n,e=>({dom:{tag:`div`,classes:[`tox-collection__group`]},components:e}))},lC=(e,t,n)=>Mb.parts.items({preprocess:r=>{let i=N(r,n);return e!==`auto`&&e>1?aC({tag:`div`,classes:[`tox-collection__group`]},e)(i):cC(i,(e,n)=>t[n].type===`separator`)}}),uC=(e,t,n=!0)=>({dom:{tag:`div`,classes:[`tox-menu`,`tox-collection`].concat(e===1?[`tox-collection--list`]:[`tox-collection--grid`])},components:[lC(e,t,C)]}),dC=(e,t,n=!0)=>{let r=J(`aria-controls-search-results`);return{dom:{tag:`div`,classes:[`tox-menu`,`tox-collection`,rC].concat(e===1?[`tox-collection--list`]:[`tox-collection--grid`]),attributes:{id:r}},components:[lC(e,t,iC)]}},fC=(e,t,n)=>{let r=J(`aria-controls-search-results`);return{dom:{tag:`div`,classes:[`tox-menu`,`tox-collection`].concat(e===1?[`tox-collection--list`]:[`tox-collection--grid`])},components:[nC({i18n:Xb.translate,placeholder:n.placeholder}),{dom:{tag:`div`,classes:[...e===1?[`tox-collection--list`]:[`tox-collection--grid`],rC],attributes:{id:r}},components:[lC(e,t,iC)]}]}},pC=(e,t=!0)=>({dom:{tag:`div`,classes:[`tox-collection`,`tox-collection--horizontal`]},components:[Mb.parts.items({preprocess:t=>cC(t,(t,n)=>e[n].type===`separator`)})]}),mC=e=>se(e,e=>`icon`in e&&e.icon!==void 0),hC=e=>(console.error(Ca(e)),console.log(e),O.none()),gC=(e,t,n,r,i)=>{let a=pC(n);return{value:e,dom:a.dom,components:a.components,items:n}},_C=(e,t,n,r,i)=>{let a=()=>i.menuType===`searchable`?i.searchMode.searchMode===`search-with-field`?fC(r,n,i.searchMode):dC(r,n):uC(r,n);if(i.menuType===`color`){let t=oC(r);return{value:e,dom:t.dom,components:t.components,items:n}}else if(i.menuType===`normal`&&r===`auto`){let t=uC(r,n);return{value:e,dom:t.dom,components:t.components,items:n}}else if(i.menuType===`normal`||i.menuType===`searchable`){let t=a();return{value:e,dom:t.dom,components:t.components,items:n}}else if(i.menuType===`listpreview`&&r!==`auto`){let t=sC(r);return{value:e,dom:t.dom,components:t.components,items:n}}else return{value:e,dom:BS(t,r,i.menuType),components:VS,items:n}},vC=ja(`type`),yC=ja(`name`),bC=ja(`label`),xC=ja(`text`),SC=ja(`title`),CC=ja(`icon`),wC=ja(`value`),TC=Pa(`fetch`),EC=Pa(`getSubmenuItems`),DC=Pa(`onAction`),OC=Pa(`onItemAction`),kC=$a(`onSetup`,()=>y),AC=Ha(`name`),jC=Ha(`text`),MC=Ha(`icon`),NC=Ha(`tooltip`),PC=Ha(`label`),FC=Ha(`shortcut`),IC=Wa(`select`),LC=Qa(`active`,!1),RC=Qa(`borderless`,!1),zC=Qa(`enabled`,!0),BC=Qa(`primary`,!1),VC=e=>K(`columns`,e),HC=K(`meta`,{}),UC=$a(`onAction`,y),WC=e=>Xa(`type`,e),GC=e=>Ea(`name`,`name`,Ai(()=>J(`${e}-name`)),ua),KC=e=>Ea(`value`,`value`,Ai(()=>J(`${e}-value`)),sa()),qC=H([vC,jC]),JC=e=>ba(`separatormenuitem`,qC,e),YC=H([WC(`autocompleteitem`),LC,zC,HC,wC,jC,MC]),XC=e=>ba(`Autocompleter.Separator`,qC,e),ZC=e=>ba(`Autocompleter.Item`,YC,e),QC=[zC,NC,MC,jC,kC],$C=H([vC,DC].concat(QC)),ew=e=>ba(`toolbarbutton`,$C,e),tw=[LC].concat(QC),nw=H(tw.concat([vC,DC])),rw=e=>ba(`ToggleButton`,nw,e),iw=[$a(`predicate`,D),Za(`scope`,`node`,[`node`,`editor`]),Za(`position`,`selection`,[`node`,`selection`,`line`])],aw=QC.concat([WC(`contextformbutton`),BC,DC,Da(`original`,C)]),ow=tw.concat([WC(`contextformbutton`),BC,DC,Da(`original`,C)]),sw=QC.concat([WC(`contextformbutton`)]),cw=tw.concat([WC(`contextformtogglebutton`)]),lw=wa(`type`,{contextformbutton:aw,contextformtogglebutton:ow}),uw=H([WC(`contextform`),$a(`initValue`,S(``)),PC,Ra(`commands`,lw),Ba(`launch`,wa(`type`,{contextformbutton:sw,contextformtogglebutton:cw}))].concat(iw)),dw=e=>ba(`ContextForm`,uw,e),fw=H([WC(`contexttoolbar`),ja(`items`)].concat(iw)),pw=e=>ba(`ContextToolbar`,fw,e),mw=H([vC,ja(`src`),Ha(`alt`),to(`classes`,[],ua)]),hw=H([vC,xC,AC,to(`classes`,[`tox-collection__item-label`],ua)]),gw=ea(()=>ga(`type`,{cardimage:mw,cardtext:hw,cardcontainer:_w})),_w=H([vC,Xa(`direction`,`horizontal`),Xa(`align`,`left`),Xa(`valign`,`middle`),Ra(`items`,gw)]),vw=[zC,jC,FC,KC(`menuitem`),HC],yw=H([vC,PC,Ra(`items`,gw),kC,UC].concat(vw)),bw=e=>ba(`cardmenuitem`,yw,e),xw=H([vC,LC,MC].concat(vw)),Sw=e=>ba(`choicemenuitem`,xw,e),Cw=[vC,ja(`fancytype`),UC],ww=wa(`fancytype`,{inserttable:[K(`initData`,{})].concat(Cw),colorswatch:[Wa(`select`),no(`initData`,{},[Qa(`allowCustomColors`,!0),Xa(`storageKey`,`default`),Ga(`colors`,sa())])].concat(Cw)}),Tw=e=>ba(`fancymenuitem`,ww,e),Ew=H([vC,kC,UC,MC].concat(vw)),Dw=e=>ba(`menuitem`,Ew,e),Ow=H([vC,EC,kC,MC].concat(vw)),kw=e=>ba(`nestedmenuitem`,Ow,e),Aw=H([vC,MC,LC,kC,DC].concat(vw)),jw=e=>ba(`togglemenuitem`,Aw,e),Mw=(e,t,n)=>{let r=Ap(e.element,`.`+n);if(r.length>0){let e=ge(r,e=>{let n=e.dom.getBoundingClientRect().top,i=r[0].dom.getBoundingClientRect().top;return Math.abs(n-i)>t}).getOr(r.length);return O.some({numColumns:e,numRows:Math.ceil(r.length/e)})}else return O.none()},Nw=(e,t)=>Z([By(e,t)]),Pw={namedEvents:Nw,unnamedEvents:e=>Nw(J(`unnamed-events`),e)},Fw=J(`tooltip.exclusive`),Iw=J(`tooltip.show`),Lw=J(`tooltip.hide`),Rw=(e,t,n)=>{e.getSystem().broadcastOn([Fw],{})};var zw=Object.freeze({__proto__:null,hideAllExclusive:Rw,setComponents:(e,t,n,r)=>{n.getTooltip().each(e=>{e.getSystem().isConnected()&&Ry.set(e,r)})}}),Bw=Object.freeze({__proto__:null,events:(e,t)=>{let n=n=>{t.getTooltip().each(r=>{Em(r),e.onHide(n,r),t.clearTooltip()}),t.clearTimer()},r=n=>{if(!t.isShowing()){Rw(n);let r=e.lazySink(n).getOrDie(),i=n.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Os(e.mode===`normal`?[q(Fo(),e=>{xs(n,Iw)}),q(No(),e=>{xs(n,Lw)})]:[]),behaviours:Z([Ry.config({})])});t.setTooltip(i),Cm(r,i),e.onShow(n,i),pm.position(r,i,{anchor:e.anchor(n)})}};return Os(F([[q(Iw,n=>{t.resetTimer(()=>{r(n)},e.delay)}),q(Lw,r=>{t.resetTimer(()=>{n(r)},e.delay)}),q(Qo(),(e,t)=>{let r=t;r.universal||oe(r.channels,Fw)&&n(e)}),Hs(e=>{n(e)})],e.mode===`normal`?[q(Io(),e=>{xs(e,Iw)}),q(Xo(),e=>{xs(e,Lw)}),q(Fo(),e=>{xs(e,Iw)}),q(No(),e=>{xs(e,Lw)})]:[q(ys(),(e,t)=>{xs(e,Iw)}),q(bs(),e=>{xs(e,Lw)})]]))}});let Vw=wd({fields:[G(`lazySink`),G(`tooltipDom`),K(`exclusive`,!0),K(`tooltipComponents`,[]),K(`delay`,300),Za(`mode`,`normal`,[`normal`,`follow-highlight`]),K(`anchor`,e=>({type:`hotspot`,hotspot:e,layouts:{onLtr:S([ad,id,ed,nd,td,rd]),onRtl:S([ad,id,ed,nd,td,rd])}})),bu(`onHide`),bu(`onShow`)],name:`tooltipping`,active:Bw,state:Object.freeze({__proto__:null,init:()=>{let e=uf(),t=uf(),n=()=>{e.on(clearTimeout)},r=(t,r)=>{n(),e.set(setTimeout(t,r))},i=S(`not-implemented`);return wc({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:n,resetTimer:r,readState:i})}}),apis:zw}),Hw=e=>e.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`),Uw=`silver.readonly`,Ww=H([Na(`readonly`)]),Gw=(e,t)=>{let n=e.mainUi.outerContainer.element,r=[e.mainUi.mothership,...e.uiMotherships];t&&P(r,e=>{e.broadcastOn([Jm()],{target:n})}),P(r,e=>{e.broadcastOn([Uw],{readonly:t})})},Kw=(e,t)=>{e.on(`init`,()=>{e.mode.isReadOnly()&&Gw(t,!0)}),e.on(`SwitchMode`,()=>Gw(t,e.mode.isReadOnly())),bx(e)&&e.mode.set(`readonly`)},qw=()=>Od.config({channels:{[Uw]:{schema:Ww,onReceive:(e,t)=>{Hg.set(e,t.readonly)}}}}),Jw={item:e=>Hg.config({disabled:e,disableClass:`tox-collection__item--state-disabled`}),button:e=>Hg.config({disabled:e}),splitButton:e=>Hg.config({disabled:e,disableClass:`tox-tbtn--disabled`}),toolbarButton:e=>Hg.config({disabled:e,disableClass:`tox-tbtn--disabled`,useNative:!1})},Yw=(e,t)=>{let n=e.getApi(t);return e=>{e(n)}},Xw=(e,t)=>Vs(n=>{Yw(e,n)(n=>{let r=e.onSetup(n);g(r)&&t.set(r)})}),Zw=(e,t)=>Hs(n=>Yw(e,n)(t.get())),Qw=(e,t)=>Ws((n,r)=>{Yw(e,n)(e.onAction),!e.triggersSubmenu&&t===wS.CLOSE_ON_EXECUTE&&(n.getSystem().isConnected()&&xs(n,rs()),r.stop())}),$w={[$o()]:[`disabling`,`alloy.base.behaviour`,`toggling`,`item-events`]},eT=We,tT=(e,t,n,r)=>{let i=ro(y);return{type:`item`,dom:t.dom,components:eT(t.optComponents),data:e.data,eventOrder:$w,hasSubmenu:e.triggersSubmenu,itemBehaviours:Z([By(`item-events`,[Qw(e,n),Xw(e,i),Zw(e,i)]),Jw.item(()=>!e.enabled||r.isDisabled()),qw(),Ry.config({})].concat(e.itemBehaviours))}},nT=e=>({value:e.value,meta:{text:e.text.getOr(``),...e.meta}}),rT=e=>{let t=mx.os.isMacOS()||mx.os.isiOS(),n=t?{alt:`⌥`,ctrl:`⌃`,shift:`⇧`,meta:`⌘`,access:`⌃⌥`}:{meta:`Ctrl`,access:`Shift+Alt`},r=N(e.split(`+`),e=>{let t=e.toLowerCase().trim();return Be(n,t)?n[t]:e});return t?r.join(``):r.join(`+`)},iT=(e,t,n=[AS])=>sx(e,{tag:`div`,classes:n},t),aT=e=>({dom:{tag:`div`,classes:[jS]},components:[Fl(Xb.translate(e))]}),oT=(e,t)=>({dom:{tag:`div`,classes:t,innerHtml:e}}),sT=(e,t)=>({dom:{tag:`div`,classes:[jS]},components:[{dom:{tag:e.tag,styles:e.styles},components:[Fl(Xb.translate(t))]}]}),cT=e=>({dom:{tag:`div`,classes:[`tox-collection__item-accessory`]},components:[Fl(rT(e))]}),lT=e=>iT(`checkmark`,e,[`tox-collection__item-checkmark`]),uT=e=>iT(`chevron-right`,e,[MS]),dT=e=>iT(`chevron-down`,e,[MS]),fT=(e,t)=>({dom:{tag:`div`,classes:[PS,e.direction===`vertical`?`tox-collection__item-container--column`:FS,e.align===`left`?`tox-collection__item-container--align-left`:`tox-collection__item-container--align-right`,(()=>{switch(e.valign){case`top`:return`tox-collection__item-container--valign-top`;case`middle`:return`tox-collection__item-container--valign-middle`;case`bottom`:return`tox-collection__item-container--valign-bottom`}})()]},components:t}),pT=(e,t,n)=>({dom:{tag:`img`,classes:t,attributes:{src:e,alt:n.getOr(``)}}}),mT=(e,t,n)=>{let r=e.ariaLabel,i=e.value,a=e.iconContent.map(e=>rx(e,t.icons,n));return{dom:(()=>{let e=a.getOr(``),n={tag:`div`,attributes:r.map(e=>({title:t.translate(e)})).getOr({}),classes:[`tox-swatch`]};return i===`custom`?{...n,tag:`button`,classes:[...n.classes,`tox-swatches__picker-btn`],innerHtml:e}:i===`remove`?{...n,classes:[...n.classes,`tox-swatch--remove`],innerHtml:e}:h(i)?{...n,attributes:{...n.attributes,"data-mce-color":i},styles:{"background-color":i},innerHtml:e}:n})(),optComponents:[]}},hT=e=>{let t=e.map(e=>({attributes:{title:Xb.translate(e),id:J(`menu-item`)}})).getOr({});return{tag:`div`,classes:[TS,ES],...t}},gT=(e,t,n,r)=>{let i={tag:`div`,classes:[AS]},a=n?e.iconContent.map(e=>sx(e,i,t.icons,r)).orThunk(()=>O.some({dom:i})):O.none(),o=e.checkMark,s=O.from(e.meta).fold(()=>aT,e=>Be(e,`style`)?w(sT,e.style):aT),c=e.htmlContent.fold(()=>e.textContent.map(s),e=>O.some(oT(e,[jS])));return{dom:hT(e.ariaLabel),optComponents:[a,c,e.shortcutContent.map(cT),o,e.caret]}},_T=(e,t,n,r=O.none())=>e.presets===`color`?mT(e,t,r):gT(e,t,n,r),vT=(e,t)=>L(e,`tooltipWorker`).map(e=>[Vw.config({lazySink:t.getSink,tooltipDom:{tag:`div`,classes:[`tox-tooltip-worker-container`]},tooltipComponents:[],anchor:e=>({type:`submenu`,item:e,overrides:{maxHeightFunction:Nf}}),mode:`follow-highlight`,onShow:(t,n)=>{e(e=>{Vw.setComponents(t,[Il({element:z.fromDom(e)})])})}})]).getOr([]),yT=e=>fx.DOM.encode(e),bT=(e,t)=>{let n=yT(Xb.translate(e));if(t.length>0){let e=new RegExp(Hw(t),`gi`);return n.replace(e,e=>`<span class="tox-autocompleter-highlight">${e}</span>`)}else return n},xT=(e,t,n,r,i,a,o,s=!0)=>{let c=_T({presets:r,textContent:O.none(),htmlContent:n?e.text.map(e=>bT(e,t)):O.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:O.none(),checkMark:O.none(),caret:O.none(),value:e.value},o.providers,s,e.icon);return tT({data:nT(e),enabled:e.enabled,getApi:S({}),onAction:t=>i(e.value,e.meta),onSetup:S(y),triggersSubmenu:!1,itemBehaviours:vT(e.meta,o)},c,a,o.providers)},ST=(e,t)=>N(e,e=>{switch(e.type){case`cardcontainer`:return fT(e,ST(e.items,t));case`cardimage`:return pT(e.src,e.classes,e.alt);case`cardtext`:let n=e.name.exists(e=>oe(t.cardText.highlightOn,e))?O.from(t.cardText.matchText).getOr(``):``;return oT(bT(e.text,n),e.classes)}}),CT=(e,t,n,r)=>{let i=e=>({isEnabled:()=>!Hg.isDisabled(e),setEnabled:t=>{Hg.set(e,!t),P(Ap(e.element,`*`),n=>{e.getSystem().getByDom(n).each(e=>{e.hasConfigured(Hg)&&Hg.set(e,!t)})})}}),a={dom:hT(e.label),optComponents:[O.some({dom:{tag:`div`,classes:[PS,FS]},components:ST(e.items,r)})]};return tT({data:nT({text:O.none(),...e}),enabled:e.enabled,getApi:i,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:O.from(r.itemBehaviours).getOr([])},a,t,n.providers)},wT=(e,t,n,r,i,a,o,s=!0)=>{let c=e=>({setActive:t=>{ob.set(e,t)},isActive:()=>ob.isOn(e),isEnabled:()=>!Hg.isDisabled(e),setEnabled:t=>Hg.set(e,!t)}),l=_T({presets:n,textContent:t?e.text:O.none(),htmlContent:O.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:O.none(),checkMark:t?O.some(lT(o.icons)):O.none(),caret:O.none(),value:e.value},o,s);return Di(tT({data:nT(e),enabled:e.enabled,getApi:c,onAction:t=>r(e.value),onSetup:e=>(e.setActive(i),y),triggersSubmenu:!1,itemBehaviours:[]},l,a,o),{toggling:{toggleClass:kS,toggleOnExecute:!1,selected:e.active,exclusive:!0}})},TT=Qh(Sb(),Cb()),ET=e=>({value:AT(e)}),DT=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,OT=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,kT=e=>DT.test(e)||OT.test(e),AT=e=>$e(e,`#`).toUpperCase(),jT=e=>kT(e)?O.some({value:AT(e)}):O.none(),MT=e=>({value:e.value.replace(DT,(e,t,n,r)=>t+t+n+n+r+r)}),NT=e=>{let t=MT(e),n=OT.exec(t.value);return n===null?[`FFFFFF`,`FF`,`FF`,`FF`]:n},PT=e=>{let t=e.toString(16);return(t.length===1?`0`+t:t).toUpperCase()},FT=e=>ET(PT(e.red)+PT(e.green)+PT(e.blue)),IT=Math.min,LT=Math.max,RT=Math.round,zT=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,BT=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,VT=(e,t,n,r)=>({red:e,green:t,blue:n,alpha:r}),HT=e=>{let t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},UT=e=>{let t,n,r,i=(e.hue||0)%360,a=e.saturation/100,o=e.value/100;if(a=LT(0,IT(a,1)),o=LT(0,IT(o,1)),a===0)return t=n=r=RT(255*o),VT(t,n,r,1);let s=i/60,c=o*a,l=c*(1-Math.abs(s%2-1)),u=o-c;switch(Math.floor(s)){case 0:t=c,n=l,r=0;break;case 1:t=l,n=c,r=0;break;case 2:t=0,n=c,r=l;break;case 3:t=0,n=l,r=c;break;case 4:t=l,n=0,r=c;break;case 5:t=c,n=0,r=l;break;default:t=n=r=0}return t=RT(255*(t+u)),n=RT(255*(n+u)),r=RT(255*(r+u)),VT(t,n,r,1)},WT=e=>{let t=NT(e);return VT(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1)},GT=(e,t,n,r)=>VT(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseFloat(r)),KT=e=>{if(e===`transparent`)return O.some(VT(0,0,0,0));let t=zT.exec(e);if(t!==null)return O.some(GT(t[1],t[2],t[3],`1`));let n=BT.exec(e);return n===null?O.none():O.some(GT(n[1],n[2],n[3],n[4]))},qT=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,JT=VT(255,0,0,1),YT=e=>{e.dispatch(`SkinLoaded`)},XT=(e,t)=>{e.dispatch(`SkinLoadError`,t)},ZT=e=>{e.dispatch(`ResizeEditor`)},QT=(e,t)=>{e.dispatch(`ResizeContent`,t)},$T=(e,t)=>{e.dispatch(`ScrollContent`,t)},eE=(e,t)=>{e.dispatch(`TextColorChange`,t)},tE=(e,t)=>{e.dispatch(`AfterProgressState`,{state:t})},nE=(e,t)=>e.dispatch(`ResolveName`,{name:t.nodeName.toLowerCase(),target:t}),rE=(e,t)=>{e.dispatch(`ToggleToolbarDrawer`,{state:t})},iE=(e,t)=>()=>{e(),t()},aE=e=>cE(e,`NodeChange`,t=>{t.setEnabled(e.selection.isEditable())}),oE=(e,t)=>n=>{let r=lf(),i=()=>{n.setActive(e.formatter.match(t));let i=e.formatter.formatChanged(t,n.setActive);r.set(i)};return e.initialized?i():e.once(`init`,i),()=>{e.off(`init`,i),r.clear()}},sE=(e,t)=>n=>{let r=aE(e)(n),i=oE(e,t)(n);return()=>{r(),i()}},cE=(e,t,n)=>r=>{let i=()=>n(r),a=()=>{n(r),e.on(t,i)};return e.initialized?a():e.once(`init`,a),()=>{e.off(`init`,a),e.off(t,i)}},lE=e=>t=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand(`mceToggleFormat`,!1,t.format)})},uE=(e,t)=>()=>e.execCommand(t);var dE=tinymce.util.Tools.resolve(`tinymce.util.LocalStorage`);let fE={},pE=(e,t=10)=>{let n=dE.getItem(e),r=(e=>t-e.length<0?e.slice(0,t):e)(s(n)?JSON.parse(n):[]),i=n=>{j(r,n).each(a),r.unshift(n),r.length>t&&r.pop(),dE.setItem(e,JSON.stringify(r))},a=e=>{r.splice(e,1)};return{add:i,state:()=>r.slice(0)}},mE=e=>L(fE,e).getOrThunk(()=>{let t=`tinymce-custom-colors-${e}`;if(m(dE.getItem(t))){let e=dE.getItem(`tinymce-custom-colors`);dE.setItem(t,h(e)?e:`[]`)}let n=pE(t,10);return fE[e]=n,n}),hE=e=>N(mE(e).state(),e=>({type:`choiceitem`,text:e,icon:`checkmark`,value:e})),gE=(e,t)=>{mE(e).add(t)},_E=(e,t,n)=>({hue:e,saturation:t,value:n}),vE=e=>{let t=0,n=0,r=0,i=e.red/255,a=e.green/255,o=e.blue/255,s=Math.min(i,Math.min(a,o)),c=Math.max(i,Math.max(a,o));if(s===c)return r=s,_E(0,0,r*100);let l=i===s?a-o:o===s?i-a:o-i;return t=i===s?3:o===s?1:5,t=60*(t-l/(c-s)),n=(c-s)/c,r=c,_E(Math.round(t),Math.round(n*100),Math.round(r*100))},yE=e=>vE(WT(e)),bE=e=>FT(UT(e)),xE=e=>jT(e).orThunk(()=>KT(e).map(FT)).getOrThunk(()=>{let t=document.createElement(`canvas`);t.height=1,t.width=1;let n=t.getContext(`2d`);n.clearRect(0,0,t.width,t.height),n.fillStyle=`#FFFFFF`,n.fillStyle=e,n.fillRect(0,0,1,1);let r=n.getImageData(0,0,1,1).data,i=r[0],a=r[1],o=r[2],s=r[3];return FT(VT(i,a,o,s))}),SE=`forecolor`,CE=`hilitecolor`,wE=e=>{let t=[];for(let n=0;n<e.length;n+=2)t.push({text:e[n+1],value:`#`+xE(e[n]).value,icon:`checkmark`,type:`choiceitem`});return t},TE=e=>t=>t.options.get(e),EE=`#000000`,DE=e=>{let t=e.options.register,n=e=>v(e,s)?{value:wE(e),valid:!0}:{valid:!1,message:`Must be an array of strings.`},r=e=>_(e)&&e>0?{value:e,valid:!0}:{valid:!1,message:`Must be a positive number.`};t(`color_map`,{processor:n,default:`#BFEDD2.Light Green.#FBEEB8.Light Yellow.#F8CAC6.Light Red.#ECCAFA.Light Purple.#C2E0F4.Light Blue.#2DC26B.Green.#F1C40F.Yellow.#E03E2D.Red.#B96AD9.Purple.#3598DB.Blue.#169179.Dark Turquoise.#E67E23.Orange.#BA372A.Dark Red.#843FA1.Dark Purple.#236FA1.Dark Blue.#ECF0F1.Light Gray.#CED4D9.Medium Gray.#95A5A6.Gray.#7E8C8D.Dark Gray.#34495E.Navy Blue.#000000.Black.#ffffff.White`.split(`.`)}),t(`color_map_background`,{processor:n}),t(`color_map_foreground`,{processor:n}),t(`color_cols`,{processor:r,default:kE(e)}),t(`color_cols_foreground`,{processor:r,default:AE(e,SE)}),t(`color_cols_background`,{processor:r,default:AE(e,CE)}),t(`custom_colors`,{processor:`boolean`,default:!0}),t(`color_default_foreground`,{processor:`string`,default:EE}),t(`color_default_background`,{processor:`string`,default:EE})},OE=(e,t)=>t===SE&&e.options.isSet(`color_map_foreground`)?TE(`color_map_foreground`)(e):t===CE&&e.options.isSet(`color_map_background`)?TE(`color_map_background`)(e):TE(`color_map`)(e),kE=(e,t=`default`)=>Math.max(5,Math.ceil(Math.sqrt(OE(e,t).length))),AE=(e,t)=>{let n=TE(`color_cols`)(e),r=kE(e,t);return n===kE(e)?r:n},jE=(e,t=`default`)=>Math.round(t===SE?TE(`color_cols_foreground`)(e):t===CE?TE(`color_cols_background`)(e):TE(`color_cols`)(e)),ME=TE(`custom_colors`),NE=TE(`color_default_foreground`),PE=TE(`color_default_background`),FE=e=>KT(e).exists(e=>e.alpha!==0),IE=e=>vo(e,e=>{if(Ct(e)){let t=xn(e,`background-color`);return Ye(FE(t),t)}else return O.none()}).getOr(`rgba(0, 0, 0, 0)`),LE=(e,t)=>{let n=z.fromDom(e.selection.getStart());return KT(t===`hilitecolor`?IE(n):xn(n,`color`)).map(e=>`#`+FT(e).value)},RE=(e,t,n)=>{e.undoManager.transact(()=>{e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})},zE=(e,t)=>{e.undoManager.transact(()=>{e.focus(),e.formatter.remove(t,{value:null},void 0,!0),e.nodeChanged()})},BE=e=>{e.addCommand(`mceApplyTextcolor`,(t,n)=>{RE(e,t,n)}),e.addCommand(`mceRemoveTextcolor`,t=>{zE(e,t)})},VE=e=>{let t=`choiceitem`,n={type:t,text:`Remove color`,icon:`color-swatch-remove-color`,value:`remove`};return e?[n,{type:t,text:`Custom color`,icon:`color-picker`,value:`custom`}]:[n]},HE=(e,t,n,r)=>{n===`custom`?YE(e)(n=>{n.each(n=>{gE(t,n),e.execCommand(`mceApplyTextcolor`,t,n),r(n)})},LE(e,t).getOr(EE)):n===`remove`?(r(``),e.execCommand(`mceRemoveTextcolor`,t)):(r(n),e.execCommand(`mceApplyTextcolor`,t,n))},UE=(e,t,n)=>e.concat(hE(t).concat(VE(n))),WE=(e,t,n)=>r=>{r(UE(e,t,n))},GE=(e,t,n)=>{let r=t===`forecolor`?`tox-icon-text-color__color`:`tox-icon-highlight-bg-color__color`;e.setIconFill(r,n)},KE=(e,t)=>n=>He(LE(e,t),n.toUpperCase()),qE=(e,t,n,r,i)=>{e.ui.registry.addSplitButton(t,{tooltip:r,presets:`color`,icon:t===`forecolor`?`text-color`:`highlight-bg-color`,select:KE(e,n),columns:jE(e,n),fetch:WE(OE(e,n),n,ME(e)),onAction:t=>{HE(e,n,i.get(),y)},onItemAction:(r,a)=>{HE(e,n,a,n=>{i.set(n),eE(e,{name:t,color:n})})},onSetup:n=>{GE(n,t,i.get());let r=e=>{e.name===t&&GE(n,e.name,e.color)};return e.on(`TextColorChange`,r),iE(aE(e)(n),()=>{e.off(`TextColorChange`,r)})}})},JE=(e,t,n,r,i)=>{e.ui.registry.addNestedMenuItem(t,{text:r,icon:t===`forecolor`?`text-color`:`highlight-bg-color`,onSetup:n=>(GE(n,t,i.get()),aE(e)(n)),getSubmenuItems:()=>[{type:`fancymenuitem`,fancytype:`colorswatch`,select:KE(e,n),initData:{storageKey:n},onAction:r=>{HE(e,n,r.value,n=>{i.set(n),eE(e,{name:t,color:n})})}}]})},YE=e=>(t,n)=>{let r=!1,i=n=>{let i=n.getData().colorpicker;r?(t(O.from(i)),n.close()):e.windowManager.alert(e.translate([`Invalid hex color code: {0}`,i]))},a=(e,t)=>{t.name===`hex-valid`&&(r=t.value)},o={colorpicker:n};e.windowManager.open({title:`Color Picker`,size:`normal`,body:{type:`panel`,items:[{type:`colorpicker`,name:`colorpicker`,label:`Color`}]},buttons:[{type:`cancel`,name:`cancel`,text:`Cancel`},{type:`submit`,name:`save`,text:`Save`,primary:!0}],initialData:o,onAction:a,onSubmit:i,onClose:y,onCancel:()=>{t(O.none())}})},XE=e=>{BE(e);let t=NE(e),n=PE(e),r=ro(t),i=ro(n);qE(e,`forecolor`,`forecolor`,`Text color`,r),qE(e,`backcolor`,`hilitecolor`,`Background color`,i),JE(e,`forecolor`,`forecolor`,`Text color`,r),JE(e,`backcolor`,`hilitecolor`,`Background color`,i)},ZE=(e,t,n,r,i,a,o,s)=>_C(e,mC(t),QE(t,n,r,i===`color`?`color`:`normal`,a,o,s),r,{menuType:i}),QE=(e,t,n,r,i,a,o)=>We(N(e,s=>s.type===`choiceitem`?Sw(s).fold(hC,s=>O.some(wT(s,n===1,r,t,a(s.value),i,o,mC(e)))):O.none())),$E=(e,t)=>{let n=zS(t);return e===1?{mode:`menu`,moveOnTab:!0}:e===`auto`?{mode:`grid`,selector:`.`+n.item,initSize:{numColumns:1,numRows:1}}:{mode:`matrix`,rowSelector:`.`+(t===`color`?`tox-swatches__row`:`tox-collection__group`),previousSelector:e=>t===`color`?Xl(e.element,`[aria-checked=true]`):O.none()}},eD=(e,t)=>e===1?{mode:`menu`,moveOnTab:!1,selector:`.tox-collection__item`}:e===`auto`?{mode:`flatgrid`,selector:`.tox-collection__item`,initSize:{numColumns:1,numRows:1}}:{mode:`matrix`,selectors:{row:t===`color`?`.tox-swatches__row`:`.tox-collection__group`,cell:t===`color`?`.${DS}`:`.${ES}`}},tD=(e,t)=>{let n=nD(e,t),r=t.colorinput.getColorCols(e.initData.storageKey),i=`color`,a={...ZE(J(`menu-value`),n,t=>{e.onAction({value:t})},r,i,wS.CLOSE_ON_EXECUTE,e.select.getOr(D),t.shared.providers),markers:zS(i),movement:$E(r,i)};return{type:`widget`,data:{value:J(`widget-id`)},dom:{tag:`div`,classes:[`tox-fancymenuitem`]},autofocus:!0,components:[TT.widget(Mb.sketch(a))]}},nD=(e,t)=>{let n=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold(()=>UE(t.colorinput.getColors(e.initData.storageKey),e.initData.storageKey,n),e=>e.concat(VE(n)))},rD=J(`cell-over`),iD=J(`cell-execute`),aD=e=>(t,n)=>e.shared.providers.translate(`${n} columns, ${t} rows`),oD=(e,t,n)=>{let r=n=>Ss(n,rD,{row:e,col:t}),i=n=>Ss(n,iD,{row:e,col:t}),a=(e,t)=>{t.stop(),i(e)};return Bl({dom:{tag:`div`,attributes:{role:`button`,"aria-label":n}},behaviours:Z([By(`insert-table-picker-cell`,[q(Fo(),Wy.focus),q($o(),i),q(Ho(),a),q(ts(),a)]),ob.config({toggleClass:`tox-insert-table-picker__selected`,toggleOnExecute:!1}),Wy.config({onFocus:r})])})},sD=(e,t,n)=>{let r=[];for(let i=0;i<t;i++){let t=[];for(let r=0;r<n;r++){let n=e(i+1,r+1);t.push(oD(i,r,n))}r.push(t)}return r},cD=(e,t,n,r,i)=>{for(let a=0;a<r;a++)for(let r=0;r<i;r++)ob.set(e[a][r],a<=t&&r<=n)},lD=e=>_e(e,e=>N(e,Vl)),uD=(e,t)=>Fl(`${t}x${e}`),dD={inserttable:(e,t)=>{let n=sD(aD(t),10,10),r=uD(0,0),i=Yb({dom:{tag:`span`,classes:[`tox-insert-table-picker__label`]},components:[r],behaviours:Z([Ry.config({})])});return{type:`widget`,data:{value:J(`widget-id`)},dom:{tag:`div`,classes:[`tox-fancymenuitem`]},autofocus:!0,components:[TT.widget({dom:{tag:`div`,classes:[`tox-insert-table-picker`]},components:lD(n).concat(i.asSpec()),behaviours:Z([By(`insert-table-picker`,[Vs(e=>{Ry.set(i.get(e),[r])}),Ls(rD,(e,t,r)=>{let{row:a,col:o}=r.event;cD(n,a,o,10,10),Ry.set(i.get(e),[uD(a+1,o+1)])}),Ls(iD,(t,n,r)=>{let{row:i,col:a}=r.event;e.onAction({numRows:i+1,numColumns:a+1}),xs(t,rs())})]),Ty.config({initSize:{numRows:10,numColumns:10},mode:`flatgrid`,selector:`[role="button"]`})])})]}},colorswatch:tD},fD=(e,t)=>L(dD,e.fancytype).map(n=>n(e,t)),pD=(e,t,n,r=!0,i=!1)=>{let a=i?dT(n.icons):uT(n.icons),o=e=>({isEnabled:()=>!Hg.isDisabled(e),setEnabled:t=>Hg.set(e,!t),setIconFill:(t,n)=>{Xl(e.element,`svg path[class="${t}"], rect[class="${t}"]`).each(e=>{un(e,`fill`,n)})}}),s=_T({presets:`normal`,iconContent:e.icon,textContent:e.text,htmlContent:O.none(),ariaLabel:e.text,caret:O.some(a),checkMark:O.none(),shortcutContent:e.shortcut},n,r);return tT({data:nT(e),getApi:o,enabled:e.enabled,onAction:y,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},s,t,n)},mD=(e,t,n,r=!0)=>{let i=e=>({isEnabled:()=>!Hg.isDisabled(e),setEnabled:t=>Hg.set(e,!t)}),a=_T({presets:`normal`,iconContent:e.icon,textContent:e.text,htmlContent:O.none(),ariaLabel:e.text,caret:O.none(),checkMark:O.none(),shortcutContent:e.shortcut},n,r);return tT({data:nT(e),getApi:i,enabled:e.enabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},a,t,n)},hD=e=>({type:`separator`,dom:{tag:`div`,classes:[ES,`tox-collection__group-heading`]},components:e.text.map(Fl).toArray()}),gD=(e,t,n,r=!0)=>{let i=e=>({setActive:t=>{ob.set(e,t)},isActive:()=>ob.isOn(e),isEnabled:()=>!Hg.isDisabled(e),setEnabled:t=>Hg.set(e,!t)}),a=_T({iconContent:e.icon,textContent:e.text,htmlContent:O.none(),ariaLabel:e.text,checkMark:O.some(lT(n.icons)),caret:O.none(),shortcutContent:e.shortcut,presets:`normal`,meta:e.meta},n,r);return Di(tT({data:nT(e),enabled:e.enabled,getApi:i,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},a,t,n),{toggling:{toggleClass:kS,toggleOnExecute:!1,selected:e.active}})},_D=xT,vD=hD,yD=mD,bD=pD,xD=gD,SD=fD,CD=CT;var wD=Object.freeze({__proto__:null,getCoupled:(e,t,n,r)=>n.getOrCreate(e,t,r),getExistingCoupled:(e,t,n,r)=>n.getExisting(e,t,r)});let TD=wd({fields:[ka(`others`,va(ui.value,sa()))],name:`coupling`,apis:wD,state:Object.freeze({__proto__:null,init:()=>{let e={},t=(t,n)=>{if(Oe(t.others).length===0)throw Error(`Cannot find any known coupled components`);return L(e,n)};return wc({readState:S({}),getExisting:(e,n,r)=>t(n,r).orThunk(()=>(L(n.others,r).getOrDie(`No information found for coupled component: `+r),O.none())),getOrCreate:(n,r,i)=>t(r,i).getOrThunk(()=>{let t=L(r.others,i).getOrDie(`No information found for coupled component: `+i)(n),a=n.getSystem().build(t);return e[i]=a,a})})}})}),ED=e=>{let t=O.none(),n=[],r=e=>ED(t=>{i(n=>{t(e(n))})}),i=e=>{o()?c(e):n.push(e)},a=e=>{o()||(t=O.some(e),s(n),n=[])},o=()=>t.isSome(),s=e=>{P(e,c)},c=e=>{t.each(t=>{setTimeout(()=>{e(t)},0)})};return e(a),{get:i,map:r,isReady:o}},DD={nu:ED,pure:e=>ED(t=>{t(e)})},OD=e=>{setTimeout(()=>{throw e},0)},kD=e=>{let t=t=>{e().then(t,OD)};return{map:t=>kD(()=>e().then(t)),bind:t=>kD(()=>e().then(e=>t(e).toPromise())),anonBind:t=>kD(()=>e().then(()=>t.toPromise())),toLazy:()=>DD.nu(t),toCached:()=>{let t=null;return kD(()=>(t===null&&(t=e()),t))},toPromise:e,get:t}},AD={nu:e=>kD(()=>new Promise(e)),pure:e=>kD(()=>Promise.resolve(e))},jD=S(`sink`),MD=S(Kh({name:jD(),overrides:S({dom:{tag:`div`},behaviours:Z([pm.config({useFixed:re})]),events:Os([Rs(Ro()),Rs(jo()),Rs(Ho())])})})),ND=(e,t)=>{let n=e.getHotspot(t).getOr(t),r=`hotspot`,i=e.getAnchorOverrides();return e.layouts.fold(()=>({type:r,hotspot:n,overrides:i}),e=>({type:r,hotspot:n,overrides:i,layouts:e}))},PD=(e,t,n)=>{let r=e.fetch;return r(n).map(t)},FD=(e,t,n,r,i,a,o)=>{let s=PD(e,t,r),c=BD(r,e);return s.map(e=>e.bind(e=>O.from(Wb.sketch({...a.menu(),uid:uc(``),data:e,highlightOnOpen:o,onOpenMenu:(e,t)=>{let r=c().getOrDie();pm.position(r,t,{anchor:n}),qm.decloak(i)},onOpenSubmenu:(e,t,n)=>{let r=c().getOrDie();pm.position(r,n,{anchor:{type:`submenu`,item:t}}),qm.decloak(i)},onRepositionMenu:(e,t,r)=>{let i=c().getOrDie();pm.position(i,t,{anchor:n}),P(r,e=>{pm.position(i,e.triggeredMenu,{anchor:{type:`submenu`,item:e.triggeringItem}})})},onEscape:()=>(Wy.focus(r),qm.close(i),O.some(!0))}))))},ID=(e,t,n,r,i,a,o)=>FD(e,t,ND(e,n),n,r,i,o).map(e=>(e.fold(()=>{qm.isOpen(r)&&qm.close(r)},e=>{qm.cloak(r),qm.open(r,e),a(r)}),r)),LD=(e,t,n,r,i,a,o)=>(qm.close(r),AD.pure(r)),RD=(e,t,n,r,i,a)=>{let o=TD.getCoupled(n,`sandbox`);return(qm.isOpen(o)?LD:ID)(e,t,n,o,r,i,a)},zD=(e,t,n)=>{let r=Dg.getCurrent(t).getOr(t),i=Vn(e.element);n?yn(r.element,`min-width`,i+`px`):Bn(r.element,i)},BD=(e,t)=>e.getSystem().getByUid(t.uid+`-`+jD()).map(e=>()=>ui.value(e)).getOrThunk(()=>t.lazySink.fold(()=>()=>ui.error(Error(`No internal sink is specified, nor could an external sink be found`)),t=>()=>t(e))),VD=e=>{qm.getState(e).each(e=>{Wb.repositionMenus(e)})},HD=(e,t,n)=>{let r=eu(),i=(i,a)=>{let o=ND(e,t);r.link(t.element),e.matchWidth&&zD(o.hotspot,a,e.useMinWidth),e.onOpen(o,i,a),n!==void 0&&n.onOpen!==void 0&&n.onOpen(i,a)},a=(e,i)=>{r.unlink(t.element),n!==void 0&&n.onClose!==void 0&&n.onClose(e,i)},o=BD(t,e);return{dom:{tag:`div`,classes:e.sandboxClasses,attributes:{id:r.id,role:`listbox`}},behaviours:hh.augment(e.sandboxBehaviours,[Q.config({store:{mode:`memory`,initialValue:t}}),qm.config({onOpen:i,onClose:a,isPartOf:(e,n,r)=>nu(n,r)||nu(t,r),getAttachPoint:()=>o().getOrDie()}),Dg.config({find:e=>qm.getState(e).bind(e=>Dg.getCurrent(e))}),Od.config({channels:{...Qm({isExtraPart:D}),...eh({doReposition:VD})}})])}},UD=e=>{VD(TD.getCoupled(e,`sandbox`))},WD=()=>[K(`sandboxClasses`,[]),hh.field(`sandboxBehaviours`,[Dg,Od,qm,Q])],GD=S([G(`dom`),G(`fetch`),bu(`onOpen`),xu(`onExecute`),K(`getHotspot`,O.some),K(`getAnchorOverrides`,S({})),Kf(),fh(`dropdownBehaviours`,[ob,TD,Ty,Wy]),G(`toggleClass`),K(`eventOrder`,{}),za(`lazySink`),K(`matchWidth`,!1),K(`useMinWidth`,!1),za(`role`)].concat(WD())),KD=S([Gh({schema:[_u(),K(`fakeFocus`,!1)],name:`menu`,defaults:e=>({onExecute:e.onExecute})}),MD()]),qD=wg({name:`Dropdown`,configFields:GD(),partFields:KD(),factory:(e,t,n,r)=>{let i=t=>L(e.dom,`attributes`).bind(e=>L(e,t)),a=e=>{qm.getState(e).each(e=>{Wb.highlightPrimary(e)})},o=(t,n,i)=>RD(e,C,t,r,n,i),s=e=>{o(e,a,Vb.HighlightMenuAndItem).get(y)},c={expand:e=>{ob.isOn(e)||o(e,y,Vb.HighlightNone).get(y)},open:e=>{ob.isOn(e)||o(e,y,Vb.HighlightMenuAndItem).get(y)},refetch:t=>TD.getExistingCoupled(t,`sandbox`).fold(()=>o(t,y,Vb.HighlightMenuAndItem).map(y),n=>ID(e,C,t,n,r,y,Vb.HighlightMenuAndItem).map(y)),isOpen:ob.isOn,close:e=>{ob.isOn(e)&&o(e,y,Vb.HighlightMenuAndItem).get(y)},repositionMenus:e=>{ob.isOn(e)&&UD(e)}},l=(e,t)=>(Cs(e),O.some(!0));return{uid:e.uid,dom:e.dom,components:t,behaviours:mh(e.dropdownBehaviours,[ob.config({toggleClass:e.toggleClass,aria:{mode:`expanded`}}),TD.config({others:{sandbox:t=>HD(e,t,{onOpen:()=>ob.on(t),onClose:()=>ob.off(t)})}}),Ty.config({mode:`special`,onSpace:l,onEnter:l,onDown:(e,t)=>(qD.isOpen(e)?a(TD.getCoupled(e,`sandbox`)):qD.open(e),O.some(!0)),onEscape:(e,t)=>qD.isOpen(e)?(qD.close(e),O.some(!0)):O.none()}),Wy.config({})]),events:cb(O.some(s)),eventOrder:{...e.eventOrder,[$o()]:[`disabling`,`toggling`,`alloy.base.behaviour`]},apis:c,domModification:{attributes:{"aria-haspopup":`true`,...e.role.fold(()=>({}),e=>({role:e})),...e.dom.tag===`button`?{type:i(`type`).getOr(`button`)}:{}}}}},apis:{open:(e,t)=>e.open(t),refetch:(e,t)=>e.refetch(t),expand:(e,t)=>e.expand(t),close:(e,t)=>e.close(t),isOpen:(e,t)=>e.isOpen(t),repositionMenus:(e,t)=>e.repositionMenus(t)}}),JD=e=>{switch(e.searchMode){case`no-search`:return{menuType:`normal`};default:return{menuType:`searchable`,searchMode:e}}},YD=e=>{let t=Q.getValue(e),n=ZS(e).map(eC);qD.refetch(t).get(()=>{let e=TD.getCoupled(t,`sandbox`);n.each(t=>ZS(e).each(e=>$S(e,t)))})},XD=(e,t)=>{ZD(e).each(n=>{Es(e,n.element,t.event.eventType,t.event.interactionEvent)})},ZD=e=>qm.getState(e).bind(s_.getHighlighted).bind(s_.getHighlighted),QD=e=>sl(e.element,rC)?O.some(e.element):Xl(e.element,`.`+rC),$D=(e,t,n)=>{QS(e).each(e=>{tC(e,n),QD(t).each(t=>{pn(t,`id`).each(t=>un(e.element,`aria-controls`,t))})}),un(n.element,`aria-selected`,`true`)},eO=(e,t,n)=>{un(n.element,`aria-selected`,`false`)},tO=e=>{QS(e).each(e=>Wy.focus(e))},nO=e=>TD.getExistingCoupled(e,`sandbox`).bind(ZS).map(eC).map(e=>e.fetchPattern).getOr(``);var rO;(function(e){e[e.ContentFocus=0]=`ContentFocus`,e[e.UiFocus=1]=`UiFocus`})(rO||={});let iO=(e,t,n,r,i)=>{let a=n.shared.providers,o=e=>i?{...e,shortcut:O.none(),icon:e.text.isSome()?O.none():e.icon}:e;switch(e.type){case`menuitem`:return Dw(e).fold(hC,e=>O.some(yD(o(e),t,a,r)));case`nestedmenuitem`:return kw(e).fold(hC,e=>O.some(bD(o(e),t,a,r,i)));case`togglemenuitem`:return jw(e).fold(hC,e=>O.some(xD(o(e),t,a,r)));case`separator`:return JC(e).fold(hC,e=>O.some(vD(e)));case`fancymenuitem`:return Tw(e).fold(hC,e=>SD(e,n));default:return console.error(`Unknown item in general menu`,e),O.none()}},aO=(e,t,n,r,i,a,o)=>{let s=r===1,c=!s||mC(e);return We(N(e,e=>{switch(e.type){case`separator`:return XC(e).fold(hC,e=>O.some(vD(e)));case`cardmenuitem`:return bw(e).fold(hC,e=>O.some(CD({...e,onAction:t=>{e.onAction(t),n(e.value,e.meta)}},i,a,{itemBehaviours:vT(e.meta,a),cardText:{matchText:t,highlightOn:o}})));case`autocompleteitem`:default:return ZC(e).fold(hC,e=>O.some(_D(e,t,s,`normal`,n,i,a,c)))}}))},oO=(e,t,n,r,i,a)=>{let o=mC(t),s=We(N(t,e=>{let t=e=>i?!Be(e,`text`):o,a=e=>iO(e,n,r,t(e),i);return e.type===`nestedmenuitem`&&e.getSubmenuItems().length<=0?a({...e,enabled:!1}):a(e)})),c=JD(a);return(i?gC:_C)(e,o,s,1,c)},sO=e=>Wb.singleData(e.value,e),cO=(e,t,n,r)=>{let i=$E(t,r),a=zS(r);return{data:sO({...e,movement:i,menuBehaviours:Pw.unnamedEvents(t===`auto`?[Vs((e,t)=>{Mw(e,4,a.item).each(({numColumns:t,numRows:n})=>{Ty.setGridSize(e,n,t)})})]:[])}),menu:{markers:zS(r),fakeFocus:n===rO.ContentFocus}}},lO=(e,t)=>bS(z.fromDom(t.startContainer)).map(t=>{let n=e.createRng();return n.selectNode(t.dom),n}),uO={register:(e,t)=>{let n=ro(!1),r=ro(!1),i=Bl(Kb.sketch({dom:{tag:`div`,classes:[`tox-autocompleter`]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Z([By(`dismissAutocompleter`,[q(fs(),()=>l())])]),lazySink:t.getSink})),a=()=>Kb.isOpen(i),o=r.get,s=()=>{a()&&Kb.hide(i)},c=()=>Kb.getContent(i).bind(e=>Ce(e.components(),0)),l=()=>e.execCommand(`mceAutocompleterClose`),u=r=>{let i=De(r,e=>O.from(e.columns)).getOr(1);return _e(r,r=>{let a=r.items;return aO(a,r.matchText,(t,i)=>{let a=e.selection.getRng();lO(e.dom,a).each(a=>{n.set(!0),r.onAction({hide:()=>l(),reload:t=>{s(),e.execCommand(`mceAutocompleterReload`,!1,{fetchOptions:t})}},a,t,i),n.set(!1)})},i,wS.BUBBLE_TO_SANDBOX,t,r.highlightOn)})},d=(t,n)=>{xS(z.fromDom(e.getBody())).each(r=>{let a=De(t,e=>O.from(e.columns)).getOr(1);Kb.showMenuAt(i,{anchor:{type:`node`,root:z.fromDom(e.getBody()),node:O.from(r)}},cO(_C(`autocompleter-value`,!0,n,a,{menuType:`normal`}),a,rO.ContentFocus,`normal`))}),c().each(s_.highlightFirst)},f=e=>{let t=u(e);t.length>0?d(e,t):s()};e.on(`AutocompleterStart`,({lookupData:e})=>{r.set(!0),n.set(!1),f(e)}),e.on(`AutocompleterUpdate`,({lookupData:e})=>f(e)),e.on(`AutocompleterEnd`,()=>{s(),r.set(!1),n.set(!1)});let p={cancelIfNecessary:l,isMenuOpen:a,isActive:o,isProcessingAction:n.get,getMenu:c};SS.setup(p,e)}},dO=[`visible`,`hidden`,`clip`],fO=e=>it(e).length>0&&!oe(dO,e),pO=e=>{if(St(e)){let t=xn(e,`overflow-x`),n=xn(e,`overflow-y`);return fO(t)||fO(n)}else return!1},mO=e=>{let t=kp(e,pO),n=t.length===0?tn(e).map(nn).map(e=>kp(e,pO)).getOr([]):t;return we(n).map(e=>({element:e,others:n.slice(1)}))},hO=(e,t)=>gS(e)?mO(t):O.none(),gO=e=>{let t=[...N(e.others,ni),oi()];return ai(ni(e.element),t)},_O=(e,t,n)=>Zl(e,t,n).isSome(),vO=(e,t)=>{let n=null;return{cancel:()=>{n!==null&&(clearTimeout(n),n=null)},schedule:(...r)=>{n=setTimeout(()=>{e.apply(null,r),n=null},t)}}},yO=e=>{let t=e.raw;return t.touches===void 0||t.touches.length!==1?O.none():O.some(t.touches[0])},bO=(e,t)=>{let n=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return n>5||r>5},xO=e=>{let t=uf(),n=ro(!1),r=vO(t=>{e.triggerEvent(ns(),t),n.set(!0)},400),i=fo([{key:Do(),value:e=>(yO(e).each(i=>{r.cancel();let a={x:i.clientX,y:i.clientY,target:e.target};r.schedule(e),n.set(!1),t.set(a)}),O.none())},{key:Oo(),value:e=>(r.cancel(),yO(e).each(e=>{t.on(n=>{bO(e,n)&&t.clear()})}),O.none())},{key:ko(),value:i=>(r.cancel(),t.get().filter(e=>Mt(e.target,i.target)).map(t=>n.get()?(i.prevent(),!1):e.triggerEvent(ts(),i)))}]);return{fireIfReady:(e,t)=>L(i,t).bind(t=>t(e))}},SO=e=>e.raw.which===$[0]&&!oe([`input`,`textarea`],yt(e.target))&&!_O(e.target,`[contenteditable="true"]`),CO=(e,t)=>{let n={stopBackspace:!0,...t},r=[`touchstart`,`touchmove`,`touchend`,`touchcancel`,`gesturestart`,`mousedown`,`mouseup`,`mouseover`,`mousemove`,`mouseout`,`click`],i=xO(n),a=N(r.concat([`selectstart`,`input`,`contextmenu`,`change`,`transitionend`,`transitioncancel`,`drag`,`dragstart`,`dragend`,`dragenter`,`dragleave`,`dragover`,`drop`,`keyup`]),t=>ff(e,t,e=>{i.fireIfReady(e,t).each(t=>{t&&e.kill()}),n.triggerEvent(t,e)&&e.kill()})),o=uf(),s=ff(e,`paste`,e=>{i.fireIfReady(e,`paste`).each(t=>{t&&e.kill()}),n.triggerEvent(`paste`,e)&&e.kill(),o.set(setTimeout(()=>{n.triggerEvent(Zo(),e)},0))}),c=ff(e,`keydown`,e=>{n.triggerEvent(`keydown`,e)?e.kill():n.stopBackspace&&SO(e)&&e.prevent()}),l=ff(e,`focusin`,e=>{n.triggerEvent(`focusin`,e)&&e.kill()}),u=uf(),d=ff(e,`focusout`,e=>{n.triggerEvent(`focusout`,e)&&e.kill(),u.set(setTimeout(()=>{n.triggerEvent(Xo(),e)},0))});return{unbind:()=>{P(a,e=>{e.unbind()}),c.unbind(),l.unbind(),d.unbind(),s.unbind(),o.on(clearTimeout),u.on(clearTimeout)}}},wO=(e,t)=>ro(L(e,`target`).getOr(t)),TO=(e,t)=>{let n=ro(!1),r=ro(!1);return{stop:()=>{n.set(!0)},cut:()=>{r.set(!0)},isStopped:n.get,isCut:r.get,event:e,setSource:t.set,getSource:t.get}},EO=e=>{let t=ro(!1);return{stop:()=>{t.set(!0)},cut:y,isStopped:t.get,isCut:D,event:e,setSource:E(`Cannot set source of a broadcasted event`),getSource:E(`Cannot get source of a broadcasted event`)}},DO=io.generate([{stopped:[]},{resume:[`element`]},{complete:[]}]),OO=(e,t,n,r,i,a)=>{let o=e(t,r),s=TO(n,i);return o.fold(()=>(a.logEventNoHandlers(t,r),DO.complete()),e=>{let n=e.descHandler;return Ic(n)(s),s.isStopped()?(a.logEventStopped(t,e.element,n.purpose),DO.stopped()):s.isCut()?(a.logEventCut(t,e.element,n.purpose),DO.complete()):Rt(e.element).fold(()=>(a.logNoParent(t,e.element,n.purpose),DO.complete()),r=>(a.logEventResponse(t,e.element,n.purpose),DO.resume(r)))})},kO=(e,t,n,r,i,a)=>OO(e,t,n,r,i,a).fold(re,r=>kO(e,t,n,r,i,a),D),AO=(e,t,n,r,i)=>OO(e,t,n,r,wO(n,r),i),jO=(e,t,n)=>{let r=EO(t);return P(e,e=>{let t=e.descHandler;Ic(t)(r)}),r.isStopped()},MO=(e,t,n,r)=>NO(e,t,n,n.target,r),NO=(e,t,n,r,i)=>kO(e,t,n,r,wO(n,r),i),PO=(e,t)=>({element:e,descHandler:t}),FO=(e,t)=>({id:e,descHandler:t}),IO=()=>{let e={},t=(t,n,r)=>{Ae(r,(r,i)=>{let a=e[i]===void 0?{}:e[i];a[n]=Fc(r,t),e[i]=a})},n=(e,t)=>lc(t).bind(t=>L(e,t)).map(e=>PO(t,e));return{registerId:t,unregisterId:t=>{Ae(e,(e,n)=>{Be(e,t)&&delete e[t]})},filterByType:t=>L(e,t).map(e=>Le(e,(e,t)=>FO(t,e))).getOr([]),find:(t,r,i)=>L(e,r).bind(e=>vo(i,t=>n(e,t),t))}},LO=()=>{let e=IO(),t={},n=e=>{let t=e.element;return lc(t).getOrThunk(()=>sc(`uid-`,e.element))},r=(e,n)=>{let r=t[n];if(r===e)a(e);else throw Error(`The tagId "`+n+`" is already used by: `+Qs(r.element)+`
Cannot use it for: `+Qs(e.element)+`
The conflicting element is`+(on(r.element)?` `:` not `)+`already in the DOM`)},i=i=>{let a=n(i);Ve(t,a)&&r(i,a);let o=[i];e.registerId(o,a,i.events),t[a]=i},a=n=>{lc(n.element).each(n=>{delete t[n],e.unregisterId(n)})};return{find:(t,n,r)=>e.find(t,n,r),filter:t=>e.filterByType(t),register:i,unregister:a,getById:e=>L(t,e)}},RO=Cg({name:`Container`,factory:e=>{let{attributes:t,...n}=e.dom;return{uid:e.uid,dom:{tag:`div`,attributes:{role:`presentation`,...t},...n},components:e.components,behaviours:ph(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[K(`components`,[]),fh(`containerBehaviours`,[]),K(`events`,{}),K(`domModification`,{}),K(`eventOrder`,{})]}),zO=e=>{let t=t=>Rt(e.element).fold(re,e=>Mt(t,e)),n=LO(),r=(e,r)=>n.find(t,e,r),i=CO(e.element,{triggerEvent:(e,t)=>du(e,t.target,n=>MO(r,e,t,n))}),a={debugInfo:S(`real`),triggerEvent:(e,t,n)=>{du(e,t,i=>NO(r,e,n,t,i))},triggerFocus:(e,t)=>{lc(e).fold(()=>{Ad(e)},n=>{du(Yo(),e,n=>(AO(r,Yo(),{originator:t,kill:y,prevent:y,target:e},e,n),!1))})},triggerEscape:(e,t)=>{a.triggerEvent(`keydown`,e.element,t.event)},getByUid:e=>h(e),getByDom:e=>g(e),build:Bl,buildOrPatch:zl,addToGui:e=>{c(e)},removeFromGui:e=>{l(e)},addToWorld:e=>{o(e)},removeFromWorld:e=>{s(e)},broadcast:e=>{f(e)},broadcastOn:(e,t)=>{p(e,t)},broadcastEvent:(e,t)=>{m(e,t)},isConnected:re},o=e=>{e.connect(a),wt(e.element)||(n.register(e),P(e.components(),o),a.triggerEvent(as(),e.element,{target:e.element}))},s=e=>{wt(e.element)||(P(e.components(),s),n.unregister(e)),e.disconnect()},c=t=>{Cm(e,t)},l=e=>{Em(e)},u=()=>{i.unbind(),Hr(e.element)},d=e=>{P(n.filter(Qo()),t=>{let n=t.descHandler;Ic(n)(e)})},f=e=>{d({universal:!0,data:e})},p=(e,t)=>{d({universal:!1,channels:e,data:t})},m=(e,t)=>jO(n.filter(e),t),h=e=>n.getById(e).fold(()=>ui.error(Error(`Could not find component with uid: "`+e+`" in system.`)),ui.value),g=e=>h(lc(e).getOr(`not found`));return o(e),{root:e,element:e.element,destroy:u,add:c,remove:l,getByUid:h,getByDom:g,addToWorld:o,removeFromWorld:s,broadcast:f,broadcastOn:p,broadcastEvent:m}},BO=(e,t)=>({dom:{tag:`div`,classes:[`tox-bar`,`tox-form__controls-h-stack`]},components:N(e.items,t.interpreter)}),VO=S([K(`prefix`,`form-field`),fh(`fieldBehaviours`,[Dg,Q])]),HO=S([Kh({schema:[G(`dom`)],name:`label`}),Kh({factory:{sketch:e=>({uid:e.uid,dom:{tag:`span`,styles:{display:`none`},attributes:{"aria-hidden":`true`},innerHtml:e.text}})},schema:[G(`text`)],name:`aria-descriptor`}),Wh({factory:{sketch:e=>{let t=lo(e,[`factory`]);return e.factory.sketch(t)}},schema:[G(`factory`)],name:`field`})]),UO=wg({name:`FormField`,configFields:VO(),partFields:HO(),factory:(e,t,n,r)=>{let i=mh(e.fieldBehaviours,[Dg.config({find:t=>ag(t,e,`field`)}),Q.config({store:{mode:`manual`,getValue:e=>Dg.getCurrent(e).bind(Q.getValue),setValue:(e,t)=>{Dg.getCurrent(e).each(e=>{Q.setValue(e,t)})}}})]),a=Os([Vs((t,n)=>{let r=sg(t,e,[`label`,`field`,`aria-descriptor`]);r.field().each(t=>{let n=J(e.prefix);r.label().each(e=>{un(e.element,`for`,n),un(t.element,`id`,n)}),r[`aria-descriptor`]().each(n=>{let r=J(e.prefix);un(n.element,`id`,r),un(t.element,`aria-describedby`,r)})})})]);return{uid:e.uid,dom:e.dom,components:t,behaviours:i,events:a,apis:{getField:t=>ag(t,e,`field`),getLabel:t=>ag(t,e,`label`)}}},apis:{getField:(e,t)=>e.getField(t),getLabel:(e,t)=>e.getLabel(t)}});var WO=Object.freeze({__proto__:null,exhibit:(e,t)=>kc({attributes:fo([{key:t.tabAttr,value:`true`}])})});let GO=wd({fields:[K(`tabAttr`,`data-alloy-tabstop`)],name:`tabstopping`,active:WO});var KO=tinymce.util.Tools.resolve(`tinymce.html.Entities`);let qO=(e,t,n,r)=>{let i=YO(e,t,n,r);return UO.sketch(i)},JO=(e,t)=>qO(e,t,[],[]),YO=(e,t,n,r)=>({dom:ZO(n),components:e.toArray().concat([t]),fieldBehaviours:Z(r)}),XO=()=>ZO([]),ZO=e=>({tag:`div`,classes:[`tox-form__group`].concat(e)}),QO=(e,t)=>UO.parts.label({dom:{tag:`label`,classes:[`tox-label`]},components:[Fl(t.translate(e))]}),$O=J(`form-component-change`),ek=J(`form-close`),tk=J(`form-cancel`),nk=J(`form-action`),rk=J(`form-submit`),ik=J(`form-block`),ak=J(`form-unblock`),ok=J(`form-tabchange`),sk=J(`form-resize`),ck=(e,t,n)=>{let r=e.label.map(e=>QO(e,t)),i=e=>(t,n)=>{Zl(n.event.target,`[data-collection-item-value]`).each(r=>{e(t,n,r,fn(r,`data-collection-item-value`))})},a=(n,r)=>{let i=N(r,n=>{let r=Xb.translate(n.text),i=e.columns===1?`<div class="tox-collection__item-label">${r}</div>`:``,a=`<div class="tox-collection__item-icon">${n.icon}</div>`,o={_:` `," - ":` `,"-":` `},s=r.replace(/\_| \- |\-/g,e=>o[e]);return`<div class="tox-collection__item${t.isDisabled()?` tox-collection__item--state-disabled`:``}" tabindex="-1" data-collection-item-value="${KO.encodeAllRaw(n.value)}" title="${s}" aria-label="${s}">${a}${i}</div>`}),a=N(e.columns!==`auto`&&e.columns>1?M(i,e.columns):[i],e=>`<div class="tox-collection__group">${e.join(``)}</div>`);qs(n.element,a.join(``))},o=i((n,r,i,a)=>{r.stop(),t.isDisabled()||Ss(n,nk,{name:e.name,value:a})}),s=[q(Fo(),i((e,t,n)=>{Ad(n)})),q(Ho(),o),q(ts(),o),q(Io(),i((e,t,n)=>{Xl(e.element,`.`+NS).each(e=>{ol(e,NS)}),il(n,NS)})),q(Lo(),i(e=>{Xl(e.element,`.`+NS).each(e=>{ol(e,NS)})})),Ws(i((t,n,r,i)=>{Ss(t,nk,{name:e.name,value:i})}))],c=(e,t)=>N(Ap(e.element,`.tox-collection__item`),t);return qO(r,UO.parts.field({dom:{tag:`div`,classes:[`tox-collection`].concat(e.columns===1?[`tox-collection--list`]:[`tox-collection--grid`])},components:[],factory:{sketch:C},behaviours:Z([Hg.config({disabled:t.isDisabled,onDisabled:e=>{c(e,e=>{il(e,`tox-collection__item--state-disabled`),un(e,`aria-disabled`,!0)})},onEnabled:e=>{c(e,e=>{ol(e,`tox-collection__item--state-disabled`),hn(e,`aria-disabled`)})}}),qw(),Ry.config({}),Q.config({store:{mode:`memory`,initialValue:n.getOr([])},onSetValue:(t,n)=>{a(t,n),e.columns===`auto`&&Mw(t,5,`tox-collection__item`).each(({numRows:e,numColumns:n})=>{Ty.setGridSize(t,e,n)}),xs(t,sk)}}),GO.config({}),Ty.config(eD(e.columns,`normal`)),By(`collection-events`,s)]),eventOrder:{[$o()]:[`disabling`,`alloy.base.behaviour`,`collection-events`]}}),[`tox-form__group--collection`],[])},lk=[`input`,`textarea`],uk=e=>oe(lk,yt(e)),dk=(e,t)=>{ol(t.getRoot(e).getOr(e.element),t.invalidClass),t.notify.each(t=>{uk(e.element)&&un(e.element,`aria-invalid`,!1),t.getContainer(e).each(e=>{qs(e,t.validHtml)}),t.onValid(e)})},fk=(e,t,n,r)=>{il(t.getRoot(e).getOr(e.element),t.invalidClass),t.notify.each(t=>{uk(e.element)&&un(e.element,`aria-invalid`,!0),t.getContainer(e).each(e=>{qs(e,r)}),t.onInvalid(e,r)})},pk=(e,t,n)=>t.validator.fold(()=>AD.pure(ui.value(!0)),t=>t.validate(e)),mk=(e,t,n)=>(t.notify.each(t=>{t.onValidate(e)}),pk(e,t).map(r=>e.getSystem().isConnected()?r.fold(r=>(fk(e,t,n,r),ui.error(r)),n=>(dk(e,t),ui.value(n))):ui.error(`No longer in system`)));var hk=Object.freeze({__proto__:null,markValid:dk,markInvalid:fk,query:pk,run:mk,isInvalid:(e,t)=>sl(t.getRoot(e).getOr(e.element),t.invalidClass)}),gk=Object.freeze({__proto__:null,events:(e,t)=>e.validator.map(n=>Os([q(n.onEvent,n=>{mk(n,e,t).get(C)})].concat(n.validateOnLoad?[Vs(n=>{mk(n,e,t).get(y)})]:[]))).getOr({})});let _k=wd({fields:[G(`invalidClass`),K(`getRoot`,O.none),Ka(`notify`,[K(`aria`,`alert`),K(`getContainer`,O.none),K(`validHtml`,``),bu(`onValid`),bu(`onInvalid`),bu(`onValidate`)]),Ka(`validator`,[G(`validate`),K(`onEvent`,`input`),K(`validateOnLoad`,!0)])],name:`invalidating`,active:gk,apis:hk,extra:{validation:e=>t=>{let n=Q.getValue(t);return AD.pure(e(n))}}}),vk=wd({fields:[],name:`unselecting`,active:Object.freeze({__proto__:null,events:()=>Os([ks(Ko(),re)]),exhibit:()=>kc({styles:{"-webkit-user-select":`none`,"user-select":`none`,"-ms-user-select":`none`,"-moz-user-select":`-moz-none`},attributes:{unselectable:`on`}})})}),yk=(e,t)=>qD.sketch({dom:e.dom,components:e.components,toggleClass:`mce-active`,dropdownBehaviours:Z([Jw.button(t.providers.isDisabled),qw(),vk.config({}),GO.config({})]),layouts:e.layouts,sandboxClasses:[`tox-dialog__popups`],lazySink:t.getSink,fetch:n=>AD.nu(t=>e.fetch(t)).map(r=>O.from(sO(Di(ZE(J(`menu-value`),r,t=>{e.onItemAction(n,t)},e.columns,e.presets,wS.CLOSE_ON_EXECUTE,D,t.providers),{movement:$E(e.columns,e.presets)})))),parts:{menu:HS(!1,1,e.presets)}}),bk=J(`color-input-change`),xk=J(`color-swatch-change`),Sk=J(`color-picker-cancel`),Ck=(e,t,n,r)=>{let i=UO.parts.field({factory:qS,inputClasses:[`tox-textfield`],data:r,onSetValue:e=>_k.run(e).get(y),inputBehaviours:Z([Hg.config({disabled:t.providers.isDisabled}),qw(),GO.config({}),_k.config({invalidClass:`tox-textbox-field-invalid`,getRoot:e=>Bt(e.element),notify:{onValid:e=>{Ss(e,bk,{color:Q.getValue(e)})}},validator:{validateOnLoad:!1,validate:e=>{let t=Q.getValue(e);if(t.length===0)return AD.pure(ui.value(!0));{let e=z.fromTag(`span`);yn(e,`background-color`,t);let n=Cn(e,`background-color`).fold(()=>ui.error(`blah`),e=>ui.value(t));return AD.pure(n)}}}})]),selectOnFocus:!1}),a=e.label.map(e=>QO(e,t.providers)),o=(e,t)=>{Ss(e,xk,{value:t})},s=(t,r)=>{c.getOpt(t).each(t=>{r===`custom`?n.colorPicker(n=>{n.fold(()=>xs(t,Sk),n=>{o(t,n),gE(e.storageKey,n)})},`#ffffff`):r===`remove`?o(t,``):o(t,r)})},c=Yb(yk({dom:{tag:`span`,attributes:{"aria-label":t.providers.translate(`Color swatch`)}},layouts:{onRtl:()=>[td,ed,ad],onLtr:()=>[ed,td,ad]},components:[],fetch:WE(n.getColors(e.storageKey),e.storageKey,n.hasCustomColors()),columns:n.getColorCols(e.storageKey),presets:`color`,onItemAction:s},t));return UO.sketch({dom:{tag:`div`,classes:[`tox-form__group`]},components:a.toArray().concat([{dom:{tag:`div`,classes:[`tox-color-input`]},components:[i,c.asSpec()]}]),fieldBehaviours:Z([By(`form-field-events`,[q(bk,(t,n)=>{c.getOpt(t).each(e=>{yn(e.element,`background-color`,n.event.color)}),Ss(t,$O,{name:e.name})}),q(xk,(e,t)=>{UO.getField(e).each(n=>{Q.setValue(n,t.event.value),Dg.getCurrent(e).each(Wy.focus)})}),q(Sk,(e,t)=>{UO.getField(e).each(t=>{Dg.getCurrent(e).each(Wy.focus)})})])])})},wk=Kh({schema:[G(`dom`)],name:`label`}),Tk=e=>Kh({name:``+e+`-edge`,overrides:t=>t.model.manager.edgeActions[e].fold(()=>({}),e=>({events:Os([Ms(Do(),(t,n,r)=>e(t,r),[t]),Ms(jo(),(t,n,r)=>e(t,r),[t]),Ms(Mo(),(t,n,r)=>{r.mouseIsDown.get()&&e(t,r)},[t])])}))}),Ek=Tk(`top-left`),Dk=Tk(`top`),Ok=Tk(`top-right`),kk=Tk(`right`),Ak=Tk(`bottom-right`),jk=Tk(`bottom`),Mk=Tk(`bottom-left`);var Nk=[wk,Tk(`left`),kk,Dk,jk,Ek,Ok,Mk,Ak,Wh({name:`thumb`,defaults:S({dom:{styles:{position:`absolute`}}}),overrides:e=>({events:Os([Is(Do(),e,`spectrum`),Is(Oo(),e,`spectrum`),Is(ko(),e,`spectrum`),Is(jo(),e,`spectrum`),Is(Mo(),e,`spectrum`),Is(Po(),e,`spectrum`)])})}),Wh({schema:[Da(`mouseIsDown`,()=>ro(!1))],name:`spectrum`,overrides:e=>{let t=e.model.manager,n=(n,r)=>t.getValueFromEvent(r).map(r=>t.setValueFrom(n,e,r));return{behaviours:Z([Ty.config({mode:`special`,onLeft:n=>t.onLeft(n,e),onRight:n=>t.onRight(n,e),onUp:n=>t.onUp(n,e),onDown:n=>t.onDown(n,e)}),Wy.config({})]),events:Os([q(Do(),n),q(Oo(),n),q(jo(),n),q(Mo(),(t,r)=>{e.mouseIsDown.get()&&n(t,r)})])}}})];let Pk=S(`slider.change.value`),Fk=e=>e.type.indexOf(`touch`)!==-1,Ik=e=>{let t=e.event.raw;if(Fk(t)){let e=t;return e.touches!==void 0&&e.touches.length===1?O.some(e.touches[0]).map(e=>Pn(e.clientX,e.clientY)):O.none()}else{let e=t;return e.clientX===void 0?O.none():O.some(e).map(e=>Pn(e.clientX,e.clientY))}},Lk=e=>e.model.minX,Rk=e=>e.model.minY,zk=e=>e.model.minX-1,Bk=e=>e.model.minY-1,Vk=e=>e.model.maxX,Hk=e=>e.model.maxY,Uk=e=>e.model.maxX+1,Wk=e=>e.model.maxY+1,Gk=(e,t,n)=>t(e)-n(e),Kk=e=>Gk(e,Vk,Lk),qk=e=>Gk(e,Hk,Rk),Jk=e=>Kk(e)/2,Yk=e=>qk(e)/2,Xk=e=>e.stepSize,Zk=e=>e.snapToGrid,Qk=e=>e.snapStart,$k=e=>e.rounded,eA=(e,t)=>e[t+`-edge`]!==void 0,tA=e=>eA(e,`left`),nA=e=>eA(e,`right`),rA=e=>eA(e,`top`),iA=e=>eA(e,`bottom`),aA=e=>e.model.value.get(),oA=(e,t)=>({x:e,y:t}),sA=(e,t)=>{Ss(e,Pk(),{value:t})},cA=(e,t)=>{sA(e,oA(zk(t),Bk(t)))},lA=(e,t)=>{sA(e,Bk(t))},uA=(e,t)=>{sA(e,oA(Jk(t),Bk(t)))},dA=(e,t)=>{sA(e,oA(Uk(t),Bk(t)))},fA=(e,t)=>{sA(e,Uk(t))},pA=(e,t)=>{sA(e,oA(Uk(t),Yk(t)))},mA=(e,t)=>{sA(e,oA(Uk(t),Wk(t)))},hA=(e,t)=>{sA(e,Wk(t))},gA=(e,t)=>{sA(e,oA(Jk(t),Wk(t)))},_A=(e,t)=>{sA(e,oA(zk(t),Wk(t)))},vA=(e,t)=>{sA(e,zk(t))},yA=(e,t)=>{sA(e,oA(zk(t),Yk(t)))},bA=(e,t,n,r)=>e<t?e:e>n?n:e===t?t-1:Math.max(t,e-r),xA=(e,t,n,r)=>e>n?e:e<t?t:e===n?n+1:Math.min(n,e+r),SA=(e,t,n)=>Math.max(t,Math.min(n,e)),CA=(e,t,n,r,i)=>i.fold(()=>{let i=e-t;return SA(t+Math.round(i/r)*r,t-1,n+1)},t=>{let i=(e-t)%r,a=Math.round(i/r),o=Math.floor((e-t)/r),s=Math.floor((n-t)/r),c=t+Math.min(s,o+a)*r;return Math.max(t,c)}),wA=(e,t,n)=>Math.min(n,Math.max(e,t))-t,TA=e=>{let{min:t,max:n,range:r,value:i,step:a,snap:o,snapStart:s,rounded:c,hasMinEdge:l,hasMaxEdge:u,minBound:d,maxBound:f,screenRange:p}=e,m=l?t-1:t,h=u?n+1:n;if(i<d)return m;if(i>f)return h;{let e=SA(wA(i,d,f)/p*r+t,m,h);return o&&e>=t&&e<=n?CA(e,t,n,a,s):c?Math.round(e):e}},EA=e=>{let{min:t,max:n,range:r,value:i,hasMinEdge:a,hasMaxEdge:o,maxBound:s,maxOffset:c,centerMinEdge:l,centerMaxEdge:u}=e;return i<t?a?0:l:i>n?o?s:u:(i-t)/r*c},DA=`right`,OA=`bottom`,kA=`left`,AA=e=>e.element.dom.getBoundingClientRect(),jA=(e,t)=>e[t],MA=e=>jA(AA(e),kA),NA=e=>jA(AA(e),DA),PA=e=>jA(AA(e),`top`),FA=e=>jA(AA(e),OA),IA=e=>jA(AA(e),`width`),LA=e=>jA(AA(e),`height`),RA=(e,t,n)=>(e+t)/2-n,zA=(e,t)=>{let n=AA(e),r=AA(t);return RA(jA(n,kA),jA(n,DA),jA(r,kA))},BA=(e,t)=>{let n=AA(e),r=AA(t);return RA(jA(n,`top`),jA(n,OA),jA(r,`top`))},VA=(e,t)=>{Ss(e,Pk(),{value:t})},HA=(e,t,n)=>TA({min:Lk(t),max:Vk(t),range:Kk(t),value:n,step:Xk(t),snap:Zk(t),snapStart:Qk(t),rounded:$k(t),hasMinEdge:tA(t),hasMaxEdge:nA(t),minBound:MA(e),maxBound:NA(e),screenRange:IA(e)}),UA=(e,t,n)=>{let r=HA(e,t,n);return VA(e,r),r},WA=(e,t)=>{VA(e,Lk(t))},GA=(e,t)=>{VA(e,Vk(t))},KA=(e,t,n)=>{let r=(e>0?xA:bA)(aA(n),Lk(n),Vk(n),Xk(n));return VA(t,r),O.some(r)},qA=e=>(t,n)=>KA(e,t,n).map(re),JA=e=>Ik(e).map(e=>e.left),YA=(e,t,n,r,i)=>{let a=IA(e),o=r.bind(t=>O.some(zA(t,e))).getOr(0),s=i.bind(t=>O.some(zA(t,e))).getOr(a);return EA({min:Lk(t),max:Vk(t),range:Kk(t),value:n,hasMinEdge:tA(t),hasMaxEdge:nA(t),minBound:MA(e),minOffset:0,maxBound:NA(e),maxOffset:a,centerMinEdge:o,centerMaxEdge:s})},XA=(e,t,n,r,i,a)=>{let o=YA(t,a,n,r,i);return MA(t)-MA(e)+o},ZA=(e,t,n,r)=>{let i=aA(n),a=XA(e,r.getSpectrum(e),i,r.getLeftEdge(e),r.getRightEdge(e),n),o=Vn(t.element)/2;yn(t.element,`left`,a-o+`px`)},QA=qA(-1),$A=qA(1),ej=O.none,tj=O.none,nj={"top-left":O.none(),top:O.none(),"top-right":O.none(),right:O.some(fA),"bottom-right":O.none(),bottom:O.none(),"bottom-left":O.none(),left:O.some(vA)};var rj=Object.freeze({__proto__:null,setValueFrom:UA,setToMin:WA,setToMax:GA,findValueOfOffset:HA,getValueFromEvent:JA,findPositionOfValue:XA,setPositionFromValue:ZA,onLeft:QA,onRight:$A,onUp:ej,onDown:tj,edgeActions:nj});let ij=(e,t)=>{Ss(e,Pk(),{value:t})},aj=(e,t,n)=>TA({min:Rk(t),max:Hk(t),range:qk(t),value:n,step:Xk(t),snap:Zk(t),snapStart:Qk(t),rounded:$k(t),hasMinEdge:rA(t),hasMaxEdge:iA(t),minBound:PA(e),maxBound:FA(e),screenRange:LA(e)}),oj=(e,t,n)=>{let r=aj(e,t,n);return ij(e,r),r},sj=(e,t)=>{ij(e,Rk(t))},cj=(e,t)=>{ij(e,Hk(t))},lj=(e,t,n)=>{let r=(e>0?xA:bA)(aA(n),Rk(n),Hk(n),Xk(n));return ij(t,r),O.some(r)},uj=e=>(t,n)=>lj(e,t,n).map(re),dj=e=>Ik(e).map(e=>e.top),fj=(e,t,n,r,i)=>{let a=LA(e),o=r.bind(t=>O.some(BA(t,e))).getOr(0),s=i.bind(t=>O.some(BA(t,e))).getOr(a);return EA({min:Rk(t),max:Hk(t),range:qk(t),value:n,hasMinEdge:rA(t),hasMaxEdge:iA(t),minBound:PA(e),minOffset:0,maxBound:FA(e),maxOffset:a,centerMinEdge:o,centerMaxEdge:s})},pj=(e,t,n,r,i,a)=>{let o=fj(t,a,n,r,i);return PA(t)-PA(e)+o},mj=(e,t,n,r)=>{let i=aA(n),a=pj(e,r.getSpectrum(e),i,r.getTopEdge(e),r.getBottomEdge(e),n),o=An(t.element)/2;yn(t.element,`top`,a-o+`px`)},hj=O.none,gj=O.none,_j=uj(-1),vj=uj(1),yj={"top-left":O.none(),top:O.some(lA),"top-right":O.none(),right:O.none(),"bottom-right":O.none(),bottom:O.some(hA),"bottom-left":O.none(),left:O.none()};var bj=Object.freeze({__proto__:null,setValueFrom:oj,setToMin:sj,setToMax:cj,findValueOfOffset:aj,getValueFromEvent:dj,findPositionOfValue:pj,setPositionFromValue:mj,onLeft:hj,onRight:gj,onUp:_j,onDown:vj,edgeActions:yj});let xj=(e,t)=>{Ss(e,Pk(),{value:t})},Sj=(e,t)=>({x:e,y:t}),Cj=(e,t,n)=>{let r=Sj(HA(e,t,n.left),aj(e,t,n.top));return xj(e,r),r},wj=(e,t,n,r)=>{let i=e>0?xA:bA,a=t?aA(r).x:i(aA(r).x,Lk(r),Vk(r),Xk(r));return xj(n,Sj(a,t?i(aA(r).y,Rk(r),Hk(r),Xk(r)):aA(r).y)),O.some(a)},Tj=(e,t)=>(n,r)=>wj(e,t,n,r).map(re),Ej=(e,t)=>{xj(e,Sj(Lk(t),Rk(t)))},Dj=(e,t)=>{xj(e,Sj(Vk(t),Hk(t)))},Oj=e=>Ik(e),kj=(e,t,n,r)=>{let i=aA(n),a=XA(e,r.getSpectrum(e),i.x,r.getLeftEdge(e),r.getRightEdge(e),n),o=pj(e,r.getSpectrum(e),i.y,r.getTopEdge(e),r.getBottomEdge(e),n),s=Vn(t.element)/2,c=An(t.element)/2;yn(t.element,`left`,a-s+`px`),yn(t.element,`top`,o-c+`px`)},Aj=Tj(-1,!1),jj=Tj(1,!1),Mj=Tj(-1,!0),Nj=Tj(1,!0),Pj={"top-left":O.some(cA),top:O.some(uA),"top-right":O.some(dA),right:O.some(pA),"bottom-right":O.some(mA),bottom:O.some(gA),"bottom-left":O.some(_A),left:O.some(yA)};var Fj=Object.freeze({__proto__:null,setValueFrom:Cj,setToMin:Ej,setToMax:Dj,getValueFromEvent:Oj,setPositionFromValue:kj,onLeft:Aj,onRight:jj,onUp:Mj,onDown:Nj,edgeActions:Pj});let Ij=wg({name:`Slider`,configFields:[K(`stepSize`,1),K(`onChange`,y),K(`onChoose`,y),K(`onInit`,y),K(`onDragStart`,y),K(`onDragEnd`,y),K(`snapToGrid`,!1),K(`rounded`,!0),za(`snapStart`),ka(`model`,wa(`mode`,{x:[K(`minX`,0),K(`maxX`,100),Da(`value`,e=>ro(e.mode.minX)),G(`getInitialValue`),wu(`manager`,rj)],y:[K(`minY`,0),K(`maxY`,100),Da(`value`,e=>ro(e.mode.minY)),G(`getInitialValue`),wu(`manager`,bj)],xy:[K(`minX`,0),K(`maxX`,100),K(`minY`,0),K(`maxY`,100),Da(`value`,e=>ro({x:e.mode.minX,y:e.mode.minY})),G(`getInitialValue`),wu(`manager`,Fj)]})),fh(`sliderBehaviours`,[Ty,Q]),Da(`mouseIsDown`,()=>ro(!1))],partFields:Nk,factory:(e,t,n,r)=>{let i=t=>og(t,e,`thumb`),a=t=>og(t,e,`spectrum`),o=t=>ag(t,e,`left-edge`),s=t=>ag(t,e,`right-edge`),c=t=>ag(t,e,`top-edge`),l=t=>ag(t,e,`bottom-edge`),u=e.model,d=u.manager,f=(t,n)=>{d.setPositionFromValue(t,n,e,{getLeftEdge:o,getRightEdge:s,getTopEdge:c,getBottomEdge:l,getSpectrum:a})},p=(e,t)=>{u.value.set(t),f(e,i(e))},m=(t,n)=>{p(t,n);let r=i(t);return e.onChange(t,r,n),O.some(!0)},h=t=>{d.setToMin(t,e)},g=t=>{d.setToMax(t,e)},_=t=>{let n=()=>{ag(t,e,`thumb`).each(n=>{let r=u.value.get();e.onChoose(t,n,r)})},r=e.mouseIsDown.get();e.mouseIsDown.set(!1),r&&n()},v=(t,n)=>{n.stop(),e.mouseIsDown.set(!0),e.onDragStart(t,i(t))},y=(t,n)=>{n.stop(),e.onDragEnd(t,i(t)),_(t)};return{uid:e.uid,dom:e.dom,components:t,behaviours:mh(e.sliderBehaviours,[Ty.config({mode:`special`,focusIn:t=>ag(t,e,`spectrum`).map(Ty.focusIn).map(re)}),Q.config({store:{mode:`manual`,getValue:e=>u.value.get(),setValue:p}}),Od.config({channels:{[Xm()]:{onReceive:_}}})]),events:Os([q(Pk(),(e,t)=>{m(e,t.event.value)}),Vs((t,n)=>{let r=u.getInitialValue();u.value.set(r);let o=i(t);f(t,o);let s=a(t);e.onInit(t,o,s,u.value.get())}),q(Do(),v),q(ko(),y),q(jo(),v),q(Po(),y)]),apis:{resetToMin:h,resetToMax:g,setValue:p,refresh:f},domModification:{styles:{position:`relative`}}}},apis:{setValue:(e,t,n)=>{e.setValue(t,n)},resetToMin:(e,t)=>{e.resetToMin(t)},resetToMax:(e,t)=>{e.resetToMax(t)},refresh:(e,t)=>{e.refresh(t)}}}),Lj=J(`rgb-hex-update`),Rj=J(`slider-update`),zj=J(`palette-update`),Bj=(e,t)=>{let n=Ij.parts.spectrum({dom:{tag:`div`,classes:[t(`hue-slider-spectrum`)],attributes:{role:`presentation`}}}),r=Ij.parts.thumb({dom:{tag:`div`,classes:[t(`hue-slider-thumb`)],attributes:{role:`presentation`}}});return Ij.sketch({dom:{tag:`div`,classes:[t(`hue-slider`)],attributes:{role:`presentation`}},rounded:!1,model:{mode:`y`,getInitialValue:S(0)},components:[n,r],sliderBehaviours:Z([Wy.config({})]),onChange:(e,t,n)=>{Ss(e,Rj,{value:n})}})},Vj=`form`,Hj=[fh(`formBehaviours`,[Q])],Uj=e=>`<alloy.field.`+e+`>`,Wj=e=>{let t=(()=>{let e=[];return{field:(t,n)=>(e.push(t),eg(Vj,Uj(t),n)),record:S(e)}})(),n=e(t);return _g(Vj,Hj,N(t.record(),e=>Wh({name:e,pname:Uj(e)})),Kj,n)},Gj=(e,t)=>e.fold(()=>ui.error(t),ui.value),Kj=(e,t)=>({uid:e.uid,dom:e.dom,components:t,behaviours:mh(e.formBehaviours,[Q.config({store:{mode:`manual`,getValue:t=>je(cg(t,e),(e,t)=>e().bind(e=>Gj(Dg.getCurrent(e),Error(`Cannot find a current component to extract the value from for form part '${t}': `+Qs(e.element)))).map(Q.getValue)),setValue:(t,n)=>{Ae(n,(n,r)=>{ag(t,e,r).each(e=>{Dg.getCurrent(e).each(e=>{Q.setValue(e,n)})})})}}})]),apis:{getField:(t,n)=>ag(t,e,n).bind(Dg.getCurrent)}}),qj={getField:Sc((e,t,n)=>e.getField(t,n)),sketch:Wj},Jj=J(`valid-input`),Yj=J(`invalid-input`),Xj=J(`validating-input`),Zj=`colorcustom.rgb.`,Qj=(e,t,n,r)=>{let i=(n,r)=>_k.config({invalidClass:t(`invalid`),notify:{onValidate:e=>{Ss(e,Xj,{type:n})},onValid:e=>{Ss(e,Jj,{type:n,value:Q.getValue(e)})},onInvalid:e=>{Ss(e,Yj,{type:n,value:Q.getValue(e)})}},validator:{validate:t=>{let n=r(Q.getValue(t))?ui.value(!0):ui.error(e(`aria.input.invalid`));return AD.pure(n)},validateOnLoad:!1}}),a=(n,r,a,o,s)=>{let c=e(Zj+`range`),l=[UO.parts.label({dom:{tag:`label`,attributes:{"aria-label":o}},components:[Fl(a)]}),UO.parts.field({data:s,factory:qS,inputAttributes:{type:`text`,...r===`hex`?{"aria-live":`polite`}:{}},inputClasses:[t(`textfield`)],inputBehaviours:Z([i(r,n),GO.config({})]),onSetValue:e=>{_k.isInvalid(e)&&_k.run(e).get(y)}})],u=r===`hex`?[]:[UO.parts[`aria-descriptor`]({text:c})];return{dom:{tag:`div`,attributes:{role:`presentation`}},components:l.concat(u)}},o=(e,t)=>{let n=FT(t);return qj.getField(e,`hex`).each(t=>{Wy.isFocused(t)||Q.setValue(e,{hex:n.value})}),n},s=(e,t)=>{let n=t.red,r=t.green,i=t.blue;Q.setValue(e,{red:n,green:r,blue:i})},c=Yb({dom:{tag:`div`,classes:[t(`rgba-preview`)],styles:{"background-color":`white`},attributes:{role:`presentation`}}}),l=(e,t)=>{c.getOpt(e).each(e=>{yn(e.element,`background-color`,`#`+t.value)})};return Cg({factory:()=>{let i={red:ro(O.some(255)),green:ro(O.some(255)),blue:ro(O.some(255)),hex:ro(O.some(`ffffff`))},u=(e,t)=>{let n=WT(t);s(e,n),m(n)},d=e=>i[e].get(),f=(e,t)=>{i[e].set(t)},p=()=>d(`red`).bind(e=>d(`green`).bind(t=>d(`blue`).map(n=>VT(e,t,n,1)))),m=e=>{let t=e.red,n=e.green,r=e.blue;f(`red`,O.some(t)),f(`green`,O.some(n)),f(`blue`,O.some(r))},h=(e,t)=>{let n=t.event;n.type===`hex`?r(e):f(n.type,O.none())},g=(e,t)=>{n(e);let r=ET(t);f(`hex`,O.some(r.value));let i=WT(r);s(e,i),m(i),Ss(e,Lj,{hex:r}),l(e,r)},_=(e,t,n)=>{let r=parseInt(n,10);f(t,O.some(r)),p().each(t=>{let n=o(e,t);Ss(e,Lj,{hex:n}),l(e,n)})},v=e=>e.type===`hex`,y=(e,t)=>{let n=t.event;v(n)?g(e,n.value):_(e,n.type,n.value)},b=t=>({label:e(Zj+t+`.label`),description:e(Zj+t+`.description`)}),x=b(`red`),ee=b(`green`),S=b(`blue`),C=b(`hex`);return Di(qj.sketch(n=>({dom:{tag:`form`,classes:[t(`rgb-form`)],attributes:{"aria-label":e(`aria.color.picker`)}},components:[n.field(`red`,UO.sketch(a(HT,`red`,x.label,x.description,255))),n.field(`green`,UO.sketch(a(HT,`green`,ee.label,ee.description,255))),n.field(`blue`,UO.sketch(a(HT,`blue`,S.label,S.description,255))),n.field(`hex`,UO.sketch(a(kT,`hex`,C.label,C.description,`ffffff`))),c.asSpec()],formBehaviours:Z([_k.config({invalidClass:t(`form-invalid`)}),By(`rgb-form-events`,[q(Jj,y),q(Yj,h),q(Xj,h)])])})),{apis:{updateHex:(e,t)=>{Q.setValue(e,{hex:t.value}),u(e,t),l(e,t)}}})},name:`RgbForm`,configFields:[],apis:{updateHex:(e,t,n)=>{e.updateHex(t,n)}},extraApis:{}})},$j=(e,t)=>{let n=Ij.parts.spectrum({dom:{tag:`canvas`,attributes:{role:`presentation`},classes:[t(`sv-palette-spectrum`)]}}),r=Ij.parts.thumb({dom:{tag:`div`,attributes:{role:`presentation`},classes:[t(`sv-palette-thumb`)],innerHtml:`<div class=${t(`sv-palette-inner-thumb`)} role="presentation"></div>`}}),i=(e,t)=>{let{width:n,height:r}=e,i=e.getContext(`2d`);if(i===null)return;i.fillStyle=t,i.fillRect(0,0,n,r);let a=i.createLinearGradient(0,0,n,0);a.addColorStop(0,`rgba(255,255,255,1)`),a.addColorStop(1,`rgba(255,255,255,0)`),i.fillStyle=a,i.fillRect(0,0,n,r);let o=i.createLinearGradient(0,0,0,r);o.addColorStop(0,`rgba(0,0,0,0)`),o.addColorStop(1,`rgba(0,0,0,1)`),i.fillStyle=o,i.fillRect(0,0,n,r)},a=(e,t)=>{let n=e.components()[0].element.dom;i(n,qT(UT(_E(t,100,100))))},o=(e,t)=>{let n=vE(WT(t));Ij.setValue(e,{x:n.saturation,y:100-n.value})};return Cg({factory:e=>{let a=S({x:0,y:0}),o=(e,t,n)=>{Ss(e,zj,{value:n})},s=(e,t,n,r)=>{i(n.element.dom,qT(JT))},c=Z([Dg.config({find:O.some}),Wy.config({})]);return Ij.sketch({dom:{tag:`div`,attributes:{role:`presentation`},classes:[t(`sv-palette`)]},model:{mode:`xy`,getInitialValue:a},rounded:!1,components:[n,r],onChange:o,onInit:s,sliderBehaviours:c})},name:`SaturationBrightnessPalette`,configFields:[],apis:{setHue:(e,t,n)=>{a(t,n)},setThumb:(e,t,n)=>{o(t,n)}},extraApis:{}})},eM=(e,t)=>Cg({name:`ColourPicker`,configFields:[G(`dom`),K(`onValidHex`,y),K(`onInvalidHex`,y)],factory:n=>{let r=Qj(e,t,n.onValidHex,n.onInvalidHex),i=$j(e,t),a=e=>(100-e)/100*360,o=e=>100-e/360*100,s={paletteRgba:ro(JT),paletteHue:ro(0)},c=Yb(Bj(e,t)),l=Yb(i.sketch({})),u=Yb(r.sketch({})),d=(e,t,n)=>{l.getOpt(e).each(e=>{i.setHue(e,n)})},f=(e,t)=>{u.getOpt(e).each(e=>{r.updateHex(e,t)})},p=(e,t,n)=>{c.getOpt(e).each(e=>{Ij.setValue(e,o(n))})},m=(e,t)=>{l.getOpt(e).each(e=>{i.setThumb(e,t)})},h=(e,t)=>{let n=WT(e);s.paletteRgba.set(n),s.paletteHue.set(t)},g=(e,t,n,r)=>{h(t,n),P(r,r=>{r(e,t,n)})};return{uid:n.uid,dom:n.dom,components:[l.asSpec(),c.asSpec(),u.asSpec()],behaviours:Z([By(`colour-picker-events`,[q(Lj,(()=>{let e=[d,p,m];return(t,n)=>{let r=n.event.hex;g(t,r,yE(r).hue,e)}})()),q(zj,(()=>{let e=[f];return(t,n)=>{let r=n.event.value,i=s.paletteHue.get();g(t,bE(_E(i,r.x,100-r.y)),i,e)}})()),q(Rj,(()=>{let e=[d,f];return(t,n)=>{let r=a(n.event.value),i=vE(s.paletteRgba.get());g(t,bE(_E(r,i.saturation,i.value)),r,e)}})())]),Dg.config({find:e=>u.getOpt(e)}),Ty.config({mode:`acyclic`})])}}}),tM={self:()=>Dg.config({find:O.some}),memento:e=>Dg.config({find:e.getOpt}),childAt:e=>Dg.config({find:t=>Gt(t.element,e).bind(e=>t.getSystem().getByDom(e).toOptional())})},nM=H([K(`preprocess`,C),K(`postprocess`,C)]),rM=(e,t)=>{let n=Sa(`RepresentingConfigs.memento processors`,nM,t);return Q.config({store:{mode:`manual`,getValue:t=>{let r=e.get(t),i=Q.getValue(r);return n.postprocess(i)},setValue:(t,r)=>{let i=n.preprocess(r),a=e.get(t);Q.setValue(a,i)}}})},iM=(e,t,n)=>Q.config({store:{mode:`manual`,...e.map(e=>({initialValue:e})).getOr({}),getValue:t,setValue:n}}),aM=(e,t,n)=>iM(e,e=>t(e.element),(e,t)=>n(e.element,t)),oM=e=>aM(e,Ks,qs),sM=e=>Q.config({store:{mode:`memory`,initialValue:e}}),cM={"colorcustom.rgb.red.label":`R`,"colorcustom.rgb.red.description":`Red component`,"colorcustom.rgb.green.label":`G`,"colorcustom.rgb.green.description":`Green component`,"colorcustom.rgb.blue.label":`B`,"colorcustom.rgb.blue.description":`Blue component`,"colorcustom.rgb.hex.label":`#`,"colorcustom.rgb.hex.description":`Hex color code`,"colorcustom.rgb.range":`Range 0 to 255`,"aria.color.picker":`Color Picker`,"aria.input.invalid":`Invalid input`},lM=e=>t=>e.translate(cM[t]),uM=(e,t,n)=>{let r=e=>`tox-`+e,i=Yb(eM(lM(t),r).sketch({dom:{tag:`div`,classes:[r(`color-picker-container`)],attributes:{role:`presentation`}},onValidHex:e=>{Ss(e,nk,{name:`hex-valid`,value:!0})},onInvalidHex:e=>{Ss(e,nk,{name:`hex-valid`,value:!1})}}));return{dom:{tag:`div`},components:[i.asSpec()],behaviours:Z([iM(n,e=>{let t=i.get(e);return Dg.getCurrent(t).bind(e=>Q.getValue(e).hex).map(e=>`#`+$e(e,`#`)).getOr(``)},(e,t)=>{let n=O.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t)).bind(e=>Ce(e,1)),r=i.get(e);Dg.getCurrent(r).fold(()=>{console.log(`Can not find form`)},e=>{Q.setValue(e,{hex:n.getOr(``)}),qj.getField(e,`hex`).each(e=>{xs(e,Bo())})})}),tM.self()])}};var dM=tinymce.util.Tools.resolve(`tinymce.Resource`);let fM=e=>Be(e,`init`),pM=e=>{let t=uf(),n=Yb({dom:{tag:e.tag}}),r=uf();return{dom:{tag:`div`,classes:[`tox-custom-editor`]},behaviours:Z([By(`custom-editor-events`,[Vs(i=>{n.getOpt(i).each(n=>{(fM(e)?e.init(n.element.dom):dM.load(e.scriptId,e.scriptUrl).then(t=>t(n.element.dom,e.settings))).then(e=>{r.on(t=>{e.setValue(t)}),r.clear(),t.set(e)})})})]),iM(O.none(),()=>t.get().fold(()=>r.get().getOr(``),e=>e.getValue()),(e,n)=>{t.get().fold(()=>r.set(n),e=>e.setValue(n))}),tM.self()]),components:[n.asSpec()]}};var mM=tinymce.util.Tools.resolve(`tinymce.util.Tools`);let hM=(e,t)=>{let n=mM.explode(t.getOption(`images_file_types`));return de(Ee(e),e=>se(n,t=>rt(e.name.toLowerCase(),`.${t.toLowerCase()}`)))},gM=(e,t,n)=>{let r=(e,t)=>{t.stop()},i=e=>(t,n)=>{P(e,e=>{e(t,n)})},a=(e,t)=>{if(!Hg.isDisabled(e)){let n=t.event.raw;s(e,n.dataTransfer?.files)}},o=(e,t)=>{let n=t.event.raw.target;s(e,n.files)},s=(n,r)=>{r&&(Q.setValue(n,hM(r,t)),Ss(n,$O,{name:e.name}))},c=Yb({dom:{tag:`input`,attributes:{type:`file`,accept:`image/*`},styles:{display:`none`}},behaviours:Z([By(`input-file-events`,[Rs(Ho()),Rs(ts())])])});return qO(e.label.map(e=>QO(e,t)),UO.parts.field({factory:{sketch:e=>({uid:e.uid,dom:{tag:`div`,classes:[`tox-dropzone-container`]},behaviours:Z([sM(n.getOr([])),tM.self(),Hg.config({}),ob.config({toggleClass:`dragenter`,toggleOnExecute:!1}),By(`dropzone-events`,[q(`dragenter`,i([r,ob.toggle])),q(`dragleave`,i([r,ob.toggle])),q(`dragover`,r),q(`drop`,i([r,a])),q(Vo(),o)])]),components:[{dom:{tag:`div`,classes:[`tox-dropzone`],styles:{}},components:[{dom:{tag:`p`},components:[Fl(t.translate(`Drop an image here`))]},Jb.sketch({dom:{tag:`button`,styles:{position:`relative`},classes:[`tox-button`,`tox-button--secondary`]},components:[Fl(t.translate(`Browse for an image`)),c.asSpec()],action:e=>{c.get(e).element.dom.click()},buttonBehaviours:Z([GO.config({}),Jw.button(t.isDisabled),qw()])})]}]})}}),[`tox-form__group--stretched`],[])},_M=(e,t)=>({dom:{tag:`div`,classes:[`tox-form__grid`,`tox-form__grid--${e.columns}col`]},components:N(e.items,t.interpreter)}),vM=(e,t)=>{let n=null,r=null;return{cancel:()=>{d(n)||(clearTimeout(n),n=null,r=null)},throttle:(...i)=>{r=i,d(n)&&(n=setTimeout(()=>{let t=r;n=null,r=null,e.apply(null,t)},t))}}},yM=(e,t)=>{let n=null;return{cancel:()=>{d(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{d(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},bM=(e,t)=>{let n=null,r=()=>{d(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...i)=>{r(),n=setTimeout(()=>{n=null,e.apply(null,i)},t)}}},xM=J(`alloy-fake-before-tabstop`),SM=J(`alloy-fake-after-tabstop`),CM=e=>({dom:{tag:`div`,styles:{width:`1px`,height:`1px`,outline:`none`},attributes:{tabindex:`0`},classes:e},behaviours:Z([Wy.config({ignore:!0}),GO.config({})])}),wM=(e,t)=>({dom:{tag:`div`,classes:[`tox-navobj`,...e.getOr([])]},components:[CM([xM]),t,CM([SM])],behaviours:Z([tM.childAt(1)])}),TM=(e,t)=>{Ss(e,Ro(),{raw:{which:9,shiftKey:t}})},EM=(e,t)=>{let n=t.element;sl(n,xM)?TM(e,!0):sl(n,SM)&&TM(e,!1)},DM=e=>_O(e,[`.`+xM,`.`+SM].join(`,`),D),OM=J(`update-dialog`),kM=J(`update-title`),AM=J(`update-body`),jM=J(`update-footer`),MM=J(`body-send-message`),NM=J(`dialog-focus-shifted`),PM=Dr().browser,FM=PM.isSafari(),IM=PM.isFirefox(),LM=FM||IM,RM=PM.isChromium(),zM=({scrollTop:e,scrollHeight:t,clientHeight:n})=>Math.ceil(e)+n>=t,BM=(e,t)=>e.scrollTo(0,t===`bottom`?99999999:t),VM=(e,t)=>{let n=e.body;return O.from(!/^<!DOCTYPE (html|HTML)/.test(t)&&(!RM&&!FM||h(n)&&(n.scrollTop!==0||Math.abs(n.scrollHeight-n.clientHeight)>1))?n:e.documentElement)},HM=(e,t,n)=>{let r=e.dom;O.from(r.contentDocument).fold(n,e=>{let n=0,i=VM(e,t).map(e=>(n=e.scrollTop,e)).forall(zM),a=()=>{let e=r.contentWindow;h(e)&&(i?BM(e,`bottom`):!i&&LM&&n!==0&&BM(e,n))};FM&&r.addEventListener(`load`,a,{once:!0}),e.open(),e.write(t),e.close(),FM||a()})},UM=Ye(LM,FM?500:200).map(e=>vM(HM,e)),WM=(e,t)=>{let n=ro(e.getOr(``));return{getValue:e=>n.get(),setValue:(e,r)=>{if(n.get()!==r){let n=e.element,i=()=>un(n,`srcdoc`,r);t?UM.fold(S(HM),e=>e.throttle)(n,r,i):i()}n.set(r)}}},GM=(e,t,n)=>{let r=`tox-dialog__iframe`,i=e.transparent?[]:[`${r}--opaque`],a=e.border?[`tox-navobj-bordered`]:[],o={...e.label.map(e=>({title:e})).getOr({}),...n.map(e=>({srcdoc:e})).getOr({}),...e.sandboxed?{sandbox:`allow-scripts allow-same-origin`}:{}},s=WM(n,e.streamContent);return qO(e.label.map(e=>QO(e,t)),UO.parts.field({factory:{sketch:e=>wM(O.from(a),{uid:e.uid,dom:{tag:`iframe`,attributes:o,classes:[r,...i]},behaviours:Z([GO.config({}),Wy.config({}),iM(n,s.getValue,s.setValue),Od.config({channels:{[NM]:{onReceive:(e,t)=>{t.newFocus.each(t=>{Bt(e.element).each(n=>{(Mt(e.element,t)?il:ol)(n,`tox-navobj-bordered-focus`)})})}}}})])})}}),[`tox-form__group--stretched`],[])},KM=e=>new Promise((t,n)=>{let r=()=>{a(),t(e)},i=[ff(e,`load`,r),ff(e,`error`,()=>{a(),n(`Unable to load data from image: `+e.dom.src)})],a=()=>P(i,e=>e.unbind());e.dom.complete&&r()}),qM=(e,t,n,r,i)=>{let a=n*i,o=r*i,s=Math.max(0,e/2-a/2),c=Math.max(0,t/2-o/2);return{left:s.toString()+`px`,top:c.toString()+`px`,width:a.toString()+`px`,height:o.toString()+`px`}},JM=(e,t,n)=>{let r=Vn(e),i=An(e);return Math.min(r/t,i/n,1)},YM=(e,t)=>{let n=ro(t.getOr({url:``})),r=Yb({dom:{tag:`img`,classes:[`tox-imagepreview__image`],attributes:t.map(e=>({src:e.url})).getOr({})}}),i=Yb({dom:{tag:`div`,classes:[`tox-imagepreview__container`],attributes:{role:`presentation`}},components:[r.asSpec()]}),a=(e,t)=>{let a={url:t.url};t.zoom.each(e=>a.zoom=e),t.cachedWidth.each(e=>a.cachedWidth=e),t.cachedHeight.each(e=>a.cachedHeight=e),n.set(a);let o=()=>{let{cachedWidth:t,cachedHeight:n,zoom:r}=a;if(!p(t)&&!p(n)){p(r)&&(a.zoom=JM(e.element,t,n));let o=qM(Vn(e.element),An(e.element),t,n,a.zoom);i.getOpt(e).each(e=>{B(e.element,o)})}};r.getOpt(e).each(n=>{let r=n.element;t.url!==fn(r,`src`)&&(un(r,`src`,t.url),ol(e.element,`tox-imagepreview__loaded`)),o(),KM(r).then(t=>{e.getSystem().isConnected()&&(il(e.element,`tox-imagepreview__loaded`),a.cachedWidth=t.dom.naturalWidth,a.cachedHeight=t.dom.naturalHeight,o())})})},o={};e.height.each(e=>o.height=e);let s=t.map(e=>({url:e.url,zoom:O.from(e.zoom),cachedWidth:O.from(e.cachedWidth),cachedHeight:O.from(e.cachedHeight)}));return{dom:{tag:`div`,classes:[`tox-imagepreview`],styles:o,attributes:{role:`presentation`}},components:[i.asSpec()],behaviours:Z([tM.self(),iM(s,()=>n.get(),a)])}},XM=(e,t)=>{let n=`tox-label`,r=e.align===`center`?[`${n}--center`]:[],i=e.align===`end`?[`${n}--end`]:[];return{dom:{tag:`div`,classes:[`tox-form__group`]},components:[{dom:{tag:`label`,classes:[n,...r,...i]},components:[Fl(t.providers.translate(e.label))]},...N(e.items,t.interpreter)],behaviours:Z([tM.self(),Ry.config({}),oM(O.none()),Ty.config({mode:`acyclic`})])}},ZM=J(`toolbar.button.execute`),QM=e=>Ws((t,n)=>{Yw(e,t)(n=>{Ss(t,ZM,{buttonApi:n}),e.onAction(n)})}),$M=J(`common-button-display-events`),eN={[$o()]:[`disabling`,`alloy.base.behaviour`,`toggling`,`toolbar-button-events`],[us()]:[`toolbar-button-events`,$M],[jo()]:[`focusing`,`alloy.base.behaviour`,$M]},tN=e=>yn(e.element,`width`,xn(e.element,`width`)),nN=(e,t,n)=>sx(e,{tag:`span`,classes:[`tox-icon`,`tox-tbtn__icon-wrap`],behaviours:n},t),rN=(e,t)=>nN(e,t,[]),iN=(e,t)=>nN(e,t,[Ry.config({})]),aN=(e,t,n)=>({dom:{tag:`span`,classes:[`${t}__select-label`]},components:[Fl(n.translate(e))],behaviours:Z([Ry.config({})])}),oN=J(`update-menu-text`),sN=J(`update-menu-icon`),cN=(e,t,n)=>{let r=ro(y),i=e.text.map(e=>Yb(aN(e,t,n.providers))),a=e.icon.map(e=>Yb(iN(e,n.providers.icons))),o=(e,t)=>{let n=Q.getValue(e);return Wy.focus(n),Ss(n,`keydown`,{raw:t.event.raw}),qD.close(n),O.some(!0)},s=e.role.fold(()=>({}),e=>({role:e})),c=e.tooltip.fold(()=>({}),e=>{let t=n.providers.translate(e);return{title:t,"aria-label":t}}),l=sx(`chevron-down`,{tag:`div`,classes:[`${t}__select-chevron`]},n.providers.icons),u=J(`common-button-display-events`);return Yb(qD.sketch({...e.uid?{uid:e.uid}:{},...s,dom:{tag:`button`,classes:[t,`${t}--select`].concat(N(e.classes,e=>`${t}--${e}`)),attributes:{...c}},components:eT([a.map(e=>e.asSpec()),i.map(e=>e.asSpec()),O.some(l)]),matchWidth:!0,useMinWidth:!0,onOpen:(t,n,r)=>{e.searchable&&tO(r)},dropdownBehaviours:Z([...e.dropdownBehaviours,Jw.button(()=>e.disabled||n.providers.isDisabled()),qw(),vk.config({}),Ry.config({}),By(`dropdown-events`,[Xw(e,r),Zw(e,r)]),By(u,[Vs((e,t)=>tN(e))]),By(`menubutton-update-display-text`,[q(oN,(e,t)=>{i.bind(t=>t.getOpt(e)).each(e=>{Ry.set(e,[Fl(n.providers.translate(t.event.text))])})}),q(sN,(e,t)=>{a.bind(t=>t.getOpt(e)).each(e=>{Ry.set(e,[iN(t.event.icon,n.providers.icons)])})})])]),eventOrder:Di(eN,{mousedown:[`focusing`,`alloy.base.behaviour`,`item-type-events`,`normal-dropdown-events`],[us()]:[`toolbar-button-events`,`dropdown-events`,u]}),sandboxBehaviours:Z([Ty.config({mode:`special`,onLeft:o,onRight:o}),By(`dropdown-sandbox-events`,[q(JS,(e,t)=>{YD(e),t.stop()}),q(YS,(e,t)=>{XD(e,t),t.stop()})])]),lazySink:n.getSink,toggleClass:`${t}--active`,parts:{menu:{...HS(!1,e.columns,e.presets),fakeFocus:e.searchable,onHighlightItem:$D,onCollapseMenu:(e,t,n)=>{s_.getHighlighted(n).each(t=>{$D(e,n,t)})},onDehighlightItem:eO}},getAnchorOverrides:()=>({maxHeightFunction:(e,t)=>{Mf()(e,t-10)}}),fetch:t=>AD.nu(w(e.fetch,t))})).asSpec()},lN=e=>s(e),uN=e=>e.type===`separator`,dN=e=>Be(e,`getSubmenuItems`),fN={type:`separator`},pN=(e,t)=>{let n=pe(e,(e,n)=>lN(n)?n===``?e:n===`|`?e.length>0&&!uN(e[e.length-1])?e.concat([fN]):e:Be(t,n.toLowerCase())?e.concat([t[n.toLowerCase()]]):e:e.concat([n]),[]);return n.length>0&&uN(n[n.length-1])&&n.pop(),n},mN=(e,t)=>{let n=gN(e.getSubmenuItems(),t);return{item:e,menus:Di(n.menus,{[e.value]:n.items}),expansions:Di(n.expansions,{[e.value]:e.value})}},hN=e=>Di({value:L(e,`value`).getOrThunk(()=>J(`generated-menu-item`))},e),gN=(e,t)=>fe(pN(s(e)?e.split(` `):e,t),(e,n)=>{if(dN(n)){let r=mN(hN(n),t);return{menus:Di(e.menus,r.menus),items:[r.item,...e.items],expansions:Di(e.expansions,r.expansions)}}else return{...e,items:[n,...e.items]}},{menus:{},expansions:{},items:[]}),_N=e=>e.search.fold(()=>({searchMode:`no-search`}),e=>({searchMode:`search-with-field`,placeholder:e.placeholder})),vN=e=>e.search.fold(()=>({searchMode:`no-search`}),e=>({searchMode:`search-with-results`})),yN=(e,t,n,r)=>{let i=J(`primary-menu`),a=gN(e,n.shared.providers.menuItems());if(a.items.length===0)return O.none();let o=_N(r),s=oO(i,a.items,t,n,r.isHorizontalMenu,o),c=vN(r),l=Di(je(a.menus,(e,r)=>oO(r,e,t,n,!1,c)),uo(i,s));return O.from(Wb.tieredData(i,l,a.expansions))},bN=e=>!Be(e,`items`),xN=`data-value`,SN=(e,t,n,r)=>N(n,n=>bN(n)?{type:`togglemenuitem`,text:n.text,value:n.value,active:n.value===r,onAction:()=>{Q.setValue(e,n.value),Ss(e,$O,{name:t}),Wy.focus(e)}}:{type:`nestedmenuitem`,text:n.text,getSubmenuItems:()=>SN(e,t,n.items,r)}),CN=(e,t)=>De(e,e=>bN(e)?Ye(e.value===t,e):CN(e.items,t)),wN=(e,t,n)=>{let r=t.shared.providers,i=n.bind(t=>CN(e.items,t)).orThunk(()=>we(e.items).filter(bN)),a=e.label.map(e=>QO(e,r)),o={dom:{tag:`div`,classes:[`tox-listboxfield`]},components:[UO.parts.field({dom:{},factory:{sketch:n=>cN({uid:n.uid,text:i.map(e=>e.text),icon:O.none(),tooltip:e.label,role:O.none(),fetch:(n,r)=>{r(yN(SN(n,e.name,e.items,Q.getValue(n)),wS.CLOSE_ON_EXECUTE,t,{isHorizontalMenu:!1,search:O.none()}))},onSetup:S(y),getApi:S({}),columns:1,presets:`normal`,classes:[],dropdownBehaviours:[GO.config({}),iM(i.map(e=>e.value),e=>fn(e.element,xN),(t,n)=>{CN(e.items,n).each(e=>{un(t.element,xN,e.value),Ss(t,oN,{text:e.text})})})]},`tox-listbox`,t.shared)}})]};return UO.sketch({dom:{tag:`div`,classes:[`tox-form__group`]},components:F([a.toArray(),[o]]),fieldBehaviours:Z([Hg.config({disabled:S(!e.enabled),onDisabled:e=>{UO.getField(e).each(Hg.disable)},onEnabled:e=>{UO.getField(e).each(Hg.enable)}})])})},TN=(e,t)=>({dom:{tag:`div`,classes:e.classes},components:N(e.items,t.shared.interpreter)}),EN=Cg({name:`HtmlSelect`,configFields:[G(`options`),fh(`selectBehaviours`,[Wy,Q]),K(`selectClasses`,[]),K(`selectAttributes`,{}),za(`data`)],factory:(e,t)=>{let n=N(e.options,e=>({dom:{tag:`option`,value:e.value,innerHtml:e.text}})),r=e.data.map(e=>uo(`initialValue`,e)).getOr({});return{uid:e.uid,dom:{tag:`select`,classes:e.selectClasses,attributes:e.selectAttributes},components:n,behaviours:mh(e.selectBehaviours,[Wy.config({}),Q.config({store:{mode:`manual`,getValue:e=>pl(e.element),setValue:(t,n)=>{let r=we(e.options);he(e.options,e=>e.value===n).isSome()?ml(t.element,n):t.element.dom.selectedIndex===-1&&n===``&&r.each(e=>ml(t.element,e.value))},...r}})])}}}),DN=(e,t,n)=>{let r=N(e.items,e=>({text:t.translate(e.text),value:e.value})),i=e.label.map(e=>QO(e,t)),a=UO.parts.field({dom:{},...n.map(e=>({data:e})).getOr({}),selectAttributes:{size:e.size},options:r,factory:EN,selectBehaviours:Z([Hg.config({disabled:()=>!e.enabled||t.isDisabled()}),GO.config({}),By(`selectbox-change`,[q(Vo(),(t,n)=>{Ss(t,$O,{name:e.name})})])])}),o=e.size>1?O.none():O.some(sx(`chevron-down`,{tag:`div`,classes:[`tox-selectfield__icon-js`]},t.icons)),s={dom:{tag:`div`,classes:[`tox-selectfield`]},components:F([[a],o.toArray()])};return UO.sketch({dom:{tag:`div`,classes:[`tox-form__group`]},components:F([i.toArray(),[s]]),fieldBehaviours:Z([Hg.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{UO.getField(e).each(Hg.disable)},onEnabled:e=>{UO.getField(e).each(Hg.enable)}}),qw()])})},ON=S([K(`field1Name`,`field1`),K(`field2Name`,`field2`),Su(`onLockedChange`),vu([`lockClass`]),K(`locked`,!1),hh.field(`coupledFieldBehaviours`,[Dg,Q])]),kN=(e,t,n)=>ag(e,t,n).bind(Dg.getCurrent),AN=(e,t)=>Wh({factory:UO,name:e,overrides:e=>({fieldBehaviours:Z([By(`coupled-input-behaviour`,[q(Bo(),n=>{kN(n,e,t).each(t=>{ag(n,e,`lock`).each(r=>{ob.isOn(r)&&e.onLockedChange(n,t,r)})})})])])})}),jN=S([AN(`field1`,`field2`),AN(`field2`,`field1`),Wh({factory:Jb,schema:[G(`dom`)],name:`lock`,overrides:e=>({buttonBehaviours:Z([ob.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:`pressed`}})])})})]),MN=wg({name:`FormCoupledInputs`,configFields:ON(),partFields:jN(),factory:(e,t,n,r)=>({uid:e.uid,dom:e.dom,components:t,behaviours:hh.augment(e.coupledFieldBehaviours,[Dg.config({find:O.some}),Q.config({store:{mode:`manual`,getValue:t=>{let n=ug(t,e,[`field1`,`field2`]);return{[e.field1Name]:Q.getValue(n.field1()),[e.field2Name]:Q.getValue(n.field2())}},setValue:(t,n)=>{let r=ug(t,e,[`field1`,`field2`]);Ve(n,e.field1Name)&&Q.setValue(r.field1(),n[e.field1Name]),Ve(n,e.field2Name)&&Q.setValue(r.field2(),n[e.field2Name])}}})]),apis:{getField1:t=>ag(t,e,`field1`),getField2:t=>ag(t,e,`field2`),getLock:t=>ag(t,e,`lock`)}}),apis:{getField1:(e,t)=>e.getField1(t),getField2:(e,t)=>e.getField2(t),getLock:(e,t)=>e.getLock(t)}}),NN=e=>{let t={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},n=e.value.toFixed((e=>e in t?t[e]:1)(e.unit));return n.indexOf(`.`)!==-1&&(n=n.replace(/\.?0*$/,``)),n+e.unit},PN=e=>{let t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(t!==null){let e=parseFloat(t[1]),n=t[2];return ui.value({value:e,unit:n})}else return ui.error(e)},FN=(e,t)=>{let n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},r=e=>Be(n,e);return e.unit===t?O.some(e.value):r(e.unit)&&r(t)?n[e.unit]===n[t]?O.some(e.value):O.some(e.value/n[e.unit]*n[t]):O.none()},IN=e=>O.none(),LN=(e,t)=>n=>FN(n,t).map(n=>({value:n*e,unit:t})),RN=(e,t)=>Ke(PN(e).toOptional(),PN(t).toOptional(),(e,t)=>FN(e,t.unit).map(e=>t.value/e).map(e=>LN(e,t.unit)).getOr(IN)).getOr(IN),zN=(e,t)=>{let n=IN,r=J(`ratio-event`),i=e=>sx(e,{tag:`span`,classes:[`tox-icon`,`tox-lock-icon__`+e]},t.icons),a=MN.parts.lock({dom:{tag:`button`,classes:[`tox-lock`,`tox-button`,`tox-button--naked`,`tox-button--icon`],attributes:{title:t.translate(e.label.getOr(`Constrain proportions`))}},components:[i(`lock`),i(`unlock`)],buttonBehaviours:Z([Hg.config({disabled:()=>!e.enabled||t.isDisabled()}),qw(),GO.config({})])}),o=e=>({dom:{tag:`div`,classes:[`tox-form__group`]},components:e}),s=n=>UO.parts.field({factory:qS,inputClasses:[`tox-textfield`],inputBehaviours:Z([Hg.config({disabled:()=>!e.enabled||t.isDisabled()}),qw(),GO.config({}),By(`size-input-events`,[q(Io(),(e,t)=>{Ss(e,r,{isField1:n})}),q(Vo(),(t,n)=>{Ss(t,$O,{name:e.name})})])]),selectOnFocus:!1}),c=e=>({dom:{tag:`label`,classes:[`tox-label`]},components:[Fl(t.translate(e))]}),l=MN.parts.field1(o([UO.parts.label(c(`Width`)),s(!0)])),u=MN.parts.field2(o([UO.parts.label(c(`Height`)),s(!1)]));return MN.sketch({dom:{tag:`div`,classes:[`tox-form__group`]},components:[{dom:{tag:`div`,classes:[`tox-form__controls-h-stack`]},components:[l,u,o([c(`\xA0`),a])]}],field1Name:`width`,field2Name:`height`,locked:!0,markers:{lockClass:`tox-locked`},onLockedChange:(e,t,r)=>{PN(Q.getValue(e)).each(e=>{n(e).each(e=>{Q.setValue(t,NN(e))})})},coupledFieldBehaviours:Z([Hg.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{MN.getField1(e).bind(UO.getField).each(Hg.disable),MN.getField2(e).bind(UO.getField).each(Hg.disable),MN.getLock(e).each(Hg.disable)},onEnabled:e=>{MN.getField1(e).bind(UO.getField).each(Hg.enable),MN.getField2(e).bind(UO.getField).each(Hg.enable),MN.getLock(e).each(Hg.enable)}}),qw(),By(`size-input-events2`,[q(r,(e,t)=>{let r=t.event.isField1,i=r?MN.getField1(e):MN.getField2(e),a=r?MN.getField2(e):MN.getField1(e);n=RN(i.map(Q.getValue).getOr(``),a.map(Q.getValue).getOr(``))})])])})},BN=(e,t,n)=>{let r=Ij.parts.label({dom:{tag:`label`,classes:[`tox-label`]},components:[Fl(t.translate(e.label))]}),i=Ij.parts.spectrum({dom:{tag:`div`,classes:[`tox-slider__rail`],attributes:{role:`presentation`}}}),a=Ij.parts.thumb({dom:{tag:`div`,classes:[`tox-slider__handle`],attributes:{role:`presentation`}}});return Ij.sketch({dom:{tag:`div`,classes:[`tox-slider`],attributes:{role:`presentation`}},model:{mode:`x`,minX:e.min,maxX:e.max,getInitialValue:S(n.getOrThunk(()=>(Math.abs(e.max)-Math.abs(e.min))/2))},components:[r,i,a],sliderBehaviours:Z([tM.self(),Wy.config({})]),onChoose:(t,n,r)=>{Ss(t,$O,{name:e.name,value:r})}})},VN=(e,t)=>{let n=e=>({dom:{tag:`th`,innerHtml:t.translate(e)}}),r=e=>({dom:{tag:`thead`},components:[{dom:{tag:`tr`},components:N(e,n)}]}),i=e=>({dom:{tag:`td`,innerHtml:t.translate(e)}}),a=e=>({dom:{tag:`tr`},components:N(e,i)});return{dom:{tag:`table`,classes:[`tox-dialog__table`]},components:[r(e.header),(e=>({dom:{tag:`tbody`},components:N(e,a)}))(e.cells)],behaviours:Z([GO.config({}),Wy.config({})])}},HN=(e,t)=>{let n=e.label.map(e=>QO(e,t)),r=[Hg.config({disabled:()=>e.disabled||t.isDisabled()}),qw(),Ty.config({mode:`execution`,useEnter:e.multiline!==!0,useControlEnter:e.multiline===!0,execute:e=>(xs(e,rk),O.some(!0))}),By(`textfield-change`,[q(Bo(),(t,n)=>{Ss(t,$O,{name:e.name})}),q(Zo(),(t,n)=>{Ss(t,$O,{name:e.name})})]),GO.config({})],i=e.validation.map(e=>_k.config({getRoot:e=>Bt(e.element),invalidClass:`tox-invalid`,validator:{validate:t=>{let n=Q.getValue(t),r=e.validator(n);return AD.pure(r===!0?ui.value(n):ui.error(r))},validateOnLoad:e.validateOnLoad}})).toArray(),a=e.placeholder.fold(S({}),e=>({placeholder:t.translate(e)})),o=e.inputMode.fold(S({}),e=>({inputmode:e})),s={...a,...o},c=UO.parts.field({tag:e.multiline===!0?`textarea`:`input`,...e.data.map(e=>({data:e})).getOr({}),inputAttributes:s,inputClasses:[e.classname],inputBehaviours:Z(F([r,i])),selectOnFocus:!1,factory:qS});return qO(n,e.multiline?{dom:{tag:`div`,classes:[`tox-textarea-wrap`]},components:[c]}:c,(e.flex?[`tox-form__group--stretched`]:[]).concat(e.maximized?[`tox-form-group--maximize`]:[]),[Hg.config({disabled:()=>e.disabled||t.isDisabled(),onDisabled:e=>{UO.getField(e).each(Hg.disable)},onEnabled:e=>{UO.getField(e).each(Hg.enable)}}),qw()])},UN=(e,t,n)=>HN({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:!e.enabled,classname:`tox-textfield`,validation:O.none(),maximized:e.maximized,data:n},t),WN=(e,t,n)=>HN({name:e.name,multiline:!0,label:e.label,inputMode:O.none(),placeholder:e.placeholder,flex:!0,disabled:!e.enabled,classname:`tox-textarea`,validation:O.none(),maximized:e.maximized,data:n},t),GN=(e,t)=>t.getAnimationRoot.fold(()=>e.element,t=>t(e)),KN=e=>e.dimension.property,qN=(e,t)=>e.dimension.getDimension(t),JN=(e,t)=>{ll(GN(e,t),[t.shrinkingClass,t.growingClass])},YN=(e,t)=>{ol(e.element,t.openClass),il(e.element,t.closedClass),yn(e.element,KN(t),`0px`),Dn(e.element)},XN=(e,t)=>{ol(e.element,t.closedClass),il(e.element,t.openClass),En(e.element,KN(t))},ZN=(e,t,n,r)=>{n.setCollapsed(),yn(e.element,KN(t),qN(t,e.element)),JN(e,t),YN(e,t),t.onStartShrink(e),t.onShrunk(e)},QN=(e,t,n,r)=>{let i=r.getOrThunk(()=>qN(t,e.element));n.setCollapsed(),yn(e.element,KN(t),i),Dn(e.element);let a=GN(e,t);ol(a,t.growingClass),il(a,t.shrinkingClass),YN(e,t),t.onStartShrink(e)},$N=(e,t,n)=>{let r=qN(t,e.element);(r===`0px`?ZN:QN)(e,t,n,O.some(r))},eP=(e,t,n)=>{let r=GN(e,t),i=sl(r,t.shrinkingClass),a=qN(t,e.element);XN(e,t);let o=qN(t,e.element);(i?()=>{yn(e.element,KN(t),a),Dn(e.element)}:()=>{YN(e,t)})(),ol(r,t.shrinkingClass),il(r,t.growingClass),XN(e,t),yn(e.element,KN(t),o),n.setExpanded(),t.onStartGrow(e)},tP=(e,t,n)=>{if(n.isExpanded()){En(e.element,KN(t));let n=qN(t,e.element);yn(e.element,KN(t),n)}},nP=(e,t,n)=>{n.isExpanded()||eP(e,t,n)},rP=(e,t,n)=>{n.isExpanded()&&$N(e,t,n)},iP=(e,t,n)=>{n.isExpanded()&&ZN(e,t,n)},aP=(e,t,n)=>n.isExpanded(),oP=(e,t,n)=>n.isCollapsed(),sP=(e,t,n)=>sl(GN(e,t),t.growingClass)===!0,cP=(e,t,n)=>sl(GN(e,t),t.shrinkingClass)===!0;var lP=Object.freeze({__proto__:null,refresh:tP,grow:nP,shrink:rP,immediateShrink:iP,hasGrown:aP,hasShrunk:oP,isGrowing:sP,isShrinking:cP,isTransitioning:(e,t,n)=>sP(e,t)||cP(e,t),toggleGrow:(e,t,n)=>{(n.isExpanded()?$N:eP)(e,t,n)},disableTransitions:JN,immediateGrow:(e,t,n)=>{n.isExpanded()||(XN(e,t),yn(e.element,KN(t),qN(t,e.element)),JN(e,t),n.setExpanded(),t.onStartGrow(e),t.onGrown(e))}}),uP=Object.freeze({__proto__:null,exhibit:(e,t,n)=>t.expanded?kc({classes:[t.openClass],styles:{}}):kc({classes:[t.closedClass],styles:uo(t.dimension.property,`0px`)}),events:(e,t)=>Os([Bs(Wo(),(n,r)=>{r.event.raw.propertyName===e.dimension.property&&(JN(n,e),t.isExpanded()&&En(n.element,e.dimension.property),(t.isExpanded()?e.onGrown:e.onShrunk)(n))})])});let dP=wd({fields:[G(`closedClass`),G(`openClass`),G(`shrinkingClass`),G(`growingClass`),za(`getAnimationRoot`),bu(`onShrunk`),bu(`onStartShrink`),bu(`onGrown`),bu(`onStartGrow`),K(`expanded`,!1),ka(`dimension`,wa(`property`,{width:[wu(`property`,`width`),wu(`getDimension`,e=>Vn(e)+`px`)],height:[wu(`property`,`height`),wu(`getDimension`,e=>An(e)+`px`)]}))],name:`sliding`,active:uP,apis:lP,state:Object.freeze({__proto__:null,init:e=>{let t=ro(e.expanded);return wc({isExpanded:()=>t.get()===!0,isCollapsed:()=>t.get()===!1,setCollapsed:w(t.set,!1),setExpanded:w(t.set,!0),readState:()=>`expanded: `+t.get()})}})}),fP=e=>({isEnabled:()=>!Hg.isDisabled(e),setEnabled:t=>Hg.set(e,!t),setActive:t=>{let n=e.element;t?(il(n,`tox-tbtn--enabled`),un(n,`aria-pressed`,!0)):(ol(n,`tox-tbtn--enabled`),hn(n,`aria-pressed`))},isActive:()=>sl(e.element,`tox-tbtn--enabled`),setText:t=>{Ss(e,oN,{text:t})},setIcon:t=>Ss(e,sN,{icon:t})}),pP=(e,t,n,r,i=!0)=>cN({text:e.text,icon:e.icon,tooltip:e.tooltip,searchable:e.search.isSome(),role:r,fetch:(t,r)=>{let i={pattern:e.search.isSome()?nO(t):``};e.fetch(t=>{r(yN(t,wS.CLOSE_ON_EXECUTE,n,{isHorizontalMenu:!1,search:e.search}))},i,fP(t))},onSetup:e.onSetup,getApi:fP,columns:1,presets:`normal`,classes:[],dropdownBehaviours:[...i?[GO.config({})]:[]]},t,n.shared),mP=(e,t,n)=>{let r=e=>r=>{let i=!r.isActive();r.setActive(i),e.storage.set(i),n.shared.getSink().each(n=>{t().getOpt(n).each(t=>{Ad(t.element),Ss(t,nk,{name:e.name,value:e.storage.get()})})})},i=e=>t=>{t.setActive(e.storage.get())};return t=>{t(N(e,e=>{let t=e.text.fold(()=>({}),e=>({text:e}));return{type:e.type,active:!1,...t,onAction:r(e),onSetup:i(e)}}))}},hP=e=>({dom:{tag:`span`,classes:[`tox-tree__label`],attributes:{title:e,"aria-label":e}},components:[Fl(e)]}),gP=J(`leaf-label-event-id`),_P=({leaf:e,onLeafAction:t,visible:n,treeId:r,selectedId:i,backstage:a})=>{let o=e.menu.map(e=>pP(e,`tox-mbtn`,a,O.none(),n)),s=[hP(e.title)];return o.each(e=>s.push(e)),Jb.sketch({dom:{tag:`div`,classes:[`tox-tree--leaf__label`,`tox-trbtn`].concat(n?[`tox-tree--leaf__label--visible`]:[])},components:s,role:`treeitem`,action:n=>{t(e.id),n.getSystem().broadcastOn([`update-active-item-${r}`],{value:e.id})},eventOrder:{[Ro()]:[gP,`keying`]},buttonBehaviours:Z([...n?[GO.config({})]:[],ob.config({toggleClass:`tox-trbtn--enabled`,toggleOnExecute:!1,aria:{mode:`selected`}}),Od.config({channels:{[`update-active-item-${r}`]:{onReceive:(t,n)=>{(n.value===e.id?ob.on:ob.off)(t)}}}}),By(gP,[Vs((t,n)=>{i.each(n=>{(n===e.id?ob.on:ob.off)(t)})}),q(Ro(),(e,t)=>{let n=t.event.raw.code===`ArrowLeft`,r=t.event.raw.code===`ArrowRight`;n?(Jl(e.element,`.tox-tree--directory`).each(t=>{e.getSystem().getByDom(t).each(e=>{Yl(t,`.tox-tree--directory__label`).each(t=>{e.getSystem().getByDom(t).each(Wy.focus)})})}),t.stop()):r&&t.stop()})])])})},vP=(e,t,n)=>sx(e,{tag:`span`,classes:[`tox-tree__icon-wrap`,`tox-icon`],behaviours:n},t),yP=(e,t)=>vP(e,t,[]),bP=J(`directory-label-event-id`),xP=({directory:e,visible:t,noChildren:n,backstage:r})=>{let i=e.menu.map(e=>pP(e,`tox-mbtn`,r,O.none())),a=[{dom:{tag:`div`,classes:[`tox-chevron`]},components:[yP(`chevron-right`,r.shared.providers.icons)]},hP(e.title)];i.each(e=>{a.push(e)});let o=t=>{Jl(t.element,`.tox-tree--directory`).each(n=>{t.getSystem().getByDom(n).each(n=>{let r=!ob.isOn(n);ob.toggle(n),Ss(t,`expand-tree-node`,{expanded:r,node:e.id})})})};return Jb.sketch({dom:{tag:`div`,classes:[`tox-tree--directory__label`,`tox-trbtn`].concat(t?[`tox-tree--directory__label--visible`]:[])},components:a,action:o,eventOrder:{[Ro()]:[bP,`keying`]},buttonBehaviours:Z([...t?[GO.config({})]:[],By(bP,[q(Ro(),(e,t)=>{let r=t.event.raw.code===`ArrowRight`,i=t.event.raw.code===`ArrowLeft`;r&&n&&t.stop(),(r||i)&&Jl(e.element,`.tox-tree--directory`).each(n=>{e.getSystem().getByDom(n).each(n=>{!ob.isOn(n)&&r||ob.isOn(n)&&i?(o(e),t.stop()):i&&!ob.isOn(n)&&(Jl(n.element,`.tox-tree--directory`).each(e=>{Yl(e,`.tox-tree--directory__label`).each(e=>{n.getSystem().getByDom(e).each(Wy.focus)})}),t.stop())})})})])])})},SP=({children:e,onLeafAction:t,visible:n,treeId:r,expandedIds:i,selectedId:a,backstage:o})=>({dom:{tag:`div`,classes:[`tox-tree--directory__children`]},components:e.map(e=>e.type===`leaf`?_P({leaf:e,selectedId:a,onLeafAction:t,visible:n,treeId:r,backstage:o}):wP({directory:e,expandedIds:i,selectedId:a,onLeafAction:t,labelTabstopping:n,treeId:r,backstage:o})),behaviours:Z([dP.config({dimension:{property:`height`},closedClass:`tox-tree--directory__children--closed`,openClass:`tox-tree--directory__children--open`,growingClass:`tox-tree--directory__children--growing`,shrinkingClass:`tox-tree--directory__children--shrinking`,expanded:n}),Ry.config({})])}),CP=J(`directory-event-id`),wP=({directory:e,onLeafAction:t,labelTabstopping:n,treeId:r,backstage:i,expandedIds:a,selectedId:o})=>{let{children:s}=e,c=ro(a),l=e=>s.map(n=>n.type===`leaf`?_P({leaf:n,selectedId:o,onLeafAction:t,visible:e,treeId:r,backstage:i}):wP({directory:n,expandedIds:c.get(),selectedId:o,onLeafAction:t,labelTabstopping:e,treeId:r,backstage:i})),u=a.includes(e.id);return{dom:{tag:`div`,classes:[`tox-tree--directory`],attributes:{role:`treeitem`}},components:[xP({directory:e,visible:n,noChildren:e.children.length===0,backstage:i}),SP({children:s,expandedIds:a,selectedId:o,onLeafAction:t,visible:u,treeId:r,backstage:i})],behaviours:Z([By(CP,[Vs((e,t)=>{ob.set(e,u)}),q(`expand-tree-node`,(e,t)=>{let{expanded:n,node:r}=t.event;c.set(n?[...c.get(),r]:c.get().filter(e=>e!==r))})]),ob.config({...e.children.length>0?{aria:{mode:`expanded`}}:{},toggleClass:`tox-tree--directory--expanded`,onToggled:(e,t)=>{let n=e.components()[1],r=l(t);t?dP.grow(n):dP.shrink(n),Ry.set(n,r)}})])}},TP=J(`tree-event-id`),EP=(e,t)=>{let n=e.onLeafAction.getOr(y),r=e.onToggleExpand.getOr(y),i=e.defaultExpandedIds,a=ro(i),o=ro(e.defaultSelectedId),s=J(`tree-id`),c=(r,i)=>e.items.map(e=>e.type===`leaf`?_P({leaf:e,selectedId:r,onLeafAction:n,visible:!0,treeId:s,backstage:t}):wP({directory:e,selectedId:r,onLeafAction:n,expandedIds:i,labelTabstopping:!0,treeId:s,backstage:t}));return{dom:{tag:`div`,classes:[`tox-tree`],attributes:{role:`tree`}},components:c(o.get(),a.get()),behaviours:Z([Ty.config({mode:`flow`,selector:`.tox-tree--leaf__label--visible, .tox-tree--directory__label--visible`,cycles:!1}),By(TP,[q(`expand-tree-node`,(e,t)=>{let{expanded:n,node:i}=t.event;a.set(n?[...a.get(),i]:a.get().filter(e=>e!==i)),r(a.get(),{expanded:n,node:i})})]),Od.config({channels:{[`update-active-item-${s}`]:{onReceive:(e,t)=>{o.set(O.some(t.value)),Ry.set(e,c(O.some(t.value),a.get()))}}}}),Ry.config({})])}};var DP=Object.freeze({__proto__:null,events:(e,t)=>{let n=e.stream.streams.setup(e,t);return Os([q(e.event,n),Hs(()=>t.cancel())].concat(e.cancelEvent.map(e=>[q(e,()=>t.cancel())]).getOr([])))}});let OP=e=>{let t=ro(null);return wc({readState:()=>({timer:t.get()===null?`unset`:`set`}),setTimer:e=>{t.set(e)},cancel:()=>{let e=t.get();e!==null&&e.cancel()}})};var kP=Object.freeze({__proto__:null,throttle:OP,init:e=>e.stream.streams.state(e)});let AP=wd({fields:[ka(`stream`,wa(`mode`,{throttle:[G(`delay`),K(`stopEvent`,!0),wu(`streams`,{setup:(e,t)=>{let n=e.stream,r=bM(e.onStream,n.delay);return t.setTimer(r),(e,t)=>{r.throttle(e,t),n.stopEvent&&t.stop()}},state:OP})]})),K(`event`,`input`),za(`cancelEvent`),Su(`onStream`)],name:`streaming`,active:DP,state:kP}),jP=(e,t,n)=>{let r=Q.getValue(n);Q.setValue(t,r),NP(t)},MP=(e,t)=>{let n=e.element,r=pl(n),i=n.dom;fn(n,`type`)!==`number`&&t(i,r)},NP=e=>{MP(e,(e,t)=>e.setSelectionRange(t.length,t.length))},PP=(e,t)=>{MP(e,(e,n)=>e.setSelectionRange(t,n.length))},FP=(e,t,n)=>{if(e.selectsOver){let r=Q.getValue(t),i=e.getDisplayText(r),a=Q.getValue(n);return e.getDisplayText(a).indexOf(i)===0?O.some(()=>{jP(e,t,n),PP(t,i.length)}):O.none()}else return O.none()},IP=S(`alloy.typeahead.itemexecute`),LP=(e,t,n,r)=>{let i=(t,n,i)=>{e.previewing.set(!1);let a=TD.getCoupled(t,`sandbox`);qm.isOpen(a)?Dg.getCurrent(a).each(e=>{s_.getHighlighted(e).fold(()=>{i(e)},()=>{Ds(a,e.element,`keydown`,n)})}):ID(e,o(t),t,a,r,e=>{Dg.getCurrent(e).each(i)},Vb.HighlightMenuAndItem).get(y)},a=WS(e),o=e=>t=>t.map(t=>{let n=_e(ze(t.menus),e=>de(e.items,e=>e.type===`item`));return Q.getState(e).update(N(n,e=>e.data)),t}),s=e=>Dg.getCurrent(e),c=`typeaheadevents`,l=[Wy.config({}),Q.config({onSetValue:e.onSetValue,store:{mode:`dataset`,getDataKey:e=>pl(e.element),getFallbackEntry:e=>({value:e,meta:{}}),setValue:(t,n)=>{ml(t.element,e.model.getDisplayText(n))},...e.initialData.map(e=>uo(`initialValue`,e)).getOr({})}}),AP.config({stream:{mode:`throttle`,delay:e.responseTime,stopEvent:!1},onStream:(t,n)=>{let i=TD.getCoupled(t,`sandbox`);if(Wy.isFocused(t)&&pl(t.element).length>=e.minChars){let n=s(i).bind(e=>s_.getHighlighted(e).map(Q.getValue));e.previewing.set(!0),ID(e,o(t),t,i,r,t=>{s(i).each(t=>{n.fold(()=>{e.model.selectsOver&&s_.highlightFirst(t)},e=>{s_.highlightBy(t,t=>Q.getValue(t).value===e.value),s_.getHighlighted(t).orThunk(()=>(s_.highlightFirst(t),O.none()))})})},Vb.HighlightJustMenu).get(y)}},cancelEvent:is()}),Ty.config({mode:`special`,onDown:(e,t)=>(i(e,t,s_.highlightFirst),O.some(!0)),onEscape:e=>{let t=TD.getCoupled(e,`sandbox`);return qm.isOpen(t)?(qm.close(t),O.some(!0)):O.none()},onUp:(e,t)=>(i(e,t,s_.highlightLast),O.some(!0)),onEnter:t=>{let n=TD.getCoupled(t,`sandbox`),r=qm.isOpen(n);if(r&&!e.previewing.get())return s(n).bind(e=>s_.getHighlighted(e)).map(e=>(Ss(t,IP(),{item:e}),!0));{let i=Q.getValue(t);return xs(t,is()),e.onExecute(n,t,i),r&&qm.close(n),O.some(!0)}}}),ob.config({toggleClass:e.markers.openClass,aria:{mode:`expanded`}}),TD.config({others:{sandbox:t=>HD(e,t,{onOpen:()=>ob.on(t),onClose:()=>{e.lazyTypeaheadComp.get().each(e=>hn(e.element,`aria-activedescendant`)),ob.off(t)}})}}),By(c,[Vs(t=>{e.lazyTypeaheadComp.set(O.some(t))}),Hs(t=>{e.lazyTypeaheadComp.set(O.none())}),Ws(t=>{let n=y;RD(e,o(t),t,r,n,Vb.HighlightMenuAndItem).get(y)}),q(IP(),(t,n)=>{let r=TD.getCoupled(t,`sandbox`);jP(e.model,t,n.event.item),xs(t,is()),e.onItemExecute(t,r,n.event.item,Q.getValue(t)),qm.close(r),NP(t)})].concat(e.dismissOnBlur?[q(Xo(),e=>{let t=TD.getCoupled(e,`sandbox`);Pd(t.element).isNone()&&qm.close(t)})]:[]))],u={[ds()]:[Q.name(),AP.name(),c],...e.eventOrder};return{uid:e.uid,dom:KS(Di(e,{inputAttributes:{role:`combobox`,"aria-autocomplete":`list`,"aria-haspopup":`true`}})),behaviours:{...a,...mh(e.typeaheadBehaviours,l)},eventOrder:u}},RP=S([za(`lazySink`),G(`fetch`),K(`minChars`,5),K(`responseTime`,1e3),bu(`onOpen`),K(`getHotspot`,O.some),K(`getAnchorOverrides`,S({})),K(`layouts`,O.none()),K(`eventOrder`,{}),no(`model`,{},[K(`getDisplayText`,e=>e.meta!==void 0&&e.meta.text!==void 0?e.meta.text:e.value),K(`selectsOver`,!0),K(`populateFromBrowse`,!0)]),bu(`onSetValue`),xu(`onExecute`),bu(`onItemExecute`),K(`inputClasses`,[]),K(`inputAttributes`,{}),K(`inputStyles`,{}),K(`matchWidth`,!0),K(`useMinWidth`,!1),K(`dismissOnBlur`,!0),vu([`openClass`]),za(`initialData`),fh(`typeaheadBehaviours`,[Wy,Q,AP,Ty,ob,TD]),Da(`lazyTypeaheadComp`,()=>ro(O.none)),Da(`previewing`,()=>ro(!0))].concat(US(),WD())),zP=S([Gh({schema:[_u()],name:`menu`,overrides:e=>({fakeFocus:!0,onHighlightItem:(t,n,r)=>{e.previewing.get()?e.lazyTypeaheadComp.get().each(t=>{FP(e.model,t,r).fold(()=>{e.model.selectsOver?(s_.dehighlight(n,r),e.previewing.set(!0)):e.previewing.set(!1)},t=>{t(),e.previewing.set(!1)})}):e.lazyTypeaheadComp.get().each(t=>{e.model.populateFromBrowse&&jP(e.model,t,r),pn(r.element,`id`).each(e=>un(t.element,`aria-activedescendant`,e))})},onExecute:(t,n)=>e.lazyTypeaheadComp.get().map(e=>(Ss(e,IP(),{item:n}),!0)),onHover:(t,n)=>{e.previewing.set(!1),e.lazyTypeaheadComp.get().each(t=>{e.model.populateFromBrowse&&jP(e.model,t,n)})}})})]),BP=wg({name:`Typeahead`,configFields:RP(),partFields:zP(),factory:LP}),VP=e=>{let t=()=>VP(e.toCached()),n=t=>VP(e.bind(e=>e.fold(e=>AD.pure(ui.error(e)),e=>t(e)))),r=t=>VP(e.map(e=>e.bind(t))),i=t=>VP(e.map(e=>e.map(t))),a=t=>VP(e.map(e=>e.mapError(t))),o=(t,n)=>e.map(e=>e.fold(t,n)),s=(t,n)=>VP(AD.nu(r=>{let i=!1,a=setTimeout(()=>{i=!0,r(ui.error(n()))},t);e.get(e=>{i||(clearTimeout(a),r(e))})}));return{...e,toCached:t,bindFuture:n,bindResult:r,mapResult:i,mapError:a,foldResult:o,withTimeout:s}},HP=e=>VP(AD.nu(e)),UP=e=>VP(AD.pure(ui.value(e))),WP={nu:HP,wrap:VP,pure:UP,value:UP,error:e=>VP(AD.pure(ui.error(e))),fromResult:e=>VP(AD.pure(e)),fromFuture:e=>VP(e.map(ui.value)),fromPromise:e=>HP(t=>{e.then(e=>{t(ui.value(e))},e=>{t(ui.error(e))})})},GP=(e,t,n=[],r,i,a)=>{let o=t.fold(()=>({}),e=>({action:e}));return Di(Di({buttonBehaviours:Z([Jw.button(()=>!e.enabled||a.isDisabled()),qw(),GO.config({}),By(`button press`,[js(`click`),js(`mousedown`)])].concat(n)),eventOrder:{click:[`button press`,`alloy.base.behaviour`],mousedown:[`button press`,`alloy.base.behaviour`]},...o},{dom:r}),{components:i})},KP=(e,t,n,r=[])=>GP(e,t,r,{tag:`button`,classes:[`tox-tbtn`],attributes:e.tooltip.map(e=>({"aria-label":n.translate(e),title:n.translate(e)})).getOr({})},eT([e.icon.map(e=>rN(e,n.icons))]),n),qP=e=>{switch(e){case`primary`:return[`tox-button`];case`toolbar`:return[`tox-tbtn`];case`secondary`:default:return[`tox-button`,`tox-button--secondary`]}},JP=(e,t,n,r=[],i=[])=>{let a=n.translate(e.text),o=e.icon.map(e=>rN(e,n.icons)),s=[o.getOrThunk(()=>Fl(a))];return GP(e,t,r,{tag:`button`,classes:[...qP(e.buttonType.getOr(!e.primary&&!e.borderless?`secondary`:`primary`)),...o.isSome()?[`tox-button--icon`]:[],...e.borderless?[`tox-button--naked`]:[],...i],attributes:{title:a}},s,n)},YP=(e,t,n,r=[],i=[])=>{let a=JP(e,O.some(t),n,r,i);return Jb.sketch(a)},XP=(e,t)=>n=>{t===`custom`?Ss(n,nk,{name:e,value:{}}):t===`submit`?xs(n,rk):t===`cancel`?xs(n,tk):console.error(`Unknown button type: `,t)},ZP=(e,t)=>t===`menu`,QP=(e,t)=>t===`custom`||t===`cancel`||t===`submit`,$P=(e,t)=>t===`togglebutton`,eF=(e,t)=>{let n=e.icon.map(e=>iN(e,t.icons)).map(Yb),r=r=>{Ss(r,nk,{name:e.name,value:{setIcon:e=>{n.map(n=>n.getOpt(r).each(n=>{Ry.set(n,[iN(e,t.icons)])}))}}})},i=e.buttonType.getOr(e.primary?`primary`:`secondary`),a={...e,name:e.name??``,primary:i===`primary`,tooltip:O.from(e.tooltip),enabled:e.enabled??!1,borderless:!1},o=a.tooltip.map(e=>({"aria-label":t.translate(e),title:t.translate(e)})).getOr({}),s=qP(i??`secondary`),c=e.icon.isSome()&&e.text.isSome(),l={tag:`button`,classes:[...s.concat(e.icon.isSome()?[`tox-button--icon`]:[]),...e.active?[`tox-button--enabled`]:[],...c?[`tox-button--icon-and-text`]:[]],attributes:o},u=[],d=Fl(t.translate(e.text.getOr(``))),f=[...eT([n.map(e=>e.asSpec())]),...e.text.isSome()?[d]:[]],p=GP(a,O.some(r),u,l,f,t);return Jb.sketch(p)},tF=(e,t,n)=>{if(ZP(e,t)){let t=()=>i,r=e,i=Yb(pP({...e,type:`menubutton`,search:O.none(),onSetup:t=>(t.setEnabled(e.enabled),y),fetch:mP(r.items,t,n)},`tox-tbtn`,n,O.none()));return i.asSpec()}else if(QP(e,t)){let r=XP(e.name,t);return YP({...e,borderless:!1},r,n.shared.providers,[])}else if($P(e,t))return eF(e,n.shared.providers);else throw console.error(`Unknown footer button type: `,t),Error(`Unknown footer button type`)},nF=(e,t)=>{let n=XP(e.name,`custom`);return JO(O.none(),UO.parts.field({factory:Jb,...JP(e,O.some(n),t,[sM(``),tM.self()])}))},rF={type:`separator`},iF=e=>({type:`menuitem`,value:e.url,text:e.title,meta:{attach:e.attach},onAction:y}),aF=(e,t)=>({type:`menuitem`,value:t,text:e,meta:{attach:void 0},onAction:y}),oF=e=>N(e,iF),sF=(e,t)=>de(t,t=>t.type===e),cF=(e,t)=>oF(sF(e,t)),lF=e=>cF(`header`,e.targets),uF=e=>cF(`anchor`,e.targets),dF=e=>O.from(e.anchorTop).map(e=>aF(`<top>`,e)).toArray(),fF=e=>O.from(e.anchorBottom).map(e=>aF(`<bottom>`,e)).toArray(),pF=e=>N(e,e=>aF(e,e)),mF=e=>pe(e,(e,t)=>e.length===0||t.length===0?e.concat(t):e.concat(rF,t),[]),hF=(e,t)=>{let n=e.toLowerCase();return de(t,e=>{let t=e.meta!==void 0&&e.meta.text!==void 0?e.meta.text:e.text,r=e.value??``;return tt(t.toLowerCase(),n)||tt(r.toLowerCase(),n)})},gF=(e,t,n)=>{let r=Q.getValue(t),i=r?.meta?.text??r.value;return n.getLinkInformation().fold(()=>[],t=>{let r=hF(i,pF(n.getHistory(e)));return e===`file`?mF([r,hF(i,lF(t)),hF(i,F([dF(t),uF(t),fF(t)]))]):r})},_F=J(`aria-invalid`),vF=(e,t,n,r)=>{let i=t.shared.providers,a=t=>{let r=Q.getValue(t);n.addToHistory(r.value,e.filetype)},o={...r.map(e=>({initialData:e})).getOr({}),dismissOnBlur:!0,inputClasses:[`tox-textfield`],sandboxClasses:[`tox-dialog__popups`],inputAttributes:{"aria-errormessage":_F,type:`url`},minChars:0,responseTime:0,fetch:r=>{let i=yN(gF(e.filetype,r,n),wS.BUBBLE_TO_SANDBOX,t,{isHorizontalMenu:!1,search:O.none()});return AD.pure(i)},getHotspot:e=>p.getOpt(e),onSetValue:(e,t)=>{e.hasConfigured(_k)&&_k.run(e).get(y)},typeaheadBehaviours:Z([...n.getValidationHandler().map(t=>_k.config({getRoot:e=>Bt(e.element),invalidClass:`tox-control-wrap--status-invalid`,notify:{onInvalid:(e,t)=>{l.getOpt(e).each(e=>{un(e.element,`title`,i.translate(t))})}},validator:{validate:n=>{let r=Q.getValue(n);return WP.nu(n=>{t({type:e.filetype,url:r.value},e=>{e.status===`invalid`?n(ui.error(e.message)):n(ui.value(e.message))})})},validateOnLoad:!1}})).toArray(),Hg.config({disabled:()=>!e.enabled||i.isDisabled()}),GO.config({}),By(`urlinput-events`,[q(Bo(),t=>{let n=pl(t.element),r=n.trim();r!==n&&ml(t.element,r),e.filetype===`file`&&Ss(t,$O,{name:e.name})}),q(Vo(),t=>{Ss(t,$O,{name:e.name}),a(t)}),q(Zo(),t=>{Ss(t,$O,{name:e.name}),a(t)})])]),eventOrder:{[Bo()]:[`streaming`,`urlinput-events`,`invalidating`]},model:{getDisplayText:e=>e.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:`tox-textfield--popup-open`},lazySink:t.shared.getSink,parts:{menu:HS(!1,1,`normal`)},onExecute:(e,t,n)=>{Ss(t,rk,{})},onItemExecute:(t,n,r,i)=>{a(t),Ss(t,$O,{name:e.name})}},s=UO.parts.field({...o,factory:BP}),c=e.label.map(e=>QO(e,i)),l=Yb(((e,t,n=e,r=e)=>sx(n,{tag:`div`,classes:[`tox-icon`,`tox-control-wrap__status-icon-`+e],attributes:{title:i.translate(r),"aria-live":`polite`,...t.fold(()=>({}),e=>({id:e}))}},i.icons))(`invalid`,O.some(_F),`warning`)),u=Yb({dom:{tag:`div`,classes:[`tox-control-wrap__status-icon-wrap`]},components:[l.asSpec()]}),d=n.getUrlPicker(e.filetype),f=J(`browser.url.event`),p=Yb({dom:{tag:`div`,classes:[`tox-control-wrap`]},components:[s,u.asSpec()],behaviours:Z([Hg.config({disabled:()=>!e.enabled||i.isDisabled()})])}),m=Yb(YP({name:e.name,icon:O.some(`browse`),text:e.label.getOr(``),enabled:e.enabled,primary:!1,buttonType:O.none(),borderless:!0},e=>xs(e,f),i,[],[`tox-browse-url`]));return UO.sketch({dom:XO(),components:c.toArray().concat([{dom:{tag:`div`,classes:[`tox-form__controls-h-stack`]},components:F([[p.asSpec()],d.map(()=>m.asSpec()).toArray()])}]),fieldBehaviours:Z([Hg.config({disabled:()=>!e.enabled||i.isDisabled(),onDisabled:e=>{UO.getField(e).each(Hg.disable),m.getOpt(e).each(Hg.disable)},onEnabled:e=>{UO.getField(e).each(Hg.enable),m.getOpt(e).each(Hg.enable)}}),qw(),By(`url-input-events`,[q(f,t=>{Dg.getCurrent(t).each(n=>{let r=Q.getValue(n),i={fieldname:e.name,...r};d.each(r=>{r(i).get(r=>{Q.setValue(n,r),Ss(t,$O,{name:e.name})})})})})])])})},yF=(e,t)=>{let n=nx(e.icon,t.icons);return RO.sketch({dom:{tag:`div`,attributes:{role:`alert`},classes:[`tox-notification`,`tox-notification--in`,`tox-notification--${e.level}`]},components:[{dom:{tag:`div`,classes:[`tox-notification__icon`],innerHtml:e.url?void 0:n},components:e.url?[Jb.sketch({dom:{tag:`button`,classes:[`tox-button`,`tox-button--naked`,`tox-button--icon`],innerHtml:n,attributes:{title:t.translate(e.iconTooltip)}},action:t=>Ss(t,nk,{name:`alert-banner`,value:e.url}),buttonBehaviours:Z([ax()])})]:void 0},{dom:{tag:`div`,classes:[`tox-notification__body`],innerHtml:t.translate(e.text)}}]})},bF=(e,t)=>{e.dom.checked=t},xF=e=>e.dom.checked,SF=(e,t,n)=>{let r=e=>(e.element.dom.click(),O.some(!0)),i=UO.parts.field({factory:{sketch:C},dom:{tag:`input`,classes:[`tox-checkbox__input`],attributes:{type:`checkbox`}},behaviours:Z([tM.self(),Hg.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{Bt(e.element).each(e=>il(e,`tox-checkbox--disabled`))},onEnabled:e=>{Bt(e.element).each(e=>ol(e,`tox-checkbox--disabled`))}}),GO.config({}),Wy.config({}),aM(n,xF,bF),Ty.config({mode:`special`,onEnter:r,onSpace:r,stopSpaceKeyup:!0}),By(`checkbox-events`,[q(Vo(),(t,n)=>{Ss(t,$O,{name:e.name})})])])}),a=UO.parts.label({dom:{tag:`span`,classes:[`tox-checkbox__label`]},components:[Fl(t.translate(e.label))],behaviours:Z([vk.config({})])}),o=e=>sx(e===`checked`?`selected`:`unselected`,{tag:`span`,classes:[`tox-icon`,`tox-checkbox-icon__`+e]},t.icons),s=Yb({dom:{tag:`div`,classes:[`tox-checkbox__icons`]},components:[o(`checked`),o(`unchecked`)]});return UO.sketch({dom:{tag:`label`,classes:[`tox-checkbox`]},components:[i,s.asSpec(),a],fieldBehaviours:Z([Hg.config({disabled:()=>!e.enabled||t.isDisabled()}),qw()])})},CF=e=>e.presets===`presentation`?RO.sketch({dom:{tag:`div`,classes:[`tox-form__group`],innerHtml:e.html}}):RO.sketch({dom:{tag:`div`,classes:[`tox-form__group`],innerHtml:e.html,attributes:{role:`document`}},containerBehaviours:Z([GO.config({}),Wy.config({})])}),wF=e=>(t,n,r,i)=>L(n,`name`).fold(()=>e(n,i,O.none()),a=>t.field(a,e(n,i,L(r,a)))),TF={bar:wF((e,t)=>BO(e,t.shared)),collection:wF((e,t,n)=>ck(e,t.shared.providers,n)),alertbanner:wF((e,t)=>yF(e,t.shared.providers)),input:wF((e,t,n)=>UN(e,t.shared.providers,n)),textarea:wF((e,t,n)=>WN(e,t.shared.providers,n)),label:wF((e,t)=>XM(e,t.shared)),iframe:(e=>(t,n,r,i)=>{let a=Di(n,{source:`dynamic`});return wF(e)(t,a,r,i)})((e,t,n)=>GM(e,t.shared.providers,n)),button:wF((e,t)=>nF(e,t.shared.providers)),checkbox:wF((e,t,n)=>SF(e,t.shared.providers,n)),colorinput:wF((e,t,n)=>Ck(e,t.shared,t.colorinput,n)),colorpicker:wF((e,t,n)=>uM(e,t.shared.providers,n)),dropzone:wF((e,t,n)=>gM(e,t.shared.providers,n)),grid:wF((e,t)=>_M(e,t.shared)),listbox:wF((e,t,n)=>wN(e,t,n)),selectbox:wF((e,t,n)=>DN(e,t.shared.providers,n)),sizeinput:wF((e,t)=>zN(e,t.shared.providers)),slider:wF((e,t,n)=>BN(e,t.shared.providers,n)),urlinput:wF((e,t,n)=>vF(e,t,t.urlinput,n)),customeditor:wF(pM),htmlpanel:wF(CF),imagepreview:wF((e,t,n)=>YM(e,n)),table:wF((e,t)=>VN(e,t.shared.providers)),tree:wF((e,t)=>EP(e,t)),panel:wF((e,t)=>TN(e,t))},EF={field:(e,t)=>t,record:S([])},DF=(e,t,n,r)=>{let i=Di(r,{shared:{interpreter:t=>OF(e,t,n,i)}});return OF(e,t,n,i)},OF=(e,t,n,r)=>L(TF,t.type).fold(()=>(console.error(`Unknown factory type "${t.type}", defaulting to container: `,t),t),i=>i(e,t,n,r)),kF=(e,t,n)=>OF(EF,e,t,n),AF=`layout-inset`,jF=e=>e.x,MF=(e,t)=>e.x+e.width/2-t.width/2,NF=(e,t)=>e.x+e.width-t.width,PF=e=>e.y,FF=(e,t)=>e.y+e.height-t.height,IF=(e,t)=>e.y+e.height/2-t.height/2,LF=(e,t,n)=>Du(NF(e,t),FF(e,t),n.insetSouthwest(),Fu(),`southwest`,Uu(e,{right:0,bottom:3}),AF),RF=(e,t,n)=>Du(jF(e),FF(e,t),n.insetSoutheast(),Pu(),`southeast`,Uu(e,{left:1,bottom:3}),AF),zF=(e,t,n)=>Du(NF(e,t),PF(e),n.insetNorthwest(),Nu(),`northwest`,Uu(e,{right:0,top:2}),AF),BF=(e,t,n)=>Du(jF(e),PF(e),n.insetNortheast(),Mu(),`northeast`,Uu(e,{left:1,top:2}),AF),VF=(e,t,n)=>Du(MF(e,t),PF(e),n.insetNorth(),Iu(),`north`,Uu(e,{top:2}),AF),HF=(e,t,n)=>Du(MF(e,t),FF(e,t),n.insetSouth(),Lu(),`south`,Uu(e,{bottom:3}),AF),UF=(e,t,n)=>Du(NF(e,t),IF(e,t),n.insetEast(),zu(),`east`,Uu(e,{right:0}),AF),WF=(e,t,n)=>Du(jF(e),IF(e,t),n.insetWest(),Ru(),`west`,Uu(e,{left:1}),AF),GF=e=>{switch(e){case`north`:return VF;case`northeast`:return BF;case`northwest`:return zF;case`south`:return HF;case`southeast`:return RF;case`southwest`:return LF;case`east`:return UF;case`west`:return WF}},KF=(e,t,n,r,i)=>Qd(r).map(GF).getOr(VF)(e,t,n,r,i),qF=e=>{switch(e){case`north`:return HF;case`northeast`:return RF;case`northwest`:return LF;case`south`:return VF;case`southeast`:return BF;case`southwest`:return zF;case`east`:return WF;case`west`:return UF}},JF=(e,t,n,r,i)=>Qd(r).map(qF).getOr(VF)(e,t,n,r,i),YF={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},XF=(e,t,n)=>{let r={maxHeightFunction:Nf()},i=()=>({type:`node`,root:$t(Qt(e())),node:O.from(e()),bubble:Rf(12,12,YF),layouts:{onRtl:()=>[BF],onLtr:()=>[zF]},overrides:r}),a=()=>({type:`hotspot`,hotspot:t(),bubble:Rf(-12,12,YF),layouts:{onRtl:()=>[ed,td,ad],onLtr:()=>[td,ed,ad]},overrides:r});return()=>n()?i():a()},ZF=(e,t,n,r)=>{let i={maxHeightFunction:Nf()},a=()=>({type:`node`,root:$t(Qt(t())),node:O.from(t()),bubble:Rf(12,12,YF),layouts:{onRtl:()=>[VF],onLtr:()=>[VF]},overrides:i}),o=()=>e?{type:`node`,root:$t(Qt(t())),node:O.from(t()),bubble:Rf(0,-jn(t()),YF),layouts:{onRtl:()=>[id],onLtr:()=>[id]},overrides:i}:{type:`hotspot`,hotspot:n(),bubble:Rf(0,0,YF),layouts:{onRtl:()=>[id],onLtr:()=>[id]},overrides:i};return()=>r()?a():o()},QF=(e,t,n)=>{let r=()=>({type:`node`,root:$t(Qt(e())),node:O.from(e()),layouts:{onRtl:()=>[VF],onLtr:()=>[VF]}}),i=()=>({type:`hotspot`,hotspot:t(),layouts:{onRtl:()=>[ad],onLtr:()=>[ad]}});return()=>n()?r():i()},$F=(e,t)=>()=>({type:`selection`,root:t(),getSelection:()=>{let t=e.selection.getRng(),n=e.model.table.getSelectedCells();if(n.length>1){let e=n[0],t=n[n.length-1],r={firstCell:z.fromDom(e),lastCell:z.fromDom(t)};return O.some(r)}return O.some(hp.range(z.fromDom(t.startContainer),t.startOffset,z.fromDom(t.endContainer),t.endOffset))}}),eI=e=>t=>({type:`node`,root:e(),node:t}),tI=(e,t,n,r)=>{let i=fS(e),a=()=>z.fromDom(e.getBody()),o=()=>z.fromDom(e.getContentAreaContainer()),s=()=>i||!r();return{inlineDialog:XF(o,t,s),inlineBottomDialog:ZF(e.inline,o,n,s),banner:QF(o,t,s),cursor:$F(e,a),node:eI(a)}},nI=e=>(t,n)=>{YE(e)(t,n)},rI=e=>()=>ME(e),iI=e=>t=>OE(e,t),aI=e=>t=>jE(e,t),oI=e=>({colorPicker:nI(e),hasCustomColors:rI(e),getColors:iI(e),getColorCols:aI(e)}),sI=e=>()=>Jx(e),cI=e=>({isDraggableModal:sI(e)}),lI=e=>{let t=ro(uS(e)?`bottom`:`top`);return{isPositionedAtTop:()=>t.get()===`top`,getDockingMode:t.get,setDockingMode:t.set}},uI=e=>Ve(e,`items`),dI=e=>Ve(e,`format`),fI=[{title:`Headings`,items:[{title:`Heading 1`,format:`h1`},{title:`Heading 2`,format:`h2`},{title:`Heading 3`,format:`h3`},{title:`Heading 4`,format:`h4`},{title:`Heading 5`,format:`h5`},{title:`Heading 6`,format:`h6`}]},{title:`Inline`,items:[{title:`Bold`,format:`bold`},{title:`Italic`,format:`italic`},{title:`Underline`,format:`underline`},{title:`Strikethrough`,format:`strikethrough`},{title:`Superscript`,format:`superscript`},{title:`Subscript`,format:`subscript`},{title:`Code`,format:`code`}]},{title:`Blocks`,items:[{title:`Paragraph`,format:`p`},{title:`Blockquote`,format:`blockquote`},{title:`Div`,format:`div`},{title:`Pre`,format:`pre`}]},{title:`Align`,items:[{title:`Left`,format:`alignleft`},{title:`Center`,format:`aligncenter`},{title:`Right`,format:`alignright`},{title:`Justify`,format:`alignjustify`}]}],pI=e=>Be(e,`items`),mI=e=>Be(e,`block`),hI=e=>Be(e,`inline`),gI=e=>Be(e,`selector`),_I=e=>pe(e,(e,t)=>{if(pI(t)){let n=_I(t.items);return{customFormats:e.customFormats.concat(n.customFormats),formats:e.formats.concat([{title:t.title,items:n.formats}])}}else if(hI(t)||mI(t)||gI(t)){let n=`custom-${s(t.name)?t.name:t.title.toLowerCase()}`;return{customFormats:e.customFormats.concat([{name:n,format:t}]),formats:e.formats.concat([{title:t.title,format:n,icon:t.icon}])}}else return{...e,formats:e.formats.concat(t)}},{customFormats:[],formats:[]}),vI=(e,t)=>{let n=_I(t),r=t=>{P(t,t=>{e.formatter.has(t.name)||e.formatter.register(t.name,t.format)})};return e.formatter?r(n.customFormats):e.on(`init`,()=>{r(n.customFormats)}),n.formats},yI=e=>Dx(e).map(t=>{let n=vI(e,t);return Ox(e)?fI.concat(n):n}).getOr(fI),bI=e=>{let t=Oe(e);return t.length===1&&oe(t,`title`)},xI=(e,t,n)=>({...e,type:`formatter`,isSelected:t(e.format),getStylePreview:n(e.format)}),SI=(e,t,n,r)=>{let i=e=>xI(e,n,r),a=e=>{let t=c(e.items);return{...e,type:`submenu`,getStyleItems:S(t)}},o=t=>{let i=s(t.name)?t.name:J(t.title),a=`custom-${i}`,o={...t,type:`formatter`,format:a,isSelected:n(a),getStylePreview:r(a)};return e.formatter.register(i,o),o},c=e=>N(e,e=>uI(e)?a(e):dI(e)?i(e):bI(e)?{...e,type:`separator`}:o(e));return c(t)},CI=e=>{let t=t=>()=>e.formatter.match(t),n=t=>()=>{let n=e.formatter.get(t);return n===void 0?O.none():O.some({tag:n.length>0&&(n[0].inline||n[0].block)||`div`,styles:e.dom.parseStyle(e.formatter.getCssText(t))})},r=ro([]),i=ro([]),a=ro(!1);return e.on(`PreInit`,i=>{let a=SI(e,yI(e),t,n);r.set(a)}),e.on(`addStyleModifications`,r=>{let o=SI(e,r.items,t,n);i.set(o),a.set(r.replace)}),{getData:()=>{let e=a.get()?[]:r.get(),t=i.get();return e.concat(t)}}},wI=e=>h(e)&&e.nodeType===1,TI=mM.trim,EI=e=>t=>!!(wI(t)&&(t.contentEditable===e||t.getAttribute(`data-mce-contenteditable`)===e)),DI=EI(`true`),OI=EI(`false`),kI=(e,t,n,r,i)=>({type:e,title:t,url:n,level:r,attach:i}),AI=e=>{let t=e;for(;t=t.parentNode;){let e=t.contentEditable;if(e&&e!==`inherit`)return DI(t)}return!1},jI=(e,t)=>N(Ap(z.fromDom(t),e),e=>e.dom),MI=e=>e.innerText||e.textContent,NI=e=>e.id?e.id:J(`h`),PI=e=>e&&e.nodeName===`A`&&(e.id||e.name)!==void 0,FI=e=>PI(e)&&LI(e),II=e=>e&&/^(H[1-6])$/.test(e.nodeName),LI=e=>AI(e)&&!OI(e),RI=e=>II(e)&&LI(e),zI=e=>II(e)?parseInt(e.nodeName.substr(1),10):0,BI=e=>{let t=NI(e);return kI(`header`,MI(e)??``,`#`+t,zI(e),()=>{e.id=t})},VI=e=>{let t=e.id||e.name;return kI(`anchor`,MI(e)||`#`+t,`#`+t,0,y)},HI=e=>N(de(e,RI),BI),UI=e=>N(de(e,FI),VI),WI=e=>jI(`h1,h2,h3,h4,h5,h6,a:not([href])`,e),GI=e=>TI(e.title).length>0,KI={find:e=>{let t=WI(e);return de(HI(t).concat(UI(t)),GI)}},qI=`tinymce-url-history`,JI=e=>s(e)&&/^https?/.test(e),YI=e=>u(e)&&e.length<=5&&ve(e,JI),XI=e=>c(e)&&Re(e,e=>!YI(e)).isNone(),ZI=()=>{let e=dE.getItem(qI);if(e===null)return{};let t;try{t=JSON.parse(e)}catch(e){if(e instanceof SyntaxError)return console.log(`Local storage `+qI+` was not valid JSON`,e),{};throw e}return XI(t)?t:(console.log(`Local storage `+qI+` was not valid format`,t),{})},QI=e=>{if(!XI(e))throw Error(`Bad format for history:
`+JSON.stringify(e));dE.setItem(qI,JSON.stringify(e))},$I=e=>L(ZI(),e).getOr([]),eL=(e,t)=>{if(!JI(e))return;let n=ZI(),r=de(L(n,t).getOr([]),t=>t!==e);n[t]=[e].concat(r).slice(0,5),QI(n)},tL=e=>!!e,nL=e=>je(mM.makeMap(e,/[, ]/),tL),rL=e=>O.from(Vx(e)),iL=e=>{let t=O.from(Wx(e)).filter(tL).map(nL);return rL(e).fold(D,e=>t.fold(re,e=>Oe(e).length>0?e:!1))},aL=(e,t)=>{let n=iL(e);return f(n)?n?rL(e):O.none():n[t]?rL(e):O.none()},oL=(e,t)=>aL(e,t).map(n=>r=>AD.nu(i=>{let a=(e,t)=>{if(!s(e))throw Error(`Expected value to be string`);if(t!==void 0&&!c(t))throw Error(`Expected meta to be a object`);i({value:e,meta:t})},o={filetype:t,fieldname:r.fieldname,...O.from(r.meta).getOr({})};n.call(e,a,r.value,o)})),sL=e=>O.from(e).filter(s).getOrUndefined(),cL=e=>Gx(e)?O.some({targets:KI.find(e.getBody()),anchorTop:sL(Kx(e)),anchorBottom:sL(qx(e))}):O.none(),lL=e=>O.from(Hx(e)),uL=e=>({getHistory:$I,addToHistory:eL,getLinkInformation:()=>cL(e),getValidationHandler:()=>lL(e),getUrlPicker:t=>oL(e,t)}),dL=(e,t,n,r)=>{let i=ro(!1),a=lI(t),o={icons:()=>t.ui.registry.getAll().icons,menuItems:()=>t.ui.registry.getAll().menuItems,translate:Xb.translate,isDisabled:()=>t.mode.isReadOnly()||!t.ui.isEnabled(),getOption:t.options.get},s=uL(t),c=CI(t),l=oI(t),u=cI(t),d={shared:{providers:o,anchors:tI(t,n,r,a.isPositionedAtTop),header:a},urlinput:s,styles:c,colorinput:l,dialog:u,isContextMenuOpen:()=>i.get(),setContextMenuState:e=>i.set(e)},f={...d,shared:{...d.shared,interpreter:e=>kF(e,{},f),getSink:e.popup}},p={...d,shared:{...d.shared,interpreter:e=>kF(e,{},p),getSink:e.dialog}};return{popup:f,dialog:p}},fL=(e,t,n)=>{let r=(e,r)=>{P([t,...n],t=>{t.broadcastEvent(e,r)})},i=(e,r)=>{P([t,...n],t=>{t.broadcastOn([e],r)})},a=e=>i(Jm(),{target:e.target}),o=Jr(),s=ff(o,`touchstart`,a),c=ff(o,`touchmove`,e=>r(os(),e)),l=ff(o,`touchend`,e=>r(ss(),e)),u=ff(o,`mousedown`,a),d=ff(o,`mouseup`,e=>{e.raw.button===0&&i(Xm(),{target:e.target})}),f=e=>i(Jm(),{target:z.fromDom(e.target)}),p=e=>{e.button===0&&i(Xm(),{target:z.fromDom(e.target)})},m=()=>{P(e.editorManager.get(),t=>{e!==t&&t.dispatch(`DismissPopups`,{relatedTarget:e})})},h=e=>r(cs(),mf(e)),g=e=>{i(Ym(),{}),r(ls(),mf(e))},_=pf(Qt(z.fromDom(e.getElement())),`scroll`,n=>{requestAnimationFrame(()=>{e.getContainer()!=null&&se(hO(e,t.element).map(e=>[e.element,...e.others]).getOr([]),e=>Mt(e,n.target))&&(e.dispatch(`ElementScroll`,{target:n.target.dom}),r(gs(),n))})}),v=()=>i(Ym(),{}),y=t=>{t.state&&i(Jm(),{target:z.fromDom(e.getContainer())})},b=e=>{i(Jm(),{target:z.fromDom(e.relatedTarget.getContainer())})};e.on(`PostRender`,()=>{e.on(`click`,f),e.on(`tap`,f),e.on(`mouseup`,p),e.on(`mousedown`,m),e.on(`ScrollWindow`,h),e.on(`ResizeWindow`,g),e.on(`ResizeEditor`,v),e.on(`AfterProgressState`,y),e.on(`DismissPopups`,b)}),e.on(`remove`,()=>{e.off(`click`,f),e.off(`tap`,f),e.off(`mouseup`,p),e.off(`mousedown`,m),e.off(`ScrollWindow`,h),e.off(`ResizeWindow`,g),e.off(`ResizeEditor`,v),e.off(`AfterProgressState`,y),e.off(`DismissPopups`,b),u.unbind(),s.unbind(),c.unbind(),l.unbind(),d.unbind(),_.unbind()}),e.on(`detach`,()=>{P([t,...n],jm),P([t,...n],e=>e.destroy())})},pL=pg,mL=Yh,hL=S([K(`shell`,!1),G(`makeItem`),K(`setupItem`,y),hh.field(`listBehaviours`,[Ry])]),gL=S([Kh({name:`items`,overrides:()=>({behaviours:Z([Ry.config({})])})})]),_L=wg({name:S(`CustomList`)(),configFields:hL(),partFields:gL(),factory:(e,t,n,r)=>{let i=(t,n)=>{o(t).fold(()=>{throw console.error(`Custom List was defined to not be a shell, but no item container was specified in components`),Error(`Custom List was defined to not be a shell, but no item container was specified in components`)},r=>{let i=Ry.contents(r),a=n.length,o=a-i.length,s=o>0?ce(o,()=>e.makeItem()):[];P(i.slice(a),e=>Ry.remove(r,e)),P(s,e=>Ry.append(r,e)),P(Ry.contents(r),(r,i)=>{e.setupItem(t,r,n[i],i)})})},a=e.shell?{behaviours:[Ry.config({})],components:[]}:{behaviours:[],components:t},o=t=>e.shell?O.some(t):ag(t,e,`items`);return{uid:e.uid,dom:e.dom,components:a.components,behaviours:mh(e.listBehaviours,a.behaviours),apis:{setItems:i}}},apis:{setItems:(e,t,n)=>{e.setItems(t,n)}}}),vL=S([G(`dom`),K(`shell`,!0),fh(`toolbarBehaviours`,[Ry])]),yL=S([Kh({name:`groups`,overrides:()=>({behaviours:Z([Ry.config({})])})})]),bL=wg({name:`Toolbar`,configFields:vL(),partFields:yL(),factory:(e,t,n,r)=>{let i=(e,t)=>{a(e).fold(()=>{throw console.error(`Toolbar was defined to not be a shell, but no groups container was specified in components`),Error(`Toolbar was defined to not be a shell, but no groups container was specified in components`)},e=>{Ry.set(e,t)})},a=t=>e.shell?O.some(t):ag(t,e,`groups`),o=e.shell?{behaviours:[Ry.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:o.components,behaviours:mh(e.toolbarBehaviours,o.behaviours),apis:{setGroups:i,refresh:y},domModification:{attributes:{role:`group`}}}},apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)}}}),xL=y,SL=D,CL=S([]);var wL=Object.freeze({__proto__:null,setup:xL,isDocked:SL,getBehaviours:CL});let TL=e=>(He(Cn(e,`position`),`fixed`)?O.none():Ht(e)).orThunk(()=>{let t=z.fromTag(`span`);return Rt(e).bind(e=>{Rr(e,t);let n=Ht(t);return Hr(t),n})}),EL=e=>TL(e).map(Ln).getOrThunk(()=>Pn(0,0)),DL=(e,t)=>{let n=e.element;il(n,t.transitionClass),ol(n,t.fadeOutClass),il(n,t.fadeInClass),t.onShow(e)},OL=(e,t)=>{let n=e.element;il(n,t.transitionClass),ol(n,t.fadeInClass),il(n,t.fadeOutClass),t.onHide(e)},kL=(e,t)=>e.y<t.bottom&&e.bottom>t.y,AL=(e,t)=>e.y>=t.y,jL=(e,t)=>e.bottom<=t.bottom,ML=(e,t,n)=>({location:`top`,leftX:t,topY:n.bounds.y-e.y}),NL=(e,t,n)=>({location:`bottom`,leftX:t,bottomY:e.bottom-n.bounds.bottom}),PL=e=>e.box.x-e.win.x,FL=(e,t,n)=>{let r=t.win,i=t.box,a=PL(t);return De(e,e=>{switch(e){case`bottom`:return jL(i,n.bounds)?O.none():O.some(NL(r,a,n));case`top`:return AL(i,n.bounds)?O.none():O.some(ML(r,a,n));default:return O.none()}}).getOr({location:`no-dock`})},IL=(e,t,n)=>ve(e,e=>{switch(e){case`bottom`:return jL(t,n.bounds);case`top`:return AL(t,n.bounds)}}),LL=(e,t)=>{let n=t.optScrollEnv.fold(S(e.bounds.y),t=>t.scrollElmTop+(e.bounds.y-t.currentScrollTop));return Pn(e.bounds.x,n)},RL=(e,t)=>{let n=t.optScrollEnv.fold(S(e.y),t=>e.y+t.currentScrollTop-t.scrollElmTop);return Pn(e.x,n)},zL=(e,t,n)=>n.getInitialPos().map(n=>{let r=LL(n,t);return{box:ti(r.left,r.top,Vn(e),An(e)),location:n.location}}),BL=(e,t,n,r,i)=>{let a=RL(t,n),o=ti(a.left,a.top,t.width,t.height);r.setInitialPos({style:wn(e),position:xn(e,`position`)||`static`,bounds:o,location:i.location})},VL=(e,t,n,r,i)=>{r.getInitialPos().fold(()=>BL(e,t,n,r,i),()=>y)},HL=(e,t,n)=>n.getInitialPos().bind(r=>{switch(n.clearInitialPos(),r.position){case`static`:return O.some({morph:`static`});case`absolute`:let n=TL(e).getOr(sn()),i=ni(n),a=n.dom.scrollTop??0;return O.some({morph:`absolute`,positionCss:Id(`absolute`,L(r.style,`left`).map(e=>t.x-i.x),L(r.style,`top`).map(e=>t.y-i.y+a),L(r.style,`right`).map(e=>i.right-t.right),L(r.style,`bottom`).map(e=>i.bottom-t.bottom))});default:return O.none()}}),UL=(e,t,n)=>zL(e,t,n).filter(({box:e})=>IL(n.getModes(),e,t)).bind(({box:t})=>HL(e,t,n)),WL=e=>{switch(e.location){case`top`:return O.some({morph:`fixed`,positionCss:Id(`fixed`,O.some(e.leftX),O.some(e.topY),O.none(),O.none())});case`bottom`:return O.some({morph:`fixed`,positionCss:Id(`fixed`,O.some(e.leftX),O.none(),O.none(),O.some(e.bottomY))});default:return O.none()}},GL=(e,t,n)=>{let r=ni(e),i=oi(),a=FL(n.getModes(),{win:i,box:r},t);return a.location===`top`||a.location===`bottom`?(BL(e,r,t,n,a),WL(a)):O.none()},KL=(e,t,n)=>UL(e,t,n).orThunk(()=>t.optScrollEnv.bind(r=>zL(e,t,n)).bind(({box:e,location:n})=>{let r=oi(),i=PL({win:r,box:e});return WL(n===`top`?ML(r,i,t):NL(r,i,t))})),qL=(e,t,n)=>{let r=e.element;return He(Cn(r,`position`),`fixed`)?KL(r,t,n):GL(r,t,n)},JL=(e,t,n)=>{let r=e.element;return zL(r,t,n).bind(({box:e})=>HL(r,e,n))},YL=(e,t,n,r)=>{let i=ni(e),a=oi(),o=r(a,PL({win:a,box:i}),t);return o.location===`bottom`||o.location===`top`?(VL(e,i,t,n,o),WL(o)):O.none()},XL=(e,t,n)=>{n.setDocked(!1),P([`left`,`right`,`top`,`bottom`,`position`],t=>En(e.element,t)),t.onUndocked(e)},ZL=(e,t,n,r)=>{let i=r.position===`fixed`;n.setDocked(i),Rd(e.element,r),(i?t.onDocked:t.onUndocked)(e)},QL=(e,t,n,r,i=!1)=>{t.contextual.each(t=>{t.lazyContext(e).each(a=>{let o=kL(a,r.bounds);o!==n.isVisible()&&(n.setVisible(o),i&&!o?(cl(e.element,[t.fadeOutClass]),t.onHide(e)):(o?DL:OL)(e,t))})})},$L=(e,t,n,r,i)=>{QL(e,t,n,r,!0),ZL(e,t,n,i.positionCss)},eR=(e,t,n,r,i)=>{switch(i.morph){case`static`:return XL(e,t,n);case`absolute`:return ZL(e,t,n,i.positionCss);case`fixed`:return $L(e,t,n,r,i)}},tR=(e,t,n)=>{let r=t.lazyViewport(e);QL(e,t,n,r),qL(e,r,n).each(i=>{eR(e,t,n,r,i)})},nR=(e,t,n)=>{let r=e.element;n.setDocked(!1),JL(e,t.lazyViewport(e),n).each(r=>{switch(r.morph){case`static`:XL(e,t,n);break;case`absolute`:ZL(e,t,n,r.positionCss);break}}),n.setVisible(!0),t.contextual.each(t=>{ll(r,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(e)}),rR(e,t,n)},rR=(e,t,n)=>{e.getSystem().isConnected()&&tR(e,t,n)},iR=(e,t,n)=>{n.isDocked()&&nR(e,t,n)},aR=e=>(t,n,r)=>{let i=n.lazyViewport(t);YL(t.element,i,r,e).each(e=>{$L(t,n,r,i,e)})},oR=aR(ML),sR=aR(NL);var cR=Object.freeze({__proto__:null,refresh:rR,reset:iR,isDocked:(e,t,n)=>n.isDocked(),getModes:(e,t,n)=>n.getModes(),setModes:(e,t,n,r)=>n.setModes(r),forceDockToTop:oR,forceDockToBottom:sR}),lR=Object.freeze({__proto__:null,events:(e,t)=>Os([Bs(Wo(),(n,r)=>{e.contextual.each(e=>{sl(n.element,e.transitionClass)&&(ll(n.element,[e.transitionClass,e.fadeInClass]),(t.isVisible()?e.onShown:e.onHidden)(n)),r.stop()})}),q(cs(),(n,r)=>{rR(n,e,t)}),q(gs(),(n,r)=>{rR(n,e,t)}),q(ls(),(n,r)=>{iR(n,e,t)})])});let uR=wd({fields:[Ka(`contextual`,[ja(`fadeInClass`),ja(`fadeOutClass`),ja(`transitionClass`),Pa(`lazyContext`),bu(`onShow`),bu(`onShown`),bu(`onHide`),bu(`onHidden`)]),$a(`lazyViewport`,()=>({bounds:oi(),optScrollEnv:O.none()})),to(`modes`,[`top`,`bottom`],ua),bu(`onDocked`),bu(`onUndocked`)],name:`docking`,active:lR,apis:cR,state:Object.freeze({__proto__:null,init:e=>{let t=ro(!1),n=ro(!0),r=uf(),i=ro(e.modes);return wc({isDocked:t.get,setDocked:t.set,getInitialPos:r.get,setInitialPos:r.set,clearInitialPos:r.clear,isVisible:n.get,setVisible:n.set,getModes:i.get,setModes:i.set,readState:()=>`docked:  ${t.get()}, visible: ${n.get()}, modes: ${i.get().join(`,`)}`})}})}),dR=S(J(`toolbar-height-change`)),fR={fadeInClass:`tox-editor-dock-fadein`,fadeOutClass:`tox-editor-dock-fadeout`,transitionClass:`tox-editor-dock-transition`},pR=`tox-tinymce--toolbar-sticky-on`,mR=`tox-tinymce--toolbar-sticky-off`,hR=(e,t)=>{let n=Pt(t),r=Lt(t).dom.innerHeight,i=Ur(n),a=z.fromDom(e.elm),o=ri(a),s=An(a),c=o.y,l=c+s,u=Ln(t),d=An(t),f=u.top,p=f+d,m=Math.abs(f-i.top)<2,h=Math.abs(p-(i.top+r))<2;if(m&&c<p)Wr(i.left,c-d,n);else if(h&&l>f){let e=c-r+s+d;Wr(i.left,e,n)}},gR=(e,t)=>oe(uR.getModes(e),t),_R=e=>{let t=e=>jn(e)+(parseInt(xn(e,`margin-top`),10)||0)+(parseInt(xn(e,`margin-bottom`),10)||0),n=e.element;Bt(n).each(r=>{let i=`padding-`+uR.getModes(e)[0];uR.isDocked(e)?(yn(n,`width`,Vn(r)+`px`),yn(r,i,t(n)+`px`)):(En(n,`width`),En(r,i))})},vR=(e,t)=>{t?(ol(e,fR.fadeOutClass),cl(e,[fR.transitionClass,fR.fadeInClass])):(ol(e,fR.fadeInClass),cl(e,[fR.fadeOutClass,fR.transitionClass]))},yR=(e,t)=>{let n=z.fromDom(e.getContainer());t?(il(n,pR),ol(n,mR)):(il(n,mR),ol(n,pR))},bR=(e,t)=>{let n=Pt(t);Nd(n).filter(e=>!Mt(t,e)).filter(t=>Mt(t,z.fromDom(n.dom.body))||Nt(e,t)).each(()=>Ad(t))},xR=(e,t)=>Pd(e).orThunk(()=>t().toOptional().bind(e=>Pd(e.element))),SR=(e,t,n)=>{e.inline||(t.header.isPositionedAtTop()||e.on(`ResizeEditor`,()=>{n().each(uR.reset)}),e.on(`ResizeWindow ResizeEditor`,()=>{n().each(_R)}),e.on(`SkinLoaded`,()=>{n().each(e=>{uR.isDocked(e)?uR.reset(e):uR.refresh(e)})}),e.on(`FullscreenStateChanged`,()=>{n().each(uR.reset)})),e.on(`AfterScrollIntoView`,e=>{n().each(t=>{uR.refresh(t);let n=t.element;Q_(n)&&hR(e,n)})}),e.on(`PostRender`,()=>{yR(e,!1)})},CR=e=>e().map(uR.isDocked).getOr(!1),wR=()=>[Od.config({channels:{[dR()]:{onReceive:_R}}})],TR=(e,t)=>{let n=uf(),r=t.getSink,i=e=>{r().each(t=>e(t.element))},a=t=>{e.inline||_R(t),yR(e,uR.isDocked(t)),t.getSystem().broadcastOn([Ym()],{}),r().each(e=>e.getSystem().broadcastOn([Ym()],{}))},o=e.inline?[]:wR();return[Wy.config({}),uR.config({contextual:{lazyContext:t=>{let n=jn(t.element),r=e.inline?e.getContentAreaContainer():e.getContainer();return O.from(r).map(r=>{let i=ni(z.fromDom(r));return hO(e,t.element).fold(()=>{let e=i.height-n,r=i.y+(gR(t,`top`)?0:n);return ti(i.x,r,i.width,e)},e=>{let r=ii(i,gO(e)),a=gR(t,`top`)?r.y:r.y+n;return ti(r.x,a,r.width,r.height-n)})})},onShow:()=>{i(e=>vR(e,!0))},onShown:e=>{i(e=>ll(e,[fR.transitionClass,fR.fadeInClass])),n.get().each(t=>{bR(e.element,t),n.clear()})},onHide:e=>{xR(e.element,r).fold(n.clear,n.set),i(e=>vR(e,!1))},onHidden:()=>{i(e=>ll(e,[fR.transitionClass]))},...fR},lazyViewport:t=>hO(e,t.element).fold(()=>{let n=oi(),r=Rx(e),i=n.y+(gR(t,`top`)?r:0),a=n.height-(gR(t,`bottom`)?r:0);return{bounds:ti(n.x,i,n.width,a),optScrollEnv:O.none()}},e=>({bounds:gO(e),optScrollEnv:O.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:Ln(e.element).top})})),modes:[t.header.getDockingMode()],onDocked:a,onUndocked:a}),...o]};var ER=Object.freeze({__proto__:null,setup:SR,isDocked:CR,getBehaviours:TR});let DR=e=>{let t=e.editor,n=e.sticky?TR:CL;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:Z(n(t,e.sharedBackstage))}},OR=H([vC,ka(`items`,ia([U([yC,Ra(`items`,ua)]),ua]))].concat(QC)),kR=e=>ba(`GroupToolbarButton`,OR,e),AR=H([vC,...[Ha(`text`),Ha(`tooltip`),Ha(`icon`),Ja(`search`,!1,ia([da,H([Ha(`placeholder`)])],e=>f(e)?e?O.some({placeholder:O.none()}):O.none():O.some(e))),Pa(`fetch`),$a(`onSetup`,()=>y)]]),jR=e=>ba(`menubutton`,AR,e),MR=H([vC,NC,MC,jC,IC,TC,kC,Za(`presets`,`normal`,[`normal`,`color`,`listpreview`]),VC(1),DC,OC]),NR=e=>ba(`SplitButton`,MR,e);var PR=Cg({factory:(e,t)=>{let n={focus:Ty.focusIn,setMenus:(e,n)=>{let r=N(n,e=>pP(jR({type:`menubutton`,text:e.text,fetch:t=>{t(e.getItems())}}).mapError(e=>Ca(e)).getOrDie(),`tox-mbtn`,t.backstage,O.some(`menuitem`)));Ry.set(e,r)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:Z([Ry.config({}),By(`menubar-events`,[Vs(t=>{e.onSetup(t)}),q(Fo(),(e,t)=>{Xl(e.element,`.tox-mbtn--active`).each(n=>{Zl(t.event.target,`.tox-mbtn`).each(t=>{Mt(n,t)||e.getSystem().getByDom(n).each(n=>{e.getSystem().getByDom(t).each(e=>{qD.expand(e),qD.close(n),Wy.focus(e)})})})})}),q(ms(),(e,t)=>{t.event.prevFocus.bind(t=>e.getSystem().getByDom(t).toOptional()).each(n=>{t.event.newFocus.bind(t=>e.getSystem().getByDom(t).toOptional()).each(e=>{qD.isOpen(n)&&(qD.expand(e),qD.close(n))})})})]),Ty.config({mode:`flow`,selector:`.tox-mbtn`,onEscape:t=>(e.onEscape(t),O.some(!0))}),GO.config({})]),apis:n,domModification:{attributes:{role:`menubar`}}}},name:`silver.Menubar`,configFields:[G(`dom`),G(`uid`),G(`onEscape`),G(`backstage`),K(`onSetup`,y)],apis:{focus:(e,t)=>{e.focus(t)},setMenus:(e,t,n)=>{e.setMenus(t,n)}}});let FR=e=>({uid:e.uid,dom:e.dom,components:[{dom:{tag:`a`,attributes:{href:`https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral`,rel:`noopener`,target:`_blank`,"aria-hidden":`true`},classes:[`tox-promotion-link`],innerHtml:`⚡️Upgrade`}}]}),IR=`container`,LR=[fh(`slotBehaviours`,[])],RR=e=>`<alloy.field.`+e+`>`,zR=e=>{let t=(()=>{let e=[];return{slot:(t,n)=>(e.push(t),eg(IR,RR(t),n)),record:S(e)}})(),n=e(t);return _g(IR,LR,N(t.record(),e=>Wh({name:e,pname:RR(e)})),BR,n)},BR=(e,t)=>{let n=t=>lg(e),r=(t,n)=>ag(t,e,n),i=(t,n)=>(r,i)=>ag(r,e,i).map(e=>t(e,i)).getOr(n),a=e=>(t,n)=>{P(n,n=>e(t,n))},o=(e,t)=>fn(e.element,`aria-hidden`)!==`true`,s=(e,t)=>{if(!o(e)){let n=e.element;En(n,`display`),hn(n,`aria-hidden`),Ss(e,hs(),{name:t,visible:!0})}},c=(e,t)=>{if(o(e)){let n=e.element;yn(n,`display`,`none`),un(n,`aria-hidden`,`true`),Ss(e,hs(),{name:t,visible:!1})}},l=i(o,!1),u=i(c),d=a(u),f={getSlotNames:n,getSlot:r,isShowing:l,hideSlot:u,hideAllSlots:e=>d(e,n()),showSlot:i(s)};return{uid:e.uid,dom:e.dom,components:t,behaviours:ph(e.slotBehaviours),apis:f}},VR={...je({getSlotNames:(e,t)=>e.getSlotNames(t),getSlot:(e,t,n)=>e.getSlot(t,n),isShowing:(e,t,n)=>e.isShowing(t,n),hideSlot:(e,t,n)=>e.hideSlot(t,n),hideAllSlots:(e,t)=>e.hideAllSlots(t),showSlot:(e,t,n)=>e.showSlot(t,n)},e=>Sc(e)),sketch:zR},HR=H([MC,NC,$a(`onShow`,y),$a(`onHide`,y),kC]),UR=e=>ba(`sidebar`,HR,e),WR=e=>{let{sidebars:t}=e.ui.registry.getAll();P(Oe(t),n=>{let r=t[n],i=()=>He(O.from(e.queryCommandValue(`ToggleSidebar`)),n);e.ui.registry.addToggleButton(n,{icon:r.icon,tooltip:r.tooltip,onAction:t=>{e.execCommand(`ToggleSidebar`,!1,n),t.setActive(i())},onSetup:t=>{t.setActive(i());let n=()=>t.setActive(i());return e.on(`ToggleSidebar`,n),()=>{e.off(`ToggleSidebar`,n)}}})})},GR=e=>({element:()=>e.element.dom}),KR=(e,t)=>{let n=N(Oe(t),e=>{let n=t[e],r=xa(UR(n));return{name:e,getApi:GR,onSetup:r.onSetup,onShow:r.onShow,onHide:r.onHide}});return N(n,t=>{let r=ro(y);return e.slot(t.name,{dom:{tag:`div`,classes:[`tox-sidebar__pane`]},behaviours:Pw.unnamedEvents([Xw(t,r),Zw(t,r),q(hs(),(e,t)=>{let r=t.event;he(n,e=>e.name===r.name).each(t=>{(r.visible?t.onShow:t.onHide)(t.getApi(e))})})])})})},qR=e=>VR.sketch(t=>({dom:{tag:`div`,classes:[`tox-sidebar__pane-container`]},components:KR(t,e),slotBehaviours:Pw.unnamedEvents([Vs(e=>VR.hideAllSlots(e))])})),JR=(e,t,n)=>{Dg.getCurrent(e).each(r=>{Ry.set(r,[qR(t)]);let i=n?.toLowerCase();s(i)&&Be(t,i)&&Dg.getCurrent(r).each(t=>{VR.showSlot(t,i),dP.immediateGrow(r),En(r.element,`width`),YR(e.element,`region`)})})},YR=(e,t)=>{un(e,`role`,t)},XR=(e,t)=>{Dg.getCurrent(e).each(n=>{Dg.getCurrent(n).each(r=>{dP.hasGrown(n)?VR.isShowing(r,t)?(dP.shrink(n),YR(e.element,`presentation`)):(VR.hideAllSlots(r),VR.showSlot(r,t),YR(e.element,`region`)):(VR.hideAllSlots(r),VR.showSlot(r,t),dP.grow(n),YR(e.element,`region`))})})},ZR=e=>Dg.getCurrent(e).bind(e=>dP.isGrowing(e)||dP.hasGrown(e)?Dg.getCurrent(e).bind(e=>he(VR.getSlotNames(e),t=>VR.isShowing(e,t))):O.none()),QR=J(`FixSizeEvent`),$R=J(`AutoSizeEvent`),ez=e=>({uid:e.uid,dom:{tag:`div`,classes:[`tox-sidebar`],attributes:{role:`presentation`}},components:[{dom:{tag:`div`,classes:[`tox-sidebar__slider`]},components:[],behaviours:Z([GO.config({}),Wy.config({}),dP.config({dimension:{property:`width`},closedClass:`tox-sidebar--sliding-closed`,openClass:`tox-sidebar--sliding-open`,shrinkingClass:`tox-sidebar--sliding-shrinking`,growingClass:`tox-sidebar--sliding-growing`,onShrunk:e=>{Dg.getCurrent(e).each(VR.hideAllSlots),xs(e,$R)},onGrown:e=>{xs(e,$R)},onStartGrow:e=>{Ss(e,QR,{width:Cn(e.element,`width`).getOr(``)})},onStartShrink:e=>{Ss(e,QR,{width:Vn(e.element)+`px`})}}),Ry.config({}),Dg.config({find:e=>we(Ry.contents(e))})])}],behaviours:Z([tM.childAt(0),By(`sidebar-sliding-events`,[q(QR,(e,t)=>{yn(e.element,`width`,t.event.width)}),q($R,(e,t)=>{En(e.element,`width`)})])])});var tz=Object.freeze({__proto__:null,block:(e,t,n,r)=>{un(e.element,`aria-busy`,!0);let i=t.getRoot(e).getOr(e),a=r(i,Z([Ty.config({mode:`special`,onTab:()=>O.some(!0),onShiftTab:()=>O.some(!0)}),Wy.config({})])),o=i.getSystem().build(a);Ry.append(i,Vl(o)),o.hasConfigured(Ty)&&t.focus&&Ty.focusIn(o),n.isBlocked()||t.onBlock(e),n.blockWith(()=>Ry.remove(i,o))},unblock:(e,t,n)=>{hn(e.element,`aria-busy`),n.isBlocked()&&t.onUnblock(e),n.clear()},isBlocked:(e,t,n)=>n.isBlocked()});let nz=wd({fields:[$a(`getRoot`,O.none),Qa(`focus`,!0),bu(`onBlock`),bu(`onUnblock`)],name:`blocking`,apis:tz,state:Object.freeze({__proto__:null,init:()=>{let e=cf();return wc({readState:e.isSet,blockWith:t=>{e.set({destroy:t})},clear:e.clear,isBlocked:e.isSet})}})}),rz=e=>pe(e.dom.attributes===void 0?[]:e.dom.attributes,(e,t)=>t.name===`class`?e:{...e,[t.name]:t.value},{}),iz=e=>Array.prototype.slice.call(e.dom.classList,0),az=e=>{let t=z.fromHtml(e),n=Wt(t),r=rz(t),i=iz(t),a=n.length===0?{}:{innerHtml:Ks(t)};return{tag:yt(t),classes:i,attributes:r,...a}},oz=e=>(t,n)=>({dom:{tag:`div`,attributes:{"aria-label":e.translate(`Loading...`),tabindex:`0`},classes:[`tox-throbber__busy-spinner`]},components:[{dom:az(`<div class="tox-spinner"><div></div><div></div><div></div></div>`)}]}),sz=e=>Dg.getCurrent(e).each(e=>Ad(e.element)),cz=(e,t)=>{let n=`tabindex`,r=`data-mce-${n}`;O.from(e.iframeElement).map(z.fromDom).each(e=>{t?(pn(e,n).each(t=>un(e,r,t)),un(e,n,-1)):(hn(e,n),pn(e,r).each(t=>{un(e,n,t),hn(e,r)}))})},lz=(e,t,n,r)=>{let i=t.element;if(cz(e,n),n)nz.block(t,oz(r)),En(i,`display`),hn(i,`aria-hidden`),e.hasFocus()&&sz(t);else{let n=Dg.getCurrent(t).exists(e=>Md(e.element));nz.unblock(t),yn(i,`display`,`none`),un(i,`aria-hidden`,`true`),n&&e.focus()}},uz=e=>({uid:e.uid,dom:{tag:`div`,attributes:{"aria-hidden":`true`},classes:[`tox-throbber`],styles:{display:`none`}},behaviours:Z([Ry.config({}),nz.config({focus:!1}),Dg.config({find:e=>we(e.components())})]),components:[]}),dz=e=>e.type===`focusin`,fz=e=>dz(e)?(e.composed?we(e.composedPath()):O.from(e.target)).map(z.fromDom).filter(Ct).exists(e=>sl(e,`mce-pastebin`)):!1,pz=(e,t,n)=>{let r=ro(!1),i=uf(),a=n=>{r.get()&&!fz(n)&&(n.preventDefault(),sz(t()),e.editorManager.setActive(e))};e.inline||e.on(`PreInit`,()=>{e.dom.bind(e.getWin(),`focusin`,a),e.on(`BeforeExecCommand`,e=>{e.command.toLowerCase()===`mcefocus`&&e.value!==!0&&a(e)})});let o=i=>{i!==r.get()&&(r.set(i),lz(e,t(),i,n.providers),tE(e,i))};e.on(`ProgressState`,t=>{if(i.on(clearTimeout),_(t.time)){let n=qb.setEditorTimeout(e,()=>o(t.state),t.time);i.set(n)}else o(t.state),i.clear()})},mz=(e,t)=>pe(e,(e,n)=>t(n,e.len).fold(S(e),t=>({len:t.finish,list:e.list.concat([t])})),{len:0,list:[]}).list,hz=(e,t,n)=>({within:e,extra:t,withinWidth:n}),gz=(e,t,n)=>{let r=mz(e,(e,t)=>{let r=n(e);return O.some({element:e,start:t,finish:t+r,width:r})}),i=de(r,e=>e.finish<=t),a=fe(i,(e,t)=>e+t.width,0);return{within:i,extra:r.slice(i.length),withinWidth:a}},_z=e=>N(e,e=>e.element),vz=(e,t,n)=>hz(_z(e.concat(t)),[],n),yz=(e,t,n,r)=>hz(_z(e).concat([n]),_z(t),r),bz=(e,t,n)=>hz(_z(e),[],n),xz=(e,t,n)=>{let r=gz(t,e,n);return r.extra.length===0?O.some(r):O.none()},Sz=(e,t,n,r)=>{let i=xz(e,t,n).getOrThunk(()=>gz(t,e-n(r),n)),a=i.within,o=i.extra,s=i.withinWidth;return o.length===1&&o[0].width<=n(r)?vz(a,o,s):o.length>=1?yz(a,o,r,s):bz(a,o,s)},Cz=(e,t)=>{let n=N(t,e=>Vl(e));bL.setGroups(e,n)},wz=e=>De(e,e=>Pd(e.element).bind(t=>e.getSystem().getByDom(t).toOptional())),Tz=(e,t,n)=>{let r=t.builtGroups.get();if(r.length===0)return;let i=og(e,t,`primary`),a=TD.getCoupled(e,`overflowGroup`);yn(i.element,`visibility`,`hidden`);let o=r.concat([a]),s=wz(o);n([]),Cz(i,o);let c=Sz(Vn(i.element),t.builtGroups.get(),e=>Vn(e.element),a);c.extra.length===0?(Ry.remove(i,a),n([])):(Cz(i,c.within),n(c.extra)),En(i.element,`visibility`),Dn(i.element),s.each(Wy.focus)},Ez=S([fh(`splitToolbarBehaviours`,[TD]),Da(`builtGroups`,()=>ro([]))]),Dz=S([vu([`overflowToggledClass`]),Wa(`getOverflowBounds`),G(`lazySink`),Da(`overflowGroups`,()=>ro([])),bu(`onOpened`),bu(`onClosed`)].concat(Ez())),Oz=S([Wh({factory:bL,schema:vL(),name:`primary`}),Gh({schema:vL(),name:`overflow`}),Gh({name:`overflow-button`}),Gh({name:`overflow-group`})]),kz=S((e,t)=>{Un(e,Math.floor(t))}),Az=S([vu([`toggledClass`]),G(`lazySink`),Pa(`fetch`),Wa(`getBounds`),Ka(`fireDismissalEventInstead`,[K(`event`,fs())]),Kf(),bu(`onToggled`)]),jz=S([Gh({name:`button`,overrides:e=>({dom:{attributes:{"aria-haspopup":`true`}},buttonBehaviours:Z([ob.config({toggleClass:e.markers.toggledClass,aria:{mode:`expanded`},toggleOnExecute:!1,onToggled:e.onToggled})])})}),Gh({factory:bL,schema:vL(),name:`toolbar`,overrides:e=>({toolbarBehaviours:Z([Ty.config({mode:`cyclic`,onEscape:t=>(ag(t,e,`button`).each(Wy.focus),O.none())})])})})]),Mz=uf(),Nz=(e,t)=>{Mz.set(!0),Pz(e,t),Mz.clear()},Pz=(e,t)=>{let n=TD.getCoupled(e,`toolbarSandbox`);qm.isOpen(n)?qm.close(n):qm.open(n,t.toolbar())},Fz=(e,t,n,r)=>{let i=n.getBounds.map(e=>e()),a=n.lazySink(e).getOrDie();pm.positionWithinBounds(a,t,{anchor:{type:`hotspot`,hotspot:e,layouts:r,overrides:{maxWidthFunction:kz()}}},i)},Iz=(e,t,n,r,i)=>{bL.setGroups(t,i),Fz(e,t,n,r),ob.on(e)},Lz=(e,t,n)=>{let r=eu();return{dom:{tag:`div`,attributes:{id:r.id}},behaviours:Z([Ty.config({mode:`special`,onEscape:e=>(qm.close(e),O.some(!0))}),qm.config({onOpen:(i,a)=>{let o=Mz.get().getOr(!1);n.fetch().get(i=>{Iz(e,a,n,t.layouts,i),r.link(e.element),o||Ty.focusIn(a)})},onClose:()=>{ob.off(e),Mz.get().getOr(!1)||Wy.focus(e),r.unlink(e.element)},isPartOf:(t,n,r)=>nu(n,r)||nu(e,r),getAttachPoint:()=>n.lazySink(e).getOrDie()}),Od.config({channels:{...Qm({isExtraPart:D,...n.fireDismissalEventInstead.map(e=>({fireEventInstead:{event:e.event}})).getOr({})}),...eh({doReposition:()=>{qm.getState(TD.getCoupled(e,`toolbarSandbox`)).each(r=>{Fz(e,r,n,t.layouts)})}})}})])}},Rz=wg({name:`FloatingToolbarButton`,factory:(e,t,n,r)=>({...Jb.sketch({...r.button(),action:e=>{Pz(e,r)},buttonBehaviours:hh.augment({dump:r.button().buttonBehaviours},[TD.config({others:{toolbarSandbox:t=>Lz(t,n,e)}})])}),apis:{setGroups:(t,r)=>{qm.getState(TD.getCoupled(t,`toolbarSandbox`)).each(i=>{Iz(t,i,e,n.layouts,r)})},reposition:t=>{qm.getState(TD.getCoupled(t,`toolbarSandbox`)).each(r=>{Fz(t,r,e,n.layouts)})},toggle:e=>{Pz(e,r)},toggleWithoutFocusing:e=>{Nz(e,r)},getToolbar:e=>qm.getState(TD.getCoupled(e,`toolbarSandbox`)),isOpen:e=>qm.isOpen(TD.getCoupled(e,`toolbarSandbox`))}}),configFields:Az(),partFields:jz(),apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggleWithoutFocusing(t)},getToolbar:(e,t)=>e.getToolbar(t),isOpen:(e,t)=>e.isOpen(t)}}),zz=S([G(`items`),vu([`itemSelector`]),fh(`tgroupBehaviours`,[Ty])]),Bz=S([qh({name:`items`,unit:`item`})]),Vz=wg({name:`ToolbarGroup`,configFields:zz(),partFields:Bz(),factory:(e,t,n,r)=>({uid:e.uid,dom:e.dom,components:t,behaviours:mh(e.tgroupBehaviours,[Ty.config({mode:`flow`,selector:e.markers.itemSelector})]),domModification:{attributes:{role:`toolbar`}}})}),Hz=e=>N(e,e=>Vl(e)),Uz=(e,t,n)=>{Tz(e,n,r=>{n.overflowGroups.set(r),t.getOpt(e).each(e=>{Rz.setGroups(e,Hz(r))})})},Wz=wg({name:`SplitFloatingToolbar`,configFields:Dz(),partFields:Oz(),factory:(e,t,n,r)=>{let i=Yb(Rz.sketch({fetch:()=>AD.nu(t=>{t(Hz(e.overflowGroups.get()))}),layouts:{onLtr:()=>[td,ed],onRtl:()=>[ed,td],onBottomLtr:()=>[rd,nd],onBottomRtl:()=>[nd,rd]},getBounds:n.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:r[`overflow-button`](),toolbar:r.overflow()},onToggled:(t,n)=>e[n?`onOpened`:`onClosed`](t)}));return{uid:e.uid,dom:e.dom,components:t,behaviours:mh(e.splitToolbarBehaviours,[TD.config({others:{overflowGroup:()=>Vz.sketch({...r[`overflow-group`](),items:[i.asSpec()]})}})]),apis:{setGroups:(t,n)=>{e.builtGroups.set(N(n,t.getSystem().build)),Uz(t,i,e)},refresh:t=>Uz(t,i,e),toggle:e=>{i.getOpt(e).each(e=>{Rz.toggle(e)})},toggleWithoutFocusing:e=>{i.getOpt(e).each(Rz.toggleWithoutFocusing)},isOpen:e=>i.getOpt(e).map(Rz.isOpen).getOr(!1),reposition:e=>{i.getOpt(e).each(e=>{Rz.reposition(e)})},getOverflow:e=>i.getOpt(e).bind(Rz.getToolbar)},domModification:{attributes:{role:`group`}}}},apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},refresh:(e,t)=>{e.refresh(t)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t),getOverflow:(e,t)=>e.getOverflow(t)}}),Gz=S([vu([`closedClass`,`openClass`,`shrinkingClass`,`growingClass`,`overflowToggledClass`]),bu(`onOpened`),bu(`onClosed`)].concat(Ez())),Kz=S([Wh({factory:bL,schema:vL(),name:`primary`}),Wh({factory:bL,schema:vL(),name:`overflow`,overrides:e=>({toolbarBehaviours:Z([dP.config({dimension:{property:`height`},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:t=>{ag(t,e,`overflow-button`).each(e=>{ob.off(e),Wy.focus(e)}),e.onClosed(t)},onGrown:t=>{Ty.focusIn(t),e.onOpened(t)},onStartGrow:t=>{ag(t,e,`overflow-button`).each(ob.on)}}),Ty.config({mode:`acyclic`,onEscape:t=>(ag(t,e,`overflow-button`).each(Wy.focus),O.some(!0))})])})}),Gh({name:`overflow-button`,overrides:e=>({buttonBehaviours:Z([ob.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:`pressed`},toggleOnExecute:!1})])})}),Gh({name:`overflow-group`})]),qz=(e,t)=>ag(e,t,`overflow`).map(dP.hasGrown).getOr(!1),Jz=(e,t)=>{ag(e,t,`overflow-button`).bind(()=>ag(e,t,`overflow`)).each(n=>{Yz(e,t),dP.toggleGrow(n)})},Yz=(e,t)=>{ag(e,t,`overflow`).each(n=>{Tz(e,t,e=>{let t=N(e,e=>Vl(e));bL.setGroups(n,t)}),ag(e,t,`overflow-button`).each(e=>{dP.hasGrown(n)&&ob.on(e)}),dP.refresh(n)})},Xz=wg({name:`SplitSlidingToolbar`,configFields:Gz(),partFields:Kz(),factory:(e,t,n,r)=>{let i=`alloy.toolbar.toggle`,a=(t,n)=>{let r=N(n,t.getSystem().build);e.builtGroups.set(r)};return{uid:e.uid,dom:e.dom,components:t,behaviours:mh(e.splitToolbarBehaviours,[TD.config({others:{overflowGroup:e=>Vz.sketch({...r[`overflow-group`](),items:[Jb.sketch({...r[`overflow-button`](),action:t=>{xs(e,i)}})]})}}),By(`toolbar-toggle-events`,[q(i,t=>{Jz(t,e)})])]),apis:{setGroups:(t,n)=>{a(t,n),Yz(t,e)},refresh:t=>Yz(t,e),toggle:t=>Jz(t,e),isOpen:t=>qz(t,e)},domModification:{attributes:{role:`group`}}}},apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},refresh:(e,t)=>{e.refresh(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t)}}),Zz=e=>({dom:{tag:`div`,classes:[`tox-toolbar__group`],...e.title.fold(()=>({}),e=>({attributes:{title:e}}))},components:[Vz.parts.items({})],items:e.items,markers:{itemSelector:`*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])`},tgroupBehaviours:Z([GO.config({}),Wy.config({})])}),Qz=e=>Vz.sketch(Zz(e)),$z=(e,t)=>{let n=Vs(t=>{let n=N(e.initGroups,Qz);bL.setGroups(t,n)});return Z([Jw.toolbarButton(e.providers.isDisabled),qw(),Ty.config({mode:t,onEscape:e.onEscape,selector:`.tox-toolbar__group`}),By(`toolbar-events`,[n])])},eB=e=>{let t=e.cyclicKeying?`cyclic`:`acyclic`;return{uid:e.uid,dom:{tag:`div`,classes:[`tox-toolbar-overlord`]},parts:{"overflow-group":Zz({title:O.none(),items:[]}),"overflow-button":KP({name:`more`,icon:O.some(`more-drawer`),enabled:!0,tooltip:O.some(`Reveal or hide additional toolbar items`),primary:!1,buttonType:O.none(),borderless:!1},O.none(),e.providers)},splitToolbarBehaviours:$z(e,t)}},tB=e=>{let t=eB(e),n=Wz.parts.primary({dom:{tag:`div`,classes:[`tox-toolbar__primary`]}});return Wz.sketch({...t,lazySink:e.getSink,getOverflowBounds:()=>{let t=e.moreDrawerData.lazyHeader().element,n=ri(t),r=It(t),i=ri(r),a=Math.max(r.dom.scrollHeight,i.height);return ti(n.x+4,i.y,n.width-8,a)},parts:{...t.parts,overflow:{dom:{tag:`div`,classes:[`tox-toolbar__overflow`],attributes:e.attributes}}},components:[n],markers:{overflowToggledClass:`tox-tbtn--enabled`},onOpened:t=>e.onToggled(t,!0),onClosed:t=>e.onToggled(t,!1)})},nB=e=>{let t=Xz.parts.primary({dom:{tag:`div`,classes:[`tox-toolbar__primary`]}}),n=Xz.parts.overflow({dom:{tag:`div`,classes:[`tox-toolbar__overflow`]}}),r=eB(e);return Xz.sketch({...r,components:[t,n],markers:{openClass:`tox-toolbar__overflow--open`,closedClass:`tox-toolbar__overflow--closed`,growingClass:`tox-toolbar__overflow--growing`,shrinkingClass:`tox-toolbar__overflow--shrinking`,overflowToggledClass:`tox-tbtn--enabled`},onOpened:t=>{t.getSystem().broadcastOn([dR()],{type:`opened`}),e.onToggled(t,!0)},onClosed:t=>{t.getSystem().broadcastOn([dR()],{type:`closed`}),e.onToggled(t,!1)}})},rB=e=>{let t=e.cyclicKeying?`cyclic`:`acyclic`;return bL.sketch({uid:e.uid,dom:{tag:`div`,classes:[`tox-toolbar`].concat(e.type===hx.scrolling?[`tox-toolbar--scrolling`]:[])},components:[bL.parts.groups({})],toolbarBehaviours:$z(e,t)})},iB=[jC,MC,Ha(`tooltip`),Za(`buttonType`,`secondary`,[`primary`,`secondary`]),Qa(`borderless`,!1),Pa(`onAction`)],aB={button:[...iB,xC,Ma(`type`,[`button`])],togglebutton:[...iB,Qa(`active`,!1),Ma(`type`,[`togglebutton`])]},oB=[Ma(`type`,[`group`]),to(`buttons`,[],wa(`type`,aB))],sB=H([to(`buttons`,[],wa(`type`,{...aB,group:oB})),Pa(`onShow`),Pa(`onHide`)]),cB=e=>ba(`view`,sB,e),lB=(e,t)=>{let n=e.type===`togglebutton`,r=e.icon.map(e=>iN(e,t.icons)).map(Yb),i=i=>{let a=e=>{r.map(n=>n.getOpt(i).each(n=>{Ry.set(n,[iN(e,t.icons)])}))},o=e=>{let t=i.element;e?(il(t,`tox-button--enabled`),un(t,`aria-pressed`,!0)):(ol(t,`tox-button--enabled`),hn(t,`aria-pressed`))},s=()=>sl(i.element,`tox-button--enabled`);if(n)return e.onAction({setIcon:a,setActive:o,isActive:s});if(e.type===`button`)return e.onAction({setIcon:a})},a={...e,name:n?e.text.getOr(e.icon.getOr(``)):e.text??e.icon.getOr(``),primary:e.buttonType===`primary`,buttonType:O.from(e.buttonType),tooltip:e.tooltip,icon:e.icon,enabled:!0,borderless:e.borderless},o=qP(e.buttonType??`secondary`),s=n?e.text.map(t.translate):O.some(t.translate(e.text)),c=s.map(Fl),l=a.tooltip.or(s).map(e=>({"aria-label":t.translate(e),title:t.translate(e)})).getOr({}),u=eT([r.map(e=>e.asSpec()),c]),d=e.icon.isSome()&&c.isSome(),f={tag:`button`,classes:o.concat(...e.icon.isSome()&&!d?[`tox-button--icon`]:[]).concat(...d?[`tox-button--icon-and-text`]:[]).concat(...e.borderless?[`tox-button--naked`]:[]).concat(...e.type===`togglebutton`&&e.active?[`tox-button--enabled`]:[]),attributes:l},p=GP(a,O.some(i),[],f,u,t);return Jb.sketch(p)},uB=(e,t)=>lB(e,t),dB=(e,t)=>({dom:{tag:`div`,classes:[`tox-view__toolbar__group`]},components:N(e.buttons,e=>uB(e,t))}),fB=Dr().deviceType,pB=fB.isPhone(),mB=fB.isTablet();var hB=wg({name:`silver.View`,configFields:[G(`viewConfig`)],partFields:[Kh({factory:{sketch:e=>{let t=!1,n=N(e.buttons,n=>n.type===`group`?(t=!0,dB(n,e.providers)):uB(n,e.providers));return{uid:e.uid,dom:{tag:`div`,classes:[t?`tox-view__toolbar`:`tox-view__header`,...pB||mB?[`tox-view--mobile`,`tox-view--scrolling`]:[]]},behaviours:Z([Wy.config({}),Ty.config({mode:`flow`,selector:`button, .tox-button`,focusInside:A_.OnEnterOrSpaceMode})]),components:t?n:[RO.sketch({dom:{tag:`div`,classes:[`tox-view__header-start`]},components:[]}),RO.sketch({dom:{tag:`div`,classes:[`tox-view__header-end`]},components:n})]}}},schema:[G(`buttons`),G(`providers`)],name:`header`}),Kh({factory:{sketch:e=>({uid:e.uid,dom:{tag:`div`,classes:[`tox-view__pane`]}})},schema:[],name:`pane`})],factory:(e,t,n,r)=>({uid:e.uid,dom:e.dom,components:t,apis:{getPane:t=>pL.getPart(t,e,`pane`),getOnShow:t=>e.viewConfig.onShow,getOnHide:t=>e.viewConfig.onHide}}),apis:{getPane:(e,t)=>e.getPane(t),getOnShow:(e,t)=>e.getOnShow(t),getOnHide:(e,t)=>e.getOnHide(t)}});let gB=(e,t,n)=>Le(t,(t,r)=>{let i=xa(cB(t));return e.slot(r,hB.sketch({dom:{tag:`div`,classes:[`tox-view`]},viewConfig:i,components:[...i.buttons.length>0?[hB.parts.header({buttons:i.buttons,providers:n})]:[],hB.parts.pane({})]}))}),_B=(e,t)=>VR.sketch(n=>({dom:{tag:`div`,classes:[`tox-view-wrap__slot-container`]},components:gB(n,e,t),slotBehaviours:Pw.unnamedEvents([Vs(e=>VR.hideAllSlots(e))])})),vB=e=>he(VR.getSlotNames(e),t=>VR.isShowing(e,t)),yB=e=>{let t=e.element;yn(t,`display`,`none`),un(t,`aria-hidden`,`true`)},bB=e=>{let t=e.element;En(t,`display`),hn(t,`aria-hidden`)},xB=e=>({getContainer:S(e)}),SB=(e,t,n)=>{VR.getSlot(e,t).each(e=>{hB.getPane(e).each(t=>{n(e)(xB(t.element.dom))})})},CB=(e,t)=>SB(e,t,hB.getOnShow),wB=(e,t)=>SB(e,t,hB.getOnHide);var TB=Cg({factory:(e,t)=>{let n={setViews:(e,n)=>{Ry.set(e,[_B(n,t.backstage.shared.providers)])},whichView:e=>Dg.getCurrent(e).bind(vB),toggleView:(e,t,n,r)=>Dg.getCurrent(e).exists(i=>{let a=vB(i),o=a.exists(e=>r===e),s=VR.getSlot(i,r).isSome();return s&&(VR.hideAllSlots(i),o?(yB(e),t()):(n(),bB(e),VR.showSlot(i,r),CB(i,r)),a.each(e=>wB(i,e))),s})};return{uid:e.uid,dom:{tag:`div`,classes:[`tox-view-wrap`],attributes:{"aria-hidden":`true`},styles:{display:`none`}},components:[],behaviours:Z([Ry.config({}),Dg.config({find:e=>we(Ry.contents(e))})]),apis:n}},name:`silver.ViewWrapper`,configFields:[G(`backstage`)],apis:{setViews:(e,t,n)=>e.setViews(t,n),toggleView:(e,t,n,r,i)=>e.toggleView(t,n,r,i),whichView:(e,t)=>e.whichView(t)}});let EB=(e,t,n)=>{let r=!1,i={getSocket:t=>pL.getPart(t,e,`socket`),setSidebar:(t,n,r)=>{pL.getPart(t,e,`sidebar`).each(e=>JR(e,n,r))},toggleSidebar:(t,n)=>{pL.getPart(t,e,`sidebar`).each(e=>XR(e,n))},whichSidebar:t=>pL.getPart(t,e,`sidebar`).bind(ZR).getOrNull(),getHeader:t=>pL.getPart(t,e,`header`),getToolbar:t=>pL.getPart(t,e,`toolbar`),setToolbar:(t,n)=>{pL.getPart(t,e,`toolbar`).each(e=>{let t=N(n,Qz);e.getApis().setGroups(e,t)})},setToolbars:(t,n)=>{pL.getPart(t,e,`multiple-toolbar`).each(e=>{let t=N(n,e=>N(e,Qz));_L.setItems(e,t)})},refreshToolbar:t=>{pL.getPart(t,e,`toolbar`).each(e=>e.getApis().refresh(e))},toggleToolbarDrawer:t=>{pL.getPart(t,e,`toolbar`).each(e=>{Je(e.getApis().toggle,t=>t(e))})},toggleToolbarDrawerWithoutFocusing:t=>{pL.getPart(t,e,`toolbar`).each(e=>{Je(e.getApis().toggleWithoutFocusing,t=>t(e))})},isToolbarDrawerToggled:t=>pL.getPart(t,e,`toolbar`).bind(e=>O.from(e.getApis().isOpen).map(t=>t(e))).getOr(!1),getThrobber:t=>pL.getPart(t,e,`throbber`),focusToolbar:t=>{pL.getPart(t,e,`toolbar`).orThunk(()=>pL.getPart(t,e,`multiple-toolbar`)).each(e=>{Ty.focusIn(e)})},setMenubar:(t,n)=>{pL.getPart(t,e,`menubar`).each(e=>{PR.setMenus(e,n)})},focusMenubar:t=>{pL.getPart(t,e,`menubar`).each(e=>{PR.focus(e)})},setViews:(t,n)=>{pL.getPart(t,e,`viewWrapper`).each(e=>{TB.setViews(e,n)})},toggleView:(t,n)=>pL.getPart(t,e,`viewWrapper`).exists(e=>TB.toggleView(e,()=>i.showMainView(t),()=>i.hideMainView(t),n)),whichView:t=>pL.getPart(t,e,`viewWrapper`).bind(TB.whichView).getOrNull(),hideMainView:t=>{r=i.isToolbarDrawerToggled(t),r&&i.toggleToolbarDrawer(t),pL.getPart(t,e,`editorContainer`).each(e=>{let t=e.element;yn(t,`display`,`none`),un(t,`aria-hidden`,`true`)})},showMainView:t=>{r&&i.toggleToolbarDrawer(t),pL.getPart(t,e,`editorContainer`).each(e=>{let t=e.element;En(t,`display`),hn(t,`aria-hidden`)})}};return{uid:e.uid,dom:e.dom,components:t,apis:i,behaviours:e.behaviours}},DB=mL.optional({factory:PR,name:`menubar`,schema:[G(`backstage`)]}),OB=e=>e.type===hx.sliding?nB:e.type===hx.floating?tB:rB,kB=mL.optional({factory:{sketch:e=>_L.sketch({uid:e.uid,dom:e.dom,listBehaviours:Z([Ty.config({mode:`acyclic`,selector:`.tox-toolbar`})]),makeItem:()=>rB({type:e.type,uid:J(`multiple-toolbar-item`),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),O.some(!0))}),setupItem:(e,t,n,r)=>{bL.setGroups(t,n)},shell:!0})},name:`multiple-toolbar`,schema:[G(`dom`),G(`onEscape`)]}),AB=mL.optional({factory:{sketch:e=>OB(e)({type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),O.some(!0)),onToggled:(t,n)=>e.onToolbarToggled(n),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes})},name:`toolbar`,schema:[G(`dom`),G(`onEscape`),G(`getSink`)]}),jB=mL.optional({factory:{sketch:DR},name:`header`,schema:[G(`dom`)]}),MB=mL.optional({factory:{sketch:FR},name:`promotion`,schema:[G(`dom`)]}),NB=mL.optional({name:`socket`,schema:[G(`dom`)]}),PB=mL.optional({factory:{sketch:ez},name:`sidebar`,schema:[G(`dom`)]}),FB=mL.optional({factory:{sketch:uz},name:`throbber`,schema:[G(`dom`)]}),IB=mL.optional({factory:TB,name:`viewWrapper`,schema:[G(`backstage`)]}),LB=mL.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:`div`,classes:[`tox-editor-container`]},components:e.components})},name:`editorContainer`,schema:[]});var RB=wg({name:`OuterContainer`,factory:EB,configFields:[G(`dom`),G(`behaviours`)],partFields:[jB,DB,AB,kB,NB,PB,MB,FB,IB,LB],apis:{getSocket:(e,t)=>e.getSocket(t),setSidebar:(e,t,n,r)=>{e.setSidebar(t,n,r)},toggleSidebar:(e,t,n)=>{e.toggleSidebar(t,n)},whichSidebar:(e,t)=>e.whichSidebar(t),getHeader:(e,t)=>e.getHeader(t),getToolbar:(e,t)=>e.getToolbar(t),setToolbar:(e,t,n)=>{e.setToolbar(t,n)},setToolbars:(e,t,n)=>{e.setToolbars(t,n)},refreshToolbar:(e,t)=>e.refreshToolbar(t),toggleToolbarDrawer:(e,t)=>{e.toggleToolbarDrawer(t)},toggleToolbarDrawerWithoutFocusing:(e,t)=>{e.toggleToolbarDrawerWithoutFocusing(t)},isToolbarDrawerToggled:(e,t)=>e.isToolbarDrawerToggled(t),getThrobber:(e,t)=>e.getThrobber(t),setMenubar:(e,t,n)=>{e.setMenubar(t,n)},focusMenubar:(e,t)=>{e.focusMenubar(t)},focusToolbar:(e,t)=>{e.focusToolbar(t)},setViews:(e,t,n)=>{e.setViews(t,n)},toggleView:(e,t,n)=>e.toggleView(t,n),whichView:(e,t)=>e.whichView(t)}});let zB={file:{title:`File`,items:`newdocument restoredraft | preview | export print | deleteallconversations`},edit:{title:`Edit`,items:`undo redo | cut copy paste pastetext | selectall | searchreplace`},view:{title:`View`,items:`code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments`},insert:{title:`Insert`,items:`image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime`},format:{title:`Format`,items:`bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat`},tools:{title:`Tools`,items:`aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate`},table:{title:`Table`,items:`inserttable | cell row column | advtablesort | tableprops deletetable`},help:{title:`Help`,items:`help`}},BB=(e,t,n)=>{let r=jx(n).split(/[ ,]/);return{text:e.title,getItems:()=>_e(e.items,e=>{let n=e.toLowerCase();return n.trim().length===0||se(r,e=>e===n)?[]:n===`separator`||n===`|`?[{type:`separator`}]:t.menuItems[n]?[t.menuItems[n]]:[]})}},VB=e=>e.split(` `),HB=(e,t)=>{let n={...zB,...t.menus},r=Oe(t.menus).length>0;return de(N(de(t.menubar===void 0||t.menubar===!0?VB(`file edit view insert format tools table help`):VB(t.menubar===!1?``:t.menubar),e=>{let n=Be(zB,e);return r?n||L(t.menus,e).exists(e=>Be(e,`items`)):n}),r=>{let i=n[r];return BB({title:i.title,items:VB(i.items)},t,e)}),e=>e.getItems().length>0&&se(e.getItems(),e=>s(e)||e.type!==`separator`))},UB=e=>{let t=()=>{e._skinLoaded=!0,YT(e)};return()=>{e.initialized?t():e.on(`init`,t)}},WB=(e,t)=>()=>XT(e,{message:t}),GB=(e,t,n)=>(e.on(`remove`,()=>n.unload(t)),n.load(t)),KB=(e,t)=>GB(e,t+`/skin.min.css`,e.ui.styleSheetLoader),qB=(e,t)=>en(z.fromDom(e.getElement()))?GB(e,t+`/skin.shadowdom.min.css`,fx.DOM.styleSheetLoader):Promise.resolve(),JB=(e,t)=>{let n=aS(t);return n&&t.contentCSS.push(n+(e?`/content.inline`:`/content`)+`.min.css`),!rS(t)&&s(n)?Promise.all([KB(t,n),qB(t,n)]).then(UB(t),WB(t,`Skin could not be loaded`)):Promise.resolve(UB(t)())},YB=w(JB,!1),XB=w(JB,!0),ZB=(e,t,n)=>{let r=(e,r,a,o)=>{let s=t.shared.providers.translate(e.title);if(e.type===`separator`)return O.some({type:`separator`,text:s});if(e.type===`submenu`){let t=_e(e.getStyleItems(),e=>i(e,r,o));return r===0&&t.length<=0?O.none():O.some({type:`nestedmenuitem`,text:s,enabled:t.length>0,getSubmenuItems:()=>_e(e.getStyleItems(),e=>i(e,r,o))})}else return O.some({type:`togglemenuitem`,text:s,icon:e.icon,active:e.isSelected(o),enabled:!a,onAction:n.onAction(e),...e.getStylePreview().fold(()=>({}),e=>({meta:{style:e}}))})},i=(e,t,i)=>{let a=e.type===`formatter`&&n.isInvalid(e);return t===0?a?[]:r(e,t,!1,i).toArray():r(e,t,a,i).toArray()},a=e=>{let t=n.getCurrentValue(),r=n.shouldHide?0:1;return _e(e,e=>i(e,r,t))};return{validateItems:a,getFetch:(e,t)=>(n,r)=>{r(yN(a(t()),wS.CLOSE_ON_EXECUTE,e,{isHorizontalMenu:!1,search:O.none()}))}}},QB=(e,t,n)=>{let r=n.dataset,i=r.type===`basic`?()=>N(r.data,e=>xI(e,n.isSelectedFor,n.getPreviewFor)):r.getData;return{items:ZB(e,t,n),getStyleItems:i}},$B=(e,t,n)=>{let{items:r,getStyleItems:i}=QB(e,t,n),a=e=>({getComponent:S(e)}),o=cE(e,`NodeChange`,t=>{let r=t.getComponent();n.updateText(r),Hg.set(t.getComponent(),!e.selection.isEditable())});return cN({text:n.icon.isSome()?O.none():n.text,icon:n.icon,tooltip:O.from(n.tooltip),role:O.none(),fetch:r.getFetch(t,i),onSetup:o,getApi:a,columns:1,presets:`normal`,classes:n.icon.isSome()?[]:[`bespoke`],dropdownBehaviours:[]},`tox-tbtn`,t.shared)},eV=e=>N(e,e=>{let t=e,n=e,r=e.split(`=`);return r.length>1&&(t=r[0],n=r[1]),{title:t,format:n}}),tV=e=>({type:`basic`,data:e});var nV;(function(e){e[e.SemiColon=0]=`SemiColon`,e[e.Space=1]=`Space`})(nV||={});let rV=(e,t)=>t===nV.SemiColon?e.replace(/;$/,``).split(`;`):e.split(` `),iV=(e,t,n)=>({type:`basic`,data:eV(rV(e.options.get(t),n))}),aV=[{title:`Left`,icon:`align-left`,format:`alignleft`,command:`JustifyLeft`},{title:`Center`,icon:`align-center`,format:`aligncenter`,command:`JustifyCenter`},{title:`Right`,icon:`align-right`,format:`alignright`,command:`JustifyRight`},{title:`Justify`,icon:`align-justify`,format:`alignjustify`,command:`JustifyFull`}],oV=e=>{let t=()=>he(aV,t=>e.formatter.match(t.format)),n=t=>()=>e.formatter.match(t),r=e=>O.none,i=e=>{Ss(e,sN,{icon:`align-${t().fold(S(`left`),e=>e.title.toLowerCase())}`})},a=tV(aV);return{tooltip:`Align`,text:O.none(),icon:O.some(`align-left`),isSelectedFor:n,getCurrentValue:O.none,getPreviewFor:r,onAction:t=>()=>he(aV,e=>e.format===t.format).each(t=>e.execCommand(t.command)),updateText:i,dataset:a,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},sV=(e,t)=>$B(e,t,oV(e)),cV=(e,t)=>{let n=QB(e,t,oV(e));e.ui.registry.addNestedMenuItem(`align`,{text:t.shared.providers.translate(`Align`),onSetup:aE(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},lV=(e,t)=>{let n=t(),r=N(n,e=>e.format);return O.from(e.formatter.closest(r)).bind(e=>he(n,t=>t.format===e)).orThunk(()=>Ye(e.formatter.match(`p`),{title:`Paragraph`,format:`p`}))},uV=e=>{let t=`Paragraph`,n=t=>()=>e.formatter.match(t),r=t=>()=>{let n=e.formatter.get(t);return n?O.some({tag:n.length>0&&(n[0].inline||n[0].block)||`div`,styles:e.dom.parseStyle(e.formatter.getCssText(t))}):O.none()},i=n=>{Ss(n,oN,{text:lV(e,()=>a.data).fold(S(t),e=>e.title)})},a=iV(e,`block_formats`,nV.SemiColon);return{tooltip:`Blocks`,text:O.some(t),icon:O.none(),isSelectedFor:n,getCurrentValue:O.none,getPreviewFor:r,onAction:lE(e),updateText:i,dataset:a,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},dV=(e,t)=>$B(e,t,uV(e)),fV=(e,t)=>{let n=QB(e,t,uV(e));e.ui.registry.addNestedMenuItem(`blocks`,{text:`Blocks`,onSetup:aE(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},pV=[`-apple-system`,`Segoe UI`,`Roboto`,`Helvetica Neue`,`sans-serif`],mV=e=>N(e.split(/\s*,\s*/),e=>e.replace(/^['"]+|['"]+$/g,``)),hV=e=>e.indexOf(`-apple-system`)===0&&(()=>{let t=mV(e.toLowerCase());return ve(pV,e=>t.indexOf(e.toLowerCase())>-1)})(),gV=e=>{let t=`System Font`,n=()=>{let n=e=>e?mV(e)[0]:``,r=e.queryCommandValue(`FontName`),i=c.data,a=r?r.toLowerCase():``;return{matchOpt:he(i,e=>{let t=e.format;return t.toLowerCase()===a||n(t).toLowerCase()===n(a).toLowerCase()}).orThunk(()=>Ye(hV(a),{title:t,format:a})),font:r}},r=e=>t=>t.exists(t=>t.format===e),i=()=>{let{matchOpt:e}=n();return e},a=e=>()=>O.some({tag:`div`,styles:e.indexOf(`dings`)===-1?{"font-family":e}:{}}),o=t=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand(`FontName`,!1,t.format)})},s=e=>{let{matchOpt:t,font:r}=n();Ss(e,oN,{text:t.fold(S(r),e=>e.title)})},c=iV(e,`font_family_formats`,nV.SemiColon);return{tooltip:`Fonts`,text:O.some(t),icon:O.none(),isSelectedFor:r,getCurrentValue:i,getPreviewFor:a,onAction:o,updateText:s,dataset:c,shouldHide:!1,isInvalid:D}},_V=(e,t)=>$B(e,t,gV(e)),vV=(e,t)=>{let n=QB(e,t,gV(e));e.ui.registry.addNestedMenuItem(`fontfamily`,{text:t.shared.providers.translate(`Fonts`),onSetup:aE(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},yV={unsupportedLength:[`em`,`ex`,`cap`,`ch`,`ic`,`rem`,`lh`,`rlh`,`vw`,`vh`,`vi`,`vb`,`vmin`,`vmax`,`cm`,`mm`,`Q`,`in`,`pc`,`pt`,`px`],fixed:[`px`,`pt`],relative:[`%`],empty:[``]},bV=(()=>{let e=`[0-9]+`,t=`[eE]`+(`[+-]?`+e),n=e=>`(?:${e})?`,r=`[+-]?(?:${[`Infinity`,e+`\\.`+n(e)+n(t),`\\.`+e+n(t),e+n(t)].join(`|`)})`;return RegExp(`^(${r})(.*)$`)})(),xV=(e,t)=>se(t,t=>se(yV[t],t=>e===t)),SV=(e,t)=>O.from(bV.exec(e)).bind(e=>{let n=Number(e[1]),r=e[2];return xV(r,t)?O.some({value:n,unit:r}):O.none()}),CV=(e,t)=>SV(e,t).map(({value:e,unit:t})=>e+t),wV={tab:S(9),escape:S(27),enter:S(13),backspace:S(8),delete:S(46),left:S(37),up:S(38),right:S(39),down:S(40),space:S(32),home:S(36),end:S(35),pageUp:S(33),pageDown:S(34)},TV=(e,t,n)=>{let r=O.none(),i=e=>e.map(e=>Q.getValue(e)).getOr(``),a=cE(e,`NodeChange SwitchMode`,t=>{let i=t.getComponent();r=O.some(i),n.updateInputValue(i),Hg.set(i,!e.selection.isEditable())}),o=e=>({getComponent:S(e)}),s=ro(y),c=J(`custom-number-input-events`),l=(e,t,a)=>{let o=i(r),s=n.getNewValue(o,e),c=o.length-`${s}`.length,l=r.map(e=>e.element.dom.selectionStart-c),u=r.map(e=>e.element.dom.selectionEnd-c);n.onAction(s,a),r.each(e=>{Q.setValue(e,s),t&&(l.each(t=>e.element.dom.selectionStart=t),u.each(t=>e.element.dom.selectionEnd=t))})},u=(e,t)=>l((e,t)=>e-t,e,t),d=(e,t)=>l((e,t)=>e+t,e,t),f=e=>Bt(e.element).fold(O.none,e=>(Ad(e),O.some(!0))),p=e=>Md(e.element)?(Kt(e.element).each(e=>Ad(e)),O.some(!0)):O.none(),m=(n,r,i,a)=>{let c=t.shared.providers.translate(i),l=J(`altExecuting`),u=cE(e,`NodeChange SwitchMode`,t=>{Hg.set(t.getComponent(),!e.selection.isEditable())}),d=e=>{Hg.isDisabled(e)||n(!0)};return Jb.sketch({dom:{tag:`button`,attributes:{title:c,"aria-label":c},classes:a.concat(r)},components:[rN(r,t.shared.providers.icons)],buttonBehaviours:Z([Hg.config({}),By(l,[Xw({onSetup:u,getApi:o},s),Zw({getApi:o},s),q(Ro(),(e,t)=>{(t.event.raw.keyCode===wV.space()||t.event.raw.keyCode===wV.enter())&&(Hg.isDisabled(e)||n(!1))}),q(Ho(),d),q(ko(),d)])]),eventOrder:{[Ro()]:[l,`keying`],[Ho()]:[l,`alloy.base.behaviour`],[ko()]:[l,`alloy.base.behaviour`]}})},h=Yb(m(e=>u(!1,e),`minus`,`Decrease font size`,[`highlight-on-focus`])),g=Yb(m(e=>d(!1,e),`plus`,`Increase font size`,[`highlight-on-focus`])),_=Yb({dom:{tag:`div`,classes:[`tox-input-wrapper`,`highlight-on-focus`]},components:[qS.sketch({inputBehaviours:Z([Hg.config({}),By(c,[Xw({onSetup:a,getApi:o},s),Zw({getApi:o},s)]),By(`input-update-display-text`,[q(oN,(e,t)=>{Q.setValue(e,t.event.text)}),q(Lo(),e=>{n.onAction(Q.getValue(e))}),q(Vo(),e=>{n.onAction(Q.getValue(e))})]),Ty.config({mode:`special`,onEnter:e=>(l(C,!0,!0),O.some(!0)),onEscape:f,onUp:e=>(d(!0,!1),O.some(!0)),onDown:e=>(u(!0,!1),O.some(!0)),onLeft:(e,t)=>(t.cut(),O.none()),onRight:(e,t)=>(t.cut(),O.none())})])})],behaviours:Z([Wy.config({}),Ty.config({mode:`special`,onEnter:p,onSpace:p,onEscape:f}),By(`input-wrapper-events`,[q(Fo(),e=>{P([h,g],t=>{let n=z.fromDom(t.get(e).element.dom);Md(n)&&jd(n)})})])])});return{dom:{tag:`div`,classes:[`tox-number-input`]},components:[h.asSpec(),_.asSpec(),g.asSpec()],behaviours:Z([Wy.config({}),Ty.config({mode:`flow`,focusInside:A_.OnEnterOrSpaceMode,cycles:!1,selector:`button, .tox-input-wrapper`,onEscape:e=>Md(e.element)?O.none():(Ad(e.element),O.some(!0))})])}},EV={"8pt":`1`,"10pt":`2`,"12pt":`3`,"14pt":`4`,"18pt":`5`,"24pt":`6`,"36pt":`7`},DV={"xx-small":`7pt`,"x-small":`8pt`,small:`10pt`,medium:`12pt`,large:`14pt`,"x-large":`18pt`,"xx-large":`24pt`},OV=(e,t)=>{let n=10**t;return Math.round(e*n)/n},kV=(e,t)=>/[0-9.]+px$/.test(e)?OV(parseInt(e,10)*72/96,t||0)+`pt`:L(DV,e).getOr(e),AV=e=>L(EV,e).getOr(``),jV=e=>{let t=()=>{let t=O.none(),n=s.data,r=e.queryCommandValue(`FontSize`);if(r)for(let e=3;t.isNone()&&e>=0;e--){let i=kV(r,e),a=AV(i);t=he(n,e=>e.format===r||e.format===i||e.format===a)}return{matchOpt:t,size:r}},n=e=>t=>t.exists(t=>t.format===e),r=()=>{let{matchOpt:e}=t();return e},i=S(O.none),a=t=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand(`FontSize`,!1,t.format)})},o=e=>{let{matchOpt:n,size:r}=t();Ss(e,oN,{text:n.fold(S(r),e=>e.title)})},s=iV(e,`font_size_formats`,nV.Space);return{tooltip:`Font sizes`,text:O.some(`12pt`),icon:O.none(),isSelectedFor:n,getPreviewFor:i,getCurrentValue:r,onAction:a,updateText:o,dataset:s,shouldHide:!1,isInvalid:D}},MV=(e,t)=>$B(e,t,jV(e)),NV=e=>({em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}})[e]??{step:1},PV=e=>e>=0,FV=e=>{let t=()=>e.queryCommandValue(`FontSize`);return{updateInputValue:e=>Ss(e,oN,{text:t()}),onAction:(t,n)=>e.execCommand(`FontSize`,!1,t,{skip_focus:!n}),getNewValue:(n,r)=>{SV(n,[`unsupportedLength`,`empty`]);let i=SV(n,[`unsupportedLength`,`empty`]).or(SV(t(),[`unsupportedLength`,`empty`])),a=i.map(e=>e.value).getOr(16),o=Ux(e),s=i.map(e=>e.unit).filter(e=>e!==``).getOr(o),c=r(a,NV(s).step);return`${PV(c)?c:a}${s}`}}},IV=(e,t)=>TV(e,t,FV(e)),LV=(e,t)=>{let n=QB(e,t,jV(e));e.ui.registry.addNestedMenuItem(`fontsize`,{text:`Font sizes`,onSetup:aE(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},RV=(e,t)=>{let n=`Paragraph`;return{tooltip:`Formats`,text:O.some(n),icon:O.none(),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:O.none,getPreviewFor:t=>()=>{let n=e.formatter.get(t);return n===void 0?O.none():O.some({tag:n.length>0&&(n[0].inline||n[0].block)||`div`,styles:e.dom.parseStyle(e.formatter.getCssText(t))})},onAction:lE(e),updateText:t=>{let r=e=>uI(e)?_e(e.items,r):dI(e)?[{title:e.title,format:e.format}]:[];Ss(t,oN,{text:lV(e,S(_e(yI(e),r))).fold(S(n),e=>e.title)})},shouldHide:kx(e),isInvalid:t=>!e.formatter.canApply(t.format),dataset:t}},zV=(e,t)=>$B(e,t,RV(e,{type:`advanced`,...t.styles})),BV=(e,t)=>{let n=QB(e,t,RV(e,{type:`advanced`,...t.styles}));e.ui.registry.addNestedMenuItem(`styles`,{text:`Formats`,onSetup:aE(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},VV=S([G(`toggleClass`),G(`fetch`),Su(`onExecute`),K(`getHotspot`,O.some),K(`getAnchorOverrides`,S({})),Kf(),Su(`onItemExecute`),za(`lazySink`),G(`dom`),bu(`onOpen`),fh(`splitDropdownBehaviours`,[TD,Ty,Wy]),K(`matchWidth`,!1),K(`useMinWidth`,!1),K(`eventOrder`,{}),za(`role`)].concat(WD())),HV=S([Wh({factory:Jb,schema:[G(`dom`)],name:`arrow`,defaults:()=>({buttonBehaviours:Z([Wy.revoke()])}),overrides:e=>({dom:{tag:`span`,attributes:{role:`presentation`}},action:t=>{t.getSystem().getByUid(e.uid).each(Cs)},buttonBehaviours:Z([ob.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),Wh({factory:Jb,schema:[G(`dom`)],name:`button`,defaults:()=>({buttonBehaviours:Z([Wy.revoke()])}),overrides:e=>({dom:{tag:`span`,attributes:{role:`presentation`}},action:t=>{t.getSystem().getByUid(e.uid).each(n=>{e.onExecute(n,t)})}})}),Kh({factory:{sketch:e=>({uid:e.uid,dom:{tag:`span`,styles:{display:`none`},attributes:{"aria-hidden":`true`},innerHtml:e.text}})},schema:[G(`text`)],name:`aria-descriptor`}),Gh({schema:[_u()],name:`menu`,defaults:e=>({onExecute:(t,n)=>{t.getSystem().getByUid(e.uid).each(r=>{e.onItemExecute(r,t,n)})}})}),MD()]),UV=wg({name:`SplitDropdown`,configFields:VV(),partFields:HV(),factory:(e,t,n,r)=>{let i=e=>{Dg.getCurrent(e).each(e=>{s_.highlightFirst(e),Ty.focusIn(e)})},a=t=>{RD(e,C,t,r,i,Vb.HighlightMenuAndItem).get(y)},o=e=>(a(e),O.some(!0)),s=t=>(Cs(og(t,e,`button`)),O.some(!0)),c={...Os([Vs((t,n)=>{ag(t,e,`aria-descriptor`).each(e=>{let n=J(`aria`);un(e.element,`id`,n),un(t.element,`aria-describedby`,n)})})]),...cb(O.some(a))};return{uid:e.uid,dom:e.dom,components:t,apis:{repositionMenus:e=>{ob.isOn(e)&&UD(e)}},eventOrder:{...e.eventOrder,[$o()]:[`disabling`,`toggling`,`alloy.base.behaviour`]},events:c,behaviours:mh(e.splitDropdownBehaviours,[TD.config({others:{sandbox:t=>{let n=og(t,e,`arrow`);return HD(e,t,{onOpen:()=>{ob.on(n),ob.on(t)},onClose:()=>{ob.off(n),ob.off(t)}})}}}),Ty.config({mode:`special`,onSpace:s,onEnter:s,onDown:o}),Wy.config({}),ob.config({toggleOnExecute:!1,aria:{mode:`expanded`}})]),domModification:{attributes:{role:e.role.getOr(`button`),"aria-haspopup":!0}}}},apis:{repositionMenus:(e,t)=>e.repositionMenus(t)}}),WV=e=>({isEnabled:()=>!Hg.isDisabled(e),setEnabled:t=>Hg.set(e,!t),setText:t=>Ss(e,oN,{text:t}),setIcon:t=>Ss(e,sN,{icon:t})}),GV=e=>({setActive:t=>{ob.set(e,t)},isActive:()=>ob.isOn(e),isEnabled:()=>!Hg.isDisabled(e),setEnabled:t=>Hg.set(e,!t),setText:t=>Ss(e,oN,{text:t}),setIcon:t=>Ss(e,sN,{icon:t})}),KV=(e,t)=>e.map(e=>({"aria-label":t.translate(e),title:t.translate(e)})).getOr({}),qV=J(`focus-button`),JV=(e,t,n,r,i)=>{let a=t.map(e=>Yb(aN(e,`tox-tbtn`,i))),o=e.map(e=>Yb(iN(e,i.icons)));return{dom:{tag:`button`,classes:[`tox-tbtn`].concat(t.isSome()?[`tox-tbtn--select`]:[]),attributes:KV(n,i)},components:eT([o.map(e=>e.asSpec()),a.map(e=>e.asSpec())]),eventOrder:{[jo()]:[`focusing`,`alloy.base.behaviour`,$M],[us()]:[$M,`toolbar-group-button-events`]},buttonBehaviours:Z([Jw.toolbarButton(i.isDisabled),qw(),By($M,[Vs((e,t)=>tN(e)),q(oN,(e,t)=>{a.bind(t=>t.getOpt(e)).each(e=>{Ry.set(e,[Fl(i.translate(t.event.text))])})}),q(sN,(e,t)=>{o.bind(t=>t.getOpt(e)).each(e=>{Ry.set(e,[iN(t.event.icon,i.icons)])})}),q(jo(),(e,t)=>{t.event.prevent(),xs(e,qV)})])].concat(r.getOr([])))}},YV=(e,t,n,r)=>{let i=t.shared,a=ro(y),o={toolbarButtonBehaviours:[],getApi:WV,onSetup:e.onSetup},s=[By(`toolbar-group-button-events`,[Xw(o,a),Zw(o,a)])];return Rz.sketch({lazySink:i.getSink,fetch:()=>AD.nu(t=>{t(N(n(e.items),Qz))}),markers:{toggledClass:`tox-tbtn--enabled`},parts:{button:JV(e.icon,e.text,e.tooltip,O.some(s),i.providers),toolbar:{dom:{tag:`div`,classes:[`tox-toolbar__overflow`],attributes:r}}}})},XV=(e,t,n)=>{let r=ro(y),i=JV(e.icon,e.text,e.tooltip,O.none(),n);return Jb.sketch({dom:i.dom,components:i.components,eventOrder:eN,buttonBehaviours:{...Z([By(`toolbar-button-events`,[QM({onAction:e.onAction,getApi:t.getApi}),Xw(t,r),Zw(t,r)]),Jw.toolbarButton(()=>!e.enabled||n.isDisabled()),qw()].concat(t.toolbarButtonBehaviours)),[$M]:i.buttonBehaviours?.[$M]}})},ZV=(e,t)=>QV(e,t,[]),QV=(e,t,n)=>XV(e,{toolbarButtonBehaviours:n.length>0?[By(`toolbarButtonWith`,n)]:[],getApi:WV,onSetup:e.onSetup},t),$V=(e,t)=>eH(e,t,[]),eH=(e,t,n)=>XV(e,{toolbarButtonBehaviours:[Ry.config({}),ob.config({toggleClass:`tox-tbtn--enabled`,aria:{mode:`pressed`},toggleOnExecute:!1})].concat(n.length>0?[By(`toolbarToggleButtonWith`,n)]:[]),getApi:GV,onSetup:e.onSetup},t),tH=(e,t,n)=>r=>AD.nu(e=>t.fetch(e)).map(i=>O.from(sO(Di(ZE(J(`menu-value`),i,n=>{t.onItemAction(e(r),n)},t.columns,t.presets,wS.CLOSE_ON_EXECUTE,t.select.getOr(D),n),{movement:$E(t.columns,t.presets),menuBehaviours:Pw.unnamedEvents(t.columns===`auto`?[Vs((e,n)=>{Mw(e,4,IS(t.presets)).each(({numRows:t,numColumns:n})=>{Ty.setGridSize(e,t,n)})})]:[])})))),nH=(e,t)=>{let n=e=>({isEnabled:()=>!Hg.isDisabled(e),setEnabled:t=>Hg.set(e,!t),setIconFill:(t,n)=>{Xl(e.element,`svg path[class="${t}"], rect[class="${t}"]`).each(e=>{un(e,`fill`,n)})},setActive:t=>{un(e.element,`aria-pressed`,t),Xl(e.element,`span`).each(n=>{e.getSystem().getByDom(n).each(e=>ob.set(e,t))})},isActive:()=>Xl(e.element,`span`).exists(t=>e.getSystem().getByDom(t).exists(ob.isOn)),setText:t=>Xl(e.element,`span`).each(n=>e.getSystem().getByDom(n).each(e=>Ss(e,oN,{text:t}))),setIcon:t=>Xl(e.element,`span`).each(n=>e.getSystem().getByDom(n).each(e=>Ss(e,sN,{icon:t})))}),r=ro(y),i={getApi:n,onSetup:e.onSetup};return UV.sketch({dom:{tag:`div`,classes:[`tox-split-button`],attributes:{"aria-pressed":!1,...KV(e.tooltip,t.providers)}},onExecute:t=>{let r=n(t);r.isEnabled()&&e.onAction(r)},onItemExecute:(e,t,n)=>{},splitDropdownBehaviours:Z([Jw.splitButton(t.providers.isDisabled),qw(),By(`split-dropdown-events`,[Vs((e,t)=>tN(e)),q(qV,Wy.focus),Xw(i,r),Zw(i,r)]),vk.config({})]),eventOrder:{[us()]:[`alloy.base.behaviour`,`split-dropdown-events`]},toggleClass:`tox-tbtn--enabled`,lazySink:t.getSink,fetch:tH(n,e,t.providers),parts:{menu:HS(!1,e.columns,e.presets)},components:[UV.parts.button(JV(e.icon,e.text,O.none(),O.some([ob.config({toggleClass:`tox-tbtn--enabled`,toggleOnExecute:!1})]),t.providers)),UV.parts.arrow({dom:{tag:`button`,classes:[`tox-tbtn`,`tox-split-button__chevron`],innerHtml:nx(`chevron-down`,t.providers.icons)},buttonBehaviours:Z([Jw.splitButton(t.providers.isDisabled),qw(),ax()])}),UV.parts[`aria-descriptor`]({text:t.providers.translate(`To open the popup, press Shift+Enter`)})]})},rH=[{name:`history`,items:[`undo`,`redo`]},{name:`ai`,items:[`aidialog`,`aishortcuts`]},{name:`styles`,items:[`styles`]},{name:`formatting`,items:[`bold`,`italic`]},{name:`alignment`,items:[`alignleft`,`aligncenter`,`alignright`,`alignjustify`]},{name:`indentation`,items:[`outdent`,`indent`]},{name:`permanent pen`,items:[`permanentpen`]},{name:`comments`,items:[`addcomment`]}],iH=(e,t)=>(n,r,i)=>t(e(n).mapError(e=>Ca(e)).getOrDie(),r,i),aH={button:iH(ew,(e,t)=>ZV(e,t.shared.providers)),togglebutton:iH(rw,(e,t)=>$V(e,t.shared.providers)),menubutton:iH(jR,(e,t)=>pP(e,`tox-tbtn`,t,O.none(),!1)),splitbutton:iH(NR,(e,t)=>nH(e,t.shared)),grouptoolbarbutton:iH(kR,(e,t,n)=>{let r=n.ui.registry.getAll().buttons,i=e=>pH(n,{buttons:r,toolbar:e,allowToolbarGroups:!1},t,O.none()),a={[Wf]:t.shared.header.isPositionedAtTop()?Uf.TopToBottom:Uf.BottomToTop};switch(Mx(n)){case hx.floating:return YV(e,t,i,a);default:throw Error(`Toolbar groups are only supported when using floating toolbar mode`)}})},oH=(e,t,n)=>L(aH,e.type).fold(()=>(console.error(`skipping button defined by`,e),O.none()),r=>O.some(r(e,t,n))),sH={styles:zV,fontsize:MV,fontsizeinput:IV,fontfamily:_V,blocks:dV,align:sV},cH=e=>de(N(rH,t=>{let n=de(t.items,t=>Be(e,t)||Be(sH,t));return{name:t.name,items:n}}),e=>e.items.length>0),lH=e=>N(e.split(`|`),e=>({items:e.trim().split(` `)})),uH=e=>v(e,e=>Be(e,`name`)&&Be(e,`items`)),dH=e=>{let t=e.toolbar,n=e.buttons;return t===!1?[]:t===void 0||t===!0?cH(n):s(t)?lH(t):uH(t)?t:(console.error(`Toolbar type should be string, string[], boolean or ToolbarGroup[]`),[])},fH=(e,t,n,r,i,a)=>L(t,n.toLowerCase()).orThunk(()=>a.bind(e=>De(e,e=>L(t,e+n.toLowerCase())))).fold(()=>L(sH,n.toLowerCase()).map(t=>t(e,i)),t=>t.type===`grouptoolbarbutton`&&!r?(console.warn(`Ignoring the '${n}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),O.none()):oH(t,i,e)),pH=(e,t,n,r)=>de(N(dH(t),i=>{let a=_e(i.items,i=>i.trim().length===0?[]:fH(e,t.buttons,i,t.allowToolbarGroups,n,r).toArray());return{title:O.from(e.translate(i.name)),items:a}}),e=>e.items.length>0),mH=(e,t,n,r)=>{let i=t.mainUi.outerContainer,a=n.toolbar,o=n.buttons;if(v(a,s)){let t=a.map(t=>pH(e,{toolbar:t,buttons:o,allowToolbarGroups:n.allowToolbarGroups},r,O.none()));RB.setToolbars(i,t)}else RB.setToolbar(i,pH(e,n,r,O.none()))},hH=Dr(),gH=hH.os.isiOS()&&hH.os.version.major<=12,_H=(e,t)=>{let{uiMotherships:n}=t,r=e.dom,i=e.getWin(),a=e.getDoc().documentElement,o=ro(Pn(i.innerWidth,i.innerHeight)),s=ro(Pn(a.offsetWidth,a.offsetHeight)),c=()=>{let t=o.get();(t.left!==i.innerWidth||t.top!==i.innerHeight)&&(o.set(Pn(i.innerWidth,i.innerHeight)),QT(e))},l=()=>{let t=e.getDoc().documentElement,n=s.get();(n.left!==t.offsetWidth||n.top!==t.offsetHeight)&&(s.set(Pn(t.offsetWidth,t.offsetHeight)),QT(e))},u=t=>{$T(e,t)};r.bind(i,`resize`,c),r.bind(i,`scroll`,u);let d=pf(z.fromDom(e.getBody()),`load`,l);e.on(`hide`,()=>{P(n,e=>{yn(e.element,`display`,`none`)})}),e.on(`show`,()=>{P(n,e=>{En(e.element,`display`)})}),e.on(`NodeChange`,l),e.on(`remove`,()=>{d.unbind(),r.unbind(i,`resize`,c),r.unbind(i,`scroll`,u),i=null})},vH=(e,t,n)=>{gS(e)&&km(n.mainUi.mothership.element,n.popupUi.mothership),Om(t,n.dialogUi.mothership)};var yH=Object.freeze({__proto__:null,render:async(e,t,n,r,i)=>{let{mainUi:a,uiMotherships:o}=t,s=ro(0),c=a.outerContainer;await YB(e);let l=z.fromDom(i.targetNode),u=$t(Qt(l));km(l,a.mothership),vH(e,u,t),e.on(`PostRender`,()=>{RB.setSidebar(c,n.sidebar,eS(e)),mH(e,t,n,r),s.set(e.getWin().innerWidth),RB.setMenubar(c,HB(e,n)),RB.setViews(c,n.views),_H(e,t)});let f=RB.getSocket(c).getOrDie(`Could not find expected socket element`);if(gH){B(f.element,{overflow:`scroll`,"-webkit-overflow-scrolling":`touch`});let t=yM(()=>{e.dispatch(`ScrollContent`)},20),n=ff(f.element,`scroll`,t.throttle);e.on(`remove`,n.unbind)}Kw(e,t),e.addCommand(`ToggleSidebar`,(t,n)=>{RB.toggleSidebar(c,n),e.dispatch(`ToggleSidebar`)}),e.addQueryValueHandler(`ToggleSidebar`,()=>RB.whichSidebar(c)??``),e.addCommand(`ToggleView`,(t,n)=>{if(RB.toggleView(c,n)){let t=c.element;a.mothership.broadcastOn([Jm()],{target:t}),P(o,e=>{e.broadcastOn([Jm()],{target:t})}),d(RB.whichView(c))&&(e.focus(),e.nodeChanged(),RB.refreshToolbar(c))}}),e.addQueryValueHandler(`ToggleView`,()=>RB.whichView(c)??``);let p=Mx(e),m=()=>{RB.refreshToolbar(t.mainUi.outerContainer)};return(p===hx.sliding||p===hx.floating)&&e.on(`ResizeWindow ResizeEditor ResizeContent`,()=>{let t=e.getWin().innerWidth;t!==s.get()&&(m(),s.set(t))}),{iframeContainer:f.element.dom,editorContainer:c.element.dom,api:{setEnabled:e=>{Gw(t,!e)},isEnabled:()=>!Hg.isDisabled(c)}}}});let bH=e=>/^[0-9\.]+(|px)$/i.test(``+e)?O.some(parseInt(``+e,10)):O.none(),xH=e=>_(e)?e+`px`:e,SH=(e,t,n)=>{let r=t.filter(t=>e<t),i=n.filter(t=>e>t);return r.or(i).getOr(e)},CH=e=>{let t=xx(e),n=wx(e),r=Ex(e);return bH(t).map(e=>SH(e,n,r))},wH=e=>CH(e).getOr(xx(e)),TH=e=>{let t=Sx(e),n=Cx(e),r=Tx(e);return bH(t).map(e=>SH(e,n,r))},EH=e=>TH(e).getOr(Sx(e)),{ToolbarLocation:DH,ToolbarMode:OH}=vS,kH=(e,t,n,r,i)=>{let{mainUi:a,uiMotherships:o}=n,s=fx.DOM,c=fS(e),l=hS(e),u=Tx(e).or(TH(e)),d=r.shared.header,f=d.isPositionedAtTop,p=Mx(e),m=p===OH.sliding||p===OH.floating,h=ro(!1),g=()=>h.get()&&!e.removed,_=e=>m?e.fold(S(0),e=>e.components().length>1?An(e.components()[1].element):0):0,v=n=>{switch(Px(e)){case DH.auto:let e=_(RB.getToolbar(a.outerContainer)),r=An(n.element)-e,i=ni(t);if(i.y>r)return`top`;{let e=It(t),n=Math.max(e.dom.scrollHeight,An(e));return i.bottom<n-r||oi().bottom<i.bottom-r?`bottom`:`top`}case DH.bottom:return`bottom`;case DH.top:default:return`top`}},y=e=>{i.on(t=>{uR.setModes(t,[e]),d.setDockingMode(e);let n=f()?Uf.TopToBottom:Uf.BottomToTop;un(t.element,Wf,n)})},b=()=>{i.on(e=>{let n=u.getOrThunk(()=>{let e=bH(xn(sn(),`margin-left`)).getOr(0);return Vn(sn())-Ln(t).left+e});yn(e.element,`max-width`,n+`px`)})},x=n=>{i.on(r=>{let i=_(RB.getToolbar(a.outerContainer)),o=ni(t),{top:s,left:c}=ee(e,a.outerContainer.element).fold(()=>({top:f()?Math.max(o.y-An(r.element)+i,0):o.bottom,left:o.x}),e=>{let t=ni(e),n=e.dom.scrollTop??0,a=Mt(e,sn()),s=a?Math.max(o.y-An(r.element)+i,0):o.y-t.y+n-An(r.element)+i;return{top:f()?s:o.bottom,left:a?o.x:o.x-t.x}}),l={position:`absolute`,left:Math.round(c)+`px`,top:Math.round(s)+`px`},u=n.map(e=>{let t=Ur(),n=window.innerWidth-(c-t.left);return{width:Math.max(Math.min(e,n),150)+`px`}}).getOr({});B(a.outerContainer.element,{...l,...u})})},ee=(e,t)=>gS(e)?TL(t):O.none(),C=()=>{P(o,e=>{e.broadcastOn([Ym()],{})})},te=()=>{if(c)return O.none();if(Ln(a.outerContainer.element).left+Hn(a.outerContainer.element)>=window.innerWidth-40||Cn(a.outerContainer.element,`width`).isSome()){yn(a.outerContainer.element,`position`,`absolute`),yn(a.outerContainer.element,`left`,`0px`),En(a.outerContainer.element,`width`);let e=Hn(a.outerContainer.element);return O.some(e)}else return O.none()},w=e=>{if(!g())return;c||b();let t=c?O.none():te();m&&RB.refreshToolbar(a.outerContainer),c||x(t),l&&i.on(e),C()},T=()=>c||!l||!g()?!1:i.get().exists(e=>{let t=d.getDockingMode(),n=v(e);return n===t?!1:(y(n),!0)});return{isVisible:g,isPositionedAtTop:f,show:()=>{h.set(!0),yn(a.outerContainer.element,`display`,`flex`),s.addClass(e.getBody(),`mce-edit-focus`),P(o,e=>{En(e.element,`display`)}),T(),gS(e)?w(e=>uR.isDocked(e)?uR.reset(e):uR.refresh(e)):w(uR.refresh)},hide:()=>{h.set(!1),yn(a.outerContainer.element,`display`,`none`),s.removeClass(e.getBody(),`mce-edit-focus`),P(o,e=>{yn(e.element,`display`,`none`)})},update:w,updateMode:()=>{T()&&w(uR.reset)},repositionPopups:C}},AH=(e,t)=>{let n=ni(e);return{pos:t?n.y:n.bottom,bounds:n}},jH=(e,t,n,r)=>{let i=ro(AH(t,n.isPositionedAtTop())),a=r=>{let{pos:a,bounds:o}=AH(t,n.isPositionedAtTop()),{pos:s,bounds:c}=i.get(),l=o.height!==c.height||o.width!==c.width;i.set({pos:a,bounds:o}),l&&QT(e,r),n.isVisible()&&(s===a?l&&(n.updateMode(),n.repositionPopups()):n.update(uR.reset))};r||(e.on(`activate`,n.show),e.on(`deactivate`,n.hide)),e.on(`SkinLoaded ResizeWindow`,()=>n.update(uR.reset)),e.on(`NodeChange keydown`,e=>{requestAnimationFrame(()=>a(e))});let o=0,s=bM(()=>n.update(uR.refresh),33);e.on(`ScrollWindow`,()=>{let e=Ur().left;e!==o&&(o=e,s.throttle()),n.updateMode()}),gS(e)&&e.on(`ElementScroll`,e=>{n.update(uR.refresh)});let c=lf();c.set(pf(z.fromDom(e.getBody()),`load`,e=>a(e.raw))),e.on(`remove`,()=>{c.clear()})};var MH=Object.freeze({__proto__:null,render:async(e,t,n,r,i)=>{let{mainUi:a}=t,o=uf(),s=z.fromDom(i.targetNode),c=kH(e,s,t,r,o),l=Lx(e);await XB(e);let u=()=>{if(o.isSet()){c.show();return}o.set(RB.getHeader(a.outerContainer).getOrDie());let i=pS(e);gS(e)?(km(s,a.mothership),km(s,t.popupUi.mothership)):Om(i,a.mothership),Om(i,t.dialogUi.mothership),mH(e,t,n,r),RB.setMenubar(a.outerContainer,HB(e,n)),c.show(),jH(e,s,c,l),e.nodeChanged()};e.on(`show`,u),e.on(`hide`,c.hide),l||(e.on(`focus`,u),e.on(`blur`,c.hide)),e.on(`init`,()=>{(e.hasFocus()||l)&&u()}),Kw(e,t);let d={show:u,hide:c.hide,setEnabled:e=>{Gw(t,!e)},isEnabled:()=>!Hg.isDisabled(a.outerContainer)};return{editorContainer:a.outerContainer.element.dom,api:d}}});let NH=()=>{let e=uf(),t=uf(),n=uf();return{dialogUi:e,popupUi:t,mainUi:n,getUiMotherships:()=>{let n=e.get().map(e=>e.mothership),r=t.get().map(e=>e.mothership);return n.fold(()=>r.toArray(),e=>r.fold(()=>[e],t=>Mt(e.element,t.element)?[e]:[e,t]))},lazyGetInOuterOrDie:(e,t)=>()=>n.get().bind(e=>t(e.outerContainer)).getOrDie(`Could not find ${e} element in OuterContainer`)}},PH=`contexttoolbar-hide`,FH=e=>({hide:()=>xs(e,rs()),getValue:()=>Q.getValue(e)}),IH=(e,t)=>q(ZM,(n,r)=>{let i=FH(e.get(n));t.onAction(i,r.event.buttonApi)}),LH=(e,t,n)=>{let{primary:r,...i}=t.original;return QV(xa(ew({...i,type:`button`,onAction:y})),n,[IH(e,t)])},RH=(e,t,n)=>{let{primary:r,...i}=t.original;return eH(xa(rw({...i,type:`togglebutton`,onAction:y})),n,[IH(e,t)])},zH=e=>e.type===`contextformtogglebutton`,BH=(e,t,n)=>zH(t)?RH(e,t,n):LH(e,t,n),VH=(e,t,n)=>{let r=N(t,t=>Yb(BH(e,t,n)));return{asSpecs:()=>N(r,e=>e.asSpec()),findPrimary:e=>De(t,(t,n)=>t.primary?O.from(r[n]).bind(t=>t.getOpt(e)).filter(T(Hg.isDisabled)):O.none())}},HH=(e,t)=>{let n=e.label.fold(()=>({}),e=>({"aria-label":e})),r=Yb(qS.sketch({inputClasses:[`tox-toolbar-textfield`,`tox-toolbar-nav-js`],data:e.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:Z([Ty.config({mode:`special`,onEnter:e=>i.findPrimary(e).map(e=>(Cs(e),!0)),onLeft:(e,t)=>(t.cut(),O.none()),onRight:(e,t)=>(t.cut(),O.none())})])})),i=VH(r,e.commands,t);return[{title:O.none(),items:[r.asSpec()]},{title:O.none(),items:i.asSpecs()}]},UH={renderContextForm:(e,t,n)=>rB({type:e,uid:J(`context-toolbar`),initGroups:HH(t,n),onEscape:O.none,cyclicKeying:!0,providers:n}),buildInitGroups:HH},WH=(e,t,n)=>t.bottom-e.y>=n&&e.bottom-t.y>=n,GH=e=>{let t=e.getBoundingClientRect();if(t.height<=0&&t.width<=0){let n=Jt(z.fromDom(e.startContainer),e.startOffset).element;return(wt(n)?Rt(n):O.some(n)).filter(Ct).map(e=>e.dom.getBoundingClientRect()).getOr(t)}else return t},KH=e=>{let t=GH(e.selection.getRng());if(e.inline){let e=Ur();return ti(e.left+t.left,e.top+t.top,t.width,t.height)}else{let n=ri(z.fromDom(e.getBody()));return ti(n.x+t.left,n.y+t.top,t.width,t.height)}},qH=(e,t)=>t.filter(e=>on(e)&&St(e)).map(ri).getOrThunk(()=>KH(e)),JH=(e,t,n)=>{let r=Math.max(e.x+n,t.x);return{x:r,width:Math.min(e.right-n,t.right)-r}},YH=(e,t,n,r,i,a)=>{let o=z.fromDom(e.getContainer()),s=ni(Xl(o,`.tox-editor-header`).getOr(o)),c=s.y>=t.bottom,l=r&&!c;if(e.inline&&l)return{y:Math.max(s.bottom+a,n.y),bottom:n.bottom};if(e.inline&&!l)return{y:n.y,bottom:Math.min(s.y-a,n.bottom)};let u=i===`line`?ni(o):t;return l?{y:Math.max(s.bottom+a,n.y),bottom:Math.min(u.bottom-a,n.bottom)}:{y:Math.max(u.y+a,n.y),bottom:Math.min(s.y-a,n.bottom)}},XH=(e,t,n,r=0)=>{let i=qr(window),a=ni(z.fromDom(e.getContentAreaContainer())),o=iS(e)||sS(e)||lS(e),{x:s,width:c}=JH(a,i,r);if(e.inline&&!o)return ti(s,i.y,c,i.height);{let{y:o,bottom:l}=YH(e,a,i,t.header.isPositionedAtTop(),n,r);return ti(s,o,c,l-o)}},ZH={valignCentre:[],alignCentre:[],alignLeft:[`tox-pop--align-left`],alignRight:[`tox-pop--align-right`],right:[`tox-pop--right`],left:[`tox-pop--left`],bottom:[`tox-pop--bottom`],top:[`tox-pop--top`],inset:[`tox-pop--inset`]},QH={maxHeightFunction:Nf(),maxWidthFunction:kz()},$H=(e,t)=>{let n=e.selection.getRng(),r=Jt(z.fromDom(n.startContainer),n.startOffset);return n.startContainer===n.endContainer&&n.startOffset===n.endOffset-1&&Mt(r.element,t)},eU=(e,t,n)=>{let r=Cn(e,`position`);yn(e,`position`,t);let i=n(e);return r.each(t=>yn(e,`position`,t)),i},tU=e=>e===`node`,nU=(e,t,n,r,i)=>{let a=KH(e),o=r.lastElement().exists(e=>Mt(n,e));return $H(e,n)?o?KF:VF:o?eU(t,r.getMode(),()=>WH(a,ni(t),-20)&&!r.isReposition()?JF:KF):(r.getMode()===`fixed`?i.y+Ur().top:i.y)+(An(t)+12)<=a.y?VF:HF},rU=(e,t,n,r)=>{let i=t=>(r,i,a,o,s)=>({...nU(e,o,t,n,s)({...r,y:s.y,height:s.height},i,a,o,s),alwaysFit:!0}),a=e=>tU(r)?[i(e)]:[];return t?{onLtr:e=>[ad,ed,td,nd,rd,id].concat(a(e)),onRtl:e=>[ad,td,ed,rd,nd,id].concat(a(e))}:{onLtr:e=>[id,ad,nd,ed,rd,td].concat(a(e)),onRtl:e=>[id,ad,rd,td,nd,ed].concat(a(e))}},iU=(e,t,n,r)=>t===`line`?{bubble:Rf(12,0,ZH),layouts:{onLtr:()=>[od],onRtl:()=>[sd]},overrides:QH}:{bubble:Rf(0,12,ZH,1/12),layouts:rU(e,n,r,t),overrides:QH},aU=(e,t)=>{let{pass:n,fail:r}=ue(de(t,t=>t.predicate(e.dom)),e=>e.type===`contexttoolbar`);return{contextToolbars:n,contextForms:r}},oU=e=>{if(e.length<=1)return e;{let t=t=>se(e,e=>e.position===t),n=t=>de(e,e=>e.position===t),r=t(`selection`),i=t(`node`);if(r||i)if(i&&r){let e=n(`node`),t=N(n(`selection`),e=>({...e,position:`node`}));return e.concat(t)}else return n(r?`selection`:`node`);else return n(`line`)}},sU=e=>{if(e.length<=1)return e;{let t=t=>he(e,e=>e.position===t);return t(`selection`).orThunk(()=>t(`node`)).orThunk(()=>t(`line`)).map(e=>e.position).fold(()=>[],t=>de(e,e=>e.position===t))}},cU=(e,t,n)=>{let r=aU(e,t);if(r.contextForms.length>0)return O.some({elem:e,toolbars:[r.contextForms[0]]});{let t=aU(e,n);if(t.contextForms.length>0)return O.some({elem:e,toolbars:[t.contextForms[0]]});if(r.contextToolbars.length>0||t.contextToolbars.length>0){let n=oU(r.contextToolbars.concat(t.contextToolbars));return O.some({elem:e,toolbars:n})}else return O.none()}},lU=(e,t,n)=>e(t)?O.none():_o(t,e=>{if(Ct(e)){let{contextToolbars:t,contextForms:r}=aU(e,n.inNodeScope),i=r.length>0?r:sU(t);return i.length>0?O.some({elem:e,toolbars:i}):O.none()}else return O.none()},e),uU=(e,t)=>{let n=z.fromDom(t.getBody()),r=e=>Mt(e,n),i=e=>!r(e)&&!Nt(n,e),a=z.fromDom(t.selection.getNode());return i(a)?O.none():cU(a,e.inNodeScope,e.inEditorScope).orThunk(()=>lU(r,a,e))},dU=(e,t)=>{let n={},r=[],i=[],a={},o={},s=(e,s)=>{let c=xa(dw(s));n[e]=c,c.launch.map(n=>{a[`form:`+e]={...s.launch,type:n.type===`contextformtogglebutton`?`togglebutton`:`button`,onAction:()=>{t(c)}}}),c.scope===`editor`?i.push(c):r.push(c),o[e]=c},c=(e,t)=>{pw(t).each(n=>{t.scope===`editor`?i.push(n):r.push(n),o[e]=n})};return P(Oe(e),t=>{let n=e[t];n.type===`contextform`?s(t,n):n.type===`contexttoolbar`&&c(t,n)}),{forms:n,inNodeScope:r,inEditorScope:i,lookupTable:o,formNavigators:a}},fU=J(`forward-slide`),pU=J(`backward-slide`),mU=J(`change-slide-event`),hU=`tox-pop--resizing`,gU=e=>{let t=ro([]);return Kb.sketch({dom:{tag:`div`,classes:[`tox-pop`]},fireDismissalEventInstead:{event:`doNotDismissYet`},onShow:e=>{t.set([]),Kb.getContent(e).each(e=>{En(e.element,`visibility`)}),ol(e.element,hU),En(e.element,`width`)},inlineBehaviours:Z([By(`context-toolbar-events`,[Bs(Wo(),(e,t)=>{t.event.raw.propertyName===`width`&&(ol(e.element,hU),En(e.element,`width`))}),q(mU,(e,t)=>{let n=e.element;En(n,`width`);let r=Vn(n);Kb.setContent(e,t.event.contents),il(n,hU);let i=Vn(n);yn(n,`width`,r+`px`),Kb.getContent(e).each(e=>{t.event.focus.bind(e=>(Ad(e),Pd(n))).orThunk(()=>(Ty.focusIn(e),Nd(Qt(n))))}),setTimeout(()=>{yn(e.element,`width`,i+`px`)},0)}),q(fU,(e,n)=>{Kb.getContent(e).each(n=>{t.set(t.get().concat([{bar:n,focus:Nd(Qt(e.element))}]))}),Ss(e,mU,{contents:n.event.forwardContents,focus:O.none()})}),q(pU,(e,n)=>{Te(t.get()).each(n=>{t.set(t.get().slice(0,t.get().length-1)),Ss(e,mU,{contents:Vl(n.bar),focus:n.focus})})})]),Ty.config({mode:`special`,onEscape:n=>Te(t.get()).fold(()=>e.onEscape(),e=>(xs(n,pU),O.some(!0)))})]),lazySink:()=>ui.value(e.sink)})},_U=`tox-pop--transition`,vU=(e,t,n,r)=>{let i=r.backstage,a=i.shared,o=Dr().deviceType.isTouch,s=uf(),c=uf(),l=uf(),u=Bl(gU({sink:n,onEscape:()=>(e.focus(),O.some(!0))})),d=()=>{let t=l.get().getOr(`node`);return XH(e,a,t,tU(t)?1:0)},f=()=>!e.removed&&!(o()&&i.isContextMenuOpen()),p=e=>He(Ke(e,s.get(),Mt),!0),m=()=>{if(f()){let t=d(),n=He(l.get(),`node`)?qH(e,s.get()):KH(e);return t.height<=0||!WH(n,t,.01)}else return!0},h=()=>{s.clear(),c.clear(),l.clear(),Kb.hide(u)},g=()=>{if(Kb.isOpen(u)){let e=u.element;En(e,`display`),m()?yn(e,`display`,`none`):(c.set(0),Kb.reposition(u))}},_=t=>({dom:{tag:`div`,classes:[`tox-pop__dialog`]},components:[t],behaviours:Z([Ty.config({mode:`acyclic`}),By(`pop-dialog-wrap-events`,[Vs(t=>{e.shortcuts.add(`ctrl+F9`,`focus statusbar`,()=>Ty.focusIn(t))}),Hs(t=>{e.shortcuts.remove(`ctrl+F9`)})])])}),v=Wn(()=>dU(t,e=>{Ss(u,fU,{forwardContents:_(ee([e]))})})),b=(t,n)=>pH(e,{buttons:t,toolbar:n.items,allowToolbarGroups:!1},r.backstage,O.some([`form:`])),x=(e,t)=>UH.buildInitGroups(e,t),ee=t=>{let{buttons:n}=e.ui.registry.getAll(),r=v(),i={...n,...r.formNavigators},o=Mx(e)===hx.scrolling?hx.scrolling:hx.default,s=F(N(t,e=>e.type===`contexttoolbar`?b(i,e):x(e,a.providers)));return rB({type:o,uid:J(`context-toolbar`),initGroups:s,onEscape:O.none,cyclicKeying:!0,providers:a.providers})},S=(t,r)=>Di(t===`node`?a.anchors.node(r):a.anchors.cursor(),iU(e,t,o(),{lastElement:s.get,isReposition:()=>He(c.get(),0),getMode:()=>pm.getMode(n)})),C=(e,t)=>{if(w.cancel(),!f())return;let r=ee(e),i=e[0].position,a=S(i,t);l.set(i),c.set(1);let o=u.element;En(o,`display`),p(t)||(ol(o,_U),pm.reset(n,u)),Kb.showWithinBounds(u,_(r),{anchor:a,transition:{classes:[_U],mode:`placement`}},()=>O.some(d())),t.fold(s.clear,s.set),m()&&yn(o,`display`,`none`)},te=!1,w=bM(()=>{!e.hasFocus()||e.removed||te||(sl(u.element,_U)?w.throttle():uU(v(),e).fold(h,e=>{C(e.toolbars,O.some(e.elem))}))},17);e.on(`init`,()=>{e.on(`remove`,h),e.on(`ScrollContent ScrollWindow ObjectResized ResizeEditor longpress`,g),e.on(`click keyup focus SetContent`,w.throttle),e.on(PH,h),e.on(`contexttoolbar-show`,t=>{L(v().lookupTable,t.toolbarKey).each(n=>{C([n],Ye(t.target!==e,t.target)),Kb.getContent(u).each(Ty.focusIn)})}),e.on(`focusout`,t=>{qb.setEditorTimeout(e,()=>{Pd(n.element).isNone()&&Pd(u.element).isNone()&&h()},0)}),e.on(`SwitchMode`,()=>{e.mode.isReadOnly()&&h()}),e.on(`AfterProgressState`,t=>{t.state?h():e.hasFocus()&&w.throttle()}),e.on(`dragstart`,()=>{te=!0}),e.on(`dragend drop`,()=>{te=!1}),e.on(`NodeChange`,e=>{Pd(u.element).fold(w.throttle,y)})})},yU=e=>{P([{name:`alignleft`,text:`Align left`,cmd:`JustifyLeft`,icon:`align-left`},{name:`aligncenter`,text:`Align center`,cmd:`JustifyCenter`,icon:`align-center`},{name:`alignright`,text:`Align right`,cmd:`JustifyRight`,icon:`align-right`},{name:`alignjustify`,text:`Justify`,cmd:`JustifyFull`,icon:`align-justify`}],t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:uE(e,t.cmd),onSetup:sE(e,t.name)})}),e.ui.registry.addButton(`alignnone`,{tooltip:`No alignment`,icon:`align-none`,onSetup:aE(e),onAction:uE(e,`JustifyNone`)})},bU=(e,t)=>{let n=()=>{let n=t.getOptions(e),r=t.getCurrent(e).map(t.hash),i=uf();return N(n,n=>({type:`togglemenuitem`,text:t.display(n),onSetup:a=>{let o=e=>{e&&(i.on(e=>e.setActive(!1)),i.set(a)),a.setActive(e)};o(He(r,t.hash(n)));let s=t.watcher(e,n,o);return()=>{i.clear(),s()}},onAction:()=>t.setCurrent(e,n)}))};e.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:e=>e(n()),onSetup:t.onToolbarSetup}),e.ui.registry.addNestedMenuItem(t.name,{type:`nestedmenuitem`,text:t.text,getSubmenuItems:n,onSetup:t.onMenuSetup})},xU=e=>({name:`lineheight`,text:`Line height`,icon:`line-height`,getOptions:oS,hash:e=>CV(e,[`fixed`,`relative`,`empty`]).getOr(e),display:C,watcher:(e,t,n)=>e.formatter.formatChanged(`lineheight`,n,!1,{value:t}).unbind,getCurrent:e=>O.from(e.queryCommandValue(`LineHeight`)),setCurrent:(e,t)=>e.execCommand(`LineHeight`,!1,t),onToolbarSetup:aE(e),onMenuSetup:aE(e)}),SU=e=>O.from(Ax(e)).map(t=>({name:`language`,text:`Language`,icon:`language`,getOptions:S(t),hash:e=>p(e.customCode)?e.code:`${e.code}/${e.customCode}`,display:e=>e.title,watcher:(e,t,n)=>e.formatter.formatChanged(`lang`,n,!1,{value:t.code,customValue:t.customCode??null}).unbind,getCurrent:e=>vo(z.fromDom(e.selection.getNode()),e=>O.some(e).filter(Ct).bind(e=>pn(e,`lang`).map(t=>({code:t,customCode:pn(e,`data-mce-lang`).getOrUndefined(),title:``})))),setCurrent:(e,t)=>e.execCommand(`Lang`,!1,t),onToolbarSetup:t=>{let n=lf();return t.setActive(e.formatter.match(`lang`,{},void 0,!0)),n.set(e.formatter.formatChanged(`lang`,t.setActive,!0)),iE(n.clear,aE(e)(t))},onMenuSetup:aE(e)})),CU=e=>{bU(e,xU(e)),SU(e).each(t=>bU(e,t))},wU=(e,t)=>{cV(e,t),vV(e,t),BV(e,t),fV(e,t),LV(e,t)},TU=e=>cE(e,`NodeChange`,t=>{t.setEnabled(e.queryCommandState(`outdent`)&&e.selection.isEditable())}),EU=e=>{e.ui.registry.addButton(`outdent`,{tooltip:`Decrease indent`,icon:`outdent`,onSetup:TU(e),onAction:uE(e,`outdent`)}),e.ui.registry.addButton(`indent`,{tooltip:`Increase indent`,icon:`indent`,onSetup:aE(e),onAction:uE(e,`indent`)})},DU=e=>{EU(e)},OU=(e,t)=>n=>{n.setActive(t.get());let r=e=>{t.set(e.state),n.setActive(e.state)};return e.on(`PastePlainTextToggle`,r),iE(()=>e.off(`PastePlainTextToggle`,r),aE(e)(n))},kU=e=>{let t=ro($x(e)),n=()=>e.execCommand(`mceTogglePlainTextPaste`);e.ui.registry.addToggleButton(`pastetext`,{active:!1,icon:`paste-text`,tooltip:`Paste as text`,onAction:n,onSetup:OU(e,t)}),e.ui.registry.addToggleMenuItem(`pastetext`,{text:`Paste as text`,icon:`paste-text`,onAction:n,onSetup:OU(e,t)})},AU=(e,t)=>()=>{e.execCommand(`mceToggleFormat`,!1,t)},jU=e=>{mM.each([{name:`bold`,text:`Bold`,icon:`bold`},{name:`italic`,text:`Italic`,icon:`italic`},{name:`underline`,text:`Underline`,icon:`underline`},{name:`strikethrough`,text:`Strikethrough`,icon:`strike-through`},{name:`subscript`,text:`Subscript`,icon:`subscript`},{name:`superscript`,text:`Superscript`,icon:`superscript`}],(t,n)=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:sE(e,t.name),onAction:AU(e,t.name)})});for(let t=1;t<=6;t++){let n=`h`+t;e.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:`Heading `+t,onSetup:sE(e,n),onAction:AU(e,n)})}},MU=e=>{mM.each([{name:`copy`,text:`Copy`,action:`Copy`,icon:`copy`},{name:`help`,text:`Help`,action:`mceHelp`,icon:`help`},{name:`selectall`,text:`Select all`,action:`SelectAll`,icon:`select-all`},{name:`newdocument`,text:`New document`,action:`mceNewDocument`,icon:`new-document`},{name:`print`,text:`Print`,action:`mcePrint`,icon:`print`}],t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:uE(e,t.action)})}),mM.each([{name:`cut`,text:`Cut`,action:`Cut`,icon:`cut`},{name:`paste`,text:`Paste`,action:`Paste`,icon:`paste`},{name:`removeformat`,text:`Clear formatting`,action:`RemoveFormat`,icon:`remove-formatting`},{name:`remove`,text:`Remove`,action:`Delete`,icon:`remove`},{name:`hr`,text:`Horizontal line`,action:`InsertHorizontalRule`,icon:`horizontal-rule`}],t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:aE(e),onAction:uE(e,t.action)})})},NU=e=>{mM.each([{name:`blockquote`,text:`Blockquote`,action:`mceBlockQuote`,icon:`quote`}],t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:uE(e,t.action),onSetup:sE(e,t.name)})})},PU=e=>{jU(e),MU(e),NU(e)},FU=e=>{mM.each([{name:`newdocument`,text:`New document`,action:`mceNewDocument`,icon:`new-document`},{name:`copy`,text:`Copy`,action:`Copy`,icon:`copy`,shortcut:`Meta+C`},{name:`selectall`,text:`Select all`,action:`SelectAll`,icon:`select-all`,shortcut:`Meta+A`},{name:`print`,text:`Print...`,action:`mcePrint`,icon:`print`,shortcut:`Meta+P`}],t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:uE(e,t.action)})}),mM.each([{name:`bold`,text:`Bold`,action:`Bold`,icon:`bold`,shortcut:`Meta+B`},{name:`italic`,text:`Italic`,action:`Italic`,icon:`italic`,shortcut:`Meta+I`},{name:`underline`,text:`Underline`,action:`Underline`,icon:`underline`,shortcut:`Meta+U`},{name:`strikethrough`,text:`Strikethrough`,action:`Strikethrough`,icon:`strike-through`},{name:`subscript`,text:`Subscript`,action:`Subscript`,icon:`subscript`},{name:`superscript`,text:`Superscript`,action:`Superscript`,icon:`superscript`},{name:`removeformat`,text:`Clear formatting`,action:`RemoveFormat`,icon:`remove-formatting`},{name:`cut`,text:`Cut`,action:`Cut`,icon:`cut`,shortcut:`Meta+X`},{name:`paste`,text:`Paste`,action:`Paste`,icon:`paste`,shortcut:`Meta+V`},{name:`hr`,text:`Horizontal line`,action:`InsertHorizontalRule`,icon:`horizontal-rule`}],t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onSetup:aE(e),onAction:uE(e,t.action)})}),e.ui.registry.addMenuItem(`codeformat`,{text:`Code`,icon:`sourcecode`,onSetup:aE(e),onAction:AU(e,`code`)})},IU=e=>{PU(e),FU(e)},LU=(e,t)=>cE(e,`Undo Redo AddUndo TypingUndo ClearUndos SwitchMode`,n=>{n.setEnabled(!e.mode.isReadOnly()&&e.undoManager[t]())}),RU=e=>{e.ui.registry.addMenuItem(`undo`,{text:`Undo`,icon:`undo`,shortcut:`Meta+Z`,onSetup:LU(e,`hasUndo`),onAction:uE(e,`undo`)}),e.ui.registry.addMenuItem(`redo`,{text:`Redo`,icon:`redo`,shortcut:`Meta+Y`,onSetup:LU(e,`hasRedo`),onAction:uE(e,`redo`)})},zU=e=>{e.ui.registry.addButton(`undo`,{tooltip:`Undo`,icon:`undo`,enabled:!1,onSetup:LU(e,`hasUndo`),onAction:uE(e,`undo`)}),e.ui.registry.addButton(`redo`,{tooltip:`Redo`,icon:`redo`,enabled:!1,onSetup:LU(e,`hasRedo`),onAction:uE(e,`redo`)})},BU=e=>{RU(e),zU(e)},VU=e=>cE(e,`VisualAid`,t=>{t.setActive(e.hasVisual)}),HU=e=>{e.ui.registry.addToggleMenuItem(`visualaid`,{text:`Visual aids`,onSetup:VU(e),onAction:uE(e,`mceToggleVisualAid`)})},UU=e=>{e.ui.registry.addButton(`visualaid`,{tooltip:`Visual aids`,text:`Visual aids`,onAction:uE(e,`mceToggleVisualAid`)})},WU=e=>{UU(e),HU(e)},GU=(e,t)=>{yU(e),IU(e),wU(e,t),BU(e),XE(e),WU(e),DU(e),CU(e),kU(e)},KU=e=>s(e)?e.split(/[ ,]/):e,qU=e=>t=>t.options.get(e),JU=e=>{let t=e.options.register;t(`contextmenu_avoid_overlap`,{processor:`string`,default:``}),t(`contextmenu_never_use_native`,{processor:`boolean`,default:!1}),t(`contextmenu`,{processor:e=>e===!1?{value:[],valid:!0}:s(e)||v(e,s)?{value:KU(e),valid:!0}:{valid:!1,message:`Must be false or a string.`},default:`link linkchecker image editimage table spellchecker configurepermanentpen`})},YU=qU(`contextmenu_never_use_native`),XU=qU(`contextmenu_avoid_overlap`),ZU=e=>QU(e).length===0,QU=e=>{let t=e.ui.registry.getAll().contextMenus,n=e.options.get(`contextmenu`);return e.options.isSet(`contextmenu`)?n:de(n,e=>Be(t,e))},$U=(e,t)=>({type:`makeshift`,x:e,y:t}),eW=(e,t,n)=>$U(e.x+t,e.y+n),tW=e=>e.type===`longpress`||e.type.indexOf(`touch`)===0,nW=e=>{if(tW(e)){let t=e.touches[0];return $U(t.pageX,t.pageY)}else return $U(e.pageX,e.pageY)},rW=e=>{if(tW(e)){let t=e.touches[0];return $U(t.clientX,t.clientY)}else return $U(e.clientX,e.clientY)},iW=(e,t)=>{let n=fx.DOM.getPos(e);return eW(t,n.x,n.y)},aW=(e,t)=>t.type===`contextmenu`||t.type===`longpress`?e.inline?nW(t):iW(e.getContentAreaContainer(),rW(t)):oW(e),oW=e=>({type:`selection`,root:z.fromDom(e.selection.getNode())}),sW=e=>({type:`node`,node:O.some(z.fromDom(e.selection.getNode())),root:z.fromDom(e.getBody())}),cW=(e,t,n)=>{switch(n){case`node`:return sW(e);case`point`:return aW(e,t);case`selection`:return oW(e)}},lW=(e,t,n,r,i,a)=>{let o=n(),s=cW(e,t,a);yN(o,wS.CLOSE_ON_EXECUTE,r,{isHorizontalMenu:!1,search:O.none()}).map(e=>{t.preventDefault(),Kb.showMenuAt(i,{anchor:s},{menu:{markers:zS(`normal`)},data:e})})},uW={onLtr:()=>[ad,ed,td,nd,rd,id,VF,HF,BF,RF,zF,LF],onRtl:()=>[ad,td,ed,rd,nd,id,VF,HF,zF,LF,BF,RF]},dW={valignCentre:[],alignCentre:[],alignLeft:[`tox-pop--align-left`],alignRight:[`tox-pop--align-right`],right:[`tox-pop--right`],left:[`tox-pop--left`],bottom:[`tox-pop--bottom`],top:[`tox-pop--top`]},fW=(e,t)=>{let n=e.selection;if(n.isCollapsed()||t.touches.length<1)return!1;{let r=t.touches[0],i=n.getRng();return Lp(e.getWin(),hp.domRange(i)).exists(e=>e.left<=r.clientX&&e.right>=r.clientX&&e.top<=r.clientY&&e.bottom>=r.clientY)}},pW=e=>{let t=e.selection.getRng(),n=()=>{qb.setEditorTimeout(e,()=>{e.selection.setRng(t)},10),a()};e.once(`touchend`,n);let r=e=>{e.preventDefault(),e.stopImmediatePropagation()};e.on(`mousedown`,r,!0);let i=()=>a();e.once(`longpresscancel`,i);let a=()=>{e.off(`touchend`,n),e.off(`longpresscancel`,i),e.off(`mousedown`,r)}},mW=(e,t,n)=>{let r=cW(e,t,n);return{bubble:Rf(0,n===`point`?12:0,dW),layouts:uW,overrides:{maxWidthFunction:kz(),maxHeightFunction:Nf()},...r}},hW=(e,t,n,r,i,a,o)=>{let s=mW(e,t,a);yN(n,wS.CLOSE_ON_EXECUTE,r,{isHorizontalMenu:!0,search:O.none()}).map(n=>{t.preventDefault();let c=o?Vb.HighlightMenuAndItem:Vb.HighlightNone;Kb.showMenuWithinBounds(i,{anchor:s},{menu:{markers:zS(`normal`),highlightOnOpen:c},data:n,type:`horizontal`},()=>O.some(XH(e,r.shared,a===`node`?`node`:`selection`))),e.dispatch(PH)})},gW=(e,t,n,r,i,a)=>{let o=Dr(),s=o.os.isiOS(),c=o.os.isMacOS(),l=o.os.isAndroid(),u=o.deviceType.isTouch(),d=()=>!(l||s||c&&u),f=()=>{hW(e,t,n(),r,i,a,d())};if((c||s)&&a!==`node`){let n=()=>{pW(e),f()};fW(e,t)?n():(e.once(`selectionchange`,n),e.once(`touchend`,()=>e.off(`selectionchange`,n)))}else f()},_W=e=>s(e)?e===`|`:e.type===`separator`,vW={type:`separator`},yW=e=>{let t=e=>({text:e.text,icon:e.icon,enabled:e.enabled,shortcut:e.shortcut});if(s(e))return e;switch(e.type){case`separator`:return vW;case`submenu`:return{type:`nestedmenuitem`,...t(e),getSubmenuItems:()=>{let t=e.getSubmenuItems();return s(t)?t:N(t,yW)}};default:let n=e;return{type:`menuitem`,...t(n),onAction:b(n.onAction)}}},bW=(e,t)=>{if(t.length===0)return e;let n=Te(e).filter(e=>!_W(e)).fold(()=>[],e=>[vW]);return e.concat(n).concat(t).concat([vW])},xW=(e,t,n)=>{let r=pe(t,(t,r)=>L(e,r.toLowerCase()).map(e=>{let r=e.update(n);return s(r)&&at(it(r))?bW(t,r.split(` `)):u(r)&&r.length>0?bW(t,N(r,yW)):t}).getOrThunk(()=>t.concat([r])),[]);return r.length>0&&_W(r[r.length-1])&&r.pop(),r},SW=(e,t)=>t.ctrlKey&&!YU(e),CW=e=>e.type===`longpress`||Be(e,`touches`),wW=(e,t)=>!CW(t)&&(t.button!==2||t.target===e.getBody()&&t.pointerType===``),TW=(e,t)=>wW(e,t)?e.selection.getStart(!0):t.target,EW=(e,t)=>{let n=XU(e),r=wW(e,t)?`selection`:`point`;if(at(n)){let i=TW(e,t);return _O(z.fromDom(i),n)?`node`:r}else return r},DW=(e,t,n)=>{let r=Dr().deviceType.isTouch,i=Bl(Kb.sketch({dom:{tag:`div`},lazySink:t,onEscape:()=>e.focus(),onShow:()=>n.setContextMenuState(!0),onHide:()=>n.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Z([By(`dismissContextMenu`,[q(fs(),(t,n)=>{qm.close(t),e.focus()})])])})),a=()=>Kb.hide(i),o=t=>{if(YU(e)&&t.preventDefault(),SW(e,t)||ZU(e))return;let a=EW(e,t);(r()?gW:lW)(e,t,()=>{let n=TW(e,t),r=e.ui.registry.getAll(),i=QU(e);return xW(r.contextMenus,i,n)},n,i,a)};e.on(`init`,()=>{let t=`ResizeEditor ScrollContent ScrollWindow longpresscancel`+(r()?``:` ResizeWindow`);e.on(t,a),e.on(`longpress contextmenu`,o)})},OW=io.generate([{offset:[`x`,`y`]},{absolute:[`x`,`y`]},{fixed:[`x`,`y`]}]),kW=e=>t=>t.translate(-e.left,-e.top),AW=e=>t=>t.translate(e.left,e.top),jW=e=>(t,n)=>pe(e,(e,t)=>t(e),Pn(t,n)),MW=(e,t,n)=>e.fold(jW([AW(n),kW(t)]),jW([kW(t)]),jW([])),NW=(e,t,n)=>e.fold(jW([AW(n)]),jW([]),jW([AW(t)])),PW=(e,t,n)=>e.fold(jW([]),jW([kW(n)]),jW([AW(t),kW(n)])),FW=(e,t,n,r,i,a)=>{let o=NW(e,i,a),s=NW(t,i,a);return Math.abs(o.left-s.left)<=n&&Math.abs(o.top-s.top)<=r},IW=(e,t,n,r,i,a)=>{let o=NW(e,i,a),s=NW(t,i,a);return Pn(Math.abs(o.left-s.left),Math.abs(o.top-s.top))},LW=(e,t,n)=>{let r=e.fold((e,t)=>({position:O.some(`absolute`),left:O.some(e+`px`),top:O.some(t+`px`)}),(e,t)=>({position:O.some(`absolute`),left:O.some(e-n.left+`px`),top:O.some(t-n.top+`px`)}),(e,t)=>({position:O.some(`fixed`),left:O.some(e+`px`),top:O.some(t+`px`)}));return{right:O.none(),bottom:O.none(),...r}},RW=(e,t,n)=>e.fold((e,r)=>BW(e+t,r+n),(e,r)=>VW(e+t,r+n),(e,r)=>HW(e+t,r+n)),zW=(e,t,n,r)=>{let i=(e,i)=>(a,o)=>{let s=e(t,n,r);return i(a.getOr(s.left),o.getOr(s.top))};return e.fold(i(PW,BW),i(NW,VW),i(MW,HW))},BW=OW.offset,VW=OW.absolute,HW=OW.fixed,UW=(e,t)=>{let n=fn(e,t);return p(n)?NaN:parseInt(n,10)},WW=(e,t)=>{let n=e.element,r=UW(n,t.leftAttr),i=UW(n,t.topAttr);return isNaN(r)||isNaN(i)?O.none():O.some(Pn(r,i))},GW=(e,t,n)=>{let r=e.element;un(r,t.leftAttr,n.left+`px`),un(r,t.topAttr,n.top+`px`)},KW=(e,t)=>{let n=e.element;hn(n,t.leftAttr),hn(n,t.topAttr)},qW=(e,t,n,r)=>WW(e,t).fold(()=>n,e=>HW(e.left+r.left,e.top+r.top)),JW=(e,t,n,r,i,a)=>{let o=qW(e,t,n,r),s=t.mustSnap?ZW(e,t,o,i,a):QW(e,t,o,i,a),c=MW(o,i,a);return GW(e,t,c),s.fold(()=>({coord:HW(c.left,c.top),extra:O.none()}),e=>({coord:e.output,extra:e.extra}))},YW=(e,t)=>{KW(e,t)},XW=(e,t,n,r)=>De(e,e=>{let i=e.sensor;return FW(t,i,e.range.left,e.range.top,n,r)?O.some({output:zW(e.output,t,n,r),extra:e.extra}):O.none()}),ZW=(e,t,n,r,i)=>{let a=t.getSnapPoints(e);return XW(a,n,r,i).orThunk(()=>pe(a,(e,t)=>{let a=t.sensor,o=IW(n,a,t.range.left,t.range.top,r,i);return e.deltas.fold(()=>({deltas:O.some(o),snap:O.some(t)}),n=>(o.left+o.top)/2<=(n.left+n.top)/2?{deltas:O.some(o),snap:O.some(t)}:e)},{deltas:O.none(),snap:O.none()}).snap.map(e=>({output:zW(e.output,n,r,i),extra:e.extra})))},QW=(e,t,n,r,i)=>XW(t.getSnapPoints(e),n,r,i),$W=(e,t,n)=>({coord:zW(e.output,e.output,t,n),extra:e.extra});var eG=Object.freeze({__proto__:null,snapTo:(e,t,n,r)=>{let i=t.getTarget(e.element);if(t.repositionTarget){let t=Ur(Pt(e.element)),n=EL(i);bn(i,LW($W(r,t,n).coord,t,n))}}});let tG=`data-initial-z-index`,nG=e=>{Rt(e.element).filter(Ct).each(e=>{pn(e,tG).fold(()=>En(e,`z-index`),t=>yn(e,`z-index`,t)),hn(e,tG)})},rG=e=>{Rt(e.element).filter(Ct).each(t=>{Cn(t,`z-index`).each(e=>{un(t,tG,e)}),yn(t,`z-index`,xn(e.element,`z-index`))})},iG=(e,t)=>{e.getSystem().addToGui(t),rG(t)},aG=e=>{nG(e),e.getSystem().removeFromGui(e)},oG=(e,t,n)=>e.getSystem().build(RO.sketch({dom:{styles:{left:`0px`,top:`0px`,width:`100%`,height:`100%`,position:`fixed`,"z-index":`1000000000000000`},classes:[t]},events:n}));var sG=Ka(`snaps`,[G(`getSnapPoints`),bu(`onSensor`),G(`leftAttr`),G(`topAttr`),K(`lazyViewport`,oi),K(`mustSnap`,!1)]);let cG=[K(`useFixed`,D),G(`blockerClass`),K(`getTarget`,C),K(`onDrag`,y),K(`repositionTarget`,!0),K(`onDrop`,y),$a(`getBounds`,oi),sG],lG=e=>qe(Cn(e,`left`),Cn(e,`top`),Cn(e,`position`),(e,t,n)=>(n===`fixed`?HW:BW)(parseInt(e,10),parseInt(t,10))).getOrThunk(()=>{let t=Ln(e);return VW(t.left,t.top)}),uG=(e,t,n,r,i)=>{let a=i.bounds,o=NW(t,n,r),s=VW(Vu(o.left,a.x,a.x+a.width-i.width),Vu(o.top,a.y,a.y+a.height-i.height));return t.fold(()=>{let e=PW(s,n,r);return BW(e.left,e.top)},S(s),()=>{let e=MW(s,n,r);return HW(e.left,e.top)})},dG=(e,t,n,r,i,a,o)=>uG(e,t.fold(()=>{let e=MW(RW(n,a.left,a.top),r,i);return HW(e.left,e.top)},t=>{let o=JW(e,t,n,a,r,i);return o.extra.each(n=>{t.onSensor(e,n)}),o.coord}),r,i,o),fG=(e,t,n,r)=>{let i=t.getTarget(e.element);if(t.repositionTarget){let a=Ur(Pt(e.element)),o=EL(i),s=lG(i);bn(i,LW(dG(e,t.snaps,s,a,o,r,n),a,o))}t.onDrag(e,i,r)},pG=(e,t)=>({bounds:e.getBounds(),height:jn(t.element),width:Hn(t.element)}),mG=(e,t,n,r,i)=>{let a=n.update(r,i),o=n.getStartData().getOrThunk(()=>pG(t,e));a.each(n=>{fG(e,t,o,n)})},hG=(e,t,n,r)=>{t.each(aG),n.snaps.each(t=>{YW(e,t)});let i=n.getTarget(e.element);r.reset(),n.onDrop(e,i)},gG=e=>(t,n)=>{let r=e=>{n.setStartData(pG(t,e))};return Os([q(cs(),e=>{n.getStartData().each(()=>r(e))}),...e(t,n,r)])},_G=e=>Os([q(jo(),e.forceDrop),q(Po(),e.drop),q(Mo(),(t,n)=>{e.move(n.event)}),q(No(),e.delayDrop)]);var vG=Object.freeze({__proto__:null,getData:e=>O.from(Pn(e.x,e.y)),getDelta:(e,t)=>Pn(t.left-e.left,t.top-e.top)});let yG=(e,t,n)=>[q(jo(),(r,i)=>{if(i.event.raw.button!==0)return;i.stop();let a=()=>hG(r,O.some(c),e,t),o=vO(a,200),s={drop:a,delayDrop:o.schedule,forceDrop:a,move:n=>{o.cancel(),mG(r,e,t,vG,n)}},c=oG(r,e.blockerClass,_G(s));n(r),iG(r,c)})],bG=[...cG,wu(`dragger`,{handlers:gG(yG)})],xG=e=>Os([q(Do(),e.forceDrop),q(ko(),e.drop),q(Ao(),e.drop),q(Oo(),(t,n)=>{e.move(n.event)})]),SG=e=>{let t=e[0];return O.some(Pn(t.clientX,t.clientY))};var CG=Object.freeze({__proto__:null,getData:e=>{let t=e.raw.touches;return t.length===1?SG(t):O.none()},getDelta:(e,t)=>Pn(t.left-e.left,t.top-e.top)});let wG=(e,t,n)=>{let r=uf(),i=n=>{hG(n,r.get(),e,t),r.clear()};return[q(Do(),(a,o)=>{o.stop();let s=()=>i(a),c={drop:s,delayDrop:y,forceDrop:s,move:n=>{mG(a,e,t,CG,n)}},l=oG(a,e.blockerClass,xG(c));r.set(l),n(a),iG(a,l)}),q(Oo(),(n,r)=>{r.stop(),mG(n,e,t,CG,r.event)}),q(ko(),(e,t)=>{t.stop(),i(e)}),q(Ao(),i)]},TG=[...cG,wu(`dragger`,{handlers:gG(wG)})],EG=(e,t,n)=>[...yG(e,t,n),...wG(e,t,n)],DG=[...cG,wu(`dragger`,{handlers:gG(EG)})],OG=bG,kG=TG,AG=DG,jG=Ed({branchKey:`mode`,branches:Object.freeze({__proto__:null,mouse:OG,touch:kG,mouseOrTouch:AG}),name:`dragging`,active:{events:(e,t)=>e.dragger.handlers(e,t)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:O.from(e.extra)})},state:Object.freeze({__proto__:null,init:()=>{let e=O.none(),t=O.none(),n=()=>{e=O.none(),t=O.none()},r=(t,n)=>{let r=e.map(e=>t.getDelta(e,n));return e=O.some(n),r};return wc({readState:S({}),reset:n,update:(e,t)=>e.getData(t).bind(t=>r(e,t)),getStartData:()=>t,setStartData:e=>{t=O.some(e)}})}}),apis:eG}),MG=(e,t,n,r,i,a)=>e.fold(()=>jG.snap({sensor:VW(n-20,r-20),range:Pn(i,a),output:VW(O.some(n),O.some(r)),extra:{td:t}}),e=>{let i=n-20,a=r-20,o=e.element.dom.getBoundingClientRect();return jG.snap({sensor:VW(i,a),range:Pn(40,40),output:VW(O.some(n-o.width/2),O.some(r-o.height/2)),extra:{td:t}})}),NG=(e,t,n)=>{let r=(e,t)=>e.exists(e=>Mt(e,t));return{getSnapPoints:e,leftAttr:`data-drag-left`,topAttr:`data-drag-top`,onSensor:(e,i)=>{let a=i.td;r(t.get(),a)||(t.set(a),n(a))},mustSnap:!0}},PG=e=>Yb(Jb.sketch({dom:{tag:`div`,classes:[`tox-selector`]},buttonBehaviours:Z([jG.config({mode:`mouseOrTouch`,blockerClass:`blocker`,snaps:e}),vk.config({})]),eventOrder:{mousedown:[`dragging`,`alloy.base.behaviour`],touchstart:[`dragging`,`alloy.base.behaviour`]}})),FG=(e,t)=>{let n=ro([]),r=ro([]),i=ro(!1),a=uf(),o=uf(),s=e=>{let n=ri(e);return MG(p.getOpt(t),e,n.x,n.y,n.width,n.height)},c=()=>N(n.get(),e=>s(e)),l=e=>{let n=ri(e);return MG(m.getOpt(t),e,n.right,n.bottom,n.width,n.height)},u=()=>N(r.get(),e=>l(e)),d=NG(c,a,t=>{o.get().each(n=>{e.dispatch(`TableSelectorChange`,{start:t,finish:n})})}),f=NG(u,o,t=>{a.get().each(n=>{e.dispatch(`TableSelectorChange`,{start:n,finish:t})})}),p=PG(d),m=PG(f),h=Bl(p.asSpec()),g=Bl(m.asSpec()),_=(t,n,r,i)=>{let a=n.dom.getBoundingClientRect();En(t.element,`display`);let o=Lt(z.fromDom(e.getBody())).dom.innerHeight,s=r(a),c=i(a,o);(s||c)&&yn(t.element,`display`,`none`)},v=(e,t,n,r)=>{let i=n(t);jG.snapTo(e,i),_(e,t,e=>e[r]<0,(e,t)=>e[r]>t)},y=e=>v(h,e,s,`top`),b=()=>a.get().each(y),x=e=>v(g,e,l,`bottom`),ee=()=>o.get().each(x);Dr().deviceType.isTouch()&&(e.on(`TableSelectionChange`,e=>{i.get()||(Cm(t,h),Cm(t,g),i.set(!0)),a.set(e.start),o.set(e.finish),e.otherCells.each(t=>{n.set(t.upOrLeftCells),r.set(t.downOrRightCells),y(e.start),x(e.finish)})}),e.on(`ResizeEditor ResizeWindow ScrollContent`,()=>{b(),ee()}),e.on(`TableSelectionClear`,()=>{i.get()&&(Em(h),Em(g),i.set(!1)),a.clear(),o.clear()}))};var IG=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;let LG=e=>e.nodeName===`BR`||!!e.getAttribute(`data-mce-bogus`)||e.getAttribute(`data-mce-type`)===`bookmark`,RG=(e,t,n)=>{let r=t.delimiter??`›`,i=(t,r,i)=>Jb.sketch({dom:{tag:`div`,classes:[`tox-statusbar__path-item`],attributes:{"data-index":i,"aria-level":i+1}},components:[Fl(t)],action:t=>{e.focus(),e.selection.select(r),e.nodeChanged()},buttonBehaviours:Z([Jw.button(n.isDisabled),qw()])}),a=()=>({dom:{tag:`div`,classes:[`tox-statusbar__path-divider`],attributes:{"aria-hidden":!0}},components:[Fl(` ${r} `)]}),o=e=>pe(e,(e,t,n)=>{let r=i(t.name,t.element,n);return n===0?e.concat([r]):e.concat([a(),r])},[]),s=t=>{let n=[],r=t.length;for(;r-- >0;){let i=t[r];if(i.nodeType===1&&!LG(i)){let t=nE(e,i);if(t.isDefaultPrevented()||n.push({name:t.name,element:i}),t.isPropagationStopped())break}}return n};return{dom:{tag:`div`,classes:[`tox-statusbar__path`],attributes:{role:`navigation`}},behaviours:Z([Ty.config({mode:`flow`,selector:`div[role=button]`}),Hg.config({disabled:n.isDisabled}),qw(),GO.config({}),Ry.config({}),By(`elementPathEvents`,[Vs((t,n)=>{e.shortcuts.add(`alt+F11`,`focus statusbar elementpath`,()=>Ty.focusIn(t)),e.on(`NodeChange`,e=>{let n=s(e.parents),r=n.length>0?o(n):[];Ry.set(t,r)})})])]),components:[]}};var zG;(function(e){e[e.None=0]=`None`,e[e.Both=1]=`Both`,e[e.Vertical=2]=`Vertical`})(zG||={});let BG=(e,t,n,r,i)=>{let a={height:SH(r+t.top,wx(e),Ex(e))};return n===zG.Both&&(a.width=SH(i+t.left,Cx(e),Tx(e))),a},VG=(e,t,n)=>{let r=z.fromDom(e.getContainer());Ae(BG(e,t,n,An(r),Vn(r)),(e,t)=>{_(e)&&yn(r,t,xH(e))}),ZT(e)},HG=e=>{let t=Qx(e);return t===!1?zG.None:t===`both`?zG.Both:zG.Vertical},UG=(e,t,n,r)=>(VG(e,Pn(n*20,r*20),t),O.some(!0)),WG=(e,t)=>{let n=HG(e);if(n===zG.None)return O.none();let r=n===zG.Both?`Press the arrow keys to resize the editor.`:`Press the Up and Down arrow keys to resize the editor.`;return O.some(sx(`resize-handle`,{tag:`div`,classes:[`tox-statusbar__resize-handle`],attributes:{title:t.translate(`Resize`),"aria-label":t.translate(r)},behaviours:[jG.config({mode:`mouse`,repositionTarget:!1,onDrag:(t,r,i)=>VG(e,i,n),blockerClass:`tox-blocker`}),Ty.config({mode:`special`,onLeft:()=>UG(e,n,-1,0),onRight:()=>UG(e,n,1,0),onUp:()=>UG(e,n,0,-1),onDown:()=>UG(e,n,0,1)}),GO.config({}),Wy.config({})]},t.icons))},GG=(e,t)=>{let n=(e,n,r)=>Ry.set(e,[Fl(t.translate([`{0} `+r,n[r]]))]);return Jb.sketch({dom:{tag:`button`,classes:[`tox-statusbar__wordcount`]},components:[],buttonBehaviours:Z([Jw.button(t.isDisabled),qw(),GO.config({}),Ry.config({}),Q.config({store:{mode:`memory`,initialValue:{mode:`words`,count:{words:0,characters:0}}}}),By(`wordcount-events`,[Ws(e=>{let t=Q.getValue(e),r=t.mode===`words`?`characters`:`words`;Q.setValue(e,{mode:r,count:t.count}),n(e,t.count,r)}),Vs(t=>{e.on(`wordCountUpdate`,e=>{let{mode:r}=Q.getValue(t);Q.setValue(t,{mode:r,count:e.wordCount}),n(t,e.wordCount,r)})})])]),eventOrder:{[$o()]:[`disabling`,`alloy.base.behaviour`,`wordcount-events`]}})},KG=(e,t)=>{let n=()=>({dom:{tag:`span`,classes:[`tox-statusbar__branding`]},components:[{dom:{tag:`a`,attributes:{href:`https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6`,rel:`noopener`,target:`_blank`,"aria-label":Xb.translate([`Powered by {0}`,`Tiny`])},innerHtml:IG.trim()},behaviours:Z([Wy.config({})])}]}),r=()=>{let e=rT(`Alt+0`);return{dom:{tag:`div`,classes:[`tox-statusbar__help-text`]},components:[Fl(Xb.translate([`Press {0} for help`,e]))]}},i=()=>{let r=[];return e.hasPlugin(`wordcount`)&&r.push(GG(e,t)),Zx(e)&&r.push(n()),{dom:{tag:`div`,classes:[`tox-statusbar__right-container`]},components:r}},a=()=>{let n=[],a=nS(e),o=Xx(e),s=Zx(e)||e.hasPlugin(`wordcount`);return o&&n.push(RG(e,{},t)),a&&n.push(r()),s&&n.push(i()),n.length>0?[{dom:{tag:`div`,classes:[`tox-statusbar__text-container`,...(()=>{let e=`tox-statusbar__text-container--flex-start`,t=`tox-statusbar__text-container--flex-end`;if(a){let n=`tox-statusbar__text-container-3-cols`;return!s&&!o?[n,`tox-statusbar__text-container--space-around`]:s&&!o?[n,t]:[n,e]}return[s&&!o?t:e]})()]},components:n}]:[]};return{dom:{tag:`div`,classes:[`tox-statusbar`]},components:(()=>{let n=a(),r=WG(e,t);return n.concat(r.toArray())})()}},qG=(e,t)=>t.get().getOrDie(`UI for ${e} has not been rendered`),JG=(e,t)=>{let n=e.inline,r=n?MH:yH,i=hS(e)?ER:wL,a=NH(),o=uf(),s=uf(),c=uf(),l=Dr().deviceType.isTouch()?[`tox-platform-touch`]:[],u=uS(e),d=Mx(e),f=Yb({dom:{tag:`div`,classes:[`tox-anchorbar`]}}),p=Yb({dom:{tag:`div`,classes:[`tox-bottom-anchorbar`]}}),m=()=>a.mainUi.get().map(e=>e.outerContainer).bind(RB.getHeader),h=()=>ui.fromOption(a.dialogUi.get().map(e=>e.sink),`UI has not been rendered`),g=()=>ui.fromOption(a.popupUi.get().map(e=>e.sink),`(popup) UI has not been rendered`),_=a.lazyGetInOuterOrDie(`anchor bar`,f.getOpt),v=a.lazyGetInOuterOrDie(`bottom anchor bar`,p.getOpt),y=a.lazyGetInOuterOrDie(`toolbar`,RB.getToolbar),b=a.lazyGetInOuterOrDie(`throbber`,RB.getThrobber),x=dL({popup:g,dialog:h},e,_,v),ee=()=>{let t={attributes:{[Wf]:u?Uf.BottomToTop:Uf.TopToBottom}},n=RB.parts.menubar({dom:{tag:`div`,classes:[`tox-menubar`]},backstage:x.popup,onEscape:()=>{e.focus()}}),r=RB.parts.toolbar({dom:{tag:`div`,classes:[`tox-toolbar`]},getSink:x.popup.shared.getSink,providers:x.popup.shared.providers,onEscape:()=>{e.focus()},onToolbarToggled:t=>{rE(e,t)},type:d,lazyToolbar:y,lazyHeader:()=>m().getOrDie(`Could not find header element`),...t}),i=RB.parts[`multiple-toolbar`]({dom:{tag:`div`,classes:[`tox-toolbar-overlord`]},providers:x.popup.shared.providers,onEscape:()=>{e.focus()},type:d}),a=lS(e),o=sS(e),s=iS(e),c=tS(e),l=S(),p=a||o||s,h=()=>a?[i]:o?[r]:[],g=c?[l,n]:[n];return RB.parts.header({dom:{tag:`div`,classes:[`tox-editor-header`].concat(p?[]:[`tox-editor-header--empty`]),...t},components:F([s?g:[],h(),fS(e)?[]:[f.asSpec()]]),sticky:hS(e),editor:e,sharedBackstage:x.popup.shared})},S=()=>RB.parts.promotion({dom:{tag:`div`,classes:[`tox-promotion`]}}),C=()=>({dom:{tag:`div`,classes:[`tox-sidebar-wrap`]},components:[RB.parts.socket({dom:{tag:`div`,classes:[`tox-edit-area`]}}),RB.parts.sidebar({dom:{tag:`div`,classes:[`tox-sidebar`]}})]}),te=()=>{let t=pS(e),n=Mt(sn(),t)&&xn(t,`display`)===`grid`,r={dom:{tag:`div`,classes:[`tox`,`tox-silver-sink`,`tox-tinymce-aux`].concat(l),attributes:{...Xb.isRtl()?{dir:`rtl`}:{}}},behaviours:Z([pm.config({useFixed:()=>i.isDocked(m)})])},a={dom:{styles:{width:document.body.clientWidth+`px`}},events:Os([q(ls(),e=>{yn(e.element,`width`,document.body.clientWidth+`px`)})])},o=Bl(Di(r,n?a:{})),c=zO(o);return s.set(c),{sink:o,mothership:c}},w=()=>{let e=Bl({dom:{tag:`div`,classes:[`tox`,`tox-silver-sink`,`tox-silver-popup-sink`,`tox-tinymce-aux`].concat(l),attributes:{...Xb.isRtl()?{dir:`rtl`}:{}}},behaviours:Z([pm.config({useFixed:()=>i.isDocked(m),getBounds:()=>t.getPopupSinkBounds()})])}),n=zO(e);return c.set(n),{sink:e,mothership:n}},T=()=>{let t=ee(),r=C(),i=RB.parts.throbber({dom:{tag:`div`,classes:[`tox-throbber`]},backstage:x.popup}),a=RB.parts.viewWrapper({backstage:x.popup}),s=Yx(e)&&!n?O.some(KG(e,x.popup.shared.providers)):O.none(),c=F([u?[]:[t],n?[]:[r],u?[t]:[]]),d=RB.parts.editorContainer({components:F([c,n?[]:[p.asSpec(),...s.toArray()]])}),f=mS(e),m={role:`application`,...Xb.isRtl()?{dir:`rtl`}:{},...f?{"aria-hidden":`true`}:{}},h=Bl(RB.sketch({dom:{tag:`div`,classes:[`tox`,`tox-tinymce`].concat(n?[`tox-tinymce-inline`]:[],u?[`tox-tinymce--toolbar-bottom`]:[],l),styles:{visibility:`hidden`,...f?{opacity:`0`,border:`0`}:{}},attributes:m},components:[d,...n?[]:[a],i],behaviours:Z([qw(),Hg.config({disableClass:`tox-tinymce--disabled`}),Ty.config({mode:`cyclic`,selector:`.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle`})])})),g=zO(h);return o.set(g),{mothership:g,outerContainer:h}},E=t=>{let n=xH(wH(e)),r=xH(EH(e));return e.inline||(Tn(`div`,`width`,r)&&yn(t.element,`width`,r),Tn(`div`,`height`,n)?yn(t.element,`height`,n):yn(t.element,`height`,`400px`)),n},ne=t=>{e.addShortcut(`alt+F9`,`focus menubar`,()=>{RB.focusMenubar(t)}),e.addShortcut(`alt+F10`,`focus toolbar`,()=>{RB.focusToolbar(t)}),e.addCommand(`ToggleToolbarDrawer`,(e,n)=>{n?.skipFocus?RB.toggleToolbarDrawerWithoutFocusing(t):RB.toggleToolbarDrawer(t)}),e.addQueryStateHandler(`ToggleToolbarDrawer`,()=>RB.isToolbarDrawerToggled(t))},D=t=>{let{mainUi:n,popupUi:a,uiMotherships:o}=t;je(Nx(e),(t,n)=>{e.ui.registry.addGroupToolbarButton(n,t)});let{buttons:s,menuItems:c,contextToolbars:l,sidebars:u,views:f}=e.ui.registry.getAll(),p=cS(e),h={menuItems:c,menus:_S(e),menubar:zx(e),toolbar:p.getOrThunk(()=>Bx(e)),allowToolbarGroups:d===hx.floating,buttons:s,sidebar:u,views:f};ne(n.outerContainer),fL(e,n.mothership,o),i.setup(e,x.popup.shared,m),GU(e,x.popup),DW(e,x.popup.shared.getSink,x.popup),WR(e),pz(e,b,x.popup.shared),vU(e,l,a.sink,{backstage:x.popup}),FG(e,a.sink);let g={targetNode:e.getElement(),height:E(n.outerContainer)};return r.render(e,t,h,x.popup,g)},re=e=>(c.set(e.mothership),e);return{popups:{backstage:x.popup,getMothership:()=>qG(`popups`,c)},dialogs:{backstage:x.dialog,getMothership:()=>qG(`dialogs`,s)},renderUI:()=>{let t=T(),n=te(),r=gS(e)?w():re(n);return a.dialogUi.set(n),a.popupUi.set(r),a.mainUi.set(t),D({popupUi:r,dialogUi:n,mainUi:t,uiMotherships:a.getUiMotherships()})}}},YG=(e,t)=>{un(e,`aria-labelledby`,pn(e,`id`).fold(()=>{let e=J(`dialog-label`);return un(t,`id`,e),e},C))},XG=S([G(`lazySink`),za(`dragBlockClass`),$a(`getBounds`,oi),K(`useTabstopAt`,re),K(`firstTabstop`,0),K(`eventOrder`,{}),fh(`modalBehaviours`,[Ty]),xu(`onExecute`),Cu(`onEscape`)]),ZG={sketch:C},QG=S([Kh({name:`draghandle`,overrides:(e,t)=>({behaviours:Z([jG.config({mode:`mouse`,getTarget:e=>Jl(e,`[role="dialog"]`).getOr(e),blockerClass:e.dragBlockClass.getOrDie(Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])})}),Wh({schema:[G(`dom`)],name:`title`}),Wh({factory:ZG,schema:[G(`dom`)],name:`close`}),Wh({factory:ZG,schema:[G(`dom`)],name:`body`}),Kh({factory:ZG,schema:[G(`dom`)],name:`footer`}),Gh({factory:{sketch:(e,t)=>({...e,dom:t.dom,components:t.components})},schema:[K(`dom`,{tag:`div`,styles:{position:`fixed`,left:`0px`,top:`0px`,right:`0px`,bottom:`0px`}}),K(`components`,[])],name:`blocker`})]),$G=wg({name:`ModalDialog`,configFields:XG(),partFields:QG(),factory:(e,t,n,r)=>{let i=uf(),a=t=>{i.set(t);let n=e.lazySink(t).getOrDie(),a=r.blocker();Cm(n,n.getSystem().build({...a,components:a.components.concat([Vl(t)]),behaviours:Z([Wy.config({}),By(`dialog-blocker-events`,[Bs(Io(),()=>{nz.isBlocked(t)||Ty.focusIn(t)})])])})),Ty.focusIn(t)},o=e=>{i.clear(),Rt(e.element).each(t=>{e.getSystem().getByDom(t).each(e=>{Em(e)})})},s=t=>og(t,e,`body`),c=t=>ag(t,e,`footer`),l=(e,t)=>{nz.block(e,t)},u=e=>{nz.unblock(e)},d=J(`modal-events`),f={...e.eventOrder,[us()]:[d].concat(e.eventOrder[`alloy.system.attached`]||[])};return{uid:e.uid,dom:e.dom,components:t,apis:{show:a,hide:o,getBody:s,getFooter:c,setIdle:u,setBusy:l},eventOrder:f,domModification:{attributes:{role:`dialog`,"aria-modal":`true`}},behaviours:mh(e.modalBehaviours,[Ry.config({}),Ty.config({mode:`cyclic`,onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt,firstTabstop:e.firstTabstop}),nz.config({getRoot:i.get}),By(d,[Vs(t=>{YG(t.element,og(t,e,`title`).element)})])])}},apis:{show:(e,t)=>{e.show(t)},hide:(e,t)=>{e.hide(t)},getBody:(e,t)=>e.getBody(t),getFooter:(e,t)=>e.getFooter(t),setBusy:(e,t,n)=>{e.setBusy(t,n)},setIdle:(e,t)=>{e.setIdle(t)}}}),eK=H([vC,yC].concat(vw)),tK=da,nK=[GC(`button`),MC,Za(`align`,`end`,[`start`,`end`]),BC,zC,Ua(`buttonType`,[`primary`,`secondary`])],rK=[...nK,xC],iK=[Ma(`type`,[`submit`,`cancel`,`custom`]),...rK],aK=wa(`type`,{submit:iK,cancel:iK,custom:iK,menu:[Ma(`type`,[`menu`]),jC,NC,MC,Ra(`items`,eK),...nK],togglebutton:[...nK,Ma(`type`,[`togglebutton`]),ja(`tooltip`),MC,jC,Qa(`active`,!1)]}),oK=H([vC,xC,Ma(`level`,[`info`,`warn`,`error`,`success`]),CC,K(`url`,``)]),sK=e=>[vC,e],cK=H([vC,xC,zC,GC(`button`),MC,RC,Ua(`buttonType`,[`primary`,`secondary`,`toolbar`]),BC]),lK=[vC,yC],uK=lK.concat([PC]),dK=H(lK.concat([bC,zC])),fK=da,pK=H(uK.concat([VC(`auto`)])),mK=U([wC,xC,CC]),hK=H(uK.concat([Xa(`storageKey`,`default`)])),gK=ua,_K=H(uK),vK=ua,yK=lK.concat([Xa(`tag`,`textarea`),ja(`scriptId`),ja(`scriptUrl`),eo(`settings`,void 0)]),bK=lK.concat([Xa(`tag`,`textarea`),Pa(`init`)]),xK=_a(e=>ba(`customeditor.old`,na(bK),e).orThunk(()=>ba(`customeditor.new`,na(yK),e))),SK=ua,CK=H(uK),wK=W(),TK=e=>[vC,Aa(`columns`),e],EK=H([vC,ja(`html`),Za(`presets`,`presentation`,[`presentation`,`document`])]),DK=H(uK.concat([Qa(`border`,!1),Qa(`sandboxed`,!0),Qa(`streamContent`,!1),Qa(`transparent`,!0)])),OK=ua,kK=H(lK.concat([Ha(`height`)])),AK=H([ja(`url`),Va(`zoom`),Va(`cachedWidth`),Va(`cachedHeight`)]),jK=H(uK.concat([Ha(`inputMode`),Ha(`placeholder`),Qa(`maximized`,!1),zC])),MK=ua,NK=e=>[vC,bC,e,Za(`align`,`start`,[`start`,`center`,`end`])],PK=[xC,wC],FK=[xC,Ra(`items`,Ta(`items`,()=>IK))],IK=ia([H(PK),H(FK)]),LK=H(uK.concat([Ra(`items`,IK),zC])),RK=ua,zK=H(uK.concat([La(`items`,[xC,wC]),Ya(`size`,1),zC])),BK=ua,VK=H(uK.concat([Qa(`constrain`,!0),zC])),HK=H([ja(`width`),ja(`height`)]),UK=H(lK.concat([bC,Ya(`min`,0),Ya(`max`,0)])),WK=la,GK=H([vC,Ra(`header`,ua),Ra(`cells`,ra(ua))]),KK=H(uK.concat([Ha(`placeholder`),Qa(`maximized`,!1),zC])),qK=ua,JK=[Ma(`type`,[`directory`,`leaf`]),SC,ja(`id`),Ba(`menu`,AR)],YK=H(JK),XK=H(JK.concat([Ra(`children`,Ta(`children`,()=>ga(`type`,{directory:XK,leaf:YK})))])),ZK=H([vC,Ra(`items`,ga(`type`,{directory:XK,leaf:YK})),Wa(`onLeafAction`),Wa(`onToggleExpand`),to(`defaultExpandedIds`,[],ua),Ha(`defaultSelectedId`)]),QK=H(uK.concat([Za(`filetype`,`file`,[`image`,`media`,`file`]),zC])),$K=H([wC,HC]),eq=e=>Ea(`items`,`items`,ki(),ra(_a(t=>ba(`Checking item of ${e}`,tq,t).fold(e=>ui.error(Ca(e)),e=>ui.value(e))))),tq=ea(()=>ga(`type`,{alertbanner:oK,bar:H(sK(eq(`bar`))),button:cK,checkbox:dK,colorinput:hK,colorpicker:_K,dropzone:CK,grid:H(TK(eq(`grid`))),iframe:DK,input:jK,listbox:LK,selectbox:zK,sizeinput:VK,slider:UK,textarea:KK,urlinput:QK,customeditor:xK,htmlpanel:EK,imagepreview:kK,collection:pK,label:H(NK(eq(`label`))),table:GK,tree:ZK,panel:nq})),nq=H([vC,K(`classes`,[]),Ra(`items`,tq)]),rq=H([vC,La(`tabs`,[GC(`tab`),SC,Ra(`items`,tq)])]),iq=rK,aq=aK,oq=H([ja(`title`),ka(`body`,ga(`type`,{panel:nq,tabpanel:rq})),Xa(`size`,`normal`),to(`buttons`,[],aq),K(`initialData`,{}),$a(`onAction`,y),$a(`onChange`,y),$a(`onSubmit`,y),$a(`onClose`,y),$a(`onCancel`,y),$a(`onTabChange`,y)]),sq=e=>ba(`dialog`,oq,e),cq=H([Ma(`type`,[`cancel`,`custom`]),...iq]),lq=H([ja(`title`),ja(`url`),Va(`height`),Va(`width`),Ga(`buttons`,cq),$a(`onAction`,y),$a(`onCancel`,y),$a(`onClose`,y),$a(`onMessage`,y)]),uq=e=>ba(`dialog`,lq,e),dq=e=>c(e)?[e].concat(_e(ze(e),dq)):u(e)?_e(e,dq):[],fq=e=>s(e.type)&&s(e.name),pq={checkbox:fK,colorinput:gK,colorpicker:vK,dropzone:wK,input:MK,iframe:OK,imagepreview:AK,selectbox:BK,sizeinput:HK,slider:WK,listbox:RK,size:HK,textarea:qK,urlinput:$K,customeditor:SK,collection:mK,togglemenuitem:tK},mq=e=>O.from(pq[e.type]),hq=e=>de(dq(e),fq),gq=e=>H(_e(hq(e),e=>mq(e).fold(()=>[],t=>[ka(e.name,t)]))),_q=e=>({internalDialog:xa(sq(e)),dataValidator:gq(e),initialData:e.initialData??{}}),vq={open:(e,t)=>{let n=_q(t);return e(n.internalDialog,n.initialData,n.dataValidator)},openUrl:(e,t)=>e(xa(uq(t))),redial:e=>_q(e)};var yq=Object.freeze({__proto__:null,events:(e,t)=>{let n=(n,r)=>{e.updateState.each(e=>{let i=e(n,r);t.set(i)}),e.renderComponents.each(i=>{let a=i(r,t.get());(e.reuseDom?Dy:Ey)(n,a)})};return Os([q(Qo(),(t,r)=>{let i=r;if(!i.universal){let r=e.channel;oe(i.channels,r)&&n(t,i.data)}}),Vs((t,r)=>{e.initialData.each(e=>{n(t,e)})})])}}),bq=Object.freeze({__proto__:null,getState:(e,t,n)=>n});let xq=wd({fields:[G(`channel`),za(`renderComponents`),za(`updateState`),za(`initialData`),Qa(`reuseDom`,!0)],name:`reflecting`,active:yq,apis:bq,state:Object.freeze({__proto__:null,init:()=>{let e=ro(O.none());return{readState:()=>e.get().getOr(`none`),get:e.get,set:e.set,clear:()=>e.set(O.none())}}})}),Sq=e=>{let t=[],n={};return Ae(e,(e,r)=>{e.fold(()=>{t.push(r)},e=>{n[r]=e})}),t.length>0?ui.error(t):ui.value(n)},Cq=(e,t,n)=>{let r=Yb(qj.sketch(r=>({dom:{tag:`div`,classes:[`tox-form`].concat(e.classes)},components:N(e.items,e=>DF(r,e,t,n))})));return{dom:{tag:`div`,classes:[`tox-dialog__body`]},components:[{dom:{tag:`div`,classes:[`tox-dialog__body-content`]},components:[r.asSpec()]}],behaviours:Z([Ty.config({mode:`acyclic`,useTabstopAt:T(DM)}),tM.memento(r),rM(r,{postprocess:e=>Sq(e).fold(e=>(console.error(e),{}),C)}),By(`dialog-body-panel`,[q(Io(),(e,t)=>{e.getSystem().broadcastOn([NM],{newFocus:O.some(t.event.target)})})])])}},wq=Cg({name:`TabButton`,configFields:[K(`uid`,void 0),G(`value`),Ea(`dom`,`dom`,Ni(()=>({attributes:{role:`tab`,id:J(`aria`),"aria-selected":`false`}})),sa()),za(`action`),K(`domModification`,{}),fh(`tabButtonBehaviours`,[Wy,Ty,Q]),G(`view`)],factory:(e,t)=>({uid:e.uid,dom:e.dom,components:e.components,events:cb(e.action),behaviours:mh(e.tabButtonBehaviours,[Wy.config({}),Ty.config({mode:`execution`,useSpace:!0,useEnter:!0}),Q.config({store:{mode:`memory`,initialValue:e.value}})]),domModification:e.domModification})}),Tq=S([G(`tabs`),G(`dom`),K(`clickToDismiss`,!1),fh(`tabbarBehaviours`,[s_,Ty]),vu([`tabClass`,`selectedClass`])]),Eq=S([qh({factory:wq,name:`tabs`,unit:`tab`,overrides:e=>{let t=(e,t)=>{s_.dehighlight(e,t),Ss(e,vs(),{tabbar:e,button:t})},n=(e,t)=>{s_.highlight(e,t),Ss(e,_s(),{tabbar:e,button:t})};return{action:r=>{let i=r.getSystem().getByUid(e.uid).getOrDie(),a=s_.isHighlighted(i,r);(a&&e.clickToDismiss?t:a?y:n)(i,r)},domModification:{classes:[e.markers.tabClass]}}}})]),Dq=wg({name:`Tabbar`,configFields:Tq(),partFields:Eq(),factory:(e,t,n,r)=>({uid:e.uid,dom:e.dom,components:t,"debug.sketcher":`Tabbar`,domModification:{attributes:{role:`tablist`}},behaviours:mh(e.tabbarBehaviours,[s_.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(e,t)=>{un(t.element,`aria-selected`,`true`)},onDehighlight:(e,t)=>{un(t.element,`aria-selected`,`false`)}}),Ty.config({mode:`flow`,getInitial:e=>s_.getHighlighted(e).map(e=>e.element),selector:`.`+e.markers.tabClass,executeOnMove:!0})])})}),Oq=Cg({name:`Tabview`,configFields:[fh(`tabviewBehaviours`,[Ry])],factory:(e,t)=>({uid:e.uid,dom:e.dom,behaviours:mh(e.tabviewBehaviours,[Ry.config({})]),domModification:{attributes:{role:`tabpanel`}}})}),kq=S([K(`selectFirst`,!0),bu(`onChangeTab`),bu(`onDismissTab`),K(`tabs`,[]),fh(`tabSectionBehaviours`,[])]),Aq=S([Wh({factory:Dq,schema:[G(`dom`),Ia(`markers`,[G(`tabClass`),G(`selectedClass`)])],name:`tabbar`,defaults:e=>({tabs:e.tabs})}),Wh({factory:Oq,name:`tabview`})]),jq=wg({name:`TabSection`,configFields:kq(),partFields:Aq(),factory:(e,t,n,r)=>{let i=t=>{let n=Q.getValue(t);ag(t,e,`tabview`).each(r=>{he(e.tabs,e=>e.value===n).each(n=>{let i=n.view();pn(t.element,`id`).each(e=>{un(r.element,`aria-labelledby`,e)}),Ry.set(r,i),e.onChangeTab(r,t,i)})})},a=(t,n)=>{ag(t,e,`tabbar`).each(e=>{n(e).each(Cs)})};return{uid:e.uid,dom:e.dom,components:t,behaviours:ph(e.tabSectionBehaviours),events:Os(F([e.selectFirst?[Vs((e,t)=>{a(e,s_.getFirst)})]:[],[q(_s(),(e,t)=>{let n=t.event.button;i(n)}),q(vs(),(t,n)=>{let r=n.event.button;e.onDismissTab(t,r)})]])),apis:{getViewItems:t=>ag(t,e,`tabview`).map(e=>Ry.contents(e)).getOr([]),showTab:(e,t)=>{a(e,e=>he(s_.getCandidates(e),e=>Q.getValue(e)===t).filter(t=>!s_.isHighlighted(e,t)))}}}},apis:{getViewItems:(e,t)=>e.getViewItems(t),showTab:(e,t,n)=>{e.showTab(t,n)}}}),Mq=(e,t,n)=>N(e,(r,i)=>{Ry.set(n,e[i].view());let a=t.dom.getBoundingClientRect();return Ry.set(n,[]),a.height}),Nq=e=>we(Se(e,(e,t)=>e>t?-1:e<t?1:0)),Pq=(e,t,n)=>{let r=It(e).dom,i=xn(Jl(e,`.tox-dialog-wrap`).getOr(e),`position`)===`fixed`,a;a=i?Math.max(r.clientHeight,window.innerHeight):Math.max(r.offsetHeight,r.scrollHeight);let o=An(t),s=t.dom.offsetLeft>=n.dom.offsetLeft+Vn(n)?Math.max(An(n),o):o,c=parseInt(xn(e,`margin-top`),10)||0,l=parseInt(xn(e,`margin-bottom`),10)||0,u=An(e)+c+l-s;return a-u},Fq=(e,t)=>{we(e).each(e=>jq.showTab(t,e.value))},Iq=(e,t)=>{yn(e,`height`,t+`px`),yn(e,`flex-basis`,t+`px`)},Lq=(e,t,n)=>{Jl(e,`[role="dialog"]`).each(e=>{Xl(e,`[role="tablist"]`).each(r=>{n.get().map(n=>(yn(t,`height`,`0`),yn(t,`flex-basis`,`0`),Math.min(n,Pq(e,t,r)))).each(e=>{Iq(t,e)})})})},Rq=e=>Xl(e,`[role="tabpanel"]`),zq=e=>{let t=uf();return{extraEvents:[Vs(n=>{let r=n.element;Rq(r).each(i=>{yn(i,`visibility`,`hidden`),n.getSystem().getByDom(i).toOptional().each(n=>{Nq(Mq(e,i,n)).fold(t.clear,t.set)}),Lq(r,i,t),En(i,`visibility`),Fq(e,n),requestAnimationFrame(()=>{Lq(r,i,t)})})}),q(ls(),e=>{let n=e.element;Rq(n).each(e=>{Lq(n,e,t)})}),q(sk,(e,n)=>{let r=e.element;Rq(r).each(e=>{let n=Nd(Qt(e));yn(e,`visibility`,`hidden`);let i=Cn(e,`height`).map(e=>parseInt(e,10));En(e,`height`),En(e,`flex-basis`);let a=e.dom.getBoundingClientRect().height;i.forall(e=>a>e)?(t.set(a),Lq(r,e,t)):i.each(t=>{Iq(e,t)}),En(e,`visibility`),n.each(Ad)})})],selectFirst:!1}},Bq=`send-data-to-section`,Vq=`send-data-to-view`,Hq=(e,t,n)=>{let r=ro({}),i=e=>{let t=Sq(Q.getValue(e)).getOr({}),n=Di(r.get(),t);r.set(n)},a=e=>{let t=r.get();Q.setValue(e,t)},o=ro(null),s=N(e.tabs,e=>({value:e.name,dom:{tag:`div`,classes:[`tox-dialog__body-nav-item`]},components:[Fl(n.shared.providers.translate(e.title))],view:()=>[qj.sketch(r=>({dom:{tag:`div`,classes:[`tox-form`]},components:N(e.items,e=>DF(r,e,t,n)),formBehaviours:Z([Ty.config({mode:`acyclic`,useTabstopAt:T(DM)}),By(`TabView.form.events`,[Vs(a),Hs(i)]),Od.config({channels:fo([{key:Bq,value:{onReceive:i}},{key:Vq,value:{onReceive:a}}])})])}))]})),c=zq(s);return jq.sketch({dom:{tag:`div`,classes:[`tox-dialog__body`]},onChangeTab:(e,t,n)=>{let r=Q.getValue(t);Ss(e,ok,{name:r,oldName:o.get()}),o.set(r)},tabs:s,components:[jq.parts.tabbar({dom:{tag:`div`,classes:[`tox-dialog__body-nav`]},components:[Dq.parts.tabs({})],markers:{tabClass:`tox-tab`,selectedClass:`tox-dialog__body-nav-item--active`},tabbarBehaviours:Z([GO.config({})])}),jq.parts.tabview({dom:{tag:`div`,classes:[`tox-dialog__body-content`]}})],selectFirst:c.selectFirst,tabSectionBehaviours:Z([By(`tabpanel`,c.extraEvents),Ty.config({mode:`acyclic`}),Dg.config({find:e=>we(jq.getViewItems(e))}),iM(O.none(),e=>(e.getSystem().broadcastOn([Bq],{}),r.get()),(e,t)=>{r.set(t),e.getSystem().broadcastOn([Vq],{})})])})},Uq=(e,t,n,r,i)=>{let a=e=>{let t=e.body;switch(t.type){case`tabpanel`:return[Hq(t,e.initialData,r)];default:return[Cq(t,e.initialData,r)]}},o=(e,t)=>O.some({isTabPanel:()=>t.body.type===`tabpanel`}),s={"aria-live":`polite`};return{dom:{tag:`div`,classes:[`tox-dialog__content-js`],attributes:{...n.map(e=>({id:e})).getOr({}),...i?s:{}}},components:[],behaviours:Z([tM.childAt(0),xq.config({channel:`${AM}-${t}`,updateState:o,renderComponents:a,initialData:e})])}},Wq=(e,t,n,r,i)=>Uq(e,t,O.some(n),r,i),Gq=(e,t,n)=>{let r=Uq(e,t,O.none(),n,!1);return $G.parts.body(r)},Kq=e=>{let t={dom:{tag:`div`,classes:[`tox-dialog__content-js`]},components:[{dom:{tag:`div`,classes:[`tox-dialog__body-iframe`]},components:[wM(O.none(),{dom:{tag:`iframe`,attributes:{src:e.url}},behaviours:Z([GO.config({}),Wy.config({})])})]}],behaviours:Z([Ty.config({mode:`acyclic`,useTabstopAt:T(DM)})])};return $G.parts.body(t)};function qq(e){"@babel/helpers - typeof";return qq=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},qq(e)}function Jq(e,t){return Jq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Jq(e,t)}function Yq(){if(typeof Reflect>`u`||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==`function`)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xq(e,t,n){return Xq=Yq()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Jq(i,n.prototype),i},Xq.apply(null,arguments)}function Zq(e){return Qq(e)||$q(e)||eJ(e)||nJ()}function Qq(e){if(Array.isArray(e))return tJ(e)}function $q(e){if(typeof Symbol<`u`&&e[Symbol.iterator]!=null||e[`@@iterator`]!=null)return Array.from(e)}function eJ(e,t){if(e){if(typeof e==`string`)return tJ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n===`Object`&&e.constructor&&(n=e.constructor.name),n===`Map`||n===`Set`)return Array.from(e);if(n===`Arguments`||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tJ(e,t)}}function tJ(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function nJ(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rJ=Object.hasOwnProperty,iJ=Object.setPrototypeOf,aJ=Object.isFrozen,oJ=Object.getPrototypeOf,sJ=Object.getOwnPropertyDescriptor,cJ=Object.freeze,lJ=Object.seal,uJ=Object.create,dJ=typeof Reflect<`u`&&Reflect,fJ=dJ.apply,pJ=dJ.construct;fJ||=function(e,t,n){return e.apply(t,n)},cJ||=function(e){return e},lJ||=function(e){return e},pJ||=function(e,t){return Xq(e,Zq(t))};var mJ=wJ(Array.prototype.forEach),hJ=wJ(Array.prototype.pop),gJ=wJ(Array.prototype.push),_J=wJ(String.prototype.toLowerCase),vJ=wJ(String.prototype.match),yJ=wJ(String.prototype.replace),bJ=wJ(String.prototype.indexOf),xJ=wJ(String.prototype.trim),SJ=wJ(RegExp.prototype.test),CJ=TJ(TypeError);function wJ(e){return function(t){var n=[...arguments].slice(1);return fJ(e,t,n)}}function TJ(e){return function(){return pJ(e,[...arguments])}}function EJ(e,t){iJ&&iJ(e,null);for(var n=t.length;n--;){var r=t[n];if(typeof r==`string`){var i=_J(r);i!==r&&(aJ(t)||(t[n]=i),r=i)}e[r]=!0}return e}function DJ(e){var t=uJ(null),n;for(n in e)fJ(rJ,e,[n])&&(t[n]=e[n]);return t}function OJ(e,t){for(;e!==null;){var n=sJ(e,t);if(n){if(n.get)return wJ(n.get);if(typeof n.value==`function`)return wJ(n.value)}e=oJ(e)}function r(e){return console.warn(`fallback value for`,e),null}return r}var kJ=cJ(`a.abbr.acronym.address.area.article.aside.audio.b.bdi.bdo.big.blink.blockquote.body.br.button.canvas.caption.center.cite.code.col.colgroup.content.data.datalist.dd.decorator.del.details.dfn.dialog.dir.div.dl.dt.element.em.fieldset.figcaption.figure.font.footer.form.h1.h2.h3.h4.h5.h6.head.header.hgroup.hr.html.i.img.input.ins.kbd.label.legend.li.main.map.mark.marquee.menu.menuitem.meter.nav.nobr.ol.optgroup.option.output.p.picture.pre.progress.q.rp.rt.ruby.s.samp.section.select.shadow.small.source.spacer.span.strike.strong.style.sub.summary.sup.table.tbody.td.template.textarea.tfoot.th.thead.time.tr.track.tt.u.ul.var.video.wbr`.split(`.`)),AJ=cJ(`svg.a.altglyph.altglyphdef.altglyphitem.animatecolor.animatemotion.animatetransform.circle.clippath.defs.desc.ellipse.filter.font.g.glyph.glyphref.hkern.image.line.lineargradient.marker.mask.metadata.mpath.path.pattern.polygon.polyline.radialgradient.rect.stop.style.switch.symbol.text.textpath.title.tref.tspan.view.vkern`.split(`.`)),jJ=cJ([`feBlend`,`feColorMatrix`,`feComponentTransfer`,`feComposite`,`feConvolveMatrix`,`feDiffuseLighting`,`feDisplacementMap`,`feDistantLight`,`feFlood`,`feFuncA`,`feFuncB`,`feFuncG`,`feFuncR`,`feGaussianBlur`,`feImage`,`feMerge`,`feMergeNode`,`feMorphology`,`feOffset`,`fePointLight`,`feSpecularLighting`,`feSpotLight`,`feTile`,`feTurbulence`]),MJ=cJ([`animate`,`color-profile`,`cursor`,`discard`,`fedropshadow`,`font-face`,`font-face-format`,`font-face-name`,`font-face-src`,`font-face-uri`,`foreignobject`,`hatch`,`hatchpath`,`mesh`,`meshgradient`,`meshpatch`,`meshrow`,`missing-glyph`,`script`,`set`,`solidcolor`,`unknown`,`use`]),NJ=cJ(`math.menclose.merror.mfenced.mfrac.mglyph.mi.mlabeledtr.mmultiscripts.mn.mo.mover.mpadded.mphantom.mroot.mrow.ms.mspace.msqrt.mstyle.msub.msup.msubsup.mtable.mtd.mtext.mtr.munder.munderover`.split(`.`)),PJ=cJ([`maction`,`maligngroup`,`malignmark`,`mlongdiv`,`mscarries`,`mscarry`,`msgroup`,`mstack`,`msline`,`msrow`,`semantics`,`annotation`,`annotation-xml`,`mprescripts`,`none`]),FJ=cJ([`#text`]),IJ=cJ(`accept.action.align.alt.autocapitalize.autocomplete.autopictureinpicture.autoplay.background.bgcolor.border.capture.cellpadding.cellspacing.checked.cite.class.clear.color.cols.colspan.controls.controlslist.coords.crossorigin.datetime.decoding.default.dir.disabled.disablepictureinpicture.disableremoteplayback.download.draggable.enctype.enterkeyhint.face.for.headers.height.hidden.high.href.hreflang.id.inputmode.integrity.ismap.kind.label.lang.list.loading.loop.low.max.maxlength.media.method.min.minlength.multiple.muted.name.nonce.noshade.novalidate.nowrap.open.optimum.pattern.placeholder.playsinline.poster.preload.pubdate.radiogroup.readonly.rel.required.rev.reversed.role.rows.rowspan.spellcheck.scope.selected.shape.size.sizes.span.srclang.start.src.srcset.step.style.summary.tabindex.title.translate.type.usemap.valign.value.width.xmlns.slot`.split(`.`)),LJ=cJ(`accent-height.accumulate.additive.alignment-baseline.ascent.attributename.attributetype.azimuth.basefrequency.baseline-shift.begin.bias.by.class.clip.clippathunits.clip-path.clip-rule.color.color-interpolation.color-interpolation-filters.color-profile.color-rendering.cx.cy.d.dx.dy.diffuseconstant.direction.display.divisor.dur.edgemode.elevation.end.fill.fill-opacity.fill-rule.filter.filterunits.flood-color.flood-opacity.font-family.font-size.font-size-adjust.font-stretch.font-style.font-variant.font-weight.fx.fy.g1.g2.glyph-name.glyphref.gradientunits.gradienttransform.height.href.id.image-rendering.in.in2.k.k1.k2.k3.k4.kerning.keypoints.keysplines.keytimes.lang.lengthadjust.letter-spacing.kernelmatrix.kernelunitlength.lighting-color.local.marker-end.marker-mid.marker-start.markerheight.markerunits.markerwidth.maskcontentunits.maskunits.max.mask.media.method.mode.min.name.numoctaves.offset.operator.opacity.order.orient.orientation.origin.overflow.paint-order.path.pathlength.patterncontentunits.patterntransform.patternunits.points.preservealpha.preserveaspectratio.primitiveunits.r.rx.ry.radius.refx.refy.repeatcount.repeatdur.restart.result.rotate.scale.seed.shape-rendering.specularconstant.specularexponent.spreadmethod.startoffset.stddeviation.stitchtiles.stop-color.stop-opacity.stroke-dasharray.stroke-dashoffset.stroke-linecap.stroke-linejoin.stroke-miterlimit.stroke-opacity.stroke.stroke-width.style.surfacescale.systemlanguage.tabindex.targetx.targety.transform.transform-origin.text-anchor.text-decoration.text-rendering.textlength.type.u1.u2.unicode.values.viewbox.visibility.version.vert-adv-y.vert-origin-x.vert-origin-y.width.word-spacing.wrap.writing-mode.xchannelselector.ychannelselector.x.x1.x2.xmlns.y.y1.y2.z.zoomandpan`.split(`.`)),RJ=cJ(`accent.accentunder.align.bevelled.close.columnsalign.columnlines.columnspan.denomalign.depth.dir.display.displaystyle.encoding.fence.frame.height.href.id.largeop.length.linethickness.lspace.lquote.mathbackground.mathcolor.mathsize.mathvariant.maxsize.minsize.movablelimits.notation.numalign.open.rowalign.rowlines.rowspacing.rowspan.rspace.rquote.scriptlevel.scriptminsize.scriptsizemultiplier.selection.separator.separators.stretchy.subscriptshift.supscriptshift.symmetric.voffset.width.xmlns`.split(`.`)),zJ=cJ([`xlink:href`,`xml:id`,`xlink:title`,`xml:space`,`xmlns:xlink`]),BJ=lJ(/\{\{[\w\W]*|[\w\W]*\}\}/gm),VJ=lJ(/<%[\w\W]*|[\w\W]*%>/gm),HJ=lJ(/^data-[\-\w.\u00B7-\uFFFF]/),UJ=lJ(/^aria-[\-\w]+$/),WJ=lJ(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),GJ=lJ(/^(?:\w+script|data):/i),KJ=lJ(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qJ=lJ(/^html$/i),JJ=function(){return typeof window>`u`?null:window},YJ=function(e,t){if(qq(e)!==`object`||typeof e.createPolicy!=`function`)return null;var n=null,r=`data-tt-policy-suffix`;t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var i=`dompurify`+(n?`#`+n:``);try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch{return console.warn(`TrustedTypes policy `+i+` could not be created.`),null}};function XJ(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:JJ(),t=function(e){return XJ(e)};if(t.version=`2.3.8`,t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var n=e.document,r=e.document,i=e.DocumentFragment,a=e.HTMLTemplateElement,o=e.Node,s=e.Element,c=e.NodeFilter,l=e.NamedNodeMap,u=l===void 0?e.NamedNodeMap||e.MozNamedAttrMap:l,d=e.HTMLFormElement,f=e.DOMParser,p=e.trustedTypes,m=s.prototype,h=OJ(m,`cloneNode`),g=OJ(m,`nextSibling`),_=OJ(m,`childNodes`),v=OJ(m,`parentNode`);if(typeof a==`function`){var y=r.createElement(`template`);y.content&&y.content.ownerDocument&&(r=y.content.ownerDocument)}var b=YJ(p,n),x=b?b.createHTML(``):``,ee=r,S=ee.implementation,C=ee.createNodeIterator,te=ee.createDocumentFragment,w=ee.getElementsByTagName,T=n.importNode,E={};try{E=DJ(r).documentMode?r.documentMode:{}}catch{}var ne={};t.isSupported=typeof v==`function`&&S&&S.createHTMLDocument!==void 0&&E!==9;var D=BJ,re=VJ,O=HJ,k=UJ,ie=GJ,ae=KJ,A=WJ,j=null,oe=EJ({},[].concat(Zq(kJ),Zq(AJ),Zq(jJ),Zq(NJ),Zq(FJ))),se=null,ce=EJ({},[].concat(Zq(IJ),Zq(LJ),Zq(RJ),Zq(zJ))),M=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),N=null,P=null,le=!0,ue=!0,de=!1,fe=!1,pe=!1,me=!1,he=!1,ge=!1,F=!1,_e=!1,ve=!0,I=!0,ye=!1,be={},xe=null,Se=EJ({},[`annotation-xml`,`audio`,`colgroup`,`desc`,`foreignobject`,`head`,`iframe`,`math`,`mi`,`mn`,`mo`,`ms`,`mtext`,`noembed`,`noframes`,`noscript`,`plaintext`,`script`,`style`,`svg`,`template`,`thead`,`title`,`video`,`xmp`]),Ce=null,we=EJ({},[`audio`,`video`,`img`,`source`,`image`,`track`]),Te=null,Ee=EJ({},[`alt`,`class`,`for`,`id`,`label`,`name`,`pattern`,`placeholder`,`role`,`summary`,`title`,`value`,`style`,`xmlns`]),De=`http://www.w3.org/1998/Math/MathML`,Oe=`http://www.w3.org/2000/svg`,ke=`http://www.w3.org/1999/xhtml`,Ae=ke,je=!1,Me,Ne=[`application/xhtml+xml`,`text/html`],Pe=`text/html`,Fe,Ie=null,Le=r.createElement(`form`),Re=function(e){return e instanceof RegExp||e instanceof Function},ze=function(e){Ie&&Ie===e||((!e||qq(e)!==`object`)&&(e={}),e=DJ(e),j=`ALLOWED_TAGS`in e?EJ({},e.ALLOWED_TAGS):oe,se=`ALLOWED_ATTR`in e?EJ({},e.ALLOWED_ATTR):ce,Te=`ADD_URI_SAFE_ATTR`in e?EJ(DJ(Ee),e.ADD_URI_SAFE_ATTR):Ee,Ce=`ADD_DATA_URI_TAGS`in e?EJ(DJ(we),e.ADD_DATA_URI_TAGS):we,xe=`FORBID_CONTENTS`in e?EJ({},e.FORBID_CONTENTS):Se,N=`FORBID_TAGS`in e?EJ({},e.FORBID_TAGS):{},P=`FORBID_ATTR`in e?EJ({},e.FORBID_ATTR):{},be=`USE_PROFILES`in e?e.USE_PROFILES:!1,le=e.ALLOW_ARIA_ATTR!==!1,ue=e.ALLOW_DATA_ATTR!==!1,de=e.ALLOW_UNKNOWN_PROTOCOLS||!1,fe=e.SAFE_FOR_TEMPLATES||!1,pe=e.WHOLE_DOCUMENT||!1,ge=e.RETURN_DOM||!1,F=e.RETURN_DOM_FRAGMENT||!1,_e=e.RETURN_TRUSTED_TYPE||!1,he=e.FORCE_BODY||!1,ve=e.SANITIZE_DOM!==!1,I=e.KEEP_CONTENT!==!1,ye=e.IN_PLACE||!1,A=e.ALLOWED_URI_REGEXP||A,Ae=e.NAMESPACE||ke,e.CUSTOM_ELEMENT_HANDLING&&Re(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(M.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Re(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(M.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements==`boolean`&&(M.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Me=Me=Ne.indexOf(e.PARSER_MEDIA_TYPE)===-1?Pe:e.PARSER_MEDIA_TYPE,Fe=Me===`application/xhtml+xml`?function(e){return e}:_J,fe&&(ue=!1),F&&(ge=!0),be&&(j=EJ({},Zq(FJ)),se=[],be.html===!0&&(EJ(j,kJ),EJ(se,IJ)),be.svg===!0&&(EJ(j,AJ),EJ(se,LJ),EJ(se,zJ)),be.svgFilters===!0&&(EJ(j,jJ),EJ(se,LJ),EJ(se,zJ)),be.mathMl===!0&&(EJ(j,NJ),EJ(se,RJ),EJ(se,zJ))),e.ADD_TAGS&&(j===oe&&(j=DJ(j)),EJ(j,e.ADD_TAGS)),e.ADD_ATTR&&(se===ce&&(se=DJ(se)),EJ(se,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&EJ(Te,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(xe===Se&&(xe=DJ(xe)),EJ(xe,e.FORBID_CONTENTS)),I&&(j[`#text`]=!0),pe&&EJ(j,[`html`,`head`,`body`]),j.table&&(EJ(j,[`tbody`]),delete N.tbody),cJ&&cJ(e),Ie=e)},L=EJ({},[`mi`,`mo`,`mn`,`ms`,`mtext`]),Be=EJ({},[`foreignobject`,`desc`,`title`,`annotation-xml`]),Ve=EJ({},[`title`,`style`,`font`,`a`,`script`]),He=EJ({},AJ);EJ(He,jJ),EJ(He,MJ);var Ue=EJ({},NJ);EJ(Ue,PJ);var We=function(e){var t=v(e);(!t||!t.tagName)&&(t={namespaceURI:ke,tagName:`template`});var n=_J(e.tagName),r=_J(t.tagName);return e.namespaceURI===Oe?t.namespaceURI===ke?n===`svg`:t.namespaceURI===De?n===`svg`&&(r===`annotation-xml`||L[r]):!!He[n]:e.namespaceURI===De?t.namespaceURI===ke?n===`math`:t.namespaceURI===Oe?n===`math`&&Be[r]:!!Ue[n]:e.namespaceURI===ke?t.namespaceURI===Oe&&!Be[r]||t.namespaceURI===De&&!L[r]?!1:!Ue[n]&&(Ve[n]||!He[n]):!1},Ge=function(e){gJ(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch{try{e.outerHTML=x}catch{e.remove()}}},Ke=function(e,n){try{gJ(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch{gJ(t.removed,{attribute:null,from:n})}if(n.removeAttribute(e),e===`is`&&!se[e])if(ge||F)try{Ge(n)}catch{}else try{n.setAttribute(e,``)}catch{}},qe=function(e){var t,n;if(he)e=`<remove></remove>`+e;else{var i=vJ(e,/^[\r\n\t ]+/);n=i&&i[0]}Me===`application/xhtml+xml`&&(e=`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>`+e+`</body></html>`);var a=b?b.createHTML(e):e;if(Ae===ke)try{t=new f().parseFromString(a,Me)}catch{}if(!t||!t.documentElement){t=S.createDocument(Ae,`template`,null);try{t.documentElement.innerHTML=je?``:a}catch{}}var o=t.body||t.documentElement;return e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),Ae===ke?w.call(t,pe?`html`:`body`)[0]:pe?t.documentElement:o},Je=function(e){return C.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Ye=function(e){return e instanceof d&&(typeof e.nodeName!=`string`||typeof e.textContent!=`string`||typeof e.removeChild!=`function`||!(e.attributes instanceof u)||typeof e.removeAttribute!=`function`||typeof e.setAttribute!=`function`||typeof e.namespaceURI!=`string`||typeof e.insertBefore!=`function`)},Xe=function(e){return qq(o)===`object`?e instanceof o:e&&qq(e)===`object`&&typeof e.nodeType==`number`&&typeof e.nodeName==`string`},Ze=function(e,n,r){ne[e]&&mJ(ne[e],function(e){e.call(t,n,r,Ie)})},Qe=function(e){var n;if(Ze(`beforeSanitizeElements`,e,null),Ye(e)||SJ(/[\u0080-\uFFFF]/,e.nodeName))return Ge(e),!0;var r=Fe(e.nodeName);if(Ze(`uponSanitizeElement`,e,{tagName:r,allowedTags:j}),e.hasChildNodes()&&!Xe(e.firstElementChild)&&(!Xe(e.content)||!Xe(e.content.firstElementChild))&&SJ(/<[/\w]/g,e.innerHTML)&&SJ(/<[/\w]/g,e.textContent)||r===`select`&&SJ(/<template/i,e.innerHTML))return Ge(e),!0;if(!j[r]||N[r]){if(!N[r]&&et(r)&&(M.tagNameCheck instanceof RegExp&&SJ(M.tagNameCheck,r)||M.tagNameCheck instanceof Function&&M.tagNameCheck(r)))return!1;if(I&&!xe[r]){var i=v(e)||e.parentNode,a=_(e)||e.childNodes;if(a&&i)for(var o=a.length-1;o>=0;--o)i.insertBefore(h(a[o],!0),g(e))}return Ge(e),!0}return e instanceof s&&!We(e)||(r===`noscript`||r===`noembed`)&&SJ(/<\/no(script|embed)/i,e.innerHTML)?(Ge(e),!0):(fe&&e.nodeType===3&&(n=e.textContent,n=yJ(n,D,` `),n=yJ(n,re,` `),e.textContent!==n&&(gJ(t.removed,{element:e.cloneNode()}),e.textContent=n)),Ze(`afterSanitizeElements`,e,null),!1)},$e=function(e,t,n){if(ve&&(t===`id`||t===`name`)&&(n in r||n in Le))return!1;if(!(ue&&!P[t]&&SJ(O,t))&&!(le&&SJ(k,t))){if(!se[t]||P[t]){if(!(et(e)&&(M.tagNameCheck instanceof RegExp&&SJ(M.tagNameCheck,e)||M.tagNameCheck instanceof Function&&M.tagNameCheck(e))&&(M.attributeNameCheck instanceof RegExp&&SJ(M.attributeNameCheck,t)||M.attributeNameCheck instanceof Function&&M.attributeNameCheck(t))||t===`is`&&M.allowCustomizedBuiltInElements&&(M.tagNameCheck instanceof RegExp&&SJ(M.tagNameCheck,n)||M.tagNameCheck instanceof Function&&M.tagNameCheck(n))))return!1}else if(!Te[t]&&!SJ(A,yJ(n,ae,``))&&!((t===`src`||t===`xlink:href`||t===`href`)&&e!==`script`&&bJ(n,`data:`)===0&&Ce[e])&&!(de&&!SJ(ie,yJ(n,ae,``)))&&n)return!1}return!0},et=function(e){return e.indexOf(`-`)>0},tt=function(e){var t,n,r,i;Ze(`beforeSanitizeAttributes`,e,null);var a=e.attributes;if(a){var o={attrName:``,attrValue:``,keepAttr:!0,allowedAttributes:se};for(i=a.length;i--;){t=a[i];var s=t,c=s.name,l=s.namespaceURI;n=c===`value`?t.value:xJ(t.value),r=Fe(c);var u=n;if(o.attrName=r,o.attrValue=n,o.keepAttr=!0,o.forceKeepAttr=void 0,Ze(`uponSanitizeAttribute`,e,o),n=o.attrValue,!o.forceKeepAttr){if(!o.keepAttr){Ke(c,e);continue}if(SJ(/\/>/i,n)){Ke(c,e);continue}if(fe&&(n=yJ(n,D,` `),n=yJ(n,re,` `)),!$e(Fe(e.nodeName),r,n)){Ke(c,e);continue}if(n!==u)try{l?e.setAttributeNS(l,c,n):e.setAttribute(c,n)}catch{Ke(c,e)}}}Ze(`afterSanitizeAttributes`,e,null)}},nt=function e(t){var n,r=Je(t);for(Ze(`beforeSanitizeShadowDOM`,t,null);n=r.nextNode();)Ze(`uponSanitizeShadowNode`,n,null),!Qe(n)&&(n.content instanceof i&&e(n.content),tt(n));Ze(`afterSanitizeShadowDOM`,t,null)};return t.sanitize=function(r,a){var s,c,l,u,d;if(je=!r,je&&(r=`<!-->`),typeof r!=`string`&&!Xe(r)){if(typeof r.toString!=`function`)throw CJ(`toString is not a function`);if(r=r.toString(),typeof r!=`string`)throw CJ(`dirty is not a string, aborting`)}if(!t.isSupported){if(qq(e.toStaticHTML)===`object`||typeof e.toStaticHTML==`function`){if(typeof r==`string`)return e.toStaticHTML(r);if(Xe(r))return e.toStaticHTML(r.outerHTML)}return r}if(me||ze(a),t.removed=[],typeof r==`string`&&(ye=!1),ye){if(r.nodeName){var f=Fe(r.nodeName);if(!j[f]||N[f])throw CJ(`root node is forbidden and cannot be sanitized in-place`)}}else if(r instanceof o)s=qe(`<!---->`),c=s.ownerDocument.importNode(r,!0),c.nodeType===1&&c.nodeName===`BODY`||c.nodeName===`HTML`?s=c:s.appendChild(c);else{if(!ge&&!fe&&!pe&&r.indexOf(`<`)===-1)return b&&_e?b.createHTML(r):r;if(s=qe(r),!s)return ge?null:_e?x:``}s&&he&&Ge(s.firstChild);for(var p=Je(ye?r:s);l=p.nextNode();)l.nodeType===3&&l===u||Qe(l)||(l.content instanceof i&&nt(l.content),tt(l),u=l);if(u=null,ye)return r;if(ge){if(F)for(d=te.call(s.ownerDocument);s.firstChild;)d.appendChild(s.firstChild);else d=s;return se.shadowroot&&(d=T.call(n,d,!0)),d}var m=pe?s.outerHTML:s.innerHTML;return pe&&j[`!doctype`]&&s.ownerDocument&&s.ownerDocument.doctype&&s.ownerDocument.doctype.name&&SJ(qJ,s.ownerDocument.doctype.name)&&(m=`<!DOCTYPE `+s.ownerDocument.doctype.name+`>
`+m),fe&&(m=yJ(m,D,` `),m=yJ(m,re,` `)),b&&_e?b.createHTML(m):m},t.setConfig=function(e){ze(e),me=!0},t.clearConfig=function(){Ie=null,me=!1},t.isValidAttribute=function(e,t,n){return Ie||ze({}),$e(Fe(e),Fe(t),n)},t.addHook=function(e,t){typeof t==`function`&&(ne[e]=ne[e]||[],gJ(ne[e],t))},t.removeHook=function(e){if(ne[e])return hJ(ne[e])},t.removeHooks=function(e){ne[e]&&(ne[e]=[])},t.removeAllHooks=function(){ne={}},t}var ZJ=XJ();let QJ=e=>ZJ().sanitize(e),$J=mx.deviceType.isTouch(),eY=(e,t)=>({dom:{tag:`div`,styles:{display:`none`},classes:[`tox-dialog__header`]},components:[e,t]}),tY=(e,t)=>$G.parts.close(Jb.sketch({dom:{tag:`button`,classes:[`tox-button`,`tox-button--icon`,`tox-button--naked`],attributes:{type:`button`,"aria-label":t.translate(`Close`)}},action:e,buttonBehaviours:Z([GO.config({})])})),nY=()=>$G.parts.title({dom:{tag:`div`,classes:[`tox-dialog__title`],innerHtml:``,styles:{display:`none`}}}),rY=(e,t)=>$G.parts.body({dom:{tag:`div`,classes:[`tox-dialog__body`]},components:[{dom:{tag:`div`,classes:[`tox-dialog__body-content`]},components:[{dom:az(`<p>${QJ(t.translate(e))}</p>`)}]}]}),iY=e=>$G.parts.footer({dom:{tag:`div`,classes:[`tox-dialog__footer`]},components:e}),aY=(e,t)=>[RO.sketch({dom:{tag:`div`,classes:[`tox-dialog__footer-start`]},components:e}),RO.sketch({dom:{tag:`div`,classes:[`tox-dialog__footer-end`]},components:t})],oY=e=>{let t=`tox-dialog`,n=t+`-wrap`,r=n+`__backdrop`,i=t+`__disable-scroll`;return $G.sketch({lazySink:e.lazySink,onEscape:t=>(e.onEscape(t),O.some(!0)),useTabstopAt:e=>!DM(e),firstTabstop:e.firstTabstop,dom:{tag:`div`,classes:[t].concat(e.extraClasses),styles:{position:`relative`,...e.extraStyles}},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:az(`<div class="${n}"></div>`),components:[{dom:{tag:`div`,classes:$J?[r,r+`--opaque`]:[r]}}]}},dragBlockClass:n,modalBehaviours:Z([Wy.config({}),By(`dialog-events`,e.dialogEvents.concat([Bs(Io(),(e,t)=>{nz.isBlocked(e)||Ty.focusIn(e)}),q(ms(),(e,t)=>{e.getSystem().broadcastOn([NM],{newFocus:t.event.newFocus})})])),By(`scroll-lock`,[Vs(()=>{il(sn(),i)}),Hs(()=>{ol(sn(),i)})]),...e.extraBehaviours]),eventOrder:{[$o()]:[`dialog-events`],[us()]:[`scroll-lock`,`dialog-events`,`alloy.base.behaviour`],[ds()]:[`alloy.base.behaviour`,`dialog-events`,`scroll-lock`],...e.eventOrder}})},sY=e=>Jb.sketch({dom:{tag:`button`,classes:[`tox-button`,`tox-button--icon`,`tox-button--naked`],attributes:{type:`button`,"aria-label":e.translate(`Close`),title:e.translate(`Close`)}},buttonBehaviours:Z([GO.config({})]),components:[sx(`close`,{tag:`span`,classes:[`tox-icon`]},e.icons)],action:e=>{xs(e,tk)}}),cY=(e,t,n,r)=>{let i=e=>[Fl(r.translate(e.title))];return{dom:{tag:`div`,classes:[`tox-dialog__title`],attributes:{...n.map(e=>({id:e})).getOr({})}},components:[],behaviours:Z([xq.config({channel:`${kM}-${t}`,initialData:e,renderComponents:i})])}},lY=()=>({dom:az(`<div class="tox-dialog__draghandle"></div>`)}),uY=(e,t,n,r)=>RO.sketch({dom:az(`<div class="tox-dialog__header"></div>`),components:[cY(e,t,O.some(n),r),lY(),sY(r)],containerBehaviours:Z([jG.config({mode:`mouse`,blockerClass:`blocker`,getTarget:e=>Zl(e,`[role="dialog"]`).getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:`data-drag-left`,topAttr:`data-drag-top`}})])}),dY=(e,t,n)=>{let r=$G.parts.title(cY(e,t,O.none(),n)),i=$G.parts.draghandle(lY()),a=$G.parts.close(sY(n)),o=[r].concat(e.draggable?[i]:[],[a]);return RO.sketch({dom:az(`<div class="tox-dialog__header"></div>`),components:o})},fY=(e,t,n)=>dY({title:n.shared.providers.translate(e),draggable:n.dialog.isDraggableModal()},t,n.shared.providers),pY=(e,t,n,r)=>({dom:{tag:`div`,classes:[`tox-dialog__busy-spinner`],attributes:{"aria-label":n.translate(e)},styles:{left:`0px`,right:`0px`,bottom:`0px`,top:`${r.getOr(0)}px`,position:`absolute`}},behaviours:t,components:[{dom:az(`<div class="tox-spinner"><div></div><div></div><div></div></div>`)}]}),mY=(e,t,n)=>({onClose:()=>n.closeWindow(),onBlock:n=>{let r=Xl(e().element,`.tox-dialog__header`).map(e=>An(e));$G.setBusy(e(),(e,i)=>pY(n.message,i,t,r))},onUnblock:()=>{$G.setIdle(e())}}),hY=(e,t,n,r)=>{let i=(e,t)=>O.some(t);return Bl(oY({...e,firstTabstop:1,lazySink:r.shared.getSink,extraBehaviours:[xq.config({channel:`${OM}-${e.id}`,updateState:i,initialData:t}),sM({}),...e.extraBehaviours],onEscape:e=>{xs(e,tk)},dialogEvents:n,eventOrder:{[Qo()]:[xq.name(),Od.name()],[us()]:[`scroll-lock`,xq.name(),`messages`,`dialog-events`,`alloy.base.behaviour`],[ds()]:[`alloy.base.behaviour`,`dialog-events`,`messages`,xq.name(),`scroll-lock`]}}))},gY=(e,t={})=>{let n=e=>{let n=N(e.items,e=>{let n=L(t,e.name).getOr(ro(!1));return{...e,storage:n}});return{...e,items:n}};return N(e,e=>e.type===`menu`?n(e):e)},_Y=e=>pe(e,(e,t)=>t.type===`menu`?pe(t.items,(e,t)=>(e[t.name]=t.storage,e),e):e,{}),vY=(e,t)=>[Ls(Io(),EM),e(ek,(e,n,r,i)=>{Nd(Qt(i.element)).fold(y,jd),t.onClose(),n.onClose()}),e(tk,(e,t,n,r)=>{t.onCancel(e),xs(r,ek)}),q(ak,(e,n)=>t.onUnblock()),q(ik,(e,n)=>t.onBlock(n.event))],yY=(e,t)=>{let n=(t,n)=>q(t,(t,i)=>{r(t,(r,a)=>{n(e(),r,i.event,t)})}),r=(e,t)=>{xq.getState(e).get().each(n=>{t(n,e)})};return[...vY(n,t),n(nk,(e,t,n)=>{t.onAction(e,{name:n.name})})]},bY=(e,t,n)=>{let r=(t,n)=>q(t,(t,r)=>{i(t,(i,a)=>{n(e(),i,r.event,t)})}),i=(e,t)=>{xq.getState(e).get().each(n=>{t(n.internalDialog,e)})};return[...vY(r,t),r(rk,(e,t)=>t.onSubmit(e)),r($O,(e,t,n)=>{t.onChange(e,{name:n.name})}),r(nk,(e,t,r,i)=>{let a=()=>i.getSystem().isConnected()?Ty.focusIn(i):void 0,o=e=>mn(e,`disabled`)||pn(e,`aria-disabled`).exists(e=>e===`true`),s=Qt(i.element),c=Nd(s);t.onAction(e,{name:r.name,value:r.value}),Nd(s).fold(a,e=>{o(e)||c.exists(t=>Nt(e,t)&&o(t))?a():n().toOptional().filter(t=>!Nt(t.element,e)).each(a)})}),r(ok,(e,t,n)=>{t.onTabChange(e,{newTabName:n.name,oldTabName:n.oldName})}),Hs(t=>{let n=e();Q.setValue(t,n.getData())})]},xY=(e,t)=>tF(e,e.type,t),SY=(e,t,n)=>he(t,e=>e.name===n).bind(t=>t.memento.getOpt(e)),CY=(e,t)=>{let n=ue(t.map(e=>e.footerButtons).getOr([]),e=>e.align===`start`),r=(e,t)=>RO.sketch({dom:{tag:`div`,classes:[`tox-dialog__footer-${e}`]},components:N(t,e=>e.memento.asSpec())});return[r(`start`,n.pass),r(`end`,n.fail)]},wY=(e,t,n)=>({dom:az(`<div class="tox-dialog__footer"></div>`),components:[],behaviours:Z([xq.config({channel:`${jM}-${t}`,initialData:e,updateState:(e,t)=>{let r=N(t.buttons,e=>{let t=Yb(xY(e,n));return{name:e.name,align:e.align,memento:t}});return O.some({lookupByName:t=>SY(e,r,t),footerButtons:r})},renderComponents:CY})])}),TY=(e,t,n)=>wY(e,t,n),EY=(e,t,n)=>$G.parts.footer(wY(e,t,n)),DY=(e,t)=>{if(e.getRoot().getSystem().isConnected()){let n=Dg.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return qj.getField(n,t).orThunk(()=>e.getFooter().bind(e=>xq.getState(e).get()).bind(e=>e.lookupByName(t)))}else return O.none()},OY=(e,t)=>{let n=e.getRoot();return xq.getState(n).get().map(e=>xa(ba(`data`,e.dataValidator,t))).getOr(t)},kY=(e,t,n)=>{let r=t=>{let n=e.getRoot();n.getSystem().isConnected()&&t(n)},i={getData:()=>{let t=e.getRoot(),r=t.getSystem().isConnected()?e.getFormWrapper():t,i=Q.getValue(r),a=je(n,e=>e.get());return{...i,...a}},setData:t=>{r(r=>{let a=Di(i.getData(),t),o=OY(e,a),s=e.getFormWrapper();Q.setValue(s,o),Ae(n,(e,t)=>{Be(a,t)&&e.set(a[t])})})},setEnabled:(t,n)=>{DY(e,t).each(n?Hg.enable:Hg.disable)},focus:t=>{DY(e,t).each(Wy.focus)},block:e=>{if(!s(e))throw Error(`The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument`);r(t=>{Ss(t,ik,{message:e})})},unblock:()=>{r(e=>{xs(e,ak)})},showTab:t=>{r(n=>{let r=e.getBody();xq.getState(r).get().exists(e=>e.isTabPanel())&&Dg.getCurrent(r).each(e=>{jq.showTab(e,t)})})},redial:a=>{r(r=>{let o=e.getId(),s=t(a),c=gY(s.internalDialog.buttons,n);r.getSystem().broadcastOn([`${OM}-${o}`],s),r.getSystem().broadcastOn([`${kM}-${o}`],s.internalDialog),r.getSystem().broadcastOn([`${AM}-${o}`],s.internalDialog),r.getSystem().broadcastOn([`${jM}-${o}`],{...s.internalDialog,buttons:c}),i.setData(s.initialData)})},close:()=>{r(e=>{xs(e,ek)})},toggleFullscreen:e.toggleFullscreen};return i},AY=e=>{switch(e){case`large`:return[`tox-dialog--width-lg`];case`medium`:return[`tox-dialog--width-md`];default:return[]}},jY=(e,t,n)=>{let r=J(`dialog`),i=e.internalDialog,a=fY(i.title,r,n),o=Gq({body:i.body,initialData:i.initialData},r,n),s=gY(i.buttons),c=_Y(s),l=Ye(s.length!==0,EY({buttons:s},r,n)),u=bY(()=>p,mY(()=>f,n.shared.providers,t),n.shared.getSink),d=AY(i.size),f=hY({id:r,header:a,body:o,footer:l,extraClasses:d,extraBehaviours:[],extraStyles:{}},e,u,n),p=kY({getId:S(r),getRoot:S(f),getBody:()=>$G.getBody(f),getFooter:()=>$G.getFooter(f),getFormWrapper:()=>{let e=$G.getBody(f);return Dg.getCurrent(e).getOr(e)},toggleFullscreen:()=>{let e=`tox-dialog--fullscreen`,t=z.fromDom(f.element.dom);sl(t,e)?(ol(t,e),cl(t,d)):(ll(t,d),il(t,e))}},t.redial,c);return{dialog:f,instanceApi:p}},MY=e=>{switch(e){case`medium`:return O.some(`tox-dialog--width-md`);default:return O.none()}},NY=(e,t,n,r=!1)=>{let i=J(`dialog`),a=J(`dialog-label`),o=J(`dialog-content`),s=e.internalDialog,c=MY(s.size),l=(e,t)=>O.some(t),u=Yb(uY({title:s.title,draggable:!0},i,a,n.shared.providers)),d=Yb(Wq({body:s.body,initialData:s.initialData},i,o,n,r)),f=gY(s.buttons),p=_Y(f),m=Ye(f.length!==0,Yb(TY({buttons:f},i,n))),h=bY(()=>v,{onBlock:e=>{nz.block(_,(t,r)=>{let i=u.getOpt(_).map(e=>An(e.element));return pY(e.message,r,n.shared.providers,i)})},onUnblock:()=>{nz.unblock(_)},onClose:()=>t.closeWindow()},n.shared.getSink),g=`tox-dialog-inline`,_=Bl({dom:{tag:`div`,classes:[`tox-dialog`,g,...c.toArray()],attributes:{role:`dialog`,"aria-labelledby":a}},eventOrder:{[Qo()]:[xq.name(),Od.name()],[$o()]:[`execute-on-form`],[us()]:[`reflecting`,`execute-on-form`]},behaviours:Z([Ty.config({mode:`cyclic`,onEscape:e=>(xs(e,ek),O.some(!0)),useTabstopAt:e=>!DM(e)&&(yt(e)!==`button`||fn(e,`disabled`)!==`disabled`),firstTabstop:1}),xq.config({channel:`${OM}-${i}`,updateState:l,initialData:e}),Wy.config({}),By(`execute-on-form`,h.concat([Bs(Io(),(e,t)=>{Ty.focusIn(e)}),q(ms(),(e,t)=>{e.getSystem().broadcastOn([NM],{newFocus:t.event.newFocus})})])),nz.config({getRoot:()=>O.some(_)}),Ry.config({}),sM({})]),components:[u.asSpec(),d.asSpec(),...m.map(e=>e.asSpec()).toArray()]}),v=kY({getId:S(i),getRoot:S(_),getFooter:()=>m.map(e=>e.get(_)),getBody:()=>d.get(_),getFormWrapper:()=>{let e=d.get(_);return Dg.getCurrent(e).getOr(e)},toggleFullscreen:()=>{let e=`tox-dialog--fullscreen`,t=z.fromDom(_.element.dom);ul(t,[e])?(ll(t,[e]),cl(t,[g])):(ll(t,[g]),cl(t,[e]))}},t.redial,p);return{dialog:_,instanceApi:v}};var PY=tinymce.util.Tools.resolve(`tinymce.util.URI`);let FY=e=>{let t=t=>{e.getSystem().isConnected()&&t(e)};return{block:e=>{if(!s(e))throw Error(`The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument`);t(t=>{Ss(t,ik,{message:e})})},unblock:()=>{t(e=>{xs(e,ak)})},close:()=>{t(e=>{xs(e,ek)})},sendMessage:e=>{t(t=>{t.getSystem().broadcastOn([MM],e)})}}},IY=[`insertContent`,`setContent`,`execCommand`,`close`,`block`,`unblock`],LY=e=>c(e)&&IY.indexOf(e.mceAction)!==-1,RY=e=>!LY(e)&&c(e)&&Be(e,`mceAction`),zY=(e,t,n)=>{switch(n.mceAction){case`insertContent`:e.insertContent(n.content);break;case`setContent`:e.setContent(n.content);break;case`execCommand`:let r=f(n.ui)?n.ui:!1;e.execCommand(n.cmd,r,n.value);break;case`close`:t.close();break;case`block`:t.block(n.message);break;case`unblock`:t.unblock();break}},BY=(e,t,n,r)=>{let i=J(`dialog`),a=fY(e.title,i,r),o=Kq(e),s=e.buttons.bind(e=>e.length===0?O.none():O.some(EY({buttons:e},i,r))),c=yY(()=>g,mY(()=>m,r.shared.providers,t)),l={...e.height.fold(()=>({}),e=>({height:e+`px`,"max-height":e+`px`})),...e.width.fold(()=>({}),e=>({width:e+`px`,"max-width":e+`px`}))},u=e.width.isNone()&&e.height.isNone()?[`tox-dialog--width-lg`]:[],d=new PY(e.url,{base_uri:new PY(window.location.href)}),f=`${d.protocol}://${d.host}${d.port?`:`+d.port:``}`,p=lf(),m=hY({id:i,header:a,body:o,footer:s,extraClasses:u,extraBehaviours:[By(`messages`,[Vs(()=>{let t=ff(z.fromDom(window),`message`,t=>{if(d.isSameOrigin(new PY(t.raw.origin))){let r=t.raw.data;LY(r)?zY(n,g,r):RY(r)&&e.onMessage(g,r)}});p.set(t)}),Hs(p.clear)]),Od.config({channels:{[MM]:{onReceive:(e,t)=>{Xl(e.element,`iframe`).each(e=>{let n=e.dom.contentWindow;h(n)&&n.postMessage(t,f)})}}}})],extraStyles:l},e,c,r),g=FY(m);return{dialog:m,instanceApi:g}},VY=e=>{let t=e.shared;return{open:(n,r)=>{let i=()=>{$G.hide(o),r()},a=Yb(tF({name:`close-alert`,text:`OK`,primary:!0,buttonType:O.some(`primary`),align:`end`,enabled:!0,icon:O.none()},`cancel`,e)),o=Bl(oY({lazySink:()=>t.getSink(),header:eY(nY(),tY(i,t.providers)),body:rY(n,t.providers),footer:O.some(iY(aY([],[a.asSpec()]))),onEscape:i,extraClasses:[`tox-alert-dialog`],extraBehaviours:[],extraStyles:{},dialogEvents:[q(tk,i)],eventOrder:{}}));$G.show(o);let s=a.get(o);Wy.focus(s)}}},HY=e=>{let t=e.shared;return{open:(n,r)=>{let i=e=>{$G.hide(s),r(e)},a=Yb(tF({name:`yes`,text:`Yes`,primary:!0,buttonType:O.some(`primary`),align:`end`,enabled:!0,icon:O.none()},`submit`,e)),o=tF({name:`no`,text:`No`,primary:!1,buttonType:O.some(`secondary`),align:`end`,enabled:!0,icon:O.none()},`cancel`,e),s=Bl(oY({lazySink:()=>t.getSink(),header:eY(nY(),tY(()=>i(!1),t.providers)),body:rY(n,t.providers),footer:O.some(iY(aY([],[o,a.asSpec()]))),onEscape:()=>i(!1),extraClasses:[`tox-confirm-dialog`],extraBehaviours:[],extraStyles:{},dialogEvents:[q(tk,()=>i(!1)),q(rk,()=>i(!0))],eventOrder:{}}));$G.show(s);let c=a.get(s);Wy.focus(c)}}},UY=(e,t)=>xa(ba(`data`,t,e)),WY=e=>_O(e,`.tox-alert-dialog`)||_O(e,`.tox-confirm-dialog`),GY=(e,t,n)=>t&&n?[]:[uR.config({contextual:{lazyContext:()=>O.some(ni(z.fromDom(e.getContentAreaContainer()))),fadeInClass:`tox-dialog-dock-fadein`,fadeOutClass:`tox-dialog-dock-fadeout`,transitionClass:`tox-dialog-dock-transition`},modes:[`top`],lazyViewport:t=>hO(e,t.element).map(e=>({bounds:gO(e),optScrollEnv:O.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:Ln(e.element).top})})).getOrThunk(()=>({bounds:oi(),optScrollEnv:O.none()}))})],KY=e=>{let t=e.editor,n=hS(t),r=VY(e.backstages.dialog),i=HY(e.backstages.dialog),a=(t,n,r)=>{if(!p(n)){if(n.inline===`toolbar`)return l(t,e.backstages.popup.shared.anchors.inlineDialog(),r,n);if(n.inline===`bottom`)return u(t,e.backstages.popup.shared.anchors.inlineBottomDialog(),r,n);if(n.inline===`cursor`)return l(t,e.backstages.popup.shared.anchors.cursor(),r,n)}return c(t,r)},o=(e,t)=>s(e,t),s=(n,r)=>vq.openUrl(n=>{let i=BY(n,{closeWindow:()=>{$G.hide(i.dialog),r(i.instanceApi)}},t,e.backstages.dialog);return $G.show(i.dialog),i.instanceApi},n),c=(t,n)=>vq.open((t,r,i)=>{let a=r,o=jY({dataValidator:i,initialData:a,internalDialog:t},{redial:vq.redial,closeWindow:()=>{$G.hide(o.dialog),n(o.instanceApi)}},e.backstages.dialog);return $G.show(o.dialog),o.instanceApi.setData(a),o.instanceApi},t),l=(r,i,a,o)=>vq.open((r,s,c)=>{let l=UY(s,c),u=uf(),d=e.backstages.popup.shared.header.isPositionedAtTop(),f={dataValidator:c,initialData:l,internalDialog:r},p=()=>u.on(e=>{Kb.reposition(e),uR.refresh(e)}),m=NY(f,{redial:vq.redial,closeWindow:()=>{u.on(Kb.hide),t.off(`ResizeEditor`,p),u.clear(),a(m.instanceApi)}},e.backstages.popup,o.ariaAttrs),h=Bl(Kb.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:`div`,classes:[]},fireDismissalEventInstead:o.persistent?{event:`doNotDismissYet`}:{},...d?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Z([By(`window-manager-inline-events`,[q(fs(),(e,t)=>{xs(m.dialog,tk)})]),...GY(t,n,d)]),isExtraPart:(e,t)=>WY(t)}));return u.set(h),Kb.showWithinBounds(h,Vl(m.dialog),{anchor:i},()=>{let e=ni(t.inline?sn():z.fromDom(t.getContainer()));return O.some(e)}),(!n||!d)&&(uR.refresh(h),t.on(`ResizeEditor`,p)),m.instanceApi.setData(l),Ty.focusIn(m.dialog),m.instanceApi},r),u=(n,r,i,a)=>vq.open((n,o,s)=>{let c=UY(o,s),l=uf(),u=e.backstages.popup.shared.header.isPositionedAtTop(),d={dataValidator:s,initialData:c,internalDialog:n},f=()=>l.on(e=>{Kb.reposition(e),uR.refresh(e)}),p=NY(d,{redial:vq.redial,closeWindow:()=>{l.on(Kb.hide),t.off(`ResizeEditor ScrollWindow ElementScroll`,f),l.clear(),i(p.instanceApi)}},e.backstages.popup,a.ariaAttrs),m=Bl(Kb.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:`div`,classes:[]},fireDismissalEventInstead:a.persistent?{event:`doNotDismissYet`}:{},...u?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Z([By(`window-manager-inline-events`,[q(fs(),(e,t)=>{xs(p.dialog,tk)})]),uR.config({contextual:{lazyContext:()=>O.some(ni(z.fromDom(t.getContentAreaContainer()))),fadeInClass:`tox-dialog-dock-fadein`,fadeOutClass:`tox-dialog-dock-fadeout`,transitionClass:`tox-dialog-dock-transition`},modes:[`top`,`bottom`],lazyViewport:e=>hO(t,e.element).map(e=>({bounds:gO(e),optScrollEnv:O.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:Ln(e.element).top})})).getOrThunk(()=>({bounds:oi(),optScrollEnv:O.none()}))})]),isExtraPart:(e,t)=>WY(t)}));return l.set(m),Kb.showWithinBounds(m,Vl(p.dialog),{anchor:r},()=>e.backstages.popup.shared.getSink().toOptional().bind(e=>{let n=hO(t,e.element).map(e=>gO(e)).getOr(oi()),r=ii(ni(z.fromDom(t.getContentAreaContainer())),n);return O.some(ti(r.x,r.y,r.width,r.height-15))})),uR.refresh(m),t.on(`ResizeEditor ScrollWindow ElementScroll`,f),p.instanceApi.setData(c),Ty.focusIn(p.dialog),p.instanceApi},n);return{open:a,openUrl:o,alert:(e,t)=>{r.open(e,t)},close:e=>{e.close()},confirm:(e,t)=>{i.open(e,t)}}},qY=e=>{yx(e),DE(e),JU(e)};si.add(`silver`,e=>{qY(e);let t=()=>oi(),{dialogs:n,popups:r,renderUI:i}=JG(e,{getPopupSinkBounds:()=>t()});return uO.register(e,r.backstage.shared),{renderUI:async()=>{let n=await i();return hO(e,r.getMothership().element).each(e=>{t=()=>gO(e)}),n},getWindowManagerImpl:S(KY({editor:e,backstages:{popup:r.backstage,dialog:n.backstage}})),getNotificationManagerImpl:()=>dx(e,{backstage:r.backstage},r.getMothership())}})})()}))(),o((()=>{(function(){"use strict";var e=tinymce.util.Tools.resolve(`tinymce.PluginManager`);let t=(e,t,n)=>{let r=t===`UL`?`InsertUnorderedList`:`InsertOrderedList`;e.execCommand(r,!1,n===!1?null:{"list-style-type":n})},n=e=>{e.addCommand(`ApplyUnorderedListStyle`,(n,r)=>{t(e,`UL`,r[`list-style-type`])}),e.addCommand(`ApplyOrderedListStyle`,(n,r)=>{t(e,`OL`,r[`list-style-type`])})},r=e=>t=>t.options.get(e),i=e=>{let t=e.options.register;t(`advlist_number_styles`,{processor:`string[]`,default:`default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman`.split(`,`)}),t(`advlist_bullet_styles`,{processor:`string[]`,default:`default,circle,square`.split(`,`)})},a=r(`advlist_number_styles`),o=r(`advlist_bullet_styles`),s=e=>e==null,c=e=>!s(e);var l=tinymce.util.Tools.resolve(`tinymce.util.Tools`);class u{constructor(e,t){this.tag=e,this.value=t}static some(e){return new u(!0,e)}static none(){return u.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?u.some(e(this.value)):u.none()}bind(e){return this.tag?e(this.value):u.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:u.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(e??`Called getOrDie on None`)}static from(e){return c(e)?u.some(e):u.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:`none()`}}u.singletonNone=new u(!1);let d=(e,t,n)=>{for(let r=0,i=e.length;r<i;r++){let i=e[r];if(t(i,r))return u.some(i);if(n(i,r))break}return u.none()},f=e=>/\btox\-/.test(e.className),p=(e,t)=>e.dom.isChildOf(t,e.getBody()),m=e=>t=>c(t)&&e.test(t.nodeName),h=m(/^(OL|UL|DL)$/),g=m(/^(TH|TD)$/),_=(e,t,n)=>d(t,e=>h(e)&&!f(e),g).exists(t=>t.nodeName===n&&p(e,t)),v=e=>{let t=e.dom.getParent(e.selection.getNode(),`ol,ul`),n=e.dom.getStyle(t,`listStyleType`);return u.from(n)},y=(e,t)=>t!==null&&!e.dom.isEditable(t),b=(e,t)=>y(e,e.dom.getParent(t,`ol,ul,dl`))&&e.selection.isEditable(),x=(e,t)=>{let n=e.selection.getNode();return t({parents:e.dom.getParents(n),element:n}),e.on(`NodeChange`,t),()=>e.off(`NodeChange`,t)},ee=e=>e.replace(/\-/g,` `).replace(/\b\w/g,e=>e.toUpperCase()),S=e=>s(e)||e===`default`?``:e,C=(e,t)=>n=>{let r=(e,r)=>{let i=e.selection.getStart(!0);n.setActive(_(e,r,t)),n.setEnabled(!b(e,i)&&e.selection.isEditable())};return x(e,t=>r(e,t.parents))},te=(e,n,r,i,a,o)=>{e.ui.registry.addSplitButton(n,{tooltip:r,icon:a===`OL`?`ordered-list`:`unordered-list`,presets:`listpreview`,columns:3,fetch:e=>{e(l.map(o,e=>{let t=a===`OL`?`num`:`bull`,n=e===`disc`||e===`decimal`?`default`:e,r=S(e),i=ee(e);return{type:`choiceitem`,value:r,icon:`list-`+t+`-`+n,text:i}}))},onAction:()=>e.execCommand(i),onItemAction:(n,r)=>{t(e,a,r)},select:t=>v(e).map(e=>t===e).getOr(!1),onSetup:C(e,a)})},w=(e,n,r,i,a,o)=>{e.ui.registry.addToggleButton(n,{active:!1,tooltip:r,icon:a===`OL`?`ordered-list`:`unordered-list`,onSetup:C(e,a),onAction:()=>e.queryCommandState(i)||o===``?e.execCommand(i):t(e,a,o)})},T=(e,t,n,r,i,a)=>{a.length>1?te(e,t,n,r,i,a):w(e,t,n,r,i,S(a[0]))},E=e=>{T(e,`numlist`,`Numbered list`,`InsertOrderedList`,`OL`,a(e)),T(e,`bullist`,`Bullet list`,`InsertUnorderedList`,`UL`,o(e))};e.add(`advlist`,e=>{e.hasPlugin(`lists`)?(i(e),E(e),n(e)):console.error(`Please use the Lists plugin together with the Advanced List plugin.`)})})()}))(),o((()=>{(function(){"use strict";var e=tinymce.util.Tools.resolve(`tinymce.PluginManager`);let t=(e,t)=>{e.focus(),e.undoManager.transact(()=>{e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()},n=e=>e.getContent({source_view:!0}),r=e=>{let r=n(e);e.windowManager.open({title:`Source Code`,size:`large`,body:{type:`panel`,items:[{type:`textarea`,name:`code`}]},buttons:[{type:`cancel`,name:`cancel`,text:`Cancel`},{type:`submit`,name:`save`,text:`Save`,primary:!0}],initialData:{code:r},onSubmit:n=>{t(e,n.getData().code),n.close()}})},i=e=>{e.addCommand(`mceCodeEditor`,()=>{r(e)})},a=e=>{let t=()=>e.execCommand(`mceCodeEditor`);e.ui.registry.addButton(`code`,{icon:`sourcecode`,tooltip:`Source code`,onAction:t}),e.ui.registry.addMenuItem(`code`,{icon:`sourcecode`,text:`Source code`,onAction:t})};e.add(`code`,e=>(i(e),a(e),{}))})()}))(),o((()=>{(function(){"use strict";var e=tinymce.util.Tools.resolve(`tinymce.PluginManager`);let t=(e,t,n)=>n(e,t.prototype)?!0:e.constructor?.name===t.name,n=e=>{let n=typeof e;return e===null?`null`:n===`object`&&Array.isArray(e)?`array`:n===`object`&&t(e,String,(e,t)=>t.isPrototypeOf(e))?`string`:n},r=e=>t=>n(t)===e,i=e=>t=>typeof t===e,a=e=>t=>e===t,o=r(`string`),s=r(`object`),c=r(`array`),l=a(null),u=i(`boolean`),d=e=>e==null,f=e=>!d(e),p=i(`function`),m=(e,t)=>{if(c(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},h=()=>{},g=e=>()=>e,_=(e,t)=>e===t;class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(e??`Called getOrDie on None`)}static from(e){return f(e)?v.some(e):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:`none()`}}v.singletonNone=new v(!1);let y=Array.prototype.indexOf,b=Array.prototype.push,x=(e,t)=>y.call(e,t),ee=(e,t)=>x(e,t)>-1,S=(e,t)=>{let n=e.length,r=Array(n);for(let i=0;i<n;i++){let n=e[i];r[i]=t(n,i)}return r},C=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];t(r,n)}},te=(e,t,n)=>(C(e,(e,r)=>{n=t(n,e,r)}),n),w=e=>{let t=[];for(let n=0,r=e.length;n<r;++n){if(!c(e[n]))throw Error(`Arr.flatten item `+n+` was not an array, input: `+e);b.apply(t,e[n])}return t},T=(e,t)=>w(S(e,t)),E=(e,t)=>{for(let n=0;n<e.length;n++){let r=t(e[n],n);if(r.isSome())return r}return v.none()},ne=(e,t,n=_)=>e.exists(e=>n(e,t)),D=e=>{let t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},re=(e,t)=>e?v.some(t):v.none(),O=e=>t=>t.options.get(e),k=e=>{let t=e.options.register;t(`link_assume_external_targets`,{processor:e=>{let t=o(e)||u(e);return t?e===!0?{value:1,valid:t}:e===`http`||e===`https`?{value:e,valid:t}:{value:0,valid:t}:{valid:!1,message:`Must be a string or a boolean.`}},default:!1}),t(`link_context_toolbar`,{processor:`boolean`,default:!1}),t(`link_list`,{processor:e=>o(e)||p(e)||m(e,s)}),t(`link_default_target`,{processor:`string`}),t(`link_default_protocol`,{processor:`string`,default:`https`}),t(`link_target_list`,{processor:e=>u(e)||m(e,s),default:!0}),t(`link_rel_list`,{processor:`object[]`,default:[]}),t(`link_class_list`,{processor:`object[]`,default:[]}),t(`link_title`,{processor:`boolean`,default:!0}),t(`allow_unsafe_link_target`,{processor:`boolean`,default:!1}),t(`link_quicklink`,{processor:`boolean`,default:!1})},ie=O(`link_assume_external_targets`),ae=O(`link_context_toolbar`),A=O(`link_list`),j=O(`link_default_target`),oe=O(`link_default_protocol`),se=O(`link_target_list`),ce=O(`link_rel_list`),M=O(`link_class_list`),N=O(`link_title`),P=O(`allow_unsafe_link_target`),le=O(`link_quicklink`);var ue=tinymce.util.Tools.resolve(`tinymce.util.Tools`);let de=e=>o(e.value)?e.value:``,fe=e=>o(e.text)?e.text:o(e.title)?e.title:``,pe=(e,t)=>{let n=[];return ue.each(e,e=>{let r=fe(e);if(e.menu!==void 0){let i=pe(e.menu,t);n.push({text:r,items:i})}else{let i=t(e);n.push({text:r,value:i})}}),n},me=(e=de)=>t=>v.from(t).map(t=>pe(t,e)),he={sanitize:e=>me(de)(e),sanitizeWith:me,createUi:(e,t)=>n=>({name:e,type:`listbox`,label:t,items:n}),getValue:de},ge=Object.keys,F=Object.hasOwnProperty,_e=(e,t)=>{let n=ge(e);for(let r=0,i=n.length;r<i;r++){let i=n[r],a=e[i];t(a,i)}},ve=e=>(t,n)=>{e[n]=t},I=(e,t,n,r)=>{_e(e,(e,i)=>{(t(e,i)?n:r)(e,i)})},ye=(e,t)=>{let n={};return I(e,t,ve(n),h),n},be=(e,t)=>F.call(e,t),xe=(e,t)=>be(e,t)&&e[t]!==void 0&&e[t]!==null;var Se=tinymce.util.Tools.resolve(`tinymce.dom.TreeWalker`),Ce=tinymce.util.Tools.resolve(`tinymce.util.URI`);let we=e=>f(e)&&e.nodeName.toLowerCase()===`a`,Te=e=>we(e)&&!!Oe(e),Ee=(e,t)=>{if(e.collapsed)return[];{let n=e.cloneContents(),r=n.firstChild,i=new Se(r,n),a=[],o=r;do t(o)&&a.push(o);while(o=i.next());return a}},De=e=>/^\w+:/i.test(e),Oe=e=>e.getAttribute(`data-mce-href`)??e.getAttribute(`href`)??``,ke=(e,t)=>{let n=[`noopener`],r=e?e.split(/\s+/):[],i=e=>ue.trim(e.sort().join(` `)),a=e=>(e=o(e),e.length>0?e.concat(n):n),o=e=>e.filter(e=>ue.inArray(n,e)===-1),s=t?a(r):o(r);return s.length>0?i(s):``},Ae=e=>e.replace(/\uFEFF/g,``),je=(e,t)=>(t=t||Pe(e.selection.getRng())[0]||e.selection.getNode(),ze(t)?v.from(e.dom.select(`a[href]`,t)[0]):v.from(e.dom.getParent(t,`a[href]`))),Me=(e,t)=>je(e,t).isSome(),Ne=(e,t)=>Ae(t.fold(()=>e.getContent({format:`text`}),e=>e.innerText||e.textContent||``)),Pe=e=>Ee(e,Te),Fe=e=>ue.grep(e,Te),Ie=e=>Fe(e).length>0,Le=e=>Pe(e).length>0,Re=e=>{let t=e.schema.getTextInlineElements(),n=e=>e.nodeType===1&&!we(e)&&!be(t,e.nodeName.toLowerCase());if(je(e).exists(e=>e.hasAttribute(`data-mce-block`)))return!1;let r=e.selection.getRng();return r.collapsed?!0:Ee(r,n).length===0},ze=e=>f(e)&&e.nodeName===`FIGURE`&&/\bimage\b/i.test(e.className),L=e=>te([`title`,`rel`,`class`,`target`],(t,n)=>(e[n].each(e=>{t[n]=e.length>0?e:null}),t),{href:e.href}),Be=(e,t)=>(t===`http`||t===`https`)&&!De(e)?t+`://`+e:e,Ve=(e,t)=>{let n={...t};return ce(e).length===0&&!P(e)&&(n.rel=ke(n.rel,n.target===`_blank`)||null),v.from(n.target).isNone()&&se(e)===!1&&(n.target=j(e)),n.href=Be(n.href,ie(e)),n},He=(e,t,n,r)=>{n.each(e=>{be(t,`innerText`)?t.innerText=e:t.textContent=e}),e.dom.setAttribs(t,r),e.selection.select(t)},Ue=(e,t,n,r)=>{let i=e.dom;ze(t)?Qe(i,t,r):n.fold(()=>{e.execCommand(`mceInsertLink`,!1,r)},t=>{e.insertContent(i.createHTML(`a`,r,i.encode(t)))})},We=(e,t,n)=>{let r=e.selection.getNode(),i=je(e,r),a=Ve(e,L(n));e.undoManager.transact(()=>{n.href===t.href&&t.attach(),i.fold(()=>{Ue(e,r,n.text,a)},t=>{e.focus(),He(e,t,n.text,a)})})},Ge=e=>{let t=e.dom,n=e.selection,r=n.getBookmark(),i=n.getRng().cloneRange(),a=t.getParent(i.startContainer,`a[href]`,e.getBody()),o=t.getParent(i.endContainer,`a[href]`,e.getBody());a&&i.setStartBefore(a),o&&i.setEndAfter(o),n.setRng(i),e.execCommand(`unlink`),n.moveToBookmark(r)},Ke=e=>{e.undoManager.transact(()=>{let t=e.selection.getNode();ze(t)?Ze(e,t):Ge(e),e.focus()})},qe=e=>{let{class:t,href:n,rel:r,target:i,text:a,title:o}=e;return ye({class:t.getOrNull(),href:n,rel:r.getOrNull(),target:i.getOrNull(),text:a.getOrNull(),title:o.getOrNull()},(e,t)=>l(e)===!1)},Je=(e,t)=>{let n=e.options.get,r={allow_html_data_urls:n(`allow_html_data_urls`),allow_script_urls:n(`allow_script_urls`),allow_svg_data_urls:n(`allow_svg_data_urls`)},i=t.href;return{...t,href:Ce.isDomSafe(i,`a`,r)?i:``}},Ye=(e,t,n)=>{let r=Je(e,n);e.hasPlugin(`rtc`,!0)?e.execCommand(`createlink`,!1,qe(r)):We(e,t,r)},Xe=e=>{e.hasPlugin(`rtc`,!0)?e.execCommand(`unlink`):Ke(e)},Ze=(e,t)=>{var n;let r=e.dom.select(`img`,t)[0];if(r){let i=e.dom.getParents(r,`a[href]`,t)[0];i&&((n=i.parentNode)==null||n.insertBefore(r,i),e.dom.remove(i))}},Qe=(e,t,n)=>{var r;let i=e.select(`img`,t)[0];if(i){let t=e.create(`a`,n);(r=i.parentNode)==null||r.insertBefore(t,i),t.appendChild(i)}},$e=e=>xe(e,`items`),et=(e,t)=>E(t,t=>$e(t)?et(e,t.items):re(t.value===e,t)),tt=(e,t,n,r)=>{let i=r[t],a=e.length>0;return i===void 0?v.none():et(i,n).map(t=>({url:{value:t.value,meta:{text:a?e:t.text,attach:h}},text:a?e:t.text}))},nt=(e,t)=>t===`link`?e.link:t===`anchor`?e.anchor:v.none(),rt={init:(e,t)=>{let n={text:e.text,title:e.title},r=e=>re(n.title.length<=0,v.from(e.meta?.title).getOr(``)),i=e=>re(n.text.length<=0,v.from(e.meta?.text).getOr(e.value)),a=e=>{let t=i(e.url),n=r(e.url);return t.isSome()||n.isSome()?v.some({...t.map(e=>({text:e})).getOr({}),...n.map(e=>({title:e})).getOr({})}):v.none()},o=(e,r)=>{let i=nt(t,r).getOr([]);return tt(n.text,r,i,e)};return{onChange:(e,t)=>{let r=t.name;return r===`url`?a(e()):ee([`anchor`,`link`],r)?o(e(),r):((r===`text`||r===`title`)&&(n[r]=e()[r]),v.none())}}},getDelta:tt};var it=tinymce.util.Tools.resolve(`tinymce.util.Delay`);let at=(e,t,n)=>{let r=e.selection.getRng();it.setEditorTimeout(e,()=>{e.windowManager.confirm(t,t=>{e.selection.setRng(r),n(t)})})},ot=e=>{let t=e.href;return t.indexOf(`@`)>0&&t.indexOf(`/`)===-1&&t.indexOf(`mailto:`)===-1?v.some({message:`The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?`,preprocess:e=>({...e,href:`mailto:`+t})}):v.none()},st=(e,t)=>n=>{let r=n.href;return e===1&&!De(r)||e===0&&/^\s*www(\.|\d\.)/i.test(r)?v.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${t}:// prefix?`,preprocess:e=>({...e,href:t+`://`+r})}):v.none()},R={preprocess:(e,t)=>E([ot,st(ie(e),oe(e))],e=>e(t)).fold(()=>Promise.resolve(t),n=>new Promise(r=>{at(e,n.message,e=>{r(e?n.preprocess(t):t)})}))},ct={getAnchors:e=>{let t=T(e.dom.select(`a:not([href])`),e=>{let t=e.name||e.id;return t?[{text:t,value:`#`+t}]:[]});return t.length>0?v.some([{text:`None`,value:``}].concat(t)):v.none()}},lt={getClasses:e=>{let t=M(e);return t.length>0?he.sanitize(t):v.none()}},ut=e=>{try{return v.some(JSON.parse(e))}catch{return v.none()}},z={getLinks:e=>{let t=t=>e.convertURL(t.value||t.url||``,`href`),n=A(e);return new Promise(e=>{o(n)?fetch(n).then(e=>e.ok?e.text().then(ut):Promise.reject()).then(e,()=>e(v.none())):p(n)?n(t=>e(v.some(t))):e(v.from(n))}).then(e=>e.bind(he.sanitizeWith(t)).map(e=>e.length>0?[{text:`None`,value:``}].concat(e):e))}},dt={getRels:(e,t)=>{let n=ce(e);if(n.length>0){let r=ne(t,`_blank`);return(P(e)===!1?he.sanitizeWith(e=>ke(he.getValue(e),r)):he.sanitize)(n)}return v.none()}},ft=[{text:`Current window`,value:``},{text:`New window`,value:`_blank`}],pt={getTargets:e=>{let t=se(e);return c(t)?he.sanitize(t).orThunk(()=>v.some(ft)):t===!1?v.none():v.some(ft)}},mt=(e,t,n)=>{let r=e.getAttrib(t,n);return r!==null&&r.length>0?v.some(r):v.none()},ht=(e,t)=>{let n=e.dom,r=Re(e)?v.some(Ne(e.selection,t)):v.none(),i=t.bind(e=>v.from(n.getAttrib(e,`href`))),a=t.bind(e=>v.from(n.getAttrib(e,`target`))),o=t.bind(e=>mt(n,e,`rel`)),s=t.bind(e=>mt(n,e,`class`));return{url:i,text:r,title:t.bind(e=>mt(n,e,`title`)),target:a,rel:o,linkClass:s}},gt={collect:(e,t)=>z.getLinks(e).then(n=>{let r=ht(e,t);return{anchor:r,catalogs:{targets:pt.getTargets(e),rels:dt.getRels(e,r.target),classes:lt.getClasses(e),anchor:ct.getAnchors(e),link:n},optNode:t,flags:{titleEnabled:N(e)}}})},_t=(e,t)=>n=>{let r=n.getData();if(!r.url.value){Xe(e),n.close();return}let i=e=>v.from(r[e]).filter(n=>!ne(t.anchor[e],n)),a={href:r.url.value,text:i(`text`),target:i(`target`),rel:i(`rel`),class:i(`linkClass`),title:i(`title`)},o={href:r.url.value,attach:r.url.meta!==void 0&&r.url.meta.attach?r.url.meta.attach:h};R.preprocess(e,a).then(t=>{Ye(e,o,t)}),n.close()},vt=e=>{let t=je(e);return gt.collect(e,t)},yt=(e,t)=>{let n=e.anchor,r=n.url.getOr(``);return{url:{value:r,meta:{original:{value:r}}},text:n.text.getOr(``),title:n.title.getOr(``),anchor:r,link:r,rel:n.rel.getOr(``),target:n.target.or(t).getOr(``),linkClass:n.linkClass.getOr(``)}},bt=(e,t,n)=>{let r=[{name:`url`,type:`urlinput`,filetype:`file`,label:`URL`}],i=e.anchor.text.map(()=>({name:`text`,type:`input`,label:`Text to display`})).toArray(),a=e.flags.titleEnabled?[{name:`title`,type:`input`,label:`Title`}]:[],o=yt(e,v.from(j(n))),s=e.catalogs,c=rt.init(o,s);return{title:`Insert/Edit Link`,size:`normal`,body:{type:`panel`,items:w([r,i,a,D([s.anchor.map(he.createUi(`anchor`,`Anchors`)),s.rels.map(he.createUi(`rel`,`Rel`)),s.targets.map(he.createUi(`target`,`Open link in...`)),s.link.map(he.createUi(`link`,`Link list`)),s.classes.map(he.createUi(`linkClass`,`Class`))])])},buttons:[{type:`cancel`,name:`cancel`,text:`Cancel`},{type:`submit`,name:`save`,text:`Save`,primary:!0}],initialData:o,onChange:(e,{name:t})=>{c.onChange(e.getData,{name:t}).each(t=>{e.setData(t)})},onSubmit:t}},xt=e=>{vt(e).then(t=>bt(t,_t(e,t),e)).then(t=>{e.windowManager.open(t)})},St=e=>{e.addCommand(`mceLink`,(t,n)=>{n?.dialog===!0||!le(e)?xt(e):e.dispatch(`contexttoolbar-show`,{toolbarKey:`quicklink`})})};var Ct=tinymce.util.Tools.resolve(`tinymce.util.VK`);let wt=(e,t)=>{document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)},Tt=e=>{let t=document.createElement(`a`);t.target=`_blank`,t.href=e,t.rel=`noreferrer noopener`;let n=document.createEvent(`MouseEvents`);n.initMouseEvent(`click`,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),wt(t,n)},Et=(e,t)=>e.dom.getParent(t,`a[href]`),Dt=e=>Et(e,e.selection.getStart()),Ot=e=>e.altKey===!0&&e.shiftKey===!1&&e.ctrlKey===!1&&e.metaKey===!1,kt=(e,t)=>{if(t){let n=Oe(t);if(/^#/.test(n)){let t=e.dom.select(n);t.length&&e.selection.scrollIntoView(t[0],!0)}else Tt(t.href)}},At=e=>()=>{e.execCommand(`mceLink`,!1,{dialog:!0})},jt=e=>()=>{kt(e,Dt(e))},Mt=e=>{e.on(`click`,t=>{let n=Et(e,t.target);n&&Ct.metaKeyPressed(t)&&(t.preventDefault(),kt(e,n))}),e.on(`keydown`,t=>{if(!t.isDefaultPrevented()&&t.keyCode===13&&Ot(t)){let n=Dt(e);n&&(t.preventDefault(),kt(e,n))}})},Nt=(e,t)=>(e.on(`NodeChange`,t),()=>e.off(`NodeChange`,t)),Pt=e=>t=>{let n=()=>{t.setActive(!e.mode.isReadOnly()&&Me(e,e.selection.getNode())),t.setEnabled(e.selection.isEditable())};return n(),Nt(e,n)},Ft=e=>t=>{let n=()=>{t.setEnabled(e.selection.isEditable())};return n(),Nt(e,n)},It=e=>(e.selection.isCollapsed()?Fe(e.dom.getParents(e.selection.getStart())):Pe(e.selection.getRng())).length===1,Lt=e=>t=>{let n=()=>t.setEnabled(It(e));return n(),Nt(e,n)},Rt=e=>t=>{let n=t=>Ie(t)||Le(e.selection.getRng()),r=e.dom.getParents(e.selection.getStart()),i=r=>{t.setEnabled(n(r)&&e.selection.isEditable())};return i(r),Nt(e,e=>i(e.parents))},zt=e=>{e.addShortcut(`Meta+K`,``,()=>{e.execCommand(`mceLink`)})},Bt=e=>{e.ui.registry.addToggleButton(`link`,{icon:`link`,tooltip:`Insert/edit link`,onAction:At(e),onSetup:Pt(e)}),e.ui.registry.addButton(`openlink`,{icon:`new-tab`,tooltip:`Open link`,onAction:jt(e),onSetup:Lt(e)}),e.ui.registry.addButton(`unlink`,{icon:`unlink`,tooltip:`Remove link`,onAction:()=>Xe(e),onSetup:Rt(e)})},Vt=e=>{e.ui.registry.addMenuItem(`openlink`,{text:`Open link`,icon:`new-tab`,onAction:jt(e),onSetup:Lt(e)}),e.ui.registry.addMenuItem(`link`,{icon:`link`,text:`Link...`,shortcut:`Meta+K`,onSetup:Ft(e),onAction:At(e)}),e.ui.registry.addMenuItem(`unlink`,{icon:`unlink`,text:`Remove link`,onAction:()=>Xe(e),onSetup:Rt(e)})},Ht=e=>{e.ui.registry.addContextMenu(`link`,{update:t=>e.dom.isEditable(t)?Ie(e.dom.getParents(t,`a`))?`link unlink openlink`:`link`:``})},Ut=e=>{let t=e=>{e.selection.collapse(!1)},n=t=>{let n=e.selection.getNode();return t.setEnabled(Me(e,n)),h},r=t=>{let n=je(e),r=Re(e);return n.isNone()&&r?re(Ne(e.selection,n).length===0,t):v.none()};e.ui.registry.addContextForm(`quicklink`,{launch:{type:`contextformtogglebutton`,icon:`link`,tooltip:`Link`,onSetup:Pt(e)},label:`Link`,predicate:t=>ae(e)&&Me(e,t),initValue:()=>je(e).fold(g(``),Oe),commands:[{type:`contextformtogglebutton`,icon:`link`,tooltip:`Link`,primary:!0,onSetup:t=>{let n=e.selection.getNode();return t.setActive(Me(e,n)),Pt(e)(t)},onAction:n=>{let i=n.getValue(),a=r(i);Ye(e,{href:i,attach:h},{href:i,text:a,title:v.none(),rel:v.none(),target:v.none(),class:v.none()}),t(e),n.hide()}},{type:`contextformbutton`,icon:`unlink`,tooltip:`Remove link`,onSetup:n,onAction:t=>{Xe(e),t.hide()}},{type:`contextformbutton`,icon:`new-tab`,tooltip:`Open link`,onSetup:n,onAction:t=>{jt(e)(),t.hide()}}]})};e.add(`link`,e=>{k(e),Bt(e),Vt(e),Ht(e),Ut(e),Mt(e),St(e),zt(e)})})()}))(),o((()=>{(function(){"use strict";var e=tinymce.util.Tools.resolve(`tinymce.PluginManager`);let t=(e,t,n)=>n(e,t.prototype)?!0:e.constructor?.name===t.name,n=e=>{let n=typeof e;return e===null?`null`:n===`object`&&Array.isArray(e)?`array`:n===`object`&&t(e,String,(e,t)=>t.isPrototypeOf(e))?`string`:n},r=e=>t=>n(t)===e,i=e=>t=>typeof t===e,a=r(`string`),o=r(`object`),s=r(`array`),c=i(`boolean`),l=e=>e==null,u=e=>!l(e),d=i(`function`),f=i(`number`),p=()=>{},m=e=>()=>e,h=(e,t)=>e===t;function g(e,...t){return(...n)=>{let r=t.concat(n);return e.apply(null,r)}}let _=e=>t=>!e(t),v=m(!1);class y{constructor(e,t){this.tag=e,this.value=t}static some(e){return new y(!0,e)}static none(){return y.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?y.some(e(this.value)):y.none()}bind(e){return this.tag?e(this.value):y.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:y.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(e??`Called getOrDie on None`)}static from(e){return u(e)?y.some(e):y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:`none()`}}y.singletonNone=new y(!1);let b=Array.prototype.slice,x=Array.prototype.indexOf,ee=Array.prototype.push,S=(e,t)=>x.call(e,t),C=(e,t)=>S(e,t)>-1,te=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];if(t(r,n))return!0}return!1},w=(e,t)=>{let n=e.length,r=Array(n);for(let i=0;i<n;i++){let n=e[i];r[i]=t(n,i)}return r},T=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];t(r,n)}},E=(e,t)=>{let n=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];t(i,r)&&n.push(i)}return n},ne=(e,t)=>{if(e.length===0)return[];{let n=t(e[0]),r=[],i=[];for(let a=0,o=e.length;a<o;a++){let o=e[a],s=t(o);s!==n&&(r.push(i),i=[]),n=s,i.push(o)}return i.length!==0&&r.push(i),r}},D=(e,t,n)=>(T(e,(e,r)=>{n=t(n,e,r)}),n),re=(e,t,n)=>{for(let r=0,i=e.length;r<i;r++){let i=e[r];if(t(i,r))return y.some(i);if(n(i,r))break}return y.none()},O=(e,t)=>re(e,t,v),k=e=>{let t=[];for(let n=0,r=e.length;n<r;++n){if(!s(e[n]))throw Error(`Arr.flatten item `+n+` was not an array, input: `+e);ee.apply(t,e[n])}return t},ie=(e,t)=>k(w(e,t)),ae=e=>{let t=b.call(e,0);return t.reverse(),t},A=(e,t)=>t>=0&&t<e.length?y.some(e[t]):y.none(),j=e=>A(e,0),oe=e=>A(e,e.length-1),se=(e,t)=>{let n=[],r=d(t)?e=>te(n,n=>t(n,e)):e=>C(n,e);for(let t=0,i=e.length;t<i;t++){let i=e[t];r(i)||n.push(i)}return n},ce=(e,t,n=h)=>e.exists(e=>n(e,t)),M=(e,t,n=h)=>N(e,t,n).getOr(e.isNone()&&t.isNone()),N=(e,t,n)=>e.isSome()&&t.isSome()?y.some(n(e.getOrDie(),t.getOrDie())):y.none(),P=(e,t)=>{let n=(t||document).createElement(`div`);if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){let t=`HTML does not have a single root node`;throw console.error(t,e),Error(t)}return de(n.childNodes[0])},le=(e,t)=>de((t||document).createElement(e)),ue=(e,t)=>de((t||document).createTextNode(e)),de=e=>{if(e==null)throw Error(`Node cannot be null or undefined`);return{dom:e}},fe={fromHtml:P,fromTag:le,fromText:ue,fromDom:de,fromPoint:(e,t,n)=>y.from(e.dom.elementFromPoint(t,n)).map(de)},pe=(e,t)=>{let n=e.dom;if(n.nodeType!==1)return!1;{let e=n;if(e.matches!==void 0)return e.matches(t);if(e.msMatchesSelector!==void 0)return e.msMatchesSelector(t);if(e.webkitMatchesSelector!==void 0)return e.webkitMatchesSelector(t);if(e.mozMatchesSelector!==void 0)return e.mozMatchesSelector(t);throw Error(`Browser lacks native selectors`)}},me=(e,t)=>e.dom===t.dom,he=(e,t)=>{let n=e.dom,r=t.dom;return n===r?!1:n.contains(r)},ge=pe;var F=(e,t,n,r,i)=>e(n,r)?y.some(n):d(i)&&i(n)?y.none():t(n,r,i);typeof window<`u`?window:Function(`return this;`)();let _e=e=>e.dom.nodeName.toLowerCase(),ve=e=>e.dom.nodeType,I=(e=>t=>ve(t)===e)(1),ye=e=>t=>I(t)&&_e(t)===e,be=e=>y.from(e.dom.parentNode).map(fe.fromDom),xe=e=>y.from(e.dom.parentElement).map(fe.fromDom),Se=e=>y.from(e.dom.nextSibling).map(fe.fromDom),Ce=e=>w(e.dom.childNodes,fe.fromDom),we=(e,t)=>{let n=e.dom.childNodes;return y.from(n[t]).map(fe.fromDom)},Te=e=>we(e,0),Ee=e=>we(e,e.dom.childNodes.length-1),De=(e,t,n)=>{let r=e.dom,i=d(n)?n:v;for(;r.parentNode;){r=r.parentNode;let e=fe.fromDom(r);if(t(e))return y.some(e);if(i(e))break}return y.none()},Oe=(e,t,n)=>F((e,t)=>t(e),De,e,t,n),ke=(e,t)=>{be(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},Ae=(e,t)=>{Se(e).fold(()=>{be(e).each(e=>{je(e,t)})},e=>{ke(e,t)})},je=(e,t)=>{e.dom.appendChild(t.dom)},Me=(e,t)=>{T(t,t=>{ke(e,t)})},Ne=(e,t)=>{T(t,t=>{je(e,t)})},Pe=e=>{e.dom.textContent=``,T(Ce(e),e=>{Fe(e)})},Fe=e=>{let t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)};var Ie=tinymce.util.Tools.resolve(`tinymce.dom.RangeUtils`),Le=tinymce.util.Tools.resolve(`tinymce.dom.TreeWalker`),Re=tinymce.util.Tools.resolve(`tinymce.util.VK`);let ze=e=>w(e,fe.fromDom),L=Object.keys,Be=(e,t)=>{let n=L(e);for(let r=0,i=n.length;r<i;r++){let i=n[r],a=e[i];t(a,i)}},Ve=e=>(t,n)=>{e[n]=t},He=(e,t,n,r)=>{Be(e,(e,i)=>{(t(e,i)?n:r)(e,i)})},Ue=(e,t)=>{let n={};return He(e,t,Ve(n),p),n},We=(e,t,n)=>{if(a(n)||c(n)||f(n))e.setAttribute(t,n+``);else throw console.error(`Invalid call to Attribute.set. Key `,t,`:: Value `,n,`:: Element `,e),Error(`Attribute value was not simple`)},Ge=(e,t)=>{let n=e.dom;Be(t,(e,t)=>{We(n,t,e)})},Ke=e=>D(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),qe=(e,t)=>fe.fromDom(e.dom.cloneNode(t)),Je=e=>qe(e,!0),Ye=(e,t)=>{let n=fe.fromTag(t);return Ge(n,Ke(e)),n},Xe=(e,t)=>{let n=Ye(e,t);return Ae(e,n),Ne(n,Ce(e)),Fe(e),n};var Ze=tinymce.util.Tools.resolve(`tinymce.dom.DOMUtils`),Qe=tinymce.util.Tools.resolve(`tinymce.util.Tools`);let $e=e=>t=>u(t)&&t.nodeName.toLowerCase()===e,et=e=>t=>u(t)&&e.test(t.nodeName),tt=e=>u(e)&&e.nodeType===3,nt=e=>u(e)&&e.nodeType===1,rt=et(/^(OL|UL|DL)$/),it=et(/^(OL|UL)$/),at=$e(`ol`),ot=et(/^(LI|DT|DD)$/),st=et(/^(DT|DD)$/),R=et(/^(TH|TD)$/),ct=$e(`br`),lt=e=>e.parentNode?.firstChild===e,ut=(e,t)=>u(t)&&t.nodeName in e.schema.getTextBlockElements(),z=(e,t)=>u(e)&&e.nodeName in t,dt=(e,t)=>u(t)&&t.nodeName in e.schema.getVoidElements(),ft=(e,t)=>ct(t)?e.isBlock(t.nextSibling)&&!ct(t.previousSibling):!1,pt=(e,t,n)=>{let r=e.isEmpty(t);return n&&e.select(`span[data-mce-type=bookmark]`,t).length>0?!1:r},mt=(e,t)=>e.isChildOf(t,e.getRoot()),ht=e=>t=>t.options.get(e),gt=e=>{let t=e.options.register;t(`lists_indent_on_tab`,{processor:`boolean`,default:!0})},_t=ht(`lists_indent_on_tab`),vt=ht(`forced_root_block`),yt=ht(`forced_root_block_attrs`),bt=(e,t)=>{let n=e.dom,r=e.schema.getBlockElements(),i=n.createFragment(),a=vt(e),o=yt(e),s,c,l=!1;for(c=n.create(a,o),z(t.firstChild,r)||i.appendChild(c);s=t.firstChild;){let e=s.nodeName;!l&&(e!==`SPAN`||s.getAttribute(`data-mce-type`)!==`bookmark`)&&(l=!0),z(s,r)?(i.appendChild(s),c=null):(c||(c=n.create(a,o),i.appendChild(c)),c.appendChild(s))}return!l&&c&&c.appendChild(n.create(`br`,{"data-mce-bogus":`1`})),i},xt=Ze.DOM,St=(e,t,n)=>{let r=e=>{let t=e.parentNode;t&&Qe.each(i,e=>{t.insertBefore(e,n.parentNode)}),xt.remove(e)},i=xt.select(`span[data-mce-type="bookmark"]`,t),a=bt(e,n),o=xt.createRng();o.setStartAfter(n),o.setEndAfter(t);let s=o.extractContents();for(let t=s.firstChild;t;t=t.firstChild)if(t.nodeName===`LI`&&e.dom.isEmpty(t)){xt.remove(t);break}e.dom.isEmpty(s)||xt.insertAfter(s,t),xt.insertAfter(a,t);let c=n.parentElement;c&&pt(e.dom,c)&&r(c),xt.remove(n),pt(e.dom,t)&&xt.remove(t)},Ct=ye(`dd`),wt=ye(`dt`),Tt=(e,t)=>{Ct(t)?Xe(t,`dt`):wt(t)&&xe(t).each(n=>St(e,n.dom,t.dom))},Et=e=>{wt(e)&&Xe(e,`dd`)},Dt=(e,t,n)=>{t===`Indent`?T(n,Et):T(n,t=>Tt(e,t))},Ot=(e,t)=>{if(tt(e))return{container:e,offset:t};let n=Ie.getNode(e,t);return tt(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&tt(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&tt(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},kt=e=>{let t=e.cloneRange(),n=Ot(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);let r=Ot(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},At=[`OL`,`UL`,`DL`],jt=At.join(`,`),Mt=(e,t)=>{let n=t||e.selection.getStart(!0);return e.dom.getParent(n,jt,Vt(e,n))},Nt=(e,t)=>u(e)&&t.length===1&&t[0]===e,Pt=e=>E(e.querySelectorAll(jt),rt),Ft=e=>{let t=Mt(e),n=e.selection.getSelectedBlocks();return Nt(t,n)?Pt(t):E(n,e=>rt(e)&&t!==e)},It=(e,t)=>se(Qe.map(t,t=>e.dom.getParent(t,`li,dd,dt`,Vt(e,t))||t)),Lt=e=>E(It(e,e.selection.getSelectedBlocks()),ot),Rt=e=>E(Lt(e),st),zt=(e,t)=>{let n=e.dom.getParents(t,`TD,TH`);return n.length>0?n[0]:e.getBody()},Bt=(e,t)=>!rt(t)&&!ot(t)&&te(At,n=>e.isValidChild(t.nodeName,n)),Vt=(e,t)=>O(e.dom.getParents(t,e.dom.isBlock),t=>Bt(e.schema,t)).getOr(e.getBody()),Ht=(e,t)=>oe(e.dom.getParents(t,`ol,ul`,Vt(e,t))),Ut=e=>{let t=Ht(e,e.selection.getStart()),n=E(e.selection.getSelectedBlocks(),it);return t.toArray().concat(n)},Wt=e=>Gt(e,Ut(e)),Gt=(e,t)=>se(w(t,t=>Ht(e,t).getOr(t))),Kt=e=>/\btox\-/.test(e.className),qt=(e,t)=>re(e,rt,R).exists(e=>e.nodeName===t&&!Kt(e)),Jt=(e,t)=>t!==null&&!e.dom.isEditable(t),Yt=e=>Jt(e,Mt(e)),Xt=(e,t)=>Jt(e,e.dom.getParent(t,`ol,ul,dl`)),Zt=(e,t)=>{let n=e.selection.getNode();return t({parents:e.dom.getParents(n),element:n}),e.on(`NodeChange`,t),()=>e.off(`NodeChange`,t)},Qt=(e,t)=>{let n=(t||document).createDocumentFragment();return T(e,e=>{n.appendChild(e.dom)}),fe.fromDom(n)},$t=(e,t,n)=>e.dispatch(`ListMutation`,{action:t,element:n}),en=(e=>t=>t.replace(e,``))(/^\s+|\s+$/g),tn=e=>e.length>0,nn=e=>!tn(e),rn=e=>e.style!==void 0&&d(e.style.getPropertyValue),an=(e,t,n)=>{if(!a(n))throw console.error(`Invalid call to CSS.set. Property `,t,`:: Value `,n,`:: Element `,e),Error(`CSS value must be a string: `+n);rn(e)&&e.style.setProperty(t,n)},on=(e,t,n)=>{let r=e.dom;an(r,t,n)},sn=(e,t)=>{je(e.item,t.list)},cn=e=>{for(let t=1;t<e.length;t++)sn(e[t-1],e[t])},ln=(e,t)=>{N(oe(e),j(t),sn)},un=(e,t)=>{let n={list:fe.fromTag(t,e),item:fe.fromTag(`li`,e)};return je(n.list,n.item),n},dn=(e,t,n)=>{let r=[];for(let i=0;i<n;i++)r.push(un(e,t.listType));return r},fn=(e,t)=>{for(let t=0;t<e.length-1;t++)on(e[t].item,`list-style-type`,`none`);oe(e).each(e=>{Ge(e.list,t.listAttributes),Ge(e.item,t.itemAttributes),Ne(e.item,t.content)})},pn=(e,t)=>{_e(e.list)!==t.listType&&(e.list=Xe(e.list,t.listType)),Ge(e.list,t.listAttributes)},mn=(e,t,n)=>{let r=fe.fromTag(`li`,e);return Ge(r,t),Ne(r,n),r},hn=(e,t)=>{je(e.list,t),e.item=t},gn=(e,t,n)=>{let r=t.slice(0,n.depth);return oe(r).each(t=>{hn(t,mn(e,n.itemAttributes,n.content)),pn(t,n)}),r},_n=(e,t,n)=>{let r=dn(e,n,n.depth-t.length);return cn(r),fn(r,n),ln(t,r),t.concat(r)},vn=(e,t)=>j(D(t,(t,n)=>n.depth>t.length?_n(e,t,n):gn(e,t,n),[])).map(e=>e.list),yn=e=>ge(e,`OL,UL`),B=e=>Te(e).exists(yn),bn=e=>Ee(e).exists(yn),xn=e=>e.depth>0,Sn=e=>e.isSelected,Cn=e=>{let t=Ce(e);return w(bn(e)?t.slice(0,-1):t,Je)},wn=(e,t,n)=>be(e).filter(I).map(r=>({depth:t,dirty:!1,isSelected:n,content:Cn(e),itemAttributes:Ke(e),listAttributes:Ke(r),listType:_e(r)})),Tn=(e,t)=>{switch(e){case`Indent`:t.depth++;break;case`Outdent`:t.depth--;break;case`Flatten`:t.depth=0}t.dirty=!0},En=(e,t)=>{e.listType=t.listType,e.listAttributes={...t.listAttributes}},Dn=e=>{e.listAttributes=Ue(e.listAttributes,(e,t)=>t!==`start`)},On=(e,t)=>{let n=e[t].depth,r=e=>e.depth===n&&!e.dirty,i=e=>e.depth<n;return re(ae(e.slice(0,t)),r,i).orThunk(()=>re(e.slice(t+1),r,i))},kn=e=>(T(e,(t,n)=>{On(e,n).fold(()=>{t.dirty&&Dn(t)},e=>En(t,e))}),e),An=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},jn=(e,t,n,r)=>Te(r).filter(yn).fold(()=>{t.each(e=>{me(e.start,r)&&n.set(!0)});let i=wn(r,e,n.get());t.each(e=>{me(e.end,r)&&n.set(!1)});let a=Ee(r).filter(yn).map(r=>Mn(e,t,n,r)).getOr([]);return i.toArray().concat(a)},r=>Mn(e,t,n,r)),Mn=(e,t,n,r)=>ie(Ce(r),r=>(yn(r)?Mn:jn)(e+1,t,n,r)),Nn=(e,t)=>{let n=An(!1);return w(e,e=>({sourceList:e,entries:Mn(0,t,n,e)}))},Pn=(e,t)=>w(kn(t),t=>{let n=Qt(t.content);return fe.fromDom(bt(e,n.dom))}),Fn=(e,t)=>{let n=kn(t);return vn(e.contentDocument,n).toArray()},In=(e,t)=>ie(ne(t,xn),t=>j(t).exists(xn)?Fn(e,t):Pn(e,t)),Ln=(e,t)=>{T(E(e,Sn),e=>Tn(t,e))},Rn=e=>{let t=w(Lt(e),fe.fromDom);return N(O(t,_(B)),O(ae(t),_(B)),(e,t)=>({start:e,end:t}))},zn=(e,t,n)=>{T(Nn(t,Rn(e)),t=>{Ln(t.entries,n);let r=In(e,t.entries);T(r,t=>{$t(e,n===`Indent`?`IndentList`:`OutdentList`,t.dom)}),Me(t.sourceList,r),Fe(t.sourceList)})},Bn=(e,t)=>{let n=ze(Wt(e)),r=ze(Rt(e)),i=!1;if(n.length||r.length){let a=e.selection.getBookmark();zn(e,n,t),Dt(e,t,r),e.selection.moveToBookmark(a),e.selection.setRng(kt(e.selection.getRng())),e.nodeChanged(),i=!0}return i},Vn=(e,t)=>!Yt(e)&&Bn(e,t),Hn=e=>Vn(e,`Indent`),Un=e=>Vn(e,`Outdent`),Wn=e=>Vn(e,`Flatten`),Gn=e=>e===`﻿`,Kn=(e,t,n)=>De(e,t,n).isSome(),qn=(e,t)=>Kn(e,g(me,t));var Jn=tinymce.util.Tools.resolve(`tinymce.dom.BookmarkManager`);let Yn=Ze.DOM,Xn=e=>{let t={},n=n=>{let r=e[n?`startContainer`:`endContainer`],i=e[n?`startOffset`:`endOffset`];if(nt(r)){let e=Yn.create(`span`,{"data-mce-type":`bookmark`});r.hasChildNodes()?(i=Math.min(i,r.childNodes.length-1),n?r.insertBefore(e,r.childNodes[i]):Yn.insertAfter(e,r.childNodes[i])):r.appendChild(e),r=e,i=0}t[n?`startContainer`:`endContainer`]=r,t[n?`startOffset`:`endOffset`]=i};return n(!0),e.collapsed||n(),t},Zn=e=>{let t=t=>{let n=e=>{let t=e.parentNode?.firstChild,n=0;for(;t;){if(t===e)return n;(!nt(t)||t.getAttribute(`data-mce-type`)!==`bookmark`)&&n++,t=t.nextSibling}return-1},r=e[t?`startContainer`:`endContainer`],i=e[t?`startOffset`:`endOffset`];if(r){if(nt(r)&&r.parentNode){let e=r;i=n(r),r=r.parentNode,Yn.remove(e),!r.hasChildNodes()&&Yn.isBlock(r)&&r.appendChild(Yn.create(`br`))}e[t?`startContainer`:`endContainer`]=r,e[t?`startOffset`:`endOffset`]=i}};t(!0),t();let n=Yn.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),kt(n)},Qn=e=>{switch(e){case`UL`:return`ToggleUlList`;case`OL`:return`ToggleOlList`;case`DL`:return`ToggleDLList`}},$n=(e,t,n)=>{let r=n[`list-style-type`]?n[`list-style-type`]:null;e.setStyle(t,`list-style-type`,r)},er=(e,t)=>{Qe.each(t,(t,n)=>{e.setAttribute(n,t)})},tr=(e,t,n)=>{er(t,n[`list-attributes`]),Qe.each(e.select(`li`,t),e=>{er(e,n[`list-item-attributes`])})},nr=(e,t,n)=>{$n(e,t,n),tr(e,t,n)},rr=(e,t,n)=>{Qe.each(n,n=>e.setStyle(t,n,``))},ir=(e,t)=>u(t)&&!z(t,e.schema.getBlockElements()),ar=(e,t,n,r)=>{let i=t[n?`startContainer`:`endContainer`],a=t[n?`startOffset`:`endOffset`];nt(i)&&(i=i.childNodes[Math.min(a,i.childNodes.length-1)]||i),!n&&ct(i.nextSibling)&&(i=i.nextSibling);let o=t=>{for(;!e.dom.isBlock(t)&&t.parentNode&&r!==t;)t=t.parentNode;return t},s=(t,n)=>{let r=new Le(t,o(t)),i=n?`next`:`prev`,a;for(;a=r[i]();)if(!(dt(e,a)||Gn(a.textContent)||a.textContent?.length===0))return y.some(a);return y.none()};if(n&&tt(i))if(Gn(i.textContent))i=s(i,!1).getOr(i);else for(i.parentNode!==null&&ir(e,i.parentNode)&&(i=i.parentNode);i.previousSibling!==null&&(ir(e,i.previousSibling)||tt(i.previousSibling));)i=i.previousSibling;if(!n&&tt(i))if(Gn(i.textContent))i=s(i,!0).getOr(i);else for(i.parentNode!==null&&ir(e,i.parentNode)&&(i=i.parentNode);i.nextSibling!==null&&(ir(e,i.nextSibling)||tt(i.nextSibling));)i=i.nextSibling;for(;i.parentNode!==r;){let t=i.parentNode;if(ut(e,i)||/^(TD|TH)$/.test(t.nodeName))return i;i=t}return i},or=(e,t,n)=>{let r=[],i=e.dom,a=ar(e,t,!0,n),o=ar(e,t,!1,n),s,c=[];for(let e=a;e&&(c.push(e),e!==o);e=e.nextSibling);return Qe.each(c,t=>{var a;if(ut(e,t)){r.push(t),s=null;return}if(i.isBlock(t)||ct(t)){ct(t)&&i.remove(t),s=null;return}let o=t.nextSibling;if(Jn.isBookmarkNode(t)&&(rt(o)||ut(e,o)||!o&&t.parentNode===n)){s=null;return}s||(s=i.create(`p`),(a=t.parentNode)==null||a.insertBefore(s,t),r.push(s)),s.appendChild(t)}),r},sr=(e,t,n)=>{let r=e.getStyle(t,`list-style-type`),i=n?n[`list-style-type`]:``;return i=i===null?``:i,r===i},cr=(e,t)=>{let n=e.selection.getStart(!0),r=ar(e,t,!0,e.getBody());return qn(fe.fromDom(r),fe.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:n},lr=(e,t,n)=>{let r=e.selection.getRng(),i=`LI`,a=Vt(e,cr(e,r)),o=e.dom;if(o.getContentEditable(e.selection.getNode())===`false`)return;t=t.toUpperCase(),t===`DL`&&(i=`DT`);let s=Xn(r),c=E(or(e,r,a),e.dom.isEditable);Qe.each(c,r=>{let a,s=r.previousSibling,c=r.parentNode;ot(c)||(s&&rt(s)&&s.nodeName===t&&sr(o,s,n)?(a=s,r=o.rename(r,i),s.appendChild(r)):(a=o.create(t),c.insertBefore(a,r),a.appendChild(r),r=o.rename(r,i)),rr(o,r,[`margin`,`margin-right`,`margin-bottom`,`margin-left`,`margin-top`,`padding`,`padding-right`,`padding-bottom`,`padding-left`,`padding-top`]),nr(o,a,n),mr(e.dom,a))}),e.selection.setRng(Zn(s))},ur=(e,t)=>rt(e)&&e.nodeName===t?.nodeName,dr=(e,t,n)=>e.getStyle(t,`list-style-type`,!0)===e.getStyle(n,`list-style-type`,!0),fr=(e,t)=>e.className===t.className,pr=(e,t,n)=>ur(t,n)&&dr(e,t,n)&&fr(t,n),mr=(e,t)=>{let n,r=t.nextSibling;if(pr(e,t,r)){let i=r;for(;n=i.firstChild;)t.appendChild(n);e.remove(i)}if(r=t.previousSibling,pr(e,t,r)){let i=r;for(;n=i.lastChild;)t.insertBefore(n,t.firstChild);e.remove(i)}},hr=(e,t,n,r)=>{if(t.nodeName!==n){let i=e.dom.rename(t,n);nr(e.dom,i,r),$t(e,Qn(n),i)}else nr(e.dom,t,r),$t(e,Qn(n),t)},V=(e,t,n,r)=>{if(t.classList.forEach((e,n,r)=>{e.startsWith(`tox-`)&&(r.remove(e),r.length===0&&t.removeAttribute(`class`))}),t.nodeName!==n){let i=e.dom.rename(t,n);nr(e.dom,i,r),$t(e,Qn(n),i)}else nr(e.dom,t,r),$t(e,Qn(n),t)},gr=(e,t,n,r,i)=>{let a=rt(t);if(a&&t.nodeName===r&&!_r(i)&&!Kt(t))Wn(e);else{lr(e,r,i);let o=Xn(e.selection.getRng()),s=a?[t,...n]:n,c=a&&Kt(t)?V:hr;Qe.each(s,t=>{c(e,t,r,i)}),e.selection.setRng(Zn(o))}},_r=e=>`list-style-type`in e,vr=(e,t,n,r)=>{if(t!==e.getBody())if(t)if(t.nodeName===n&&!_r(r)&&!Kt(t))Wn(e);else{let i=Xn(e.selection.getRng());Kt(t)&&t.classList.forEach((e,n,r)=>{e.startsWith(`tox-`)&&(r.remove(e),r.length===0&&t.removeAttribute(`class`))}),nr(e.dom,t,r);let a=e.dom.rename(t,n);mr(e.dom,a),e.selection.setRng(Zn(i)),lr(e,n,r),$t(e,Qn(n),a)}else lr(e,n,r),$t(e,Qn(n),t)},yr=(e,t,n)=>{let r=Mt(e);if(Xt(e,r))return;let i=Ft(e),a=o(n)?n:{};i.length>0?gr(e,r,i,t,a):vr(e,r,t,a)},br=Ze.DOM,xr=(e,t)=>{let n=t.parentElement;if(n&&n.nodeName===`LI`&&n.firstChild===t){let r=n.previousSibling;r&&r.nodeName===`LI`?(r.appendChild(t),pt(e,n)&&br.remove(n)):br.setStyle(n,`listStyleType`,`none`)}if(rt(n)){let e=n.previousSibling;e&&e.nodeName===`LI`&&e.appendChild(t)}},Sr=(e,t)=>{let n=Qe.grep(e.select(`ol,ul`,t));Qe.each(n,t=>{xr(e,t)})},Cr=(e,t,n,r)=>{let i=t.startContainer,a=t.startOffset;if(tt(i)&&(n?a<i.data.length:a>0))return i;let o=e.schema.getNonEmptyElements();nt(i)&&(i=Ie.getNode(i,a));let s=new Le(i,r);n&&ft(e.dom,i)&&s.next();let c=n?s.next.bind(s):s.prev2.bind(s);for(;i=c();)if(i.nodeName===`LI`&&!i.hasChildNodes()||o[i.nodeName]||tt(i)&&i.data.length>0)return i;return null},wr=(e,t)=>{let n=t.childNodes;return n.length===1&&!rt(n[0])&&e.isBlock(n[0])},Tr=(e,t)=>{wr(e,t)&&e.remove(t.firstChild,!0)},Er=(e,t,n)=>{let r,i=wr(e,n)?n.firstChild:n;if(Tr(e,t),!pt(e,t,!0))for(;r=t.firstChild;)i.appendChild(r)},Dr=(e,t,n)=>{let r,i=t.parentNode;if(!mt(e,t)||!mt(e,n))return;rt(n.lastChild)&&(r=n.lastChild),i===n.lastChild&&ct(i.previousSibling)&&e.remove(i.previousSibling);let a=n.lastChild;a&&ct(a)&&t.hasChildNodes()&&e.remove(a),pt(e,n,!0)&&Pe(fe.fromDom(n)),Er(e,t,n),r&&n.appendChild(r);let o=he(fe.fromDom(n),fe.fromDom(t))?e.getParents(t,rt,n):[];e.remove(t),T(o,t=>{pt(e,t)&&t!==e.getRoot()&&e.remove(t)})},Or=(e,t,n)=>{Pe(fe.fromDom(n)),Dr(e.dom,t,n),e.selection.setCursorLocation(n,0)},kr=(e,t,n,r)=>{let i=e.dom;if(i.isEmpty(r))Or(e,n,r);else{let a=Xn(t);Dr(i,n,r),e.selection.setRng(Zn(a))}},Ar=(e,t,n,r)=>{let i=Xn(t);Dr(e.dom,n,r);let a=Zn(i);e.selection.setRng(a)},jr=(e,t)=>{let n=e.dom,r=e.selection,i=zt(e,r.getStart()),a=n.getParent(r.getStart(),`LI`,i);if(a){let o=a.parentElement;if(o===e.getBody()&&pt(n,o))return!0;let s=kt(r.getRng()),c=n.getParent(Cr(e,s,t,i),`LI`,i);if(c&&c!==a)return e.undoManager.transact(()=>{t?kr(e,s,c,a):lt(a)?Un(e):Ar(e,s,a,c)}),!0;if(!c&&!t&&s.startOffset===0&&s.endOffset===0)return e.undoManager.transact(()=>{Wn(e)}),!0}return!1},Mr=(e,t,n)=>{let r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)},Nr=(e,t)=>{let n=e.dom,r=e.selection.getStart(),i=zt(e,r),a=n.getParent(r,n.isBlock,i);if(a&&n.isEmpty(a)){let r=kt(e.selection.getRng()),o=n.getParent(Cr(e,r,t,i),`LI`,i);if(o){let s=e=>C([`td`,`th`,`caption`],_e(e)),c=e=>e.dom===i;return M(Oe(fe.fromDom(o),s,c),Oe(fe.fromDom(r.startContainer),s,c),me)?(e.undoManager.transact(()=>{let r=o.parentNode;Mr(n,a,i),mr(n,r),e.selection.select(o,!0),e.selection.collapse(t)}),!0):!1}}return!1},Pr=(e,t)=>jr(e,t)||Nr(e,t),Fr=e=>{let t=e.selection.getStart(),n=zt(e,t);return e.dom.getParent(t,`LI,DT,DD`,n)||Lt(e).length>0},Ir=e=>Fr(e)?(e.undoManager.transact(()=>{e.execCommand(`Delete`),Sr(e.dom,e.getBody())}),!0):!1,Lr=(e,t)=>{let n=e.selection;return!Xt(e,n.getNode())&&(n.isCollapsed()?Pr(e,t):Ir(e))},Rr=e=>{e.on(`ExecCommand`,t=>{let n=t.command.toLowerCase();(n===`delete`||n===`forwarddelete`)&&Fr(e)&&Sr(e.dom,e.getBody())}),e.on(`keydown`,t=>{t.keyCode===Re.BACKSPACE?Lr(e,!1)&&t.preventDefault():t.keyCode===Re.DELETE&&Lr(e,!0)&&t.preventDefault()})},zr=e=>({backspaceDelete:t=>{Lr(e,t)}}),Br=(e,t)=>{let n=Mt(e);n===null||Xt(e,n)||e.undoManager.transact(()=>{o(t.styles)&&e.dom.setStyles(n,t.styles),o(t.attrs)&&Be(t.attrs,(t,r)=>e.dom.setAttrib(n,r,t))})},Vr=e=>D(w(ae(en(e).split(``)),(e,t)=>{let n=e.toUpperCase().charCodeAt(0)-65+1;return 26**t*n}),(e,t)=>e+t,0),Hr=e=>{if(e--,e<0)return``;{let t=e%26;return Hr(Math.floor(e/26))+String.fromCharCode(65+t)}},Ur=e=>/^[A-Z]+$/.test(e),Wr=e=>/^[a-z]+$/.test(e),Gr=e=>/^[0-9]+$/.test(e),Kr=e=>Gr(e)?2:Ur(e)?0:Wr(e)?1:nn(e)?3:4,qr=e=>{switch(Kr(e)){case 2:return y.some({listStyleType:y.none(),start:e});case 0:return y.some({listStyleType:y.some(`upper-alpha`),start:Vr(e).toString()});case 1:return y.some({listStyleType:y.some(`lower-alpha`),start:Vr(e).toString()});case 3:return y.some({listStyleType:y.none(),start:``});case 4:return y.none()}},Jr=e=>{let t=parseInt(e.start,10);return ce(e.listStyleType,`upper-alpha`)?Hr(t):ce(e.listStyleType,`lower-alpha`)?Hr(t).toLowerCase():e.start},Yr=e=>{let t=Mt(e);!at(t)||Xt(e,t)||e.windowManager.open({title:`List Properties`,body:{type:`panel`,items:[{type:`input`,name:`start`,label:`Start list at number`,inputMode:`numeric`}]},initialData:{start:Jr({start:e.dom.getAttrib(t,`start`,`1`),listStyleType:y.from(e.dom.getStyle(t,`list-style-type`))})},buttons:[{type:`cancel`,name:`cancel`,text:`Cancel`},{type:`submit`,name:`save`,text:`Save`,primary:!0}],onSubmit:t=>{qr(t.getData().start).each(t=>{e.execCommand(`mceListUpdate`,!1,{attrs:{start:t.start===`1`?``:t.start},styles:{"list-style-type":t.listStyleType.getOr(``)}})}),t.close()}})},Xr=(e,t)=>()=>{let n=Mt(e);return u(n)&&n.nodeName===t},Zr=e=>{e.addCommand(`mceListProps`,()=>{Yr(e)})},Qr=e=>{e.on(`BeforeExecCommand`,t=>{let n=t.command.toLowerCase();n===`indent`?Hn(e):n===`outdent`&&Un(e)}),e.addCommand(`InsertUnorderedList`,(t,n)=>{yr(e,`UL`,n)}),e.addCommand(`InsertOrderedList`,(t,n)=>{yr(e,`OL`,n)}),e.addCommand(`InsertDefinitionList`,(t,n)=>{yr(e,`DL`,n)}),e.addCommand(`RemoveList`,()=>{Wn(e)}),Zr(e),e.addCommand(`mceListUpdate`,(t,n)=>{o(n)&&Br(e,n)}),e.addQueryStateHandler(`InsertUnorderedList`,Xr(e,`UL`)),e.addQueryStateHandler(`InsertOrderedList`,Xr(e,`OL`)),e.addQueryStateHandler(`InsertDefinitionList`,Xr(e,`DL`))};var $r=tinymce.util.Tools.resolve(`tinymce.html.Node`);let ei=e=>e.type===3,ti=e=>e.length===0,ni=e=>{let t=(t,n)=>{let r=$r.create(`li`);T(t,e=>r.append(e)),n?e.insert(r,n,!0):e.append(r)},n=D(e.children(),(e,n)=>ei(n)?[...e,n]:!ti(e)&&!ei(n)?(t(e,n),[]):e,[]);ti(n)||t(n)},ri=e=>{e.on(`PreInit`,()=>{let{parser:t}=e;t.addNodeFilter(`ul,ol`,e=>T(e,ni))})},ii=e=>{e.on(`keydown`,t=>{t.keyCode!==Re.TAB||Re.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?Un(e):Hn(e))&&t.preventDefault()})})},ai=e=>{_t(e)&&ii(e),Rr(e)},oi=(e,t)=>n=>(n.setEnabled(e.selection.isEditable()),Zt(e,r=>{n.setActive(qt(r.parents,t)),n.setEnabled(!Xt(e,r.element)&&e.selection.isEditable())})),si=e=>{let t=t=>()=>e.execCommand(t);e.hasPlugin(`advlist`)||(e.ui.registry.addToggleButton(`numlist`,{icon:`ordered-list`,active:!1,tooltip:`Numbered list`,onAction:t(`InsertOrderedList`),onSetup:oi(e,`OL`)}),e.ui.registry.addToggleButton(`bullist`,{icon:`unordered-list`,active:!1,tooltip:`Bullet list`,onAction:t(`InsertUnorderedList`),onSetup:oi(e,`UL`)}))},ci=(e,t)=>n=>Zt(e,r=>n.setEnabled(qt(r.parents,t)&&!Xt(e,r.element))),li=e=>{let t={text:`List properties...`,icon:`ordered-list`,onAction:()=>e.execCommand(`mceListProps`),onSetup:ci(e,`OL`)};e.ui.registry.addMenuItem(`listprops`,t),e.ui.registry.addContextMenu(`lists`,{update:t=>at(Mt(e,t))?[`listprops`]:[]})};e.add(`lists`,e=>(gt(e),ri(e),e.hasPlugin(`rtc`,!0)?Zr(e):(ai(e),Qr(e)),si(e),li(e),zr(e)))})()}))(),o((()=>{(function(){"use strict";var e=tinymce.util.Tools.resolve(`tinymce.PluginManager`);let t=(e,t,n)=>n(e,t.prototype)?!0:e.constructor?.name===t.name,n=e=>{let n=typeof e;return e===null?`null`:n===`object`&&Array.isArray(e)?`array`:n===`object`&&t(e,String,(e,t)=>t.isPrototypeOf(e))?`string`:n},r=e=>t=>n(t)===e,i=e=>t=>typeof t===e,a=e=>t=>e===t,o=r(`string`),s=r(`array`),c=i(`boolean`),l=a(void 0),u=e=>e==null,d=e=>!u(e),f=i(`function`),p=i(`number`),m=()=>{},h=(e,t)=>n=>e(t(n)),g=e=>()=>e,_=e=>e,v=(e,t)=>e===t;function y(e,...t){return(...n)=>{let r=t.concat(n);return e.apply(null,r)}}let b=e=>{e()},x=g(!1),ee=g(!0);class S{constructor(e,t){this.tag=e,this.value=t}static some(e){return new S(!0,e)}static none(){return S.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?S.some(e(this.value)):S.none()}bind(e){return this.tag?e(this.value):S.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:S.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(e??`Called getOrDie on None`)}static from(e){return d(e)?S.some(e):S.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:`none()`}}S.singletonNone=new S(!1);let C=Object.keys,te=Object.hasOwnProperty,w=(e,t)=>{let n=C(e);for(let r=0,i=n.length;r<i;r++){let i=n[r],a=e[i];t(a,i)}},T=e=>(t,n)=>{e[n]=t},E=(e,t,n,r)=>{w(e,(e,i)=>{(t(e,i)?n:r)(e,i)})},ne=(e,t)=>{let n={};return E(e,t,T(n),m),n},D=(e,t)=>{let n=[];return w(e,(e,r)=>{n.push(t(e,r))}),n},re=e=>D(e,_),O=e=>C(e).length,k=(e,t)=>ie(e,t)?S.from(e[t]):S.none(),ie=(e,t)=>te.call(e,t),ae=(e,t)=>ie(e,t)&&e[t]!==void 0&&e[t]!==null,A=e=>{for(let t in e)if(te.call(e,t))return!1;return!0},j=Array.prototype.indexOf,oe=Array.prototype.push,se=(e,t)=>j.call(e,t),ce=(e,t)=>se(e,t)>-1,M=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];if(t(r,n))return!0}return!1},N=(e,t)=>{let n=[];for(let r=0;r<e;r++)n.push(t(r));return n},P=(e,t)=>{let n=e.length,r=Array(n);for(let i=0;i<n;i++){let n=e[i];r[i]=t(n,i)}return r},le=(e,t)=>{for(let n=0,r=e.length;n<r;n++){let r=e[n];t(r,n)}},ue=(e,t)=>{for(let n=e.length-1;n>=0;n--){let r=e[n];t(r,n)}},de=(e,t)=>{let n=[],r=[];for(let i=0,a=e.length;i<a;i++){let a=e[i];(t(a,i)?n:r).push(a)}return{pass:n,fail:r}},fe=(e,t)=>{let n=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];t(i,r)&&n.push(i)}return n},pe=(e,t,n)=>(ue(e,(e,r)=>{n=t(n,e,r)}),n),me=(e,t,n)=>(le(e,(e,r)=>{n=t(n,e,r)}),n),he=(e,t,n)=>{for(let r=0,i=e.length;r<i;r++){let i=e[r];if(t(i,r))return S.some(i);if(n(i,r))break}return S.none()},ge=(e,t)=>he(e,t,x),F=e=>{let t=[];for(let n=0,r=e.length;n<r;++n){if(!s(e[n]))throw Error(`Arr.flatten item `+n+` was not an array, input: `+e);oe.apply(t,e[n])}return t},_e=(e,t)=>F(P(e,t)),ve=(e,t)=>{for(let n=0,r=e.length;n<r;++n){let r=e[n];if(t(r,n)!==!0)return!1}return!0},I=(e,t)=>{let n={};for(let r=0,i=e.length;r<i;r++){let i=e[r];n[String(i)]=t(i,r)}return n},ye=(e,t)=>t>=0&&t<e.length?S.some(e[t]):S.none(),be=e=>ye(e,0),xe=e=>ye(e,e.length-1),Se=(e,t)=>{for(let n=0;n<e.length;n++){let r=t(e[n],n);if(r.isSome())return r}return S.none()},Ce=(e,t)=>{let n=(t||document).createElement(`div`);if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){let t=`HTML does not have a single root node`;throw console.error(t,e),Error(t)}return Ee(n.childNodes[0])},we=(e,t)=>Ee((t||document).createElement(e)),Te=(e,t)=>Ee((t||document).createTextNode(e)),Ee=e=>{if(e==null)throw Error(`Node cannot be null or undefined`);return{dom:e}},De={fromHtml:Ce,fromTag:we,fromText:Te,fromDom:Ee,fromPoint:(e,t,n)=>S.from(e.dom.elementFromPoint(t,n)).map(Ee)},Oe=(e,t)=>{let n=e.dom;if(n.nodeType!==1)return!1;{let e=n;if(e.matches!==void 0)return e.matches(t);if(e.msMatchesSelector!==void 0)return e.msMatchesSelector(t);if(e.webkitMatchesSelector!==void 0)return e.webkitMatchesSelector(t);if(e.mozMatchesSelector!==void 0)return e.mozMatchesSelector(t);throw Error(`Browser lacks native selectors`)}},ke=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,Ae=(e,t)=>{let n=t===void 0?document:t.dom;return ke(n)?[]:P(n.querySelectorAll(e),De.fromDom)},je=(e,t)=>{let n=t===void 0?document:t.dom;return ke(n)?S.none():S.from(n.querySelector(e)).map(De.fromDom)},Me=(e,t)=>e.dom===t.dom,Ne=Oe;typeof window<`u`?window:Function(`return this;`)();let Pe=e=>e.dom.nodeName.toLowerCase(),Fe=e=>e.dom.nodeType,Ie=e=>t=>Fe(t)===e,Le=e=>Fe(e)===8||Pe(e)===`#comment`,Re=Ie(1),ze=Ie(3),L=Ie(9),Be=Ie(11),Ve=e=>t=>Re(t)&&Pe(t)===e,He=e=>De.fromDom(e.dom.ownerDocument),Ue=e=>L(e)?e:He(e),We=e=>S.from(e.dom.parentNode).map(De.fromDom),Ge=(e,t)=>{let n=f(t)?t:x,r=e.dom,i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){let e=r.parentNode,t=De.fromDom(e);if(i.push(t),n(t)===!0)break;r=e}return i},Ke=e=>S.from(e.dom.previousSibling).map(De.fromDom),qe=e=>S.from(e.dom.nextSibling).map(De.fromDom),Je=e=>P(e.dom.childNodes,De.fromDom),Ye=(e,t)=>{let n=e.dom.childNodes;return S.from(n[t]).map(De.fromDom)},Xe=e=>Ye(e,0),Ze=e=>Be(e)&&d(e.dom.host),Qe=f(Element.prototype.attachShadow)&&f(Node.prototype.getRootNode)?e=>De.fromDom(e.dom.getRootNode()):Ue,$e=e=>{let t=Qe(e);return Ze(t)?S.some(t):S.none()},et=e=>De.fromDom(e.dom.host),tt=e=>{let t=ze(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;let n=t.ownerDocument;return $e(De.fromDom(t)).fold(()=>n.body.contains(t),h(tt,et))};var nt=(e,t,n,r,i)=>e(n,r)?S.some(n):f(i)&&i(n)?S.none():t(n,r,i);let rt=(e,t,n)=>{let r=e.dom,i=f(n)?n:x;for(;r.parentNode;){r=r.parentNode;let e=De.fromDom(r);if(t(e))return S.some(e);if(i(e))break}return S.none()},it=(e,t,n)=>nt((e,t)=>t(e),rt,e,t,n),at=(e,t)=>ge(e.dom.childNodes,e=>t(De.fromDom(e))).map(De.fromDom),ot=(e,t,n)=>rt(e,e=>Oe(e,t),n),st=(e,t)=>at(e,e=>Oe(e,t)),R=(e,t)=>je(t,e),ct=(e,t,n)=>nt((e,t)=>Oe(e,t),ot,e,t,n),lt=e=>ct(e,`[contenteditable]`),ut=(e,t=!1)=>tt(e)?e.dom.isContentEditable:lt(e).fold(g(t),e=>z(e)===`true`),z=e=>e.dom.contentEditable,dt=e=>e.nodeName.toLowerCase(),ft=e=>De.fromDom(e.getBody()),pt=e=>t=>Me(t,ft(e)),mt=e=>e?e.replace(/px$/,``):``,ht=e=>/^\d+(\.\d+)?$/.test(e)?e+`px`:e,gt=e=>De.fromDom(e.selection.getStart()),_t=e=>De.fromDom(e.selection.getEnd()),vt=e=>it(e,Ve(`table`)).forall(ut),yt=(e,t)=>fe(Je(e),t),bt=(e,t)=>{let n=[];return le(Je(e),e=>{t(e)&&(n=n.concat([e])),n=n.concat(bt(e,t))}),n},xt=(e,t)=>yt(e,e=>Oe(e,t)),St=(e,t)=>Ae(t,e),Ct=(e,t,n)=>{if(o(n)||c(n)||p(n))e.setAttribute(t,n+``);else throw console.error(`Invalid call to Attribute.set. Key `,t,`:: Value `,n,`:: Element `,e),Error(`Attribute value was not simple`)},wt=(e,t,n)=>{Ct(e.dom,t,n)},Tt=(e,t)=>{let n=e.dom;w(t,(e,t)=>{Ct(n,t,e)})},Et=(e,t)=>{let n=e.dom.getAttribute(t);return n===null?void 0:n},Dt=(e,t)=>S.from(Et(e,t)),Ot=(e,t)=>{e.dom.removeAttribute(t)},kt=e=>me(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),At=(e,t,n=v)=>e.exists(e=>n(e,t)),jt=e=>{let t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},Mt=(e,t,n)=>e.isSome()&&t.isSome()?S.some(n(e.getOrDie(),t.getOrDie())):S.none(),Nt=e=>e.bind(_),Pt=(e,t)=>e?S.some(t):S.none(),Ft=(e,t)=>e.substring(t),It=(e,t,n)=>t===``||e.length>=t.length&&e.substr(n,n+t.length)===t,Lt=(e,t)=>Rt(e,t)?Ft(e,t.length):e,Rt=(e,t)=>It(e,t,0),zt=(e=>t=>t.replace(e,``))(/^\s+|\s+$/g),Bt=e=>e.length>0,Vt=e=>!Bt(e),Ht=(e,t=10)=>{let n=parseInt(e,t);return isNaN(n)?S.none():S.some(n)},Ut=e=>{let t=parseFloat(e);return isNaN(t)?S.none():S.some(t)},Wt=e=>e.style!==void 0&&f(e.style.getPropertyValue),Gt=(e,t,n)=>{if(!o(n))throw console.error(`Invalid call to CSS.set. Property `,t,`:: Value `,n,`:: Element `,e),Error(`CSS value must be a string: `+n);Wt(e)&&e.style.setProperty(t,n)},Kt=(e,t)=>{Wt(e)&&e.style.removeProperty(t)},qt=(e,t,n)=>{let r=e.dom;Gt(r,t,n)},Jt=(e,t)=>{let n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return r===``&&!tt(e)?Yt(n,t):r},Yt=(e,t)=>Wt(e)?e.style.getPropertyValue(t):``,Xt=(e,t)=>{let n=e.dom,r=Yt(n,t);return S.from(r).filter(e=>e.length>0)},Zt=(e,t)=>{let n=e.dom;Kt(n,t),At(Dt(e,`style`).map(zt),``)&&Ot(e,`style`)},Qt=(e,t,n=0)=>Dt(e,t).map(e=>parseInt(e,10)).getOr(n),$t=(e,t)=>en(e,t,ee),en=(e,t,n)=>_e(Je(e),e=>Oe(e,t)?n(e)?[e]:[]:en(e,t,n)),tn=[`tfoot`,`thead`,`tbody`,`colgroup`],nn=e=>ce(tn,e),rn=(e,t)=>({rows:e,columns:t}),an=(e,t,n)=>({element:e,rowspan:t,colspan:n}),on=(e,t,n,r,i,a)=>({element:e,rowspan:t,colspan:n,row:r,column:i,isLocked:a}),sn=(e,t,n)=>({element:e,cells:t,section:n}),cn=(e,t,n,r)=>({startRow:e,startCol:t,finishRow:n,finishCol:r}),ln=(e,t,n)=>({element:e,colspan:t,column:n}),un=(e,t)=>({element:e,columns:t}),dn=(e,t,n=x)=>n(t)?S.none():ce(e,Pe(t))?S.some(t):ot(t,e.join(`,`),e=>Oe(e,`table`)||n(e)),fn=(e,t)=>dn([`td`,`th`],e,t),pn=e=>$t(e,`th,td`),mn=e=>Oe(e,`colgroup`)?xt(e,`col`):_e(_n(e),e=>xt(e,`col`)),hn=(e,t)=>ct(e,`table`,t),gn=e=>$t(e,`tr`),_n=e=>hn(e).fold(g([]),e=>xt(e,`colgroup`)),vn=(e,t)=>P(e,e=>Pe(e)===`colgroup`?sn(e,P(mn(e),e=>an(e,1,Qt(e,`span`,1))),`colgroup`):sn(e,P(pn(e),e=>an(e,Qt(e,`rowspan`,1),Qt(e,`colspan`,1))),t(e))),yn=e=>We(e).map(e=>{let t=Pe(e);return nn(t)?t:`tbody`}).getOr(`tbody`),B=e=>{let t=gn(e);return vn([..._n(e),...t],yn)},bn=e=>Dt(e,`data-snooker-locked-cols`).bind(e=>S.from(e.match(/\d+/g))).map(e=>I(e,ee)),xn=(e,t)=>e+`,`+t,Sn=(e,t,n)=>S.from(e.access[xn(t,n)]),Cn=(e,t,n)=>{let r=wn(e,e=>n(t,e.element));return r.length>0?S.some(r[0]):S.none()},wn=(e,t)=>fe(_e(e.all,e=>e.cells),t),Tn=e=>{let t={},n=0;return le(e.cells,e=>{let r=e.colspan;N(r,i=>{let a=n+i;t[a]=ln(e.element,r,a)}),n+=r}),t},En=e=>{let t={},n=[],r=be(e).map(e=>e.element).bind(hn).bind(bn).getOr({}),i=0,a=0,o=0,{pass:s,fail:c}=de(e,e=>e.section===`colgroup`);le(c,e=>{let s=[];le(e.cells,e=>{let n=0;for(;t[xn(o,n)]!==void 0;)n++;let i=ae(r,n.toString()),c=on(e.element,e.rowspan,e.colspan,o,n,i);for(let r=0;r<e.colspan;r++)for(let i=0;i<e.rowspan;i++){let e=o+i,s=n+r,l=xn(e,s);t[l]=c,a=Math.max(a,s+1)}s.push(c)}),i++,n.push(sn(e.element,s,e.section)),o++});let{columns:l,colgroups:u}=xe(s).map(e=>{let t=Tn(e);return{colgroups:[un(e.element,re(t))],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:rn(i,a),access:t,all:n,columns:l,colgroups:u}},Dn={fromTable:e=>En(B(e)),generate:En,getAt:Sn,findItem:Cn,filterItems:wn,justCells:e=>_e(e.all,e=>e.cells),justColumns:e=>re(e.columns),hasColumns:e=>C(e.columns).length>0,getColumnAt:(e,t)=>S.from(e.columns[t])};var On=tinymce.util.Tools.resolve(`tinymce.util.Tools`);let kn=(e,t,n)=>{let r=e.select(`td,th`,t),i;for(let t=0;t<r.length;t++){let a=e.getStyle(r[t],n);if(l(i)&&(i=a),i!==a)return``}return i},An=(e,t,n)=>{On.each(`left center right`.split(` `),r=>{r!==n&&e.formatter.remove(`align`+r,{},t)}),n&&e.formatter.apply(`align`+n,{},t)},jn=(e,t,n)=>{On.each(`top middle bottom`.split(` `),r=>{r!==n&&e.formatter.remove(`valign`+r,{},t)}),n&&e.formatter.apply(`valign`+n,{},t)},Mn=(e,t,n)=>{e.dispatch(`TableModified`,{...n,table:t})},Nn=(e,t)=>Ut(e).getOr(t),Pn=(e,t,n)=>Nn(Jt(e,t),n),Fn=(e,t,n,r)=>{let i=Pn(e,`padding-${n}`,0),a=Pn(e,`padding-${r}`,0),o=Pn(e,`border-${n}-width`,0),s=Pn(e,`border-${r}-width`,0);return t-i-a-o-s},In=(e,t)=>{let n=e.dom,r=n.getBoundingClientRect().width||n.offsetWidth;return t===`border-box`?r:Fn(e,r,`left`,`right`)},Ln=e=>In(e,`content-box`);var Rn=tinymce.util.Tools.resolve(`tinymce.Env`);let zn=N(5,e=>{let t=`${e+1}px`;return{title:t,value:t}}),Bn=P([`Solid`,`Dotted`,`Dashed`,`Double`,`Groove`,`Ridge`,`Inset`,`Outset`,`None`,`Hidden`],e=>({title:e,value:e.toLowerCase()})),Vn=`100%`,Hn=e=>{let t=e.dom,n=t.getParent(e.selection.getStart(),t.isBlock)??e.getBody();return Ln(De.fromDom(n))+`px`},Un=(e,t)=>lr(e)||!tr(e)?t:cr(e)?{...t,width:Hn(e)}:{...t,width:Vn},Wn=(e,t)=>lr(e)||tr(e)?t:cr(e)?{...t,width:Hn(e)}:{...t,width:Vn},Gn=e=>t=>t.options.get(e),Kn=e=>{let t=e.options.register;t(`table_border_widths`,{processor:`object[]`,default:zn}),t(`table_border_styles`,{processor:`object[]`,default:Bn}),t(`table_cell_advtab`,{processor:`boolean`,default:!0}),t(`table_row_advtab`,{processor:`boolean`,default:!0}),t(`table_advtab`,{processor:`boolean`,default:!0}),t(`table_appearance_options`,{processor:`boolean`,default:!0}),t(`table_grid`,{processor:`boolean`,default:!Rn.deviceType.isTouch()}),t(`table_cell_class_list`,{processor:`object[]`,default:[]}),t(`table_row_class_list`,{processor:`object[]`,default:[]}),t(`table_class_list`,{processor:`object[]`,default:[]}),t(`table_toolbar`,{processor:`string`,default:`tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol`}),t(`table_background_color_map`,{processor:`object[]`,default:[]}),t(`table_border_color_map`,{processor:`object[]`,default:[]})},qn=Gn(`table_sizing_mode`),Jn=Gn(`table_border_widths`),Yn=Gn(`table_border_styles`),Xn=Gn(`table_cell_advtab`),Zn=Gn(`table_row_advtab`),Qn=Gn(`table_advtab`),$n=Gn(`table_appearance_options`),er=Gn(`table_grid`),tr=Gn(`table_style_by_css`),nr=Gn(`table_cell_class_list`),rr=Gn(`table_row_class_list`),ir=Gn(`table_class_list`),ar=Gn(`table_toolbar`),or=Gn(`table_background_color_map`),sr=Gn(`table_border_color_map`),cr=e=>qn(e)===`fixed`,lr=e=>qn(e)===`responsive`,ur=e=>{let t=e.options,n=t.get(`table_default_styles`);return t.isSet(`table_default_styles`)?n:Un(e,n)},dr=e=>{let t=e.options,n=t.get(`table_default_attributes`);return t.isSet(`table_default_attributes`)?n:Wn(e,n)},fr=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,pr=(e,t)=>{let n=!0,r=y(fr,t);for(let i=t.startRow;i<=t.finishRow;i++)for(let a=t.startCol;a<=t.finishCol;a++)n&&=Dn.getAt(e,i,a).exists(r);return n?S.some(t):S.none()},mr=(e,t)=>cn(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1)),hr=(e,t,n)=>{let r=Dn.findItem(e,t,Me),i=Dn.findItem(e,n,Me);return r.bind(e=>i.map(t=>mr(e,t)))},V=(e,t,n)=>hr(e,t,n).bind(t=>pr(e,t)),gr=(e,t,n)=>V(_r(e),t,n),_r=Dn.fromTable,vr=(e,t)=>{We(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},yr=(e,t)=>{qe(e).fold(()=>{We(e).each(e=>{xr(e,t)})},e=>{vr(e,t)})},br=(e,t)=>{Xe(e).fold(()=>{xr(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},xr=(e,t)=>{e.dom.appendChild(t.dom)},Sr=(e,t)=>{vr(e,t),xr(t,e)},Cr=(e,t)=>{le(t,(n,r)=>{yr(r===0?e:t[r-1],n)})},wr=(e,t)=>{le(t,t=>{xr(e,t)})},Tr=e=>{let t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Er=e=>{let t=Je(e);t.length>0&&Cr(e,t),Tr(e)},Dr=((e,t)=>{let n=n=>{if(!e(n))throw Error(`Can only get `+t+` value of a `+t+` node`);return r(n).getOr(``)},r=t=>e(t)?S.from(t.dom.nodeValue):S.none();return{get:n,getOption:r,set:(n,r)=>{if(!e(n))throw Error(`Can only set raw `+t+` value of a `+t+` node`);n.dom.nodeValue=r}}})(ze,`text`),Or=e=>Dr.get(e),kr=(e,t)=>Dr.set(e,t);var Ar=`body.p.div.article.aside.figcaption.figure.footer.header.nav.section.ol.ul.li.table.thead.tbody.tfoot.caption.tr.td.th.h1.h2.h3.h4.h5.h6.blockquote.pre.address`.split(`.`),jr=()=>({up:g({selector:ot,closest:ct,predicate:rt,all:Ge}),down:g({selector:St,predicate:bt}),styles:g({get:Jt,getRaw:Xt,set:qt,remove:Zt}),attrs:g({get:Et,set:wt,remove:Ot,copyTo:(e,t)=>{Tt(t,kt(e))}}),insert:g({before:vr,after:yr,afterAll:Cr,append:xr,appendAll:wr,prepend:br,wrap:Sr}),remove:g({unwrap:Er,remove:Tr}),create:g({nu:De.fromTag,clone:e=>De.fromDom(e.dom.cloneNode(!1)),text:De.fromText}),query:g({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:Ke,nextSibling:qe}),property:g({children:Je,name:Pe,parent:We,document:e=>Ue(e).dom,isText:ze,isComment:Le,isElement:Re,isSpecial:e=>ce([`script`,`noscript`,`iframe`,`noframes`,`noembed`,`title`,`style`,`textarea`,`xmp`],Pe(e)),getLanguage:e=>Re(e)?Dt(e,`lang`):S.none(),getText:Or,setText:kr,isBoundary:e=>Re(e)?Pe(e)===`body`?!0:ce(Ar,Pe(e)):!1,isEmptyTag:e=>Re(e)?ce([`br`,`img`,`hr`,`input`],Pe(e)):!1,isNonEditable:e=>Re(e)&&Et(e,`contenteditable`)===`false`}),eq:Me,is:Ne});let Mr=(e,t,n,r)=>{let i=n[0];return r(e,t,i,n.slice(1))},Nr=(e,t,n)=>n.length>0?Mr(e,t,n,Pr):S.none(),Pr=(e,t,n,r)=>pe(r,(n,r)=>Fr(e,n,t(e,r)),t(e,n)),Fr=(e,t,n)=>t.bind(t=>n.filter(y(e.eq,t))),Ir=Nr,Lr=jr(),Rr=(e,t)=>Ir(Lr,(t,n)=>e(n),t),zr=e=>ot(e,`table`),Br=(e,t)=>{let n=St(e,t);return n.length>0?S.some(n):S.none()},Vr=(e,t,n)=>R(e,t).bind(t=>R(e,n).bind(e=>Rr(zr,[t,e]).map(n=>({first:t,last:e,table:n})))),Hr=(e,t)=>Br(e,t),Ur=(e,t,n)=>Vr(e,t,n).bind(t=>{let n=t=>Me(e,t),r=`thead,tfoot,tbody,table`,i=ot(t.first,r,n),a=ot(t.last,r,n);return i.bind(e=>a.bind(n=>Me(e,n)?gr(t.table,t.first,t.last):S.none()))}),Wr=e=>P(e,De.fromDom),Gr=`data-mce-selected`;``+Gr;let Kr=`data-mce-first-selected`;``+Kr;let qr=`data-mce-last-selected`,Jr={selected:Gr,selectedSelector:`td[data-mce-selected],th[data-mce-selected]`,firstSelected:Kr,firstSelectedSelector:`td[data-mce-first-selected],th[data-mce-first-selected]`,lastSelected:qr,lastSelectedSelector:`td[`+qr+`],th[data-mce-last-selected]`},Yr=e=>hn(e).bind(e=>Hr(e,Jr.firstSelectedSelector)).fold(g(e),e=>e[0]),Xr=e=>(t,n)=>{let r=Pe(t);return ct(r===`col`||r===`colgroup`?Yr(t):t,e,n)},Zr=Xr(`th,td,caption`),Qr=Xr(`th,td`),$r=e=>Wr(e.model.table.getSelectedCells()),ei=(e,t)=>{let n=Qr(e);return Mt(n,n.bind(e=>hn(e)).map(e=>gn(e)),(e,n)=>fe(n,n=>M(Wr(n.dom.cells),n=>Et(n,t)===`1`||Me(n,e)))).getOr([])},ti=[{text:`None`,value:``},{text:`Top`,value:`top`},{text:`Middle`,value:`middle`},{text:`Bottom`,value:`bottom`}],ni=e=>({value:oi(e)}),ri=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ii=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ai=e=>ri.test(e)||ii.test(e),oi=e=>Lt(e,`#`).toUpperCase(),si=e=>ai(e)?S.some({value:oi(e)}):S.none(),ci=e=>{let t=e.toString(16);return(t.length===1?`0`+t:t).toUpperCase()},li=e=>ni(ci(e.red)+ci(e.green)+ci(e.blue)),ui=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,di=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,fi=(e,t,n,r)=>({red:e,green:t,blue:n,alpha:r}),pi=(e,t,n,r)=>fi(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseFloat(r)),mi=e=>{if(e===`transparent`)return S.some(fi(0,0,0,0));let t=ui.exec(e);if(t!==null)return S.some(pi(t[1],t[2],t[3],`1`));let n=di.exec(e);return n===null?S.none():S.some(pi(n[1],n[2],n[3],n[4]))},hi=e=>si(e).orThunk(()=>mi(e).map(li)).getOrThunk(()=>{let t=document.createElement(`canvas`);t.height=1,t.width=1;let n=t.getContext(`2d`);n.clearRect(0,0,t.width,t.height),n.fillStyle=`#FFFFFF`,n.fillStyle=e,n.fillRect(0,0,1,1);let r=n.getImageData(0,0,1,1).data,i=r[0],a=r[1],o=r[2],s=r[3];return li(fi(i,a,o,s))}),gi=e=>mi(e).map(li).map(e=>`#`+e.value).getOr(e),_i=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},vi=e=>{let t=_i(S.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(S.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(S.some(e))}}},yi=()=>vi(e=>e.unbind()),bi=(e,t,n)=>r=>{let i=yi(),a=Vt(n),o=()=>{let o=$r(e),s=r=>e.formatter.match(t,{value:n},r.dom,a);a?(r.setActive(!M(o,s)),i.set(e.formatter.formatChanged(t,e=>r.setActive(!e),!0))):(r.setActive(ve(o,s)),i.set(e.formatter.formatChanged(t,r.setActive,!1,{value:n})))};return e.initialized?o():e.on(`init`,o),i.clear},xi=e=>ae(e,`menu`),Si=e=>P(e,e=>{let t=e.text||e.title||``;return xi(e)?{text:t,items:Si(e.menu)}:{text:t,value:e.value}}),Ci=(e,t,n,r)=>P(t,t=>{let i=t.text||t.title;return xi(t)?{type:`nestedmenuitem`,text:i,getSubmenuItems:()=>Ci(e,t.menu,n,r)}:{text:i,type:`togglemenuitem`,onAction:()=>r(t.value),onSetup:bi(e,n,t.value)}}),wi=(e,t)=>n=>{e.execCommand(`mceTableApplyCellStyle`,!1,{[t]:n})},Ti=e=>_e(e,e=>xi(e)?[{...e,menu:Ti(e.menu)}]:Bt(e.value)?[e]:[]),Ei=(e,t,n,r)=>i=>i(Ci(e,t,n,r)),Di=(e,t,n)=>{let r=P(t,e=>({text:e.title,value:`#`+hi(e.value).value,type:`choiceitem`}));return[{type:`fancymenuitem`,fancytype:`colorswatch`,initData:{colors:r.length>0?r:void 0,allowCustomColors:!1},onAction:t=>{let r=t.value===`remove`?``:t.value;e.execCommand(`mceTableApplyCellStyle`,!1,{[n]:r})}}]},Oi=e=>()=>{let t=e.queryCommandValue(`mceTableRowType`)===`header`?`body`:`header`;e.execCommand(`mceTableRowType`,!1,{type:t})},ki=e=>()=>{let t=e.queryCommandValue(`mceTableColType`)===`th`?`td`:`th`;e.execCommand(`mceTableColType`,!1,{type:t})},Ai=e=>{let t=Si(nr(e));return t.length>0?S.some({name:`class`,type:`listbox`,label:`Class`,items:t}):S.none()},ji=[{name:`width`,type:`input`,label:`Width`},{name:`height`,type:`input`,label:`Height`},{name:`celltype`,type:`listbox`,label:`Cell type`,items:[{text:`Cell`,value:`td`},{text:`Header cell`,value:`th`}]},{name:`scope`,type:`listbox`,label:`Scope`,items:[{text:`None`,value:``},{text:`Row`,value:`row`},{text:`Column`,value:`col`},{text:`Row group`,value:`rowgroup`},{text:`Column group`,value:`colgroup`}]},{name:`halign`,type:`listbox`,label:`Horizontal align`,items:[{text:`None`,value:``},{text:`Left`,value:`left`},{text:`Center`,value:`center`},{text:`Right`,value:`right`}]},{name:`valign`,type:`listbox`,label:`Vertical align`,items:ti}],Mi=e=>ji.concat(Ai(e).toArray()),Ni=(e,t)=>{let n=[{name:`borderstyle`,type:`listbox`,label:`Border style`,items:[{text:`Select...`,value:``}].concat(Si(Yn(e)))},{name:`bordercolor`,type:`colorinput`,label:`Border color`},{name:`backgroundcolor`,type:`colorinput`,label:`Background color`}];return{title:`Advanced`,name:`advanced`,items:t===`cell`?[{name:`borderwidth`,type:`input`,label:`Border width`}].concat(n):n}},Pi={normal:(e,t)=>{let n=e.dom;return{setAttrib:(e,r)=>{n.setAttrib(t,e,r)},setStyle:(e,r)=>{n.setStyle(t,e,r)},setFormat:(n,r)=>{r===``?e.formatter.remove(n,{value:null},t,!0):e.formatter.apply(n,{value:r},t)}}}},Fi=Ve(`th`),Ii=(e,t)=>e&&t?`sectionCells`:e?`section`:`cells`,Li=e=>{let t=e.section===`thead`,n=At(Ri(e.cells),`th`);return e.section===`tfoot`?{type:`footer`}:t||n?{type:`header`,subType:Ii(t,n)}:{type:`body`}},Ri=e=>{let t=fe(e,e=>Fi(e.element));return t.length===0?S.some(`td`):t.length===e.length?S.some(`th`):S.none()},zi=e=>{let t=P(e,e=>Li(e).type),n=ce(t,`header`),r=ce(t,`footer`);if(!n&&!r)return S.some(`body`);{let e=ce(t,`body`);return n&&!e&&!r?S.some(`header`):!n&&!e&&r?S.some(`footer`):S.none()}},Bi=e=>{let t=!1,n;return(...r)=>(t||(t=!0,n=e.apply(null,r)),n)},Vi=(e,t)=>Se(e.all,e=>ge(e.cells,e=>Me(t,e.element))),Hi=(e,t,n)=>{let r=jt(P(t.selection,t=>fn(t).bind(t=>Vi(e,t)).filter(n)));return Pt(r.length>0,r)},Ui=(e,t)=>t.mergable,Wi=(e,t)=>t.unmergable,Gi=(e,t)=>Hi(e,t,ee),Ki=(e,t)=>Vi(e,t).exists(e=>!e.isLocked),qi=(e,t)=>ve(t,t=>Ki(e,t)),Ji=(e,t)=>Ui(e,t).filter(t=>qi(e,t.cells)),Yi=(e,t)=>Wi(e,t).filter(t=>qi(e,t));({...{generate:e=>{if(!s(e))throw Error(`cases must be an array`);if(e.length===0)throw Error(`there must be at least one case`);let t=[],n={};return le(e,(r,i)=>{let a=C(r);if(a.length!==1)throw Error(`one and only one name per case`);let o=a[0],c=r[o];if(n[o]!==void 0)throw Error(`duplicate key detected:`+o);if(o===`cata`)throw Error(`cannot have a case named cata (sorry)`);if(!s(c))throw Error(`case arguments must be an array`);t.push(o),n[o]=(...n)=>{let r=n.length;if(r!==c.length)throw Error(`Wrong number of arguments to case `+o+`. Expected `+c.length+` (`+c+`), got `+r);return{fold:(...t)=>{if(t.length!==e.length)throw Error(`Wrong number of arguments to fold. Expected `+e.length+`, got `+t.length);return t[i].apply(null,n)},match:e=>{let r=C(e);if(t.length!==r.length)throw Error(`Wrong number of arguments to match. Expected: `+t.join(`,`)+`
Actual: `+r.join(`,`));if(!ve(t,e=>ce(r,e)))throw Error(`Not all branches were specified when using match. Specified: `+r.join(`, `)+`
Required: `+t.join(`, `));return e[o].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:o,params:n})}}}}),n}}.generate([{none:[]},{only:[`index`]},{left:[`index`,`next`]},{middle:[`prev`,`index`,`next`]},{right:[`prev`,`index`]}])});let Xi=(e,t)=>{let n=Dn.fromTable(e);return Gi(n,t).bind(e=>{let t=e[e.length-1],r=e[0].row,i=t.row+t.rowspan;return zi(n.all.slice(r,i))}).getOr(``)},Zi=e=>Rt(e,`rgb`)?gi(e):e,Qi=e=>{let t=De.fromDom(e);return{borderwidth:Xt(t,`border-width`).getOr(``),borderstyle:Xt(t,`border-style`).getOr(``),bordercolor:Xt(t,`border-color`).map(Zi).getOr(``),backgroundcolor:Xt(t,`background-color`).map(Zi).getOr(``)}},$i=e=>{let t=e[0];return le(e.slice(1),e=>{le(C(t),n=>{w(e,(e,r)=>{let i=t[n];i!==``&&n===r&&i!==e&&(t[n]=``)})})}),t},ea=(e,t,n,r)=>ge(e,e=>!l(n.formatter.matchNode(r,t+e))).getOr(``),ta=y(ea,[`left`,`center`,`right`],`align`),na=y(ea,[`top`,`middle`,`bottom`],`valign`),H=(e,t)=>{let n=ur(e),r=dr(e),i=()=>({borderstyle:k(n,`border-style`).getOr(``),bordercolor:Zi(k(n,`border-color`).getOr(``)),backgroundcolor:Zi(k(n,`background-color`).getOr(``))}),a={height:``,width:`100%`,cellspacing:``,cellpadding:``,caption:!1,class:``,align:``,border:``},o=()=>{let t=n[`border-width`];return tr(e)&&t?{border:t}:k(r,`border`).fold(()=>({}),e=>({border:e}))},s=t?i():{},c=()=>{let e=k(n,`border-spacing`).or(k(r,`cellspacing`)).fold(()=>({}),e=>({cellspacing:e})),t=k(n,`border-padding`).or(k(r,`cellpadding`)).fold(()=>({}),e=>({cellpadding:e}));return{...e,...t}};return{...a,...n,...r,...s,...o(),...c()}},ra=e=>hn(De.fromDom(e)).map(t=>Xi(t,{selection:Wr(e.cells)})).getOr(``),ia=(e,t,n)=>{let r=(t,n)=>{let r=Xt(De.fromDom(n),`border-width`);return tr(e)&&r.isSome()?r.getOr(``):t.getAttrib(n,`border`)||kn(e.dom,n,`border-width`)||kn(e.dom,n,`border`)||``},i=e.dom,a=tr(e)?i.getStyle(t,`border-spacing`)||i.getAttrib(t,`cellspacing`):i.getAttrib(t,`cellspacing`)||i.getStyle(t,`border-spacing`),o=tr(e)?kn(i,t,`padding`)||i.getAttrib(t,`cellpadding`):i.getAttrib(t,`cellpadding`)||kn(i,t,`padding`);return{width:i.getStyle(t,`width`)||i.getAttrib(t,`width`),height:i.getStyle(t,`height`)||i.getAttrib(t,`height`),cellspacing:a??``,cellpadding:o??``,border:r(i,t),caption:!!i.select(`caption`,t)[0],class:i.getAttrib(t,`class`,``),align:ta(e,t),...n?Qi(t):{}}},aa=(e,t,n)=>{let r=e.dom;return{height:r.getStyle(t,`height`)||r.getAttrib(t,`height`),class:r.getAttrib(t,`class`,``),type:ra(t),align:ta(e,t),...n?Qi(t):{}}},oa=(e,t,n,r)=>{let i=e.dom,a=r.getOr(t),o=(e,t)=>i.getStyle(e,t)||i.getAttrib(e,t);return{width:o(a,`width`),height:o(t,`height`),scope:i.getAttrib(t,`scope`),celltype:dt(t),class:i.getAttrib(t,`class`,``),halign:ta(e,t),valign:na(e,t),...n?Qi(t):{}}},U=(e,t)=>{let n=Dn.fromTable(e);return P(fe(Dn.justCells(n),e=>M(t,t=>Me(e.element,t))),e=>({element:e.element.dom,column:Dn.getColumnAt(n,e.column).map(e=>e.element.dom)}))},sa=(e,t,n,r)=>{r(`scope`)&&e.setAttrib(`scope`,n.scope),r(`class`)&&e.setAttrib(`class`,n.class),r(`height`)&&e.setStyle(`height`,ht(n.height)),r(`width`)&&t.setStyle(`width`,ht(n.width))},ca=(e,t,n)=>{n(`backgroundcolor`)&&e.setFormat(`tablecellbackgroundcolor`,t.backgroundcolor),n(`bordercolor`)&&e.setFormat(`tablecellbordercolor`,t.bordercolor),n(`borderstyle`)&&e.setFormat(`tablecellborderstyle`,t.borderstyle),n(`borderwidth`)&&e.setFormat(`tablecellborderwidth`,ht(t.borderwidth))},la=(e,t,n,r)=>{let i=t.length===1;le(t,t=>{let a=t.element,o=i?ee:r,s=Pi.normal(e,a);sa(s,t.column.map(t=>Pi.normal(e,t)).getOr(s),n,o),Xn(e)&&ca(s,n,o),r(`halign`)&&An(e,a,n.halign),r(`valign`)&&jn(e,a,n.valign)})},ua=(e,t)=>{e.execCommand(`mceTableCellType`,!1,{type:t.celltype,no_events:!0})},da=(e,t,n,r)=>{let i=ne(r,(e,t)=>n[t]!==e);O(i)>0&&t.length>=1&&hn(t[0]).each(n=>{let a=U(n,t),o=O(ne(i,(e,t)=>t!==`scope`&&t!==`celltype`))>0,s=ie(i,`celltype`);(o||ie(i,`scope`))&&la(e,a,r,y(ie,i)),s&&ua(e,r),Mn(e,n.dom,{structure:s,style:o})})},fa=(e,t,n,r)=>{let i=r.getData();r.close(),e.undoManager.transact(()=>{da(e,t,n,i),e.focus()})},pa=(e,t)=>$i(hn(t[0]).map(n=>P(U(n,t),t=>oa(e,t.element,Xn(e),t.column))).getOrDie()),ma=e=>{let t=$r(e);if(t.length===0)return;let n=pa(e,t),r={type:`tabpanel`,tabs:[{title:`General`,name:`general`,items:Mi(e)},Ni(e,`cell`)]},i={type:`panel`,items:[{type:`grid`,columns:2,items:Mi(e)}]};e.windowManager.open({title:`Cell Properties`,size:`normal`,body:Xn(e)?r:i,buttons:[{type:`cancel`,name:`cancel`,text:`Cancel`},{type:`submit`,name:`save`,text:`Save`,primary:!0}],initialData:n,onSubmit:y(fa,e,t,n)})},ha=e=>{let t=Si(rr(e));return t.length>0?S.some({name:`class`,type:`listbox`,label:`Class`,items:t}):S.none()},ga=[{type:`listbox`,name:`type`,label:`Row type`,items:[{text:`Header`,value:`header`},{text:`Body`,value:`body`},{text:`Footer`,value:`footer`}]},{type:`listbox`,name:`align`,label:`Alignment`,items:[{text:`None`,value:``},{text:`Left`,value:`left`},{text:`Center`,value:`center`},{text:`Right`,value:`right`}]},{label:`Height`,name:`height`,type:`input`}],W=e=>ga.concat(ha(e).toArray()),_a=(e,t,n)=>{n(`class`)&&e.setAttrib(`class`,t.class),n(`height`)&&e.setStyle(`height`,ht(t.height))},va=(e,t,n)=>{n(`backgroundcolor`)&&e.setStyle(`background-color`,t.backgroundcolor),n(`bordercolor`)&&e.setStyle(`border-color`,t.bordercolor),n(`borderstyle`)&&e.setStyle(`border-style`,t.borderstyle)},ya=(e,t,n,r)=>{let i=t.length===1?ee:r;le(t,t=>{let a=Pi.normal(e,t);_a(a,n,i),Zn(e)&&va(a,n,i),r(`align`)&&An(e,t,n.align)})},ba=(e,t)=>{e.execCommand(`mceTableRowType`,!1,{type:t.type,no_events:!0})},xa=(e,t,n,r)=>{let i=ne(r,(e,t)=>n[t]!==e);if(O(i)>0){let n=ie(i,`type`),a=n?O(i)>1:!0;a&&ya(e,t,r,y(ie,i)),n&&ba(e,r),hn(De.fromDom(t[0])).each(t=>Mn(e,t.dom,{structure:n,style:a}))}},Sa=(e,t,n,r)=>{let i=r.getData();r.close(),e.undoManager.transact(()=>{xa(e,t,n,i),e.focus()})},Ca=e=>{let t=ei(gt(e),Jr.selected);if(t.length===0)return;let n=$i(P(t,t=>aa(e,t.dom,Zn(e)))),r={type:`tabpanel`,tabs:[{title:`General`,name:`general`,items:W(e)},Ni(e,`row`)]},i={type:`panel`,items:[{type:`grid`,columns:2,items:W(e)}]};e.windowManager.open({title:`Row Properties`,size:`normal`,body:Zn(e)?r:i,buttons:[{type:`cancel`,name:`cancel`,text:`Cancel`},{type:`submit`,name:`save`,text:`Save`,primary:!0}],initialData:n,onSubmit:y(Sa,e,P(t,e=>e.dom),n)})},wa=(e,t,n)=>{let r=n?[{type:`input`,name:`cols`,label:`Cols`,inputMode:`numeric`},{type:`input`,name:`rows`,label:`Rows`,inputMode:`numeric`}]:[],i=[{type:`input`,name:`width`,label:`Width`},{type:`input`,name:`height`,label:`Height`}],a=$n(e)?[{type:`input`,name:`cellspacing`,label:`Cell spacing`,inputMode:`numeric`},{type:`input`,name:`cellpadding`,label:`Cell padding`,inputMode:`numeric`},{type:`input`,name:`border`,label:`Border width`},{type:`label`,label:`Caption`,items:[{type:`checkbox`,name:`caption`,label:`Show caption`}]}]:[],o=[{type:`listbox`,name:`align`,label:`Alignment`,items:[{text:`None`,value:``},{text:`Left`,value:`left`},{text:`Center`,value:`center`},{text:`Right`,value:`right`}]}],s=t.length>0?[{type:`listbox`,name:`class`,label:`Class`,items:t}]:[];return r.concat(i).concat(a).concat(o).concat(s)},Ta=(e,t,n,r)=>{if(t.tagName===`TD`||t.tagName===`TH`)o(n)&&d(r)?e.setStyle(t,n,r):e.setStyles(t,n);else if(t.children)for(let i=0;i<t.children.length;i++)Ta(e,t.children[i],n,r)},Ea=(e,t,n,r)=>{let i=e.dom,a={},o={},s=tr(e),c=Qn(e);if(l(n.class)||(a.class=n.class),o.height=ht(n.height),s?o.width=ht(n.width):i.getAttrib(t,`width`)&&(a.width=mt(n.width)),s?(o[`border-width`]=ht(n.border),o[`border-spacing`]=ht(n.cellspacing)):(a.border=n.border,a.cellpadding=n.cellpadding,a.cellspacing=n.cellspacing),s&&t.children){let e={};if(r.border&&(e[`border-width`]=ht(n.border)),r.cellpadding&&(e.padding=ht(n.cellpadding)),c&&r.bordercolor&&(e[`border-color`]=n.bordercolor),!A(e))for(let n=0;n<t.children.length;n++)Ta(i,t.children[n],e)}if(c){let e=n;o[`background-color`]=e.backgroundcolor,o[`border-color`]=e.bordercolor,o[`border-style`]=e.borderstyle}i.setStyles(t,{...ur(e),...o}),i.setAttribs(t,{...dr(e),...a})},Da=(e,t,n,r)=>{let i=e.dom,a=r.getData(),o=ne(a,(e,t)=>n[t]!==e);r.close(),a.class===``&&delete a.class,e.undoManager.transact(()=>{if(!t){let n=Ht(a.cols).getOr(1),r=Ht(a.rows).getOr(1);e.execCommand(`mceInsertTable`,!1,{rows:r,columns:n}),t=Qr(gt(e),pt(e)).bind(t=>hn(t,pt(e))).map(e=>e.dom).getOrDie()}if(O(o)>0){let n={border:ie(o,`border`),bordercolor:ie(o,`bordercolor`),cellpadding:ie(o,`cellpadding`)};Ea(e,t,a,n);let r=i.select(`caption`,t)[0];(r&&!a.caption||!r&&a.caption)&&e.execCommand(`mceTableToggleCaption`),An(e,t,a.align)}if(e.focus(),e.addVisual(),O(o)>0){let n=ie(o,`caption`),r=n?O(o)>1:!0;Mn(e,t,{structure:n,style:r})}})},Oa=(e,t)=>{let n=e.dom,r,i=H(e,Qn(e));t?(i.cols=`1`,i.rows=`1`,Qn(e)&&(i.borderstyle=``,i.bordercolor=``,i.backgroundcolor=``)):(r=n.getParent(e.selection.getStart(),`table`,e.getBody()),r?i=ia(e,r,Qn(e)):Qn(e)&&(i.borderstyle=``,i.bordercolor=``,i.backgroundcolor=``));let a=Si(ir(e));a.length>0&&(i.class&&=i.class.replace(/\s*mce\-item\-table\s*/g,``));let o={type:`grid`,columns:2,items:wa(e,a,t)},s=Qn(e)?{type:`tabpanel`,tabs:[{title:`General`,name:`general`,items:[o]},Ni(e,`table`)]}:{type:`panel`,items:[o]};e.windowManager.open({title:`Table Properties`,size:`normal`,body:s,onSubmit:y(Da,e,r,i),buttons:[{type:`cancel`,name:`cancel`,text:`Cancel`},{type:`submit`,name:`save`,text:`Save`,primary:!0}],initialData:i})},G=e=>{let t=t=>{vt(gt(e))&&t()};w({mceTableProps:y(Oa,e,!1),mceTableRowProps:y(Ca,e),mceTableCellProps:y(ma,e),mceInsertTableDialog:y(Oa,e,!0)},(n,r)=>e.addCommand(r,()=>t(n)))},ka=(e,t)=>st(e,t).isSome(),Aa=_,ja=e=>{let t=(e,t)=>Dt(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&ve(e,e=>t(e,`rowspan`)||t(e,`colspan`))?S.some(e):S.none()},Ma=(e,t,n)=>t.length<=1?S.none():Ur(e,n.firstSelectedSelector,n.lastSelectedSelector).map(e=>({bounds:e,cells:t})),Na=e=>({element:e,mergable:S.none(),unmergable:S.none(),selection:[e]}),Pa=(e,t,n)=>({element:n,mergable:Ma(t,e,Jr),unmergable:ja(e),selection:Aa(e)}),Fa=e=>{let t=_i(S.none()),n=_i([]),r=S.none(),i=Ve(`caption`),a=e=>r.forall(t=>!t[e]),o=()=>Zr(gt(e),pt(e)),s=()=>Zr(_t(e),pt(e)),c=()=>o().bind(t=>Nt(Mt(hn(t),s().bind(hn),(n,r)=>Me(n,r)?i(t)?S.some(Na(t)):S.some(Pa($r(e),n,t)):S.none()))),l=e=>hn(e.element).map(t=>{let n=Dn.fromTable(t),r=me(Gi(n,e).getOr([]),(e,t)=>(t.isLocked&&(e.onAny=!0,t.column===0?e.onFirst=!0:t.column+t.colspan>=n.grid.columns&&(e.onLast=!0)),e),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Ji(n,e).isSome(),unmergeable:Yi(n,e).isSome(),locked:r}}),u=()=>{t.set(Bi(c)()),r=t.get().bind(l),le(n.get(),b)},d=e=>(e(),n.set(n.get().concat([e])),()=>{n.set(fe(n.get(),t=>t!==e))}),f=(n,r)=>d(()=>t.get().fold(()=>{n.setEnabled(!1)},t=>{n.setEnabled(!r(t)&&e.selection.isEditable())})),p=(n,r,i)=>d(()=>t.get().fold(()=>{n.setEnabled(!1),n.setActive(!1)},t=>{n.setEnabled(!r(t)&&e.selection.isEditable()),n.setActive(i(t))})),m=e=>r.exists(t=>t.locked[e]),h=e=>f(e,e=>!1),g=e=>f(e,e=>i(e.element)),_=e=>t=>f(t,t=>i(t.element)||m(e)),v=e=>t=>f(t,t=>i(t.element)||e().isNone()),y=(e,t)=>n=>f(n,n=>i(n.element)||e().isNone()||m(t)),ee=e=>f(e,e=>a(`mergeable`)),C=e=>f(e,e=>a(`unmergeable`)),te=t=>p(t,x,t=>hn(t.element,pt(e)).exists(e=>ka(e,`caption`))),w=(t,n)=>r=>p(r,e=>i(e.element),()=>e.queryCommandValue(t)===n),T=w(`mceTableRowType`,`header`),E=w(`mceTableColType`,`th`);return e.on(`NodeChange ExecCommand TableSelectorChange`,u),{onSetupTable:h,onSetupCellOrRow:g,onSetupColumn:_,onSetupPasteable:v,onSetupPasteableColumn:y,onSetupMergeable:ee,onSetupUnmergeable:C,resetTargets:u,onSetupTableWithCaption:te,onSetupTableRowHeaders:T,onSetupTableColumnHeaders:E,targets:t.get}};var Ia=tinymce.util.Tools.resolve(`tinymce.FakeClipboard`);let La=`x-tinymce/dom-table-`;La+``,La+``;let Ra=e=>Se(Ia.read()??[],t=>S.from(t.getType(e))),za=()=>Ra(`x-tinymce/dom-table-rows`),Ba=()=>Ra(`x-tinymce/dom-table-columns`),Va=e=>t=>{let n=()=>{t.setEnabled(e.selection.isEditable())};return e.on(`NodeChange`,n),n(),()=>{e.off(`NodeChange`,n)}},Ha=(e,t)=>{e.ui.registry.addMenuButton(`table`,{tooltip:`Table`,icon:`table`,onSetup:Va(e),fetch:e=>e(`inserttable | cell row column | advtablesort | tableprops deletetable`)});let n=t=>()=>e.execCommand(t),r=(t,r)=>{e.queryCommandSupported(r.command)&&e.ui.registry.addButton(t,{...r,onAction:f(r.onAction)?r.onAction:n(r.command)})},i=(t,r)=>{e.queryCommandSupported(r.command)&&e.ui.registry.addToggleButton(t,{...r,onAction:f(r.onAction)?r.onAction:n(r.command)})};r(`tableprops`,{tooltip:`Table properties`,command:`mceTableProps`,icon:`table`,onSetup:t.onSetupTable}),r(`tabledelete`,{tooltip:`Delete table`,command:`mceTableDelete`,icon:`table-delete-table`,onSetup:t.onSetupTable}),r(`tablecellprops`,{tooltip:`Cell properties`,command:`mceTableCellProps`,icon:`table-cell-properties`,onSetup:t.onSetupCellOrRow}),r(`tablemergecells`,{tooltip:`Merge cells`,command:`mceTableMergeCells`,icon:`table-merge-cells`,onSetup:t.onSetupMergeable}),r(`tablesplitcells`,{tooltip:`Split cell`,command:`mceTableSplitCells`,icon:`table-split-cells`,onSetup:t.onSetupUnmergeable}),r(`tableinsertrowbefore`,{tooltip:`Insert row before`,command:`mceTableInsertRowBefore`,icon:`table-insert-row-above`,onSetup:t.onSetupCellOrRow}),r(`tableinsertrowafter`,{tooltip:`Insert row after`,command:`mceTableInsertRowAfter`,icon:`table-insert-row-after`,onSetup:t.onSetupCellOrRow}),r(`tabledeleterow`,{tooltip:`Delete row`,command:`mceTableDeleteRow`,icon:`table-delete-row`,onSetup:t.onSetupCellOrRow}),r(`tablerowprops`,{tooltip:`Row properties`,command:`mceTableRowProps`,icon:`table-row-properties`,onSetup:t.onSetupCellOrRow}),r(`tableinsertcolbefore`,{tooltip:`Insert column before`,command:`mceTableInsertColBefore`,icon:`table-insert-column-before`,onSetup:t.onSetupColumn(`onFirst`)}),r(`tableinsertcolafter`,{tooltip:`Insert column after`,command:`mceTableInsertColAfter`,icon:`table-insert-column-after`,onSetup:t.onSetupColumn(`onLast`)}),r(`tabledeletecol`,{tooltip:`Delete column`,command:`mceTableDeleteCol`,icon:`table-delete-column`,onSetup:t.onSetupColumn(`onAny`)}),r(`tablecutrow`,{tooltip:`Cut row`,command:`mceTableCutRow`,icon:`cut-row`,onSetup:t.onSetupCellOrRow}),r(`tablecopyrow`,{tooltip:`Copy row`,command:`mceTableCopyRow`,icon:`duplicate-row`,onSetup:t.onSetupCellOrRow}),r(`tablepasterowbefore`,{tooltip:`Paste row before`,command:`mceTablePasteRowBefore`,icon:`paste-row-before`,onSetup:t.onSetupPasteable(za)}),r(`tablepasterowafter`,{tooltip:`Paste row after`,command:`mceTablePasteRowAfter`,icon:`paste-row-after`,onSetup:t.onSetupPasteable(za)}),r(`tablecutcol`,{tooltip:`Cut column`,command:`mceTableCutCol`,icon:`cut-column`,onSetup:t.onSetupColumn(`onAny`)}),r(`tablecopycol`,{tooltip:`Copy column`,command:`mceTableCopyCol`,icon:`duplicate-column`,onSetup:t.onSetupColumn(`onAny`)}),r(`tablepastecolbefore`,{tooltip:`Paste column before`,command:`mceTablePasteColBefore`,icon:`paste-column-before`,onSetup:t.onSetupPasteableColumn(Ba,`onFirst`)}),r(`tablepastecolafter`,{tooltip:`Paste column after`,command:`mceTablePasteColAfter`,icon:`paste-column-after`,onSetup:t.onSetupPasteableColumn(Ba,`onLast`)}),r(`tableinsertdialog`,{tooltip:`Insert table`,command:`mceInsertTableDialog`,icon:`table`,onSetup:Va(e)});let a=Ti(ir(e));a.length!==0&&e.queryCommandSupported(`mceTableToggleClass`)&&e.ui.registry.addMenuButton(`tableclass`,{icon:`table-classes`,tooltip:`Table styles`,fetch:Ei(e,a,`tableclass`,t=>e.execCommand(`mceTableToggleClass`,!1,t)),onSetup:t.onSetupTable});let o=Ti(nr(e));o.length!==0&&e.queryCommandSupported(`mceTableCellToggleClass`)&&e.ui.registry.addMenuButton(`tablecellclass`,{icon:`table-cell-classes`,tooltip:`Cell styles`,fetch:Ei(e,o,`tablecellclass`,t=>e.execCommand(`mceTableCellToggleClass`,!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported(`mceTableApplyCellStyle`)&&(e.ui.registry.addMenuButton(`tablecellvalign`,{icon:`vertical-align`,tooltip:`Vertical align`,fetch:Ei(e,ti,`tablecellverticalalign`,wi(e,`vertical-align`)),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton(`tablecellborderwidth`,{icon:`border-width`,tooltip:`Border width`,fetch:Ei(e,Jn(e),`tablecellborderwidth`,wi(e,`border-width`)),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton(`tablecellborderstyle`,{icon:`border-style`,tooltip:`Border style`,fetch:Ei(e,Yn(e),`tablecellborderstyle`,wi(e,`border-style`)),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton(`tablecellbackgroundcolor`,{icon:`cell-background-color`,tooltip:`Background color`,fetch:t=>t(Di(e,or(e),`background-color`)),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton(`tablecellbordercolor`,{icon:`cell-border-color`,tooltip:`Border color`,fetch:t=>t(Di(e,sr(e),`border-color`)),onSetup:t.onSetupCellOrRow})),i(`tablecaption`,{tooltip:`Table caption`,icon:`table-caption`,command:`mceTableToggleCaption`,onSetup:t.onSetupTableWithCaption}),i(`tablerowheader`,{tooltip:`Row header`,icon:`table-top-header`,command:`mceTableRowType`,onAction:Oi(e),onSetup:t.onSetupTableRowHeaders}),i(`tablecolheader`,{tooltip:`Column header`,icon:`table-left-header`,command:`mceTableColType`,onAction:ki(e),onSetup:t.onSetupTableColumnHeaders})},Ua=e=>{let t=t=>e.dom.is(t,`table`)&&e.getBody().contains(t)&&e.dom.isEditable(t.parentNode),n=ar(e);n.length>0&&e.ui.registry.addContextToolbar(`table`,{predicate:t,items:n,scope:`node`,position:`node`})},Wa=e=>t=>{let n=()=>{t.setEnabled(e.selection.isEditable())};return e.on(`NodeChange`,n),n(),()=>{e.off(`NodeChange`,n)}},Ga=(e,t)=>{let n=t=>()=>e.execCommand(t),r=(t,r)=>e.queryCommandSupported(r.command)?(e.ui.registry.addMenuItem(t,{...r,onAction:f(r.onAction)?r.onAction:n(r.command)}),!0):!1,i=(t,r)=>{e.queryCommandSupported(r.command)&&e.ui.registry.addToggleMenuItem(t,{...r,onAction:f(r.onAction)?r.onAction:n(r.command)})},a=t=>{e.execCommand(`mceInsertTable`,!1,{rows:t.numRows,columns:t.numColumns})},o=[r(`tableinsertrowbefore`,{text:`Insert row before`,icon:`table-insert-row-above`,command:`mceTableInsertRowBefore`,onSetup:t.onSetupCellOrRow}),r(`tableinsertrowafter`,{text:`Insert row after`,icon:`table-insert-row-after`,command:`mceTableInsertRowAfter`,onSetup:t.onSetupCellOrRow}),r(`tabledeleterow`,{text:`Delete row`,icon:`table-delete-row`,command:`mceTableDeleteRow`,onSetup:t.onSetupCellOrRow}),r(`tablerowprops`,{text:`Row properties`,icon:`table-row-properties`,command:`mceTableRowProps`,onSetup:t.onSetupCellOrRow}),r(`tablecutrow`,{text:`Cut row`,icon:`cut-row`,command:`mceTableCutRow`,onSetup:t.onSetupCellOrRow}),r(`tablecopyrow`,{text:`Copy row`,icon:`duplicate-row`,command:`mceTableCopyRow`,onSetup:t.onSetupCellOrRow}),r(`tablepasterowbefore`,{text:`Paste row before`,icon:`paste-row-before`,command:`mceTablePasteRowBefore`,onSetup:t.onSetupPasteable(za)}),r(`tablepasterowafter`,{text:`Paste row after`,icon:`paste-row-after`,command:`mceTablePasteRowAfter`,onSetup:t.onSetupPasteable(za)})],s=[r(`tableinsertcolumnbefore`,{text:`Insert column before`,icon:`table-insert-column-before`,command:`mceTableInsertColBefore`,onSetup:t.onSetupColumn(`onFirst`)}),r(`tableinsertcolumnafter`,{text:`Insert column after`,icon:`table-insert-column-after`,command:`mceTableInsertColAfter`,onSetup:t.onSetupColumn(`onLast`)}),r(`tabledeletecolumn`,{text:`Delete column`,icon:`table-delete-column`,command:`mceTableDeleteCol`,onSetup:t.onSetupColumn(`onAny`)}),r(`tablecutcolumn`,{text:`Cut column`,icon:`cut-column`,command:`mceTableCutCol`,onSetup:t.onSetupColumn(`onAny`)}),r(`tablecopycolumn`,{text:`Copy column`,icon:`duplicate-column`,command:`mceTableCopyCol`,onSetup:t.onSetupColumn(`onAny`)}),r(`tablepastecolumnbefore`,{text:`Paste column before`,icon:`paste-column-before`,command:`mceTablePasteColBefore`,onSetup:t.onSetupPasteableColumn(Ba,`onFirst`)}),r(`tablepastecolumnafter`,{text:`Paste column after`,icon:`paste-column-after`,command:`mceTablePasteColAfter`,onSetup:t.onSetupPasteableColumn(Ba,`onLast`)})],c=[r(`tablecellprops`,{text:`Cell properties`,icon:`table-cell-properties`,command:`mceTableCellProps`,onSetup:t.onSetupCellOrRow}),r(`tablemergecells`,{text:`Merge cells`,icon:`table-merge-cells`,command:`mceTableMergeCells`,onSetup:t.onSetupMergeable}),r(`tablesplitcells`,{text:`Split cell`,icon:`table-split-cells`,command:`mceTableSplitCells`,onSetup:t.onSetupUnmergeable})];er(e)?e.ui.registry.addNestedMenuItem(`inserttable`,{text:`Table`,icon:`table`,getSubmenuItems:()=>[{type:`fancymenuitem`,fancytype:`inserttable`,onAction:a}],onSetup:Wa(e)}):e.ui.registry.addMenuItem(`inserttable`,{text:`Table`,icon:`table`,onAction:n(`mceInsertTableDialog`),onSetup:Wa(e)}),e.ui.registry.addMenuItem(`inserttabledialog`,{text:`Insert table`,icon:`table`,onAction:n(`mceInsertTableDialog`),onSetup:Wa(e)}),r(`tableprops`,{text:`Table properties`,onSetup:t.onSetupTable,command:`mceTableProps`}),r(`deletetable`,{text:`Delete table`,icon:`table-delete-table`,onSetup:t.onSetupTable,command:`mceTableDelete`}),ce(o,!0)&&e.ui.registry.addNestedMenuItem(`row`,{type:`nestedmenuitem`,text:`Row`,getSubmenuItems:g(`tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter`)}),ce(s,!0)&&e.ui.registry.addNestedMenuItem(`column`,{type:`nestedmenuitem`,text:`Column`,getSubmenuItems:g(`tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter`)}),ce(c,!0)&&e.ui.registry.addNestedMenuItem(`cell`,{type:`nestedmenuitem`,text:`Cell`,getSubmenuItems:g(`tablecellprops tablemergecells tablesplitcells`)}),e.ui.registry.addContextMenu(`table`,{update:()=>(t.resetTargets(),t.targets().fold(g(``),e=>Pe(e.element)===`caption`?`tableprops deletetable`:`cell row column | advtablesort | tableprops deletetable`))});let l=Ti(ir(e));l.length!==0&&e.queryCommandSupported(`mceTableToggleClass`)&&e.ui.registry.addNestedMenuItem(`tableclass`,{icon:`table-classes`,text:`Table styles`,getSubmenuItems:()=>Ci(e,l,`tableclass`,t=>e.execCommand(`mceTableToggleClass`,!1,t)),onSetup:t.onSetupTable});let u=Ti(nr(e));u.length!==0&&e.queryCommandSupported(`mceTableCellToggleClass`)&&e.ui.registry.addNestedMenuItem(`tablecellclass`,{icon:`table-cell-classes`,text:`Cell styles`,getSubmenuItems:()=>Ci(e,u,`tablecellclass`,t=>e.execCommand(`mceTableCellToggleClass`,!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported(`mceTableApplyCellStyle`)&&(e.ui.registry.addNestedMenuItem(`tablecellvalign`,{icon:`vertical-align`,text:`Vertical align`,getSubmenuItems:()=>Ci(e,ti,`tablecellverticalalign`,wi(e,`vertical-align`)),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem(`tablecellborderwidth`,{icon:`border-width`,text:`Border width`,getSubmenuItems:()=>Ci(e,Jn(e),`tablecellborderwidth`,wi(e,`border-width`)),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem(`tablecellborderstyle`,{icon:`border-style`,text:`Border style`,getSubmenuItems:()=>Ci(e,Yn(e),`tablecellborderstyle`,wi(e,`border-style`)),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem(`tablecellbackgroundcolor`,{icon:`cell-background-color`,text:`Background color`,getSubmenuItems:()=>Di(e,or(e),`background-color`),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem(`tablecellbordercolor`,{icon:`cell-border-color`,text:`Border color`,getSubmenuItems:()=>Di(e,sr(e),`border-color`),onSetup:t.onSetupCellOrRow})),i(`tablecaption`,{icon:`table-caption`,text:`Table caption`,command:`mceTableToggleCaption`,onSetup:t.onSetupTableWithCaption}),i(`tablerowheader`,{text:`Row header`,icon:`table-top-header`,command:`mceTableRowType`,onAction:Oi(e),onSetup:t.onSetupTableRowHeaders}),i(`tablecolheader`,{text:`Column header`,icon:`table-left-header`,command:`mceTableColType`,onAction:ki(e),onSetup:t.onSetupTableRowHeaders})};e.add(`table`,e=>{let t=Fa(e);Kn(e),G(e),Ga(e,t),Ha(e,t),Ua(e)})})()}))();var f=`.mce-content-body .mce-item-anchor {
  background: transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'8'%20height%3D'12'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20d%3D'M0%200L8%200%208%2012%204.09117821%209%200%2012z'%2F%3E%3C%2Fsvg%3E%0A") no-repeat center;
}
.mce-content-body .mce-item-anchor:empty {
  cursor: default;
  display: inline-block;
  height: 12px !important;
  padding: 0 2px;
  -webkit-user-modify: read-only;
  -moz-user-modify: read-only;
  -webkit-user-select: all;
  -moz-user-select: all;
  user-select: all;
  width: 8px !important;
}
.mce-content-body .mce-item-anchor:not(:empty) {
  background-position-x: 2px;
  display: inline-block;
  padding-left: 12px;
}
.mce-content-body .mce-item-anchor[data-mce-selected] {
  outline-offset: 1px;
}
.tox-comments-visible .tox-comment[contenteditable="false"]:not([data-mce-selected]),
.tox-comments-visible span.tox-comment img:not([data-mce-selected]),
.tox-comments-visible span.tox-comment > audio:not([data-mce-selected]),
.tox-comments-visible span.tox-comment > video:not([data-mce-selected]),
.tox-comments-visible span.tox-comment span.mce-preview-object:not([data-mce-selected]) {
  outline: 3px solid #ffe89d;
}
.tox-comments-visible .tox-comment[contenteditable="false"][data-mce-annotation-active="true"]:not([data-mce-selected]) {
  outline: 3px solid #fed635;
}
.tox-comments-visible span.tox-comment[data-mce-annotation-active="true"] img:not([data-mce-selected]),
.tox-comments-visible span.tox-comment[data-mce-annotation-active="true"] > audio:not([data-mce-selected]),
.tox-comments-visible span.tox-comment[data-mce-annotation-active="true"] > video:not([data-mce-selected]),
.tox-comments-visible span.tox-comment[data-mce-annotation-active="true"] span.mce-preview-object:not([data-mce-selected]) {
  outline: 3px solid #fed635;
}
.tox-comments-visible span.tox-comment:not([data-mce-selected]) {
  background-color: #ffe89d;
  outline: none;
}
.tox-comments-visible span.tox-comment[data-mce-annotation-active="true"]:not([data-mce-selected="inline-boundary"]) {
  background-color: #fed635;
}
.tox-checklist > li:not(.tox-checklist--hidden) {
  list-style: none;
  margin: 0.25em 0;
}
.tox-checklist > li:not(.tox-checklist--hidden)::before {
  content: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-unchecked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2215%22%20height%3D%2215%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill-rule%3D%22nonzero%22%20stroke%3D%22%234C4C4C%22%20rx%3D%222%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A");
  cursor: pointer;
  height: 1em;
  margin-left: -1.5em;
  margin-top: 0.125em;
  position: absolute;
  width: 1em;
}
.tox-checklist li:not(.tox-checklist--hidden).tox-checklist--checked::before {
  content: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-checked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%234099FF%22%20fill-rule%3D%22nonzero%22%20rx%3D%222%22%2F%3E%3Cpath%20id%3D%22Path%22%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M11.5703186%2C3.14417309%20C11.8516238%2C2.73724603%2012.4164781%2C2.62829933%2012.83558%2C2.89774797%20C13.260121%2C3.17069355%2013.3759736%2C3.72932262%2013.0909105%2C4.14168582%20L7.7580587%2C11.8560195%20C7.43776896%2C12.3193404%206.76483983%2C12.3852142%206.35607322%2C11.9948725%20L3.02491697%2C8.8138662%20C2.66090143%2C8.46625845%202.65798871%2C7.89594698%203.01850234%2C7.54483354%20C3.373942%2C7.19866177%203.94940006%2C7.19592841%204.30829608%2C7.5386474%20L6.85276923%2C9.9684299%20L11.5703186%2C3.14417309%20Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A");
}
[dir=rtl] .tox-checklist > li:not(.tox-checklist--hidden)::before {
  margin-left: 0;
  margin-right: -1.5em;
}
/* stylelint-disable */
/* http://prismjs.com/ */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */
code[class*="language-"],
pre[class*="language-"] {
  color: black;
  background: none;
  text-shadow: 0 1px white;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  font-size: 1em;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;
  -moz-tab-size: 4;
  tab-size: 4;
  -webkit-hyphens: none;
  hyphens: none;
}
pre[class*="language-"]::-moz-selection,
pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection,
code[class*="language-"] ::-moz-selection {
  text-shadow: none;
  background: #b3d4fc;
}
pre[class*="language-"]::selection,
pre[class*="language-"] ::selection,
code[class*="language-"]::selection,
code[class*="language-"] ::selection {
  text-shadow: none;
  background: #b3d4fc;
}
@media print {
  code[class*="language-"],
  pre[class*="language-"] {
    text-shadow: none;
  }
}
/* Code blocks */
pre[class*="language-"] {
  padding: 1em;
  margin: 0.5em 0;
  overflow: auto;
}
:not(pre) > code[class*="language-"],
pre[class*="language-"] {
  background: #f5f2f0;
}
/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: 0.1em;
  border-radius: 0.3em;
  white-space: normal;
}
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: slategray;
}
.token.punctuation {
  color: #999;
}
.token.namespace {
  opacity: 0.7;
}
.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
  color: #905;
}
.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
  color: #690;
}
.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
  color: #9a6e3a;
  /* This background color was intended by the author of this theme. */
  background: hsla(0, 0%, 100%, 0.5);
}
.token.atrule,
.token.attr-value,
.token.keyword {
  color: #07a;
}
.token.function,
.token.class-name {
  color: #DD4A68;
}
.token.regex,
.token.important,
.token.variable {
  color: #e90;
}
.token.important,
.token.bold {
  font-weight: bold;
}
.token.italic {
  font-style: italic;
}
.token.entity {
  cursor: help;
}
/* stylelint-enable */
.mce-content-body {
  overflow-wrap: break-word;
  word-wrap: break-word;
}
.mce-content-body .mce-visual-caret {
  background-color: black;
  background-color: currentColor;
  position: absolute;
}
.mce-content-body .mce-visual-caret-hidden {
  display: none;
}
.mce-content-body *[data-mce-caret] {
  left: -1000px;
  margin: 0;
  padding: 0;
  position: absolute;
  right: auto;
  top: 0;
}
.mce-content-body .mce-offscreen-selection {
  left: -2000000px;
  max-width: 1000000px;
  position: absolute;
}
.mce-content-body *[contentEditable=false] {
  cursor: default;
}
.mce-content-body *[contentEditable=true] {
  cursor: text;
}
.tox-cursor-format-painter {
  cursor: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%0A%20%20%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M15%2C6%20C15%2C5.45%2014.55%2C5%2014%2C5%20L6%2C5%20C5.45%2C5%205%2C5.45%205%2C6%20L5%2C10%20C5%2C10.55%205.45%2C11%206%2C11%20L14%2C11%20C14.55%2C11%2015%2C10.55%2015%2C10%20L15%2C9%20L16%2C9%20L16%2C12%20L9%2C12%20L9%2C19%20C9%2C19.55%209.45%2C20%2010%2C20%20L11%2C20%20C11.55%2C20%2012%2C19.55%2012%2C19%20L12%2C14%20L18%2C14%20L18%2C7%20L15%2C7%20L15%2C6%20Z%22%2F%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M1%2C1%20L8.25%2C1%20C8.66421356%2C1%209%2C1.33578644%209%2C1.75%20L9%2C1.75%20C9%2C2.16421356%208.66421356%2C2.5%208.25%2C2.5%20L2.5%2C2.5%20L2.5%2C8.25%20C2.5%2C8.66421356%202.16421356%2C9%201.75%2C9%20L1.75%2C9%20C1.33578644%2C9%201%2C8.66421356%201%2C8.25%20L1%2C1%20Z%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A"), default;
}
div.mce-footnotes hr {
  margin-inline-end: auto;
  margin-inline-start: 0;
  width: 25%;
}
div.mce-footnotes li > a.mce-footnotes-backlink {
  text-decoration: none;
}
@media print {
  sup.mce-footnote a {
    color: black;
    text-decoration: none;
  }
  div.mce-footnotes {
    break-inside: avoid;
    width: 100%;
  }
  div.mce-footnotes li > a.mce-footnotes-backlink {
    display: none;
  }
}
.mce-content-body figure.align-left {
  float: left;
}
.mce-content-body figure.align-right {
  float: right;
}
.mce-content-body figure.image.align-center {
  display: table;
  margin-left: auto;
  margin-right: auto;
}
.mce-preview-object {
  border: 1px solid gray;
  display: inline-block;
  line-height: 0;
  margin: 0 2px 0 2px;
  position: relative;
}
.mce-preview-object .mce-shim {
  background: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}
.mce-preview-object[data-mce-selected="2"] .mce-shim {
  display: none;
}
.mce-content-body .mce-mergetag {
  cursor: default !important;
  -webkit-user-select: none;
     -moz-user-select: none;
          user-select: none;
}
.mce-content-body .mce-mergetag:hover {
  background-color: rgba(0, 108, 231, 0.1);
}
.mce-content-body .mce-mergetag-affix {
  background-color: rgba(0, 108, 231, 0.1);
  color: #006ce7;
}
.mce-object {
  background: transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M4%203h16a1%201%200%200%201%201%201v16a1%201%200%200%201-1%201H4a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1zm1%202v14h14V5H5zm4.79%202.565l5.64%204.028a.5.5%200%200%201%200%20.814l-5.64%204.028a.5.5%200%200%201-.79-.407V7.972a.5.5%200%200%201%20.79-.407z%22%2F%3E%3C%2Fsvg%3E%0A") no-repeat center;
  border: 1px dashed #aaa;
}
.mce-pagebreak {
  border: 1px dashed #aaa;
  cursor: default;
  display: block;
  height: 5px;
  margin-top: 15px;
  page-break-before: always;
  width: 100%;
}
@media print {
  .mce-pagebreak {
    border: 0;
  }
}
.tiny-pageembed .mce-shim {
  background: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}
.tiny-pageembed[data-mce-selected="2"] .mce-shim {
  display: none;
}
.tiny-pageembed {
  display: inline-block;
  position: relative;
}
.tiny-pageembed--21by9,
.tiny-pageembed--16by9,
.tiny-pageembed--4by3,
.tiny-pageembed--1by1 {
  display: block;
  overflow: hidden;
  padding: 0;
  position: relative;
  width: 100%;
}
.tiny-pageembed--21by9 {
  padding-top: 42.857143%;
}
.tiny-pageembed--16by9 {
  padding-top: 56.25%;
}
.tiny-pageembed--4by3 {
  padding-top: 75%;
}
.tiny-pageembed--1by1 {
  padding-top: 100%;
}
.tiny-pageembed--21by9 iframe,
.tiny-pageembed--16by9 iframe,
.tiny-pageembed--4by3 iframe,
.tiny-pageembed--1by1 iframe {
  border: 0;
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}
.mce-content-body[data-mce-placeholder] {
  position: relative;
}
.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before {
  color: rgba(34, 47, 62, 0.7);
  content: attr(data-mce-placeholder);
  position: absolute;
}
.mce-content-body:not([dir=rtl])[data-mce-placeholder]:not(.mce-visualblocks)::before {
  left: 1px;
}
.mce-content-body[dir=rtl][data-mce-placeholder]:not(.mce-visualblocks)::before {
  right: 1px;
}
.mce-content-body div.mce-resizehandle {
  background-color: #4099ff;
  border-color: #4099ff;
  border-style: solid;
  border-width: 1px;
  box-sizing: border-box;
  height: 10px;
  position: absolute;
  width: 10px;
  z-index: 1298;
}
.mce-content-body div.mce-resizehandle:hover {
  background-color: #4099ff;
}
.mce-content-body div.mce-resizehandle:nth-of-type(1) {
  cursor: nwse-resize;
}
.mce-content-body div.mce-resizehandle:nth-of-type(2) {
  cursor: nesw-resize;
}
.mce-content-body div.mce-resizehandle:nth-of-type(3) {
  cursor: nwse-resize;
}
.mce-content-body div.mce-resizehandle:nth-of-type(4) {
  cursor: nesw-resize;
}
.mce-content-body .mce-resize-backdrop {
  z-index: 10000;
}
.mce-content-body .mce-clonedresizable {
  cursor: default;
  opacity: 0.5;
  outline: 1px dashed black;
  position: absolute;
  z-index: 10001;
}
.mce-content-body .mce-clonedresizable.mce-resizetable-columns th,
.mce-content-body .mce-clonedresizable.mce-resizetable-columns td {
  border: 0;
}
.mce-content-body .mce-resize-helper {
  background: #555;
  background: rgba(0, 0, 0, 0.75);
  border: 1px;
  border-radius: 3px;
  color: white;
  display: none;
  font-family: sans-serif;
  font-size: 12px;
  line-height: 14px;
  margin: 5px 10px;
  padding: 5px;
  position: absolute;
  white-space: nowrap;
  z-index: 10002;
}
.tox-rtc-user-selection {
  position: relative;
}
.tox-rtc-user-cursor {
  bottom: 0;
  cursor: default;
  position: absolute;
  top: 0;
  width: 2px;
}
.tox-rtc-user-cursor::before {
  background-color: inherit;
  border-radius: 50%;
  content: '';
  display: block;
  height: 8px;
  position: absolute;
  right: -3px;
  top: -3px;
  width: 8px;
}
.tox-rtc-user-cursor:hover::after {
  background-color: inherit;
  border-radius: 100px;
  box-sizing: border-box;
  color: #fff;
  content: attr(data-user);
  display: block;
  font-size: 12px;
  font-weight: bold;
  left: -5px;
  min-height: 8px;
  min-width: 8px;
  padding: 0 12px;
  position: absolute;
  top: -11px;
  white-space: nowrap;
  z-index: 1000;
}
.tox-rtc-user-selection--1 .tox-rtc-user-cursor {
  background-color: #2dc26b;
}
.tox-rtc-user-selection--2 .tox-rtc-user-cursor {
  background-color: #e03e2d;
}
.tox-rtc-user-selection--3 .tox-rtc-user-cursor {
  background-color: #f1c40f;
}
.tox-rtc-user-selection--4 .tox-rtc-user-cursor {
  background-color: #3598db;
}
.tox-rtc-user-selection--5 .tox-rtc-user-cursor {
  background-color: #b96ad9;
}
.tox-rtc-user-selection--6 .tox-rtc-user-cursor {
  background-color: #e67e23;
}
.tox-rtc-user-selection--7 .tox-rtc-user-cursor {
  background-color: #aaa69d;
}
.tox-rtc-user-selection--8 .tox-rtc-user-cursor {
  background-color: #f368e0;
}
.tox-rtc-remote-image {
  background: #eaeaea url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2236%22%20height%3D%2212%22%20viewBox%3D%220%200%2036%2012%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Ccircle%20cx%3D%226%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2218%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.33s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2230%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.66s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%3C%2Fsvg%3E%0A") no-repeat center center;
  border: 1px solid #ccc;
  min-height: 240px;
  min-width: 320px;
}
.mce-match-marker {
  background: #aaa;
  color: #fff;
}
.mce-match-marker-selected {
  background: #39f;
  color: #fff;
}
.mce-match-marker-selected::-moz-selection {
  background: #39f;
  color: #fff;
}
.mce-match-marker-selected::selection {
  background: #39f;
  color: #fff;
}
.mce-content-body img[data-mce-selected],
.mce-content-body video[data-mce-selected],
.mce-content-body audio[data-mce-selected],
.mce-content-body object[data-mce-selected],
.mce-content-body embed[data-mce-selected],
.mce-content-body table[data-mce-selected],
.mce-content-body details[data-mce-selected] {
  outline: 3px solid #b4d7ff;
}
.mce-content-body hr[data-mce-selected] {
  outline: 3px solid #b4d7ff;
  outline-offset: 1px;
}
.mce-content-body *[contentEditable=false] *[contentEditable=true]:focus {
  outline: 3px solid #b4d7ff;
}
.mce-content-body *[contentEditable=false] *[contentEditable=true]:hover {
  outline: 3px solid #b4d7ff;
}
.mce-content-body *[contentEditable=false][data-mce-selected] {
  cursor: not-allowed;
  outline: 3px solid #b4d7ff;
}
.mce-content-body.mce-content-readonly *[contentEditable=true]:focus,
.mce-content-body.mce-content-readonly *[contentEditable=true]:hover {
  outline: none;
}
.mce-content-body *[data-mce-selected="inline-boundary"] {
  background-color: #b4d7ff;
}
.mce-content-body .mce-edit-focus {
  outline: 3px solid #b4d7ff;
}
.mce-content-body td[data-mce-selected],
.mce-content-body th[data-mce-selected] {
  position: relative;
}
.mce-content-body td[data-mce-selected]::-moz-selection,
.mce-content-body th[data-mce-selected]::-moz-selection {
  background: none;
}
.mce-content-body td[data-mce-selected]::selection,
.mce-content-body th[data-mce-selected]::selection {
  background: none;
}
.mce-content-body td[data-mce-selected] *,
.mce-content-body th[data-mce-selected] * {
  outline: none;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
     -moz-user-select: none;
          user-select: none;
}
.mce-content-body td[data-mce-selected]::after,
.mce-content-body th[data-mce-selected]::after {
  background-color: rgba(180, 215, 255, 0.7);
  border: 1px solid rgba(180, 215, 255, 0.7);
  bottom: -1px;
  content: '';
  left: -1px;
  mix-blend-mode: multiply;
  position: absolute;
  right: -1px;
  top: -1px;
}
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  .mce-content-body td[data-mce-selected]::after,
  .mce-content-body th[data-mce-selected]::after {
    border-color: rgba(0, 84, 180, 0.7);
  }
}
.mce-content-body img[data-mce-selected]::-moz-selection {
  background: none;
}
.mce-content-body img[data-mce-selected]::selection {
  background: none;
}
.ephox-snooker-resizer-bar {
  background-color: #b4d7ff;
  opacity: 0;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
}
.ephox-snooker-resizer-cols {
  cursor: col-resize;
}
.ephox-snooker-resizer-rows {
  cursor: row-resize;
}
.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging {
  opacity: 1;
}
.mce-spellchecker-word {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%23ff0000'%20fill%3D'none'%20stroke-linecap%3D'round'%20stroke-opacity%3D'.75'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");
  background-position: 0 calc(100% + 1px);
  background-repeat: repeat-x;
  background-size: auto 6px;
  cursor: default;
  height: 2rem;
}
.mce-spellchecker-grammar {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%2300A835'%20fill%3D'none'%20stroke-linecap%3D'round'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");
  background-position: 0 calc(100% + 1px);
  background-repeat: repeat-x;
  background-size: auto 6px;
  cursor: default;
}
.mce-toc {
  border: 1px solid gray;
}
.mce-toc h2 {
  margin: 4px;
}
.mce-toc ul > li {
  list-style-type: none;
}
[data-mce-block] {
  display: block;
}
table[style*="border-width: 0px"],
.mce-item-table:not([border]),
.mce-item-table[border="0"],
table[style*="border-width: 0px"] td,
.mce-item-table:not([border]) td,
.mce-item-table[border="0"] td,
table[style*="border-width: 0px"] th,
.mce-item-table:not([border]) th,
.mce-item-table[border="0"] th,
table[style*="border-width: 0px"] caption,
.mce-item-table:not([border]) caption,
.mce-item-table[border="0"] caption {
  border: 1px dashed #bbb;
}
.mce-visualblocks p,
.mce-visualblocks h1,
.mce-visualblocks h2,
.mce-visualblocks h3,
.mce-visualblocks h4,
.mce-visualblocks h5,
.mce-visualblocks h6,
.mce-visualblocks div:not([data-mce-bogus]),
.mce-visualblocks section,
.mce-visualblocks article,
.mce-visualblocks blockquote,
.mce-visualblocks address,
.mce-visualblocks pre,
.mce-visualblocks figure,
.mce-visualblocks figcaption,
.mce-visualblocks hgroup,
.mce-visualblocks aside,
.mce-visualblocks ul,
.mce-visualblocks ol,
.mce-visualblocks dl {
  background-repeat: no-repeat;
  border: 1px dashed #bbb;
  margin-left: 3px;
  padding-top: 10px;
}
.mce-visualblocks p {
  background-image: url(data:image/gif;base64,R0lGODlhCQAJAJEAAAAAAP///7u7u////yH5BAEAAAMALAAAAAAJAAkAAAIQnG+CqCN/mlyvsRUpThG6AgA7);
}
.mce-visualblocks h1 {
  background-image: url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGu1JuxHoAfRNRW3TWXyF2YiRUAOw==);
}
.mce-visualblocks h2 {
  background-image: url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8Hybbx4oOuqgTynJd6bGlWg3DkJzoaUAAAOw==);
}
.mce-visualblocks h3 {
  background-image: url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIZjI8Hybbx4oOuqgTynJf2Ln2NOHpQpmhAAQA7);
}
.mce-visualblocks h4 {
  background-image: url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxInR0zqeAdhtJlXwV1oCll2HaWgAAOw==);
}
.mce-visualblocks h5 {
  background-image: url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjane4iq5GlW05GgIkIZUAAAOw==);
}
.mce-visualblocks h6 {
  background-image: url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjan04jep1iZ1XRlAo5bVgAAOw==);
}
.mce-visualblocks div:not([data-mce-bogus]) {
  background-image: url(data:image/gif;base64,R0lGODlhEgAKAIABALu7u////yH5BAEAAAEALAAAAAASAAoAAAIfjI9poI0cgDywrhuxfbrzDEbQM2Ei5aRjmoySW4pAAQA7);
}
.mce-visualblocks section {
  background-image: url(data:image/gif;base64,R0lGODlhKAAKAIABALu7u////yH5BAEAAAEALAAAAAAoAAoAAAI5jI+pywcNY3sBWHdNrplytD2ellDeSVbp+GmWqaDqDMepc8t17Y4vBsK5hDyJMcI6KkuYU+jpjLoKADs=);
}
.mce-visualblocks article {
  background-image: url(data:image/gif;base64,R0lGODlhKgAKAIABALu7u////yH5BAEAAAEALAAAAAAqAAoAAAI6jI+pywkNY3wG0GBvrsd2tXGYSGnfiF7ikpXemTpOiJScasYoDJJrjsG9gkCJ0ag6KhmaIe3pjDYBBQA7);
}
.mce-visualblocks blockquote {
  background-image: url(data:image/gif;base64,R0lGODlhPgAKAIABALu7u////yH5BAEAAAEALAAAAAA+AAoAAAJPjI+py+0Knpz0xQDyuUhvfoGgIX5iSKZYgq5uNL5q69asZ8s5rrf0yZmpNkJZzFesBTu8TOlDVAabUyatguVhWduud3EyiUk45xhTTgMBBQA7);
}
.mce-visualblocks address {
  background-image: url(data:image/gif;base64,R0lGODlhLQAKAIABALu7u////yH5BAEAAAEALAAAAAAtAAoAAAI/jI+pywwNozSP1gDyyZcjb3UaRpXkWaXmZW4OqKLhBmLs+K263DkJK7OJeifh7FicKD9A1/IpGdKkyFpNmCkAADs=);
}
.mce-visualblocks pre {
  background-image: url(data:image/gif;base64,R0lGODlhFQAKAIABALu7uwAAACH5BAEAAAEALAAAAAAVAAoAAAIjjI+ZoN0cgDwSmnpz1NCueYERhnibZVKLNnbOq8IvKpJtVQAAOw==);
}
.mce-visualblocks figure {
  background-image: url(data:image/gif;base64,R0lGODlhJAAKAIAAALu7u////yH5BAEAAAEALAAAAAAkAAoAAAI0jI+py+2fwAHUSFvD3RlvG4HIp4nX5JFSpnZUJ6LlrM52OE7uSWosBHScgkSZj7dDKnWAAgA7);
}
.mce-visualblocks figcaption {
  border: 1px dashed #bbb;
}
.mce-visualblocks hgroup {
  background-image: url(data:image/gif;base64,R0lGODlhJwAKAIABALu7uwAAACH5BAEAAAEALAAAAAAnAAoAAAI3jI+pywYNI3uB0gpsRtt5fFnfNZaVSYJil4Wo03Hv6Z62uOCgiXH1kZIIJ8NiIxRrAZNMZAtQAAA7);
}
.mce-visualblocks aside {
  background-image: url(data:image/gif;base64,R0lGODlhHgAKAIABAKqqqv///yH5BAEAAAEALAAAAAAeAAoAAAItjI+pG8APjZOTzgtqy7I3f1yehmQcFY4WKZbqByutmW4aHUd6vfcVbgudgpYCADs=);
}
.mce-visualblocks ul {
  background-image: url(data:image/gif;base64,R0lGODlhDQAKAIAAALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGuYnqUVSjvw26DzzXiqIDlVwAAOw==);
}
.mce-visualblocks ol {
  background-image: url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybH6HHt0qourxC6CvzXieHyeWQAAOw==);
}
.mce-visualblocks dl {
  background-image: url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybEOnmOvUoWznTqeuEjNSCqeGRUAOw==);
}
.mce-visualblocks:not([dir=rtl]) p,
.mce-visualblocks:not([dir=rtl]) h1,
.mce-visualblocks:not([dir=rtl]) h2,
.mce-visualblocks:not([dir=rtl]) h3,
.mce-visualblocks:not([dir=rtl]) h4,
.mce-visualblocks:not([dir=rtl]) h5,
.mce-visualblocks:not([dir=rtl]) h6,
.mce-visualblocks:not([dir=rtl]) div:not([data-mce-bogus]),
.mce-visualblocks:not([dir=rtl]) section,
.mce-visualblocks:not([dir=rtl]) article,
.mce-visualblocks:not([dir=rtl]) blockquote,
.mce-visualblocks:not([dir=rtl]) address,
.mce-visualblocks:not([dir=rtl]) pre,
.mce-visualblocks:not([dir=rtl]) figure,
.mce-visualblocks:not([dir=rtl]) figcaption,
.mce-visualblocks:not([dir=rtl]) hgroup,
.mce-visualblocks:not([dir=rtl]) aside,
.mce-visualblocks:not([dir=rtl]) ul,
.mce-visualblocks:not([dir=rtl]) ol,
.mce-visualblocks:not([dir=rtl]) dl {
  margin-left: 3px;
}
.mce-visualblocks[dir=rtl] p,
.mce-visualblocks[dir=rtl] h1,
.mce-visualblocks[dir=rtl] h2,
.mce-visualblocks[dir=rtl] h3,
.mce-visualblocks[dir=rtl] h4,
.mce-visualblocks[dir=rtl] h5,
.mce-visualblocks[dir=rtl] h6,
.mce-visualblocks[dir=rtl] div:not([data-mce-bogus]),
.mce-visualblocks[dir=rtl] section,
.mce-visualblocks[dir=rtl] article,
.mce-visualblocks[dir=rtl] blockquote,
.mce-visualblocks[dir=rtl] address,
.mce-visualblocks[dir=rtl] pre,
.mce-visualblocks[dir=rtl] figure,
.mce-visualblocks[dir=rtl] figcaption,
.mce-visualblocks[dir=rtl] hgroup,
.mce-visualblocks[dir=rtl] aside,
.mce-visualblocks[dir=rtl] ul,
.mce-visualblocks[dir=rtl] ol,
.mce-visualblocks[dir=rtl] dl {
  background-position-x: right;
  margin-right: 3px;
}
.mce-nbsp,
.mce-shy {
  background: #aaa;
}
.mce-shy::after {
  content: '-';
}
body {
  font-family: sans-serif;
}
table {
  border-collapse: collapse;
}
`,p=`body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  line-height: 1.4;
  margin: 1rem;
}
table {
  border-collapse: collapse;
}
/* Apply a default padding if legacy cellpadding attribute is missing */
table:not([cellpadding]) th,
table:not([cellpadding]) td {
  padding: 0.4rem;
}
/* Set default table styles if a table has a positive border attribute
   and no inline css */
table[border]:not([border="0"]):not([style*="border-width"]) th,
table[border]:not([border="0"]):not([style*="border-width"]) td {
  border-width: 1px;
}
/* Set default table styles if a table has a positive border attribute
   and no inline css */
table[border]:not([border="0"]):not([style*="border-style"]) th,
table[border]:not([border="0"]):not([style*="border-style"]) td {
  border-style: solid;
}
/* Set default table styles if a table has a positive border attribute
   and no inline css */
table[border]:not([border="0"]):not([style*="border-color"]) th,
table[border]:not([border="0"]):not([style*="border-color"]) td {
  border-color: #ccc;
}
figure {
  display: table;
  margin: 1rem auto;
}
figure figcaption {
  color: #999;
  display: block;
  margin-top: 0.25rem;
  text-align: center;
}
hr {
  border-color: #ccc;
  border-style: solid;
  border-width: 1px 0 0 0;
}
code {
  background-color: #e8e8e8;
  border-radius: 3px;
  padding: 0.1rem 0.2rem;
}
.mce-content-body:not([dir=rtl]) blockquote {
  border-left: 2px solid #ccc;
  margin-left: 1.5rem;
  padding-left: 1rem;
}
.mce-content-body[dir=rtl] blockquote {
  border-right: 2px solid #ccc;
  margin-right: 1.5rem;
  padding-right: 1rem;
}
`;document.addEventListener(`wfc:discardElement`,function(e){e.target.classList.contains(`tox`)&&e.preventDefault()}),wfc.bind(`.js-tinymce`,{init:async function(e){let t=e.querySelector(`textarea`),n=JSON.parse(e.getAttribute(`data-options`)||`{}`);e._editor=(await d.default.init({target:t,plugins:`advlist code link lists table`,skin:!1,content_css:!1,content_style:f.toString()+`
`+p.toString(),branding:!0,promotion:!1,...n}))[0],e.removeAttribute(`style`)},update:function(e,t){let n=t.querySelector(`textarea`),r=e._editor;return n.innerText&&r.setContent(n.innerText),r.readonly=n.hasAttribute(`disabled`),!0},submit:function(e,t){let n=e.querySelector(`textarea`);t.set(n.name,e._editor.getContent())},destroy:function(e){e._editor.destroy()}})})();